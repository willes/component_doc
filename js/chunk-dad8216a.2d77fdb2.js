(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dad8216a"],{"00eef":function(e,t,i){!function(t,n){e.exports=n(i("b0c0"),i("a9e3"),i("4de4"),i("ac1f"),i("466d"),i("d81d"),i("caad"),i("d3b7"),i("2532"),i("a434"),i("159b"),i("04b3"))}(0,(function(e,t,i,n,a,o,s,l,r,c,u,d){"use strict";function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i,n,a,o,s,l,r,c){"boolean"!=typeof s&&(r=l,l=s,s=!1);const u="function"==typeof i?i.options:i;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),n&&(u._scopeId=n),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(u.functional){const e=u.render;u.render=function(t,i){return d.call(i),e(t,i)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return i}const v=g({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return y({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(i,n){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:i[t.baseReplaceFields.key],key:n},key:n,props:{key:n},on:{click:function(e){e.stopPropagation()}}},i[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}const k={name:"Empty",components:{empty:d.empty,loading:d.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var _=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"empty"},[i("div",{staticClass:"icon"},[e._t("icon",[e.loading?i("loading",{staticClass:"empty-icon"}):i("empty",{staticClass:"empty-icon"})])],2),e._v(" "),i("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};_._withStripped=!0;const V=g({render:_,staticRenderFns:[]},void 0,k,void 0,!1,void 0,!1,void 0,void 0,void 0);V.install=function(e){e.component(V.name,V)};const C={name:"SelectTree",props:{value:{type:[Array,Number,String],default:void 0},multiple:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){return{}}},loadData:{type:Function,default:null}},data:function(){return{treeData:[],spreadData:{}}},computed:{baseReplaceFields:function(){return y({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},treeCheckValue:{get:function(){return"object"===b(this.checkValue)?this.checkValue:[this.checkValue]}}},watch:{options:{handler:function(e){console.log("lst",e),this.setOptions()},deep:!0,immediate:!0}},methods:{setOptions:function(){var e=this;this.spreadData={};var t=function t(i){var n=[];return i.forEach((function(i){e.spreadData[i[e.replaceFields.key]]=i,i.children&&(i.children=t(i.children)),n.push(y(y({},i),{},{scopedSlots:{icon:"radio"}}))})),n};this.treeData.length?this.treeData=t(this.treeData):this.treeData=t(this.options)},selectHandle:function(e,t){console.log(e,t)},getData:function(){var e=this,t=b(this.checkValue),i=[];return console.log(this.spreadData),"object"===t?this.checkValue.forEach((function(t){var n="object"===b(t)?t[e.replaceFields.key]:t;e.spreadData[n]&&i.push(e.spreadData[n])})):this.spreadData[this.checkValue]&&i.push(this.spreadData[this.checkValue]),{checkValue:this.checkValue,data:this.checkValue,rows:this.row||i}},onSelect:function(e,t){this.checkValue=e,this.row=t.checkedNodes.map((function(e){return e.data.props}))}},components:{Empty:V}};var w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mix-modal-select-tree"},[e.options.length?e._e():i("empty"),e._v(" "),e.multiple?[i("a-tree",{attrs:{showIcon:"",checkable:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,multiple:"",loadData:e.loadData},on:{check:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}]),model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}})]:[i("a-radio-group",{model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},[i("a-tree",{attrs:{showIcon:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,loadData:e.loadData,selectable:!1},on:{select:e.selectHandle},scopedSlots:e._u([{key:"radio",fn:function(t){return[i("div",{staticClass:"radio-line"},[i("a-radio",{staticClass:"radio-line",attrs:{value:t[e.baseReplaceFields.key]}})],1)]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(t.name)+"\n        ")]}}],null,!1,3749490323),model:{value:e.treeCheckValue,callback:function(t){e.treeCheckValue=t},expression:"treeCheckValue"}})],1)]],2)};w._withStripped=!0;const R=g({render:w,staticRenderFns:[]},void 0,C,void 0,!1,void 0,!1,void 0,void 0,void 0);var O="/gateway/saas-platform-service/api/v1/",S="/gateway/goodsservice/api/v1/",x="/gateway/customer-service/api/v1/",F="/gateway/logisticsservice/api/v1/",$={province:"".concat(O,"address/province"),city:"".concat(O,"address/city"),district:"".concat(O,"address/district")},D="".concat(x,"order/get_region_list"),j="".concat(x,"order/get_customer_type_list"),A="".concat(S,"setting/query_goods_attr_setting_list"),T="".concat(S,"price_system/leve_price_name/select_list"),I="".concat(S,"/category/get_category_list_with_nocategory_qty"),E="".concat(F,"deliveryMethod/list"),P="".concat(F,"logisticsCorp/system/list"),L="".concat(F,"logisticsCorp/custom/list");const M={name:"MixModal",props:{visible:{type:Boolean,default:!1},name:{type:String,default:"brand",validator:function(e){return-1!==["unit","brand","tag","levelPrice","productCategory","specialCategory","salesArea","classification","delivery","area","logistics","customLogistics"].indexOf(e)}},title:{type:String,default:"请选择"},cache:{type:Boolean,default:!1},beforeClose:{type:Function,default:null},defaultValue:{type:[String,Boolean,Number,Array],default:null},multiple:{type:Boolean,default:!1},extrasOperations:{type:Array,default:function(){return["refresh"]}},rules:{type:Object,default:function(){}}},data:function(){var e=this;return{keywords:"",placeholder:"请输入",options:[],checkValue:[],modelProps:{},testValue:[],loading:!0,modelType:"selectGroup",request:null,replaceFields:{key:"id",name:"name"},getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get($.city,y(y({},t),e.rules)):t.provinceId&&t.cityId?e.$get($.district,y(y({},t),e.rules)):void 0:e.$get($.province,e.rules)}}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t[e.replaceFields["selectGroup"===e.modelType?"name":"title"]].match(e.keywords))return t})):this.options}},watch:{visible:function(e){e&&(this.keywords="",this.options.length&&this.cache||(this.options=[],this.refresh(),this.getList(),this.rules&&this.rules.keywords&&(this.keywords=this.rules.keywords)))},name:function(){this.refresh()}},methods:{refresh:function(){this.options=[],this.setModel(),this.getList()},handleCheckAll:function(){var e=this;this.checkValue=this.options.map((function(t){return t[e.replaceFields.key]}))},setModel:function(){["unit","brand","tag","levelPrice","classification","delivery","logistics"].includes(this.name)?this.modelType="selectGroup":["productCategory","salesArea","area"].includes(this.name)&&(this.modelType="selectTree")},getList:function(){var e=this;if(this.checkValue=this.defaultValue||[],this.loading=!0,["unit","brand","tag"].includes(this.name)){this.checkValue=this.defaultValue||[];var t={type:["unit","brand","tag"].indexOf(this.name)};this.$post(A,y(y({},t),this.rules)).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))}else["levelPrice"].includes(this.name)?(this.checkValue=this.defaultValue||[],this.replaceFields={},this.$post(T,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):["productCategory","specialCategory"].includes(this.name)?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"categoryName"},this.getCateGory(),this.request=this.getCateGory):"salesArea"===this.name?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"name"},this.getCustomerRegionList(),this.request=this.getCustomerRegionList):"classification"===this.name?(this.replaceFields={key:"value",name:"label"},this.$post(j,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):"delivery"===this.name?this.$get(E,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):"area"===this.name?(this.replaceFields={key:"id",title:"name"},this.getRegion().then((function(t){e.options=t.data.map((function(e){return y(y({},e),{},{isLeaf:!1})})),e.request=e.getRegionList})).finally((function(){e.loading=!1}))):"logistics"===this.name?this.$get(P,this.rules).then((function(t){e.options=t.data;var i=e.options.filter((function(e){return e.isCheck})).map((function(e){return e.id}));console.log("isCheckedValue:",i),e.checkValue=i})).finally((function(){e.loading=!1})):"customLogistics"===this.name?this.$get(L,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):(console.error("当前传入名称为：",this.name,"。请确认是否正确！！！"),this.loading=!1)},getCateGory:function(e){var t=this;if(e)return new Promise((function(i){e.dataRef.children?i():t.$get(I,y({categoryType:["productCategory","specialCategory"].indexOf(t.name),parentId:e.dataRef.id},t.rules)).then((function(n){e.dataRef.children=n.data.categoryLists,t.options=h(t.options),i(n.data.categoryLists)}))}));this.$get(I,y({categoryType:["productCategory","specialCategory"].indexOf(this.name),parentId:0},this.rules)).then((function(e){t.loading=!1,t.options=e.data.categoryLists}))},getCustomerRegionList:function(e){var t=this;if(e)return new Promise((function(i){if(e.dataRef.children)i();else{var n=e.dataRef;t.$post(D,y({businessId:n.id||0},t.rules)).then((function(n){e.dataRef.children=n.data,t.options=h(t.options),i(n.data)})).finally((function(){t.loading=!1}))}}));this.$post(D,y({businessId:0},this.rules)).then((function(e){t.options=e.data})).finally((function(){t.loading=!1}))},getRegionList:function(e){var t=this,i=null,n=null;return e.dataRef&&e.$parent.dataRef&&(i=e.dataRef.parentId,n=e.dataRef.id),e.dataRef&&!e.$parent.dataRef&&(i=e.dataRef.id),new Promise((function(a){e.dataRef.children?a():t.getRegion({provinceId:i,cityId:n}).then((function(i){e.dataRef.children=i.data.map((function(e){return y(y({},e),{},{isLeaf:!!n})})),t.options=h(t.options),a(i.data)})).finally((function(){t.loading=!1}))}))},okHandle:function(){var e=this.$refs.contentModel.getData();e.isCheckAll=this.checkValue.length===this.options.length,this.beforeClose?this.beforeClose(e,this.cancelHandle):(this.$emit("confirm",e),this.modalVisible=!1)},cancelHandle:function(){this.modalVisible=!1}},components:{SelectGroup:v,SelectTree:R,Empty:V}};var B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{staticClass:"modal-reset",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:"816px"},on:{cancel:e.cancelHandle,ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[i("div",{staticClass:"mix-modal"},[i("div",{staticClass:"operation-wrap"},[i("div",{staticClass:"operation-left"},[i("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[i("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.extrasOperations.includes("refresh")?i("a-button",{attrs:{type:"link"},on:{click:e.refresh}},[e._v("刷新")]):e._e(),e._v(" "),(e.extrasOperations.includes("checkAll")&&this.multiple&&this.modelType,e._e())],1)]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?i("div",{staticClass:"options-list"},["selectGroup"===e.modelType?i("SelectGroup",{ref:"contentModel",attrs:{multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e(),e._v(" "),"selectTree"===e.modelType?i("SelectTree",{ref:"contentModel",attrs:{"load-data":e.request,multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e()],1):e.filteredOptions.length||e.loading?e._e():i("Empty")],1)])])};B._withStripped=!0;const G=g({render:B,staticRenderFns:[]},void 0,M,void 0,!1,void 0,!1,void 0,void 0,void 0);return G.install=function(e){e.component(G.name,G)},G}))},"329b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("MixModal",{attrs:{visible:e.visible,type:"checkbox",name:"brand",multiple:""},on:{"update:visible":function(t){e.visible=t},confirm:e.confirmHandle}}),i("a-button",{on:{click:function(t){e.visible=!0}}},[e._v("打开")])],1)},a=[],o=i("00eef"),s=i.n(o),l={name:"MixModalDemo",components:{MixModal:s.a},data:function(){return{visible:!1}},methods:{confirmHandle:function(e,t){console.log(e,t)}}},r=l,c=i("2877"),u=Object(c["a"])(r,n,a,!1,null,null,null);t["default"]=u.exports},b0c0:function(e,t,i){var n=i("83ab"),a=i("5e77").EXISTS,o=i("e330"),s=i("9bf2").f,l=Function.prototype,r=o(l.toString),c=/^\s*function ([^ (]*)/,u=o(c.exec),d="name";n&&!a&&s(l,d,{configurable:!0,get:function(){try{return u(c,r(this))[1]}catch(e){return""}}})},d81d:function(e,t,i){"use strict";var n=i("23e7"),a=i("b727").map,o=i("1dde"),s=o("map");n({target:"Array",proto:!0,forced:!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-dad8216a.2d77fdb2.js.map