{"version":3,"sources":["webpack:///./src/views/table/columnSmile.vue?aaeb","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:///./src/components/DraggableTable/src/main.vue","webpack:///src/components/DraggableTable/src/main.vue","webpack:///./src/components/DraggableTable/src/main.vue?0a24","webpack:///src/views/table/columnSmile.vue","webpack:///./src/views/table/columnSmile.vue?529d","webpack:///./src/views/table/columnSmile.vue","webpack:///./src/components/DraggableTable/src/main.vue?5bf1"],"names":["_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","key","data","columns","on","handleDraggable","scopedSlots","_u","fn","text","_v","_s","tags","_l","tag","length","toUpperCase","record","staticClass","slot","staticRenderFns","_objectWithoutPropertiesLoose","source","excluded","i","target","sourceKeys","Object","keys","indexOf","_objectWithoutProperties","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","components","VueDraggableResizable","props","mixins","type","Boolean","default","isDraggable","isWidth","replaceFields","dataIndex","sourceObj","overObj","targetObj","originalIndex","resizeableTitle","draggingState","repFields","draggable","mounted","filter","init","methods","forEach","draggingMap","col","rowClass","customRow","options","style","styles","click","dbclick","contextmenu","mouseover","ev","event","window","dragstart","stopPropagation","dragover","preventDefault","drop","overReset","dataSource","$children","getLocalData","index","baseIndex","optIndex","splice","$emit","status","result","resetColumns","$attrs","render","header","cell","k","width","minWidth","h","maxWidth","x","Math","max","createElement","class","ref","w","z","axis","resizable","dragging","onDrag","dragstop","onDragstop","mouseenter","mouseout","$that","customDrag","rowClassName","component","DraggableTable","created","console","log"],"mappings":"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","file":"js/chunk-30568f31.0df5b2ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('draggable-table',{directives:[{name:\"draggable\",rawName:\"v-draggable\",value:(2),expression:\"2\"}],attrs:{\"replaceFields\":{key: 'key'},\"data-source\":_vm.data,\"columns\":_vm.columns},on:{\"draggable\":_vm.handleDraggable},scopedSlots:_vm._u([{key:\"name\",fn:function(text){return _c('a',{},[_vm._v(_vm._s(text))])}},{key:\"tags\",fn:function(tags){return _c('span',{},_vm._l((tags),function(tag){return _c('a-tag',{key:tag,attrs:{\"color\":tag === 'loser' ? 'volcano' : tag.length > 5 ? 'geekblue' : 'green'}},[_vm._v(\" \"+_vm._s(tag.toUpperCase())+\" \")])}),1)}},{key:\"action\",fn:function(text, record){return _c('span',{},[_c('a',[_vm._v(\"Invite 一 \"+_vm._s(record.name))]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',[_vm._v(\"Delete\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{staticClass:\"ant-dropdown-link\"},[_vm._v(\" More actions \"),_c('a-icon',{attrs:{\"type\":\"down\"}})],1)],1)}}])},[_c('span',{attrs:{\"slot\":\"customTitle\"},slot:\"customTitle\"},[_c('a-icon',{attrs:{\"type\":\"smile-o\"}}),_vm._v(\" Name\")],1)]),_c('a-table',{attrs:{\"replaceFields\":{key: 'key'},\"data-source\":_vm.data,\"columns\":_vm.columns},on:{\"draggable\":_vm.handleDraggable},scopedSlots:_vm._u([{key:\"name\",fn:function(text){return _c('a',{},[_vm._v(_vm._s(text))])}},{key:\"tags\",fn:function(tags){return _c('span',{},_vm._l((tags),function(tag){return _c('a-tag',{key:tag,attrs:{\"color\":tag === 'loser' ? 'volcano' : tag.length > 5 ? 'geekblue' : 'green'}},[_vm._v(\" \"+_vm._s(tag.toUpperCase())+\" \")])}),1)}},{key:\"action\",fn:function(text, record){return _c('span',{},[_c('a',[_vm._v(\"Invite 一 \"+_vm._s(record.name))]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',[_vm._v(\"Delete\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{staticClass:\"ant-dropdown-link\"},[_vm._v(\" More actions \"),_c('a-icon',{attrs:{\"type\":\"down\"}})],1)],1)}}])},[_c('span',{attrs:{\"slot\":\"customTitle\"},slot:\"customTitle\"},[_c('a-icon',{attrs:{\"type\":\"smile-o\"}}),_vm._v(\" Name\")],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","var render, staticRenderFns\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport VueDraggableResizable from 'vue-draggable-resizable'\r\nexport default {\r\n  name: 'DraggableTable',\r\n  components: {\r\n    // eslint-disable-next-line\r\n    VueDraggableResizable\r\n  },\r\n  props: {\r\n    mixins: { // 混合使用，排序和拖拽, 功能未实现\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isDraggable: { // 拖拽排序\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    isWidth: { // 头部宽度\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    replaceFields: { // 重构字段\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          key: 'businessId',\r\n          dataIndex: 'dataIndex'\r\n        }\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      sourceObj: null, // 拖动的目标\r\n      overObj: null, // 经过的元素\r\n      targetObj: null, // 移动到的位置\r\n      originalIndex: -1, // 缓存初始拖拽的索引值，如果为 -1 表示没有开始拖拽\r\n      resizeableTitle: null,\r\n      draggingState: {},\r\n      columns: null,\r\n      repFields: {\r\n        key: 'businessId',\r\n        dataIndex: 'dataIndex'\r\n      },\r\n      draggable: false // 是否可以拖拽\r\n    }\r\n  },\r\n  mounted() {\r\n    this.repFields = {\r\n      ...this.repFields,\r\n      ...this.replaceFields\r\n    }\r\n    this.draggable = this.columns.filter(item => item.scopedSlots && item.scopedSlots.customRender === 'customDrag').length ? false : this.isDraggable\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { columns } = this.$attrs\r\n      const draggingMap = {}\r\n      columns.forEach(col => {\r\n        draggingMap[col[this.repFields.dataIndex]] = col.width\r\n      })\r\n      this.draggingState = draggingMap\r\n    },\r\n    // 行样式\r\n    rowClass(record, index) {\r\n      if (this.sourceObj) {\r\n        return this.sourceObj[this.repFields.key] === record[this.repFields.key] ? 'target-line' : 'target-process'\r\n      }\r\n      return ''\r\n    },\r\n    customRow(record, index) {\r\n      const {on, style, ...options} = this.$attrs.customRow ? this.$attrs.customRow() : {}\r\n      const styles = {\r\n        ...{cursor: this.draggable ? 'pointer' : 'default' }, ...style}\r\n\r\n      return {\r\n        options,\r\n        style: styles,\r\n        on: {\r\n          // 鼠标移入\r\n          click: (event) => {\r\n            this.$emit('row-click', {record, index})\r\n          },\r\n          dbclick: (event) => {\r\n            this.$emit('row-dbClick', {record, index})\r\n          },\r\n          contextmenu: (event) => {\r\n            this.$emit('row-contextmenu', {record, index})\r\n          },\r\n          mouseover: (event) => {\r\n            // 兼容IE\r\n            var ev = event || window.event\r\n            ev.target.draggable = this.draggable\r\n          },\r\n          // 开始拖拽\r\n          dragstart: (event) => {\r\n            // 兼容IE\r\n            var ev = event || window.event\r\n            ev.stopPropagation()\r\n            if (!this.draggable) return\r\n            // 告知上级，拖拽开始，关闭排序\r\n            this.$emit('draggableStart')\r\n            // 阻止冒泡\r\n            // 得到源目标数据\r\n            this.sourceObj = record\r\n          },\r\n          // 拖动元素经过的元素\r\n          dragover: (event) => {\r\n            // 兼容 IE\r\n            var ev = event || window.event\r\n            // 阻止默认行为\r\n            ev.preventDefault()\r\n            if (!this.draggable) return\r\n            if (!this.overObj) {\r\n              this.overObj = record\r\n            } else {\r\n              if (this.overObj[this.repFields.key] !== record[this.repFields.key]) {\r\n                this.overObj = record\r\n                this.overReset(record)\r\n              }\r\n            }\r\n          },\r\n          // 鼠标松开\r\n          drop: (event) => {\r\n            // 兼容IE\r\n            var ev = event || window.event\r\n            // 阻止冒泡\r\n            ev.stopPropagation()\r\n            if (!this.draggable) return\r\n            // 得到目标数据\r\n            this.targetObj = record\r\n            this.overReset(record, 'finish')\r\n            this.result()\r\n          }\r\n        }\r\n      }\r\n    },\r\n    overReset(record, status) {\r\n      // 获得数据索引位置\r\n      // const dataSource = this.$attrs['data-source'] || this.$attrs['dataSource']\r\n      this.dataSource = this.$children[0].$children[0].getLocalData()\r\n      // 获得拖拽对应索引\r\n      const countIndex = () => {\r\n        let index\r\n        let baseIndex\r\n        for (let i = 0; i < this.dataSource.length; i++) {\r\n          if (this.dataSource[i][this.repFields.key] === record[this.repFields.key]) {\r\n            index = i\r\n          }\r\n          if (this.dataSource[i][this.repFields.key] === this.sourceObj[this.repFields.key]) {\r\n            baseIndex = i\r\n          }\r\n        }\r\n        return {\r\n          index,\r\n          baseIndex\r\n        }\r\n      }\r\n      const optIndex = countIndex()\r\n      if (optIndex.index === optIndex.baseIndex) {\r\n        if (status === 'finish') {\r\n          this.$emit('draggable', {\r\n            data: this.dataSource,\r\n            source: this.sourceObj,\r\n            ...optIndex,\r\n            originalIndex: this.originalIndex\r\n          }, 'finish')\r\n        }\r\n        return\r\n      }\r\n      // 缓存拖拽的初始索引\r\n      if (this.originalIndex === -1) {\r\n        this.originalIndex = optIndex.baseIndex\r\n      }\r\n      const splice = this.dataSource.splice(optIndex.baseIndex, 1)[0]\r\n      this.dataSource.splice(optIndex.index, 0, splice)\r\n      this.$emit('draggable', {\r\n        data: this.dataSource,\r\n        source: this.sourceObj,\r\n        ...optIndex,\r\n        originalIndex: this.originalIndex\r\n      }, 'dragover')\r\n    },\r\n    result() {\r\n      this.originalIndex = -1\r\n      this.sourceObj = null\r\n      this.targetObj = null\r\n    },\r\n    resetColumns() {\r\n      // 重置表头数据\r\n      this.columns = this.$attrs['columns']\r\n    }\r\n  },\r\n  render(h, context) {\r\n    const createElement = this.$createElement\r\n    if (!this.columns) {\r\n      this.columns = this.$attrs['columns']\r\n    }\r\n    const components = {\r\n      header: {\r\n        cell: (h, props, children) => {\r\n          // 如果当前域下没有 columns 则赋值，防止当页面数据从外部刷新的时候导致宽度被还原\r\n          if (!this.columns) {\r\n            this.columns = this.$attrs['columns']\r\n          }\r\n          // 如果没有宽度但是有设置最小宽度\r\n          let thDom = null // 拖拽宽度的值\r\n          const { key, on, ...restProps } = props\r\n          // 获得当前操作的列表头的数据\r\n          let col = this.columns.find(col => {\r\n            const k = col[this.repFields.dataIndex]\r\n            return k === key\r\n          })\r\n          if (col && !col.width && col.minWidth) {\r\n            col.width = col.minWidth\r\n          }\r\n          const title = col && col.slots && col.slots.title\r\n          // 如果没有设置宽度，则直接返回表头\r\n          if (!col || !col.width  || !this.isWidth) {\r\n            return h('th', {\r\n              ...props,\r\n              ...restProps\r\n            }, this.$slots[title] || children)\r\n          }\r\n          // 拖拽中……\r\n          const onDrag = x => {\r\n            // 验证最大宽度和最小宽度\r\n            if (col.minWidth || col.maxWidth) {\r\n              if ((col.minWidth && !col.maxWidth) || (!col.minWidth && col.maxWidth)) {\r\n                if (col.minWidth && col.minWidth > x - 3) return\r\n                if (col.maxWidth && col.maxWidth < x + 3) return\r\n              }\r\n            }\r\n            this.draggingState[key] = 0\r\n            col.width = Math.max(x, 1)\r\n            this.$forceUpdate()\r\n          }\r\n\r\n          // 拖拽结束\r\n          const onDragstop = () => {\r\n            this.draggingState[key] = thDom.getBoundingClientRect().width\r\n            this.$refs.tableDraggableHandle.left = thDom.getBoundingClientRect().width\r\n          }\r\n\r\n          return createElement('th', {\r\n            ...props,\r\n            ...restProps,\r\n            class: `${props.class} resize-table-th`,\r\n            key,\r\n            directives: [\r\n              {\r\n                name: 'ant-ref',\r\n                value: r => thDom = r\r\n              }\r\n            ],\r\n            slot: 'customTitle',\r\n            attrs: {\r\n              width: col.width,\r\n            },\r\n            on: {\r\n              click: ev => ev.stopPropagation()\r\n            },\r\n          }, [this.$slots[title] || children, createElement(VueDraggableResizable, {\r\n            class: 'table-draggable-handle',\r\n            ref: 'tableDraggableHandle',\r\n            props: {\r\n              key: col.key,\r\n              w: 10,\r\n              x: this.draggingState[key] || col.width,\r\n              z: 1,\r\n              axis: 'x',\r\n              draggable: true,\r\n              resizable: false\r\n            },\r\n            on: {\r\n              dragging: onDrag,\r\n              dragstop: onDragstop,\r\n              click: ev => ev.stopPropagation()\r\n            }\r\n          })])\r\n        }\r\n      }\r\n    }\r\n    const dragIcon = () => {\r\n      return this.$scopedSlots.customDrag ? this.$scopedSlots.customDrag() : h('div', {\r\n        attrs: {\r\n          style: 'display: inline-block;'\r\n        }\r\n      }, [h('a-icon', {\r\n        props: {\r\n          type: 'drag'\r\n        }\r\n      })])\r\n    }\r\n    const customDrag = () => {\r\n      return createElement('div', {\r\n        class: 'drag-icon',\r\n        slot: 'customDrag',\r\n        on: {\r\n          mouseover: () => {\r\n            this.draggable = true\r\n          },\r\n          mouseenter: () => {\r\n            this.draggable = true\r\n          },\r\n          mouseout: () => {\r\n            this.draggable = false\r\n          }\r\n        }\r\n      }, [dragIcon()])\r\n    }\r\n    window.$that = this\r\n    return createElement('a-table', {\r\n      class: `table-draggable ${this.draggable ? 'table-draggable-ing' : ''}`,\r\n      scopedSlots: {\r\n        ...this.$scopedSlots,\r\n        customDrag: customDrag\r\n      },\r\n      attrs: {\r\n        ...this.$attrs,\r\n      },\r\n      slot: {\r\n        ...this.$slots\r\n      },\r\n      props: {\r\n        ref: 'table-draggable',\r\n        ...this.$props,\r\n        columns: this.columns,\r\n        components,\r\n        rowClassName: this.rowClass,\r\n        customRow: this.customRow\r\n      },\r\n      on: {\r\n        ...this.$listeners\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.table-draggable{\r\n  &.table-draggable-ing{\r\n    user-select: none;\r\n  }\r\n  .target-line{\r\n    background:#e6f7ff;\r\n  }\r\n  .target-process:hover:not(.ant-table-expanded-row):not(.ant-table-row-selected) > td{\r\n    background:#e6f7ff !important;\r\n  }\r\n  .resize-table-th {\r\n    position: relative;\r\n    .table-draggable-handle {\r\n      position: absolute;\r\n      height: 100% !important;\r\n      bottom: 0;\r\n      left: -5px;\r\n      cursor: col-resize;\r\n      touch-action: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","<template>\r\n  <div>\r\n    <draggable-table v-draggable=\"2\" :replaceFields=\"{key: 'key'}\" @draggable=\"handleDraggable\" :data-source=\"data\" :columns=\"columns\">\r\n      <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\r\n      <span slot=\"customTitle\"><a-icon type=\"smile-o\" /> Name</span>\r\n      <span slot=\"tags\" slot-scope=\"tags\">\r\n      <a-tag\r\n          v-for=\"tag in tags\"\r\n          :key=\"tag\"\r\n          :color=\"tag === 'loser' ? 'volcano' : tag.length > 5 ? 'geekblue' : 'green'\"\r\n      >\r\n        {{ tag.toUpperCase() }}\r\n      </a-tag>\r\n    </span>\r\n      <span slot=\"action\" slot-scope=\"text, record\">\r\n      <a>Invite 一 {{ record.name }}</a>\r\n      <a-divider type=\"vertical\" />\r\n      <a>Delete</a>\r\n      <a-divider type=\"vertical\" />\r\n      <a class=\"ant-dropdown-link\"> More actions <a-icon type=\"down\" /> </a>\r\n    </span>\r\n    </draggable-table>\r\n    <a-table :replaceFields=\"{key: 'key'}\" @draggable=\"handleDraggable\" :data-source=\"data\" :columns=\"columns\">\r\n      <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\r\n      <span slot=\"customTitle\"><a-icon type=\"smile-o\" /> Name</span>\r\n      <span slot=\"tags\" slot-scope=\"tags\">\r\n      <a-tag\r\n          v-for=\"tag in tags\"\r\n          :key=\"tag\"\r\n          :color=\"tag === 'loser' ? 'volcano' : tag.length > 5 ? 'geekblue' : 'green'\"\r\n      >\r\n        {{ tag.toUpperCase() }}\r\n      </a-tag>\r\n    </span>\r\n      <span slot=\"action\" slot-scope=\"text, record\">\r\n      <a>Invite 一 {{ record.name }}</a>\r\n      <a-divider type=\"vertical\" />\r\n      <a>Delete</a>\r\n      <a-divider type=\"vertical\" />\r\n      <a class=\"ant-dropdown-link\"> More actions <a-icon type=\"down\" /> </a>\r\n    </span>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DraggableTable from '@/components/DraggableTable/src/main.vue'\r\n\r\nconst columns = [\r\n  {\r\n    dataIndex: 'name',\r\n    key: 'name',\r\n    slots: { title: 'customTitle' },\r\n    scopedSlots: { customRender: 'name' },\r\n  },\r\n  {\r\n    title: 'Age',\r\n    dataIndex: 'age',\r\n    key: 'age',\r\n    width: 100\r\n  },\r\n  {\r\n    title: 'Address',\r\n    dataIndex: 'address',\r\n    key: 'address',\r\n  },\r\n  {\r\n    title: 'Tags',\r\n    key: 'tags',\r\n    dataIndex: 'tags',\r\n    scopedSlots: { customRender: 'tags' },\r\n  },\r\n  {\r\n    title: 'Action',\r\n    key: 'action',\r\n    scopedSlots: { customRender: 'action' },\r\n  },\r\n];\r\n\r\nconst data = [\r\n  {\r\n    key: '1',\r\n    name: 'John Brown',\r\n    age: 32,\r\n    address: 'New York No. 1 Lake Park',\r\n    tags: ['nice', 'developer'],\r\n  },\r\n  {\r\n    key: '2',\r\n    name: 'Jim Green',\r\n    age: 42,\r\n    address: 'London No. 1 Lake Park',\r\n    tags: ['loser'],\r\n  },\r\n  {\r\n    key: '3',\r\n    name: 'Joe Black',\r\n    age: 32,\r\n    address: 'Sidney No. 1 Lake Park',\r\n    tags: ['cool', 'teacher'],\r\n  },\r\n];\r\n\r\nexport default {\r\n  name: 'ColumnSmile',\r\n  components: {\r\n    DraggableTable\r\n  },\r\n  data () {\r\n    return {\r\n      data,\r\n      columns,\r\n    }\r\n  },\r\n  created() {\r\n    console.log(this)\r\n  },\r\n  methods: {\r\n    handleDraggable(result, status) {\r\n      console.log(result, status)\r\n      this.data = result.data\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./columnSmile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./columnSmile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./columnSmile.vue?vue&type=template&id=65cfc3c0&\"\nimport script from \"./columnSmile.vue?vue&type=script&lang=js&\"\nexport * from \"./columnSmile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}