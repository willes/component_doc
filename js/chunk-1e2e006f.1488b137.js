(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2e006f","chunk-0b9f2357","chunk-79ce2be3"],{"0069":function(e,t,n){!function(t,a){e.exports=a(n("d81d"),n("159b"),n("b0c0"),n("d3b7"),n("25f0"),n("a9e3"),n("99af"))}(0,(function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function n(n){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function a(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),r=function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.__PARENTSAPPJSONP__&&window.__POWERED_BY_QIANKUN__?window.__PARENTSAPPJSONP__(n,(function(e){t=e})):window.TMAPCALLBACK[n]=function(e){t=e},document.body.appendChild(a);var i=function(){document.body.removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},s={"北京市":{city:"北京市",short:"京",lng:"116.39737",lat:"39.939502"},"天津市":{city:"天津市",short:"津",lng:"117.133262",lat:"39.256321"},"上海市":{city:"上海市",short:"沪",lng:"121.36464",lat:"31.303465"},"重庆市":{city:"重庆市",short:"渝",lng:"106.32485",lat:"29.895013"},"河北省":{city:"石家庄",short:"冀",lng:"114.336873",lat:"38.21885"},"山西省":{city:"太原",short:"晋",lng:"112.349964",lat:"38.044464"},"辽宁省":{city:"沈阳",short:"辽",lng:"123.241164",lat:"41.948112"},"吉林省":{city:"长春",short:"吉",lng:"125.228072",lat:"43.894927"},"黑龙江省":{city:"哈尔滨",short:"黑",lng:"126.479088",lat:"45.985284"},"江苏省":{city:"南京",short:"苏",lng:"118.715429",lat:"32.246466"},"浙江省":{city:"杭州",short:"浙",lng:"120.040035",lat:"30.350837"},"安徽省":{city:"合肥",short:"皖",lng:"117.170056",lat:"31.99595"},"福建省":{city:"福州",short:"闽",lng:"119.156964",lat:"26.182279"},"江西省":{city:"南昌",short:"赣",lng:"115.808656",lat:"28.774611"},"山东省":{city:"济南",short:"鲁",lng:"116.912494",lat:"36.812038"},"河南省":{city:"郑州",short:"豫",lng:"113.453802",lat:"34.895028"},"湖北省":{city:"武汉",short:"鄂",lng:"114.116105",lat:"30.764814"},"湖南省":{city:"长沙",short:"湘",lng:"112.800698",lat:"28.474291"},"广东省":{city:"广州",short:"粤",lng:"113.233035",lat:"23.224606"},"海南省":{city:"海口",short:"琼",lng:"110.179083",lat:"19.921006"},"四川省":{city:"成都",short:"川",lng:"103.924003",lat:"30.796585"},"贵州省":{city:"贵阳",short:"黔",lng:"106.499624",lat:"26.844365"},"云南省":{city:"昆明",short:"滇",lng:"102.599397",lat:"25.248948"},"陕西省":{city:"西安",short:"陕",lng:"108.780889",lat:"34.408508"},"甘肃省":{city:"兰州",short:"甘",lng:"103.66644",lat:"36.218003"},"青海省":{city:"西宁",short:"青",lng:"101.605943",lat:"36.752842"},"西藏自治区":{city:"拉萨",short:"藏",lng:"90.972306",lat:"29.838888"},"广西壮族自治区":{city:"南宁",short:"桂",lng:"108.265765",lat:"23.020403"},"内蒙古自治区":{city:"呼和浩特",short:"蒙",lng:"111.614073",lat:"40.951504"},"宁夏回族自治区":{city:"银川",short:"宁",lng:"106.094884",lat:"38.624116"},"新疆维吾尔自治区":{city:"乌鲁木齐",short:"新",lng:"87.476819",lat:"43.894927"},"香港特别行政区":{city:"香港",short:"港",lng:"114.1529",lat:"22.542716"},"澳门地区":{city:"澳门",short:"澳",lng:"113.417008",lat:"22.337477"},"台湾省":{city:"台北",short:"台.",lng:"121.36464",lat:"25.248948"}},l="https://apis.map.qq.com",c={geocoder:"".concat(l,"/ws/geocoder/v1"),placeSearch:"".concat(l,"/ws/place/v1/search"),placeExplore:"".concat(l,"/ws/place/v1/explore"),placeDetail:"".concat(l,"/ws/place/v1/detail"),placeSuggestion:"".concat(l,"/ws/place/v1/suggestion"),district:"".concat(l,"/ws/district/v1"),directionDriving:"".concat(l,"/ws/direction/v1/driving"),directionTransit:"".concat(l,"/ws/direction/v1/transit"),directionWalking:"".concat(l,"/ws/direction/v1/walking"),directionBicycling:"".concat(l,"/ws/direction/v1/bicycling"),distanceMatrix:"".concat(l,"/ws/distance/v1/matrix"),locationIP:"".concat(l,"/ws/location/v1/ip"),staticmap:"".concat(l,"/ws/staticmap/v2"),coordTranslate:"".concat(l,"/ws/coord/v1/translate")},u=function(e){var t="";if(e)for(var n in e)e.hasOwnProperty(n)&&(t+="".concat(t?"".concat(t,"&"):"").concat(n,"=").concat(e[n]));return t},d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.mapOptions={key:"T74BZ-KJV6U-EVEVH-B2ZLQ-YIZQF-3PFPB",container:"map",center:{lat:39.908802,lng:116.397502},zoom:16,location:!1,showMarker:!1,success:null,fail:null},this.varia={queue:[],mapStatus:!1,centerMarker:null,on:{tilesloaded:null}},this._init(t)}var t,l,d,h,f;return t=e,l=[{key:"_init",value:function(e){this._initConfig(e),e&&e.container&&(this._initMap(),this._afterInit())}},{key:"_initConfig",value:function(e){this.mapOptions=this.merge(this.mapOptions,e)}},{key:"_initMap",value:(h=o.mark((function e(){var t=this;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=this.mapOptions.key,r("https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=TMapLoad"));case 2:this.mapOptions.center=this.latLng(this.mapOptions.center),this.map=new TMap.Map(this.mapOptions.container,this.mapOptions),this.map.once("tilesloaded",(function(){t.varia.mapStatus=!0,t.runQueue(),t.mapOptions.success&&t.mapOptions.success()}));case 5:case"end":return e.stop()}var n}),e,this)})),f=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=h.apply(e,t);function r(e){a(o,n,i,r,s,"next",e)}function s(e){a(o,n,i,r,s,"throw",e)}r(void 0)}))},function(){return f.apply(this,arguments)})},{key:"_afterInit",value:function(){this.mapOptions.location&&this.location(),this.mapOptions.showMarker&&this.setMarker(this.mapOptions.center)}},{key:"run",value:function(e,t){this.varia.mapStatus?this[e](t):this.varia.queue.push({name:e,options:t})}},{key:"on",value:function(e,t){console.log(e,t)}},{key:"runQueue",value:function(){var e=this;this.varia.queue.forEach((function(t){e[t.name](t.options)})),this.varia.queue=[]}},{key:"request",value:function(e,t){var n,a,i=(n=this.mapOptions,a="key=".concat(n.key,"&output=jsonp"),{parseLocation:function(e){return r("https://apis.map.qq.com/ws/geocoder/v1/?".concat(u(e),"&").concat(a))},placeSearch:function(e){return r("".concat(c.placeSearch,"?").concat(u(e),"&").concat(a))},placeExplore:function(e){return r("".concat(c.placeExplore,"?").concat(u(e),"&").concat(a))},placeDetail:function(e){return r("".concat(c.placeDetail,"?").concat(u(e),"&").concat(a))},suggestion:function(e){return r("".concat(c.placeSuggestion,"?").concat(u(e),"&").concat(a))},geocoder:function(e){var t=e.address;return t&&s[t]&&(e.address="".concat(t).concat(s[t].city)),r("".concat(c.geocoder,"?").concat(u(e),"&").concat(a))},directionDriving:function(e){return r("".concat(c.directionDriving,"?").concat(u(e),"&").concat(a))},directionWalking:function(e){return r("".concat(c.directionWalking,"?").concat(u(e),"&").concat(a))},directionBicycling:function(e){return r("".concat(c.directionBicycling,"?").concat(u(e),"&").concat(a))},directionTransit:function(e){return r("".concat(c.directionTransit,"?").concat(u(e),"&").concat(a))},distanceMatrix:function(e){return r("".concat(c.distanceMatrix,"?").concat(u(e),"&").concat(a))},district:function(e){return r("".concat(c.district,"?").concat(u(e),"&").concat(a))},coordTranslate:function(e){return r("".concat(c.coordTranslate,"?").concat(u(e),"&").concat(a))},locationIP:function(e){return r("".concat(c.locationIP,"?").concat(u(e),"&").concat(a))}});if(!i[e])throw Error("错误警告: ".concat(e," 不是一个正确的地图请求方法，请使用正确的方法。"));return i[e](t)}},{key:"merge",value:function(e,t){for(var n in t)e[n]=e[n]&&"[object Object]"===e[n].toString()?this.merge(e[n],t[n]):e[n]=t[n];return e}},{key:"destory",value:function(){this.map.destroy()}},{key:"random",value:function(){return Math.floor(1234567890*Math.random())}},{key:"latLng",value:function(e){var t=e.lng,n=e.lat;return new TMap.LatLng(n,t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){console.log(e,"设置地图中心点"),this.map.setCenter(this.latLng(e))}},{key:"setRotation",value:function(e){this.map.setRotation(e)}},{key:"setPitch",value:function(e){this.map.setPitch(e)}},{key:"setScale",value:function(e){this.map.setScale(e)}},{key:"setMode",value:function(e){"2D"===e?this.map.setViewMode("2D"):"3D"===e&&(this.map.setViewMode("3D"),this.map.setPitch(70))}},{key:"setMarker",value:function(e,t){var a=this;console.log("setMarker-point-内部函数",e),console.log("setMarker-styles-内部函数",t),this.removeMarker(),console.log("marker-layer-".concat(Math.floor(1e4*Math.random())),"IDDDDD"),console.log(this,"this"),this.varia.centerMarker=new TMap.MultiMarker({id:"marker-layer-".concat(Math.floor(1e4*Math.random())),map:this.map,styles:n({marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},t),geometries:function(e){var t=a;if("[object Object]"===Object.prototype.toString.call(e))return e.lat=Number(e.lat),e.lng=Number(e.lng),[{id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}}];var n=[];return e.forEach((function(e){n.push({id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}})})),n}(e)})}},{key:"setMarkerCrm",value:function(e){this.varia.centerMarker=new TMap.MultiMarker({id:"marker_".concat(this.random()),map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},geometries:[{id:"markergeo_".concat(this.random()),styleId:"marker_".concat(this.random()),position:new TMap.LatLng(e.lat,e.lng),properties:{title:"marker"}}]})}},{key:"removeMarker",value:function(){console.log("移除marker事件"),console.log(this.varia.centerMarker),this.varia.centerMarker&&(this.varia.centerMarker.setMap(null),this.varia.centerMarker=null)}},{key:"removeCluster",value:function(){}},{key:"setCircle",value:function(e){return new TMap.MultiCircle({id:"circle",map:this.map,geometries:[{center:this.latLng(e),radius:1e3}]})}},{key:"setMarkerCluster",value:function(e){var t=this;return console.log("setMarkerCluster"),this.varia.markerCluster=new TMap.MarkerCluster({id:"marker_".concat(this.random()),map:this.map,enableDefaultStyle:!1,minimumClusterSize:2,geometries:function(e){var n=t;if("[object Object]"===Object.prototype.toString.call(e))return[{position:n.latLng(e)}];var a=[];return e.forEach((function(e){a.push({position:n.latLng(e)})})),a}(e),zoomOnClick:!0,gridSize:60,averageCenter:!1,maxZoom:10}),this.varia.markerCluster}}],l&&i(t.prototype,l),d&&i(t,d),e}();return function(e){return new d(e)}}))},"00eef":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("4de4"),n("ac1f"),n("466d"),n("d81d"),n("caad"),n("d3b7"),n("2532"),n("a434"),n("159b"),n("04b3"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d){"use strict";function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const y=v({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return g({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}const w={name:"Empty",components:{empty:d.empty,loading:d.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};k._withStripped=!0;const C=v({render:k,staticRenderFns:[]},void 0,w,void 0,!1,void 0,!1,void 0,void 0,void 0);C.install=function(e){e.component(C.name,C)};const _={name:"SelectTree",props:{value:{type:[Array,Number,String],default:void 0},multiple:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){return{}}},loadData:{type:Function,default:null}},data:function(){return{treeData:[],spreadData:{}}},computed:{baseReplaceFields:function(){return g({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},treeCheckValue:{get:function(){return"object"===b(this.checkValue)?this.checkValue:[this.checkValue]}}},watch:{options:{handler:function(e){console.log("lst",e),this.setOptions()},deep:!0,immediate:!0}},methods:{setOptions:function(){var e=this;this.spreadData={};var t=function t(n){var a=[];return n.forEach((function(n){e.spreadData[n[e.replaceFields.key]]=n,n.children&&(n.children=t(n.children)),a.push(g(g({},n),{},{scopedSlots:{icon:"radio"}}))})),a};this.treeData.length?this.treeData=t(this.treeData):this.treeData=t(this.options)},selectHandle:function(e,t){console.log(e,t)},getData:function(){var e=this,t=b(this.checkValue),n=[];return console.log(this.spreadData),"object"===t?this.checkValue.forEach((function(t){var a="object"===b(t)?t[e.replaceFields.key]:t;e.spreadData[a]&&n.push(e.spreadData[a])})):this.spreadData[this.checkValue]&&n.push(this.spreadData[this.checkValue]),{checkValue:this.checkValue,data:this.checkValue,rows:this.row||n}},onSelect:function(e,t){this.checkValue=e,this.row=t.checkedNodes.map((function(e){return e.data.props}))}},components:{Empty:C}};var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mix-modal-select-tree"},[e.options.length?e._e():n("empty"),e._v(" "),e.multiple?[n("a-tree",{attrs:{showIcon:"",checkable:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,multiple:"",loadData:e.loadData},on:{check:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}]),model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}})]:[n("a-radio-group",{model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},[n("a-tree",{attrs:{showIcon:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,loadData:e.loadData,selectable:!1},on:{select:e.selectHandle},scopedSlots:e._u([{key:"radio",fn:function(t){return[n("div",{staticClass:"radio-line"},[n("a-radio",{staticClass:"radio-line",attrs:{value:t[e.baseReplaceFields.key]}})],1)]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(t.name)+"\n        ")]}}],null,!1,3749490323),model:{value:e.treeCheckValue,callback:function(t){e.treeCheckValue=t},expression:"treeCheckValue"}})],1)]],2)};S._withStripped=!0;const x=v({render:S,staticRenderFns:[]},void 0,_,void 0,!1,void 0,!1,void 0,void 0,void 0);var R="/gateway/saas-platform-service/api/v1/",O="/gateway/goodsservice/api/v1/",D="/gateway/customer-service/api/v1/",L="/gateway/logisticsservice/api/v1/",T={province:"".concat(R,"address/province"),city:"".concat(R,"address/city"),district:"".concat(R,"address/district")},$="".concat(D,"order/get_region_list"),V="".concat(D,"order/get_customer_type_list"),I="".concat(O,"setting/query_goods_attr_setting_list"),F="".concat(O,"price_system/leve_price_name/select_list"),E="".concat(O,"/category/get_category_list_with_nocategory_qty"),P="".concat(L,"deliveryMethod/list"),A="".concat(L,"logisticsCorp/system/list"),N="".concat(L,"logisticsCorp/custom/list");const M={name:"MixModal",props:{visible:{type:Boolean,default:!1},name:{type:String,default:"brand",validator:function(e){return-1!==["unit","brand","tag","levelPrice","productCategory","specialCategory","salesArea","classification","delivery","area","logistics","customLogistics"].indexOf(e)}},title:{type:String,default:"请选择"},cache:{type:Boolean,default:!1},beforeClose:{type:Function,default:null},defaultValue:{type:[String,Boolean,Number,Array],default:null},multiple:{type:Boolean,default:!1},extrasOperations:{type:Array,default:function(){return["refresh"]}},rules:{type:Object,default:function(){}}},data:function(){var e=this;return{keywords:"",placeholder:"请输入",options:[],checkValue:[],modelProps:{},testValue:[],loading:!0,modelType:"selectGroup",request:null,replaceFields:{key:"id",name:"name"},getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(T.city,g(g({},t),e.rules)):t.provinceId&&t.cityId?e.$get(T.district,g(g({},t),e.rules)):void 0:e.$get(T.province,e.rules)}}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t[e.replaceFields["selectGroup"===e.modelType?"name":"title"]].match(e.keywords))return t})):this.options}},watch:{visible:function(e){e&&(this.keywords="",this.options.length&&this.cache||(this.options=[],this.refresh(),this.getList(),this.rules&&this.rules.keywords&&(this.keywords=this.rules.keywords)))},name:function(){this.refresh()}},methods:{refresh:function(){this.options=[],this.setModel(),this.getList()},handleCheckAll:function(){var e=this;this.checkValue=this.options.map((function(t){return t[e.replaceFields.key]}))},setModel:function(){["unit","brand","tag","levelPrice","classification","delivery","logistics"].includes(this.name)?this.modelType="selectGroup":["productCategory","salesArea","area"].includes(this.name)&&(this.modelType="selectTree")},getList:function(){var e=this;if(this.checkValue=this.defaultValue||[],this.loading=!0,["unit","brand","tag"].includes(this.name)){this.checkValue=this.defaultValue||[];var t={type:["unit","brand","tag"].indexOf(this.name)};this.$post(I,g(g({},t),this.rules)).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))}else["levelPrice"].includes(this.name)?(this.checkValue=this.defaultValue||[],this.replaceFields={},this.$post(F,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):["productCategory","specialCategory"].includes(this.name)?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"categoryName"},this.getCateGory(),this.request=this.getCateGory):"salesArea"===this.name?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"name"},this.getCustomerRegionList(),this.request=this.getCustomerRegionList):"classification"===this.name?(this.replaceFields={key:"value",name:"label"},this.$post(V,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):"delivery"===this.name?this.$get(P,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):"area"===this.name?(this.replaceFields={key:"id",title:"name"},this.getRegion().then((function(t){e.options=t.data.map((function(e){return g(g({},e),{},{isLeaf:!1})})),e.request=e.getRegionList})).finally((function(){e.loading=!1}))):"logistics"===this.name?this.$get(A,this.rules).then((function(t){e.options=t.data;var n=e.options.filter((function(e){return e.isCheck})).map((function(e){return e.id}));console.log("isCheckedValue:",n),e.checkValue=n})).finally((function(){e.loading=!1})):"customLogistics"===this.name?this.$get(N,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):(console.error("当前传入名称为：",this.name,"。请确认是否正确！！！"),this.loading=!1)},getCateGory:function(e){var t=this;if(e)return new Promise((function(n){e.dataRef.children?n():t.$get(E,g({categoryType:["productCategory","specialCategory"].indexOf(t.name),parentId:e.dataRef.id},t.rules)).then((function(a){e.dataRef.children=a.data.categoryLists,t.options=f(t.options),n(a.data.categoryLists)}))}));this.$get(E,g({categoryType:["productCategory","specialCategory"].indexOf(this.name),parentId:0},this.rules)).then((function(e){t.loading=!1,t.options=e.data.categoryLists}))},getCustomerRegionList:function(e){var t=this;if(e)return new Promise((function(n){if(e.dataRef.children)n();else{var a=e.dataRef;t.$post($,g({businessId:a.id||0},t.rules)).then((function(a){e.dataRef.children=a.data,t.options=f(t.options),n(a.data)})).finally((function(){t.loading=!1}))}}));this.$post($,g({businessId:0},this.rules)).then((function(e){t.options=e.data})).finally((function(){t.loading=!1}))},getRegionList:function(e){var t=this,n=null,a=null;return e.dataRef&&e.$parent.dataRef&&(n=e.dataRef.parentId,a=e.dataRef.id),e.dataRef&&!e.$parent.dataRef&&(n=e.dataRef.id),new Promise((function(i){e.dataRef.children?i():t.getRegion({provinceId:n,cityId:a}).then((function(n){e.dataRef.children=n.data.map((function(e){return g(g({},e),{},{isLeaf:!!a})})),t.options=f(t.options),i(n.data)})).finally((function(){t.loading=!1}))}))},okHandle:function(){var e=this.$refs.contentModel.getData();e.isCheckAll=this.checkValue.length===this.options.length,this.beforeClose?this.beforeClose(e,this.cancelHandle):(this.$emit("confirm",e),this.modalVisible=!1)},cancelHandle:function(){this.modalVisible=!1}},components:{SelectGroup:y,SelectTree:x,Empty:C}};var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:"816px"},on:{cancel:e.cancelHandle,ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.extrasOperations.includes("refresh")?n("a-button",{attrs:{type:"link"},on:{click:e.refresh}},[e._v("刷新")]):e._e(),e._v(" "),(e.extrasOperations.includes("checkAll")&&this.multiple&&this.modelType,e._e())],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},["selectGroup"===e.modelType?n("SelectGroup",{ref:"contentModel",attrs:{multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e(),e._v(" "),"selectTree"===e.modelType?n("SelectTree",{ref:"contentModel",attrs:{"load-data":e.request,multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e()],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};j._withStripped=!0;const B=v({render:j,staticRenderFns:[]},void 0,M,void 0,!1,void 0,!1,void 0,void 0,void 0);return B.install=function(e){e.component(B.name,B)},B}))},"1e20":function(e,t,n){!function(t,a){e.exports=a(n("b64b"),n("4e82"),n("9911"),n("159b"),n("4de4"),n("99af"),n("ac1f"),n("1276"),n("5319"),n("a9e3"),n("466d"),n("fb6a"),n("d3b7"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("e439"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f){"use strict";function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(f);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){return"object"===g(e)&&null!==e&&e.constructor&&e.constructor===Object}function k(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(w(e[o])&&w(n[o])?k(e[o],n[o]):!w(e[o])&&w(n[o])?(e[o]={},k(e[o],n[o])):e[o]=n[o])}}return e}"object"!==("undefined"==typeof Int8Array?"undefined":g(Int8Array))&&(m.default.prototype.$isServer||document.childNodes);var C={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=b(b({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=b(b({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=b(b({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=b({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=k(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:g(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(b(b({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}};return C}))},2418:function(e,t,n){n("cca6");var a=n("428f");e.exports=a.Object.assign},"25f0":function(e,t,n){"use strict";var a=n("e330"),i=n("5e77").PROPER,o=n("6eeb"),r=n("825a"),s=n("3a9b"),l=n("577e"),c=n("d039"),u=n("ad6d"),d="toString",h=RegExp.prototype,f=h[d],p=a(u),m=c((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),g=i&&f.name!=d;(m||g)&&o(RegExp.prototype,d,(function(){var e=r(this),t=l(e.source),n=e.flags,a=l(void 0===n&&s(h,e)&&!("flags"in h)?p(e):n);return"/"+t+"/"+a}),{unsafe:!0})},2872:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("4de4"),n("caad"),n("2532"),n("d3b7"),n("04b3"),n("159b"),n("cfba"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("b64b"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3177"),n("d81d"),n("2ca0"),n("7db0"),n("a434"),n("7edb"),n("aa47"),n("fb19"),n("73c8"),n("99af"),n("4e82"),n("9911"),n("e439"),n("90b7"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G,Y,X,J,Q,Z){"use strict";function ee(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var te=ee(l),ne=ee(m),ae=ee(q),ie=ee(W),oe=ee(U);function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const ue={name:"Empty",components:{empty:r.empty,loading:r.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};de._withStripped=!0;const he=ce({render:de,staticRenderFns:[]},void 0,ue,void 0,!1,void 0,!1,void 0,void 0,void 0);function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function pe(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){me(o,a,i,r,s,"next",e)}function s(e){me(o,a,i,r,s,"throw",e)}r(void 0)}))}}he.install=function(e){e.component(he.name,he)};var ve=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),ye=ve,be="/gateway/customer-service/api/v1/",we="".concat(be,"order/get_region_list"),ke="".concat(be,"order/get_customer_list"),Ce="".concat(be,"order/get_customer_type_list"),_e="".concat("/gateway/goodsservice/api/v1/","price_system/leve_price/select_list"),Se={name:"DSelectSaleArea",props:{width:{require:!1,type:String,default:"120"},maxHeight:{require:!1,type:String,default:"300"},placeholder:{require:!1,type:String,default:"销售区域"}},data:function(){return{value:void 0,parentId:0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},treeData:[],apiName:null}},created:function(){this.treeData.length||this.getList([],!1)},methods:{openSelect:function(){this.treeData.length||this.getList([],!1)},getList:function(){var e=arguments,t=this;return ge(ye.mark((function n(){var a,i,o,r;return ye.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:[],i=e.length>1&&void 0!==e[1]&&e[1],n.prev=2,n.next=5,t.$post(we,{businessId:t.parentId});case 5:o=n.sent,(r=o.data).length>0&&(i?(a.children=r,t.treeData=pe(t.treeData)):t.treeData=r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onLoadData:function(e){var t=this;return new Promise((function(n){var a=e.dataRef;a.hasChildren?setTimeout((function(){t.parentId=a.id,t.getList(a,!0),n()}),300):n()}))},changeValue:function(e){this.$emit("sureSelect",e)}}};const xe=Se;var Re=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{style:{width:e.width+"px"},attrs:{allowClear:"","tree-data-simple-mode":"","dropdown-style":{width:+e.width+60+"px",maxHeight:e.maxHeight+"px",overflow:"auto"},"tree-data":e.treeData,placeholder:e.placeholder,"load-data":e.onLoadData,replaceFields:e.replaceFields},on:{change:e.changeValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})};Re._withStripped=!0;const Oe=ce({render:Re,staticRenderFns:[]},void 0,xe,"data-v-1c52a95a",!1,void 0,!1,void 0,void 0,void 0);Oe.install=function(e){e.component(Oe.name,Oe)};const De={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:te.default},methods:{handleClick:function(){this.$emit("click")}}};var Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};Le._withStripped=!0;const Te=ce({render:Le,staticRenderFns:[]},void 0,De,void 0,!1,void 0,!1,void 0,void 0,void 0);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ve(e){if(!e&&"object"!==$e(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===$e(e[n])?t[n]=Ve(e[n]):t[n]=e[n]})),t}Te.install=function(e){e.component(Te.name,Te)},"object"!==("undefined"==typeof Int8Array?"undefined":$e(Int8Array))&&(ne.default.prototype.$isServer||document.childNodes);const Ie={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:j.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:j.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&j.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};Fe._withStripped=!0;const Ee=ce({render:Fe,staticRenderFns:[]},void 0,Ie,void 0,!1,void 0,!1,void 0,void 0,void 0);Ee.install=function(e){e.component(Ee.name,Ee)};const Pe={name:"DOperationBox",components:{IconFontBox:Te,CellEllipsisTip:Ee},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return le({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(le(le({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=Ve(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=le({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};Ae._withStripped=!0;const Ne=ce({render:Ae,staticRenderFns:[]},void 0,Pe,void 0,!1,void 0,!1,void 0,void 0,void 0);function Me(){return Me=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Me.apply(this,arguments)}Ne.install=function(e){e.component(Ne.name,Ne)};var je=["attrs","props","domProps"],Be=["class","style","directives"],Ke=["on","nativeOn"],ze=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},He=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==je.indexOf(n))e[n]=Me({},e[n],t[n]);else if(-1!==Be.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==Ke.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?ze(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function qe(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var We=ae.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Ue(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var Ge=["key"],Ye={},Xe={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return le({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:le({},this.$listeners)};return t("a-table",He([{},{props:le(le({},n),{},{columns:a}),scopedSlots:le({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":oe.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=G.getKey(t),i=G.getStyle(t),o=G.getClass(t),r=G.getOptionProps(t),s=G.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[G.camelize(t)]=s[e]}));var c=G.getSlots(t),u=c.default,d=Ue(c,["default"]),h=We({},d,r,{style:i,class:o},l);if(a&&(h.key=a),G.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=Ue(t,["slots","scopedSlots"]),u=We({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){Ye[e.key]=e.width||0}));var o=ne.default.observable(Ye),r=null,s=t.key,l=qe(t,Ge),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",He([{attrs:{width:c.width}},l]),[n]):e("th",He([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",He([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(oe.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=le(le({},a.cellWidth),{},re({},c.key,c.width));a.$emit("update:cellWidth",le({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);ie.default.create(t[t.length>1?1:0],le(le({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(Xe.name,Xe)}},Je={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return le(le({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=le({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=re({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===$e(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=le(le({},e.selectionContent.selectedRows),{},re({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=re({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};function Qe(e){return"object"===$e(e)&&null!==e&&e.constructor&&e.constructor===Object}function Ze(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(Qe(e[o])&&Qe(n[o])?Ze(e[o],n[o]):!Qe(e[o])&&Qe(n[o])?(e[o]={},Ze(e[o],n[o])):e[o]=n[o])}}return e}var et={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=le(le({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=le(le({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=le(le({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=le({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=Ze(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:$e(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(le(le({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},tt={name:"DSelectCustomer",components:{Empty:he,SelectSaleArea:Oe,DOperationBox:Ne,CellEllipsisTip:Ee,STable:Xe},mixins:[Je,et],props:{visible:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},cache:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:1e3},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"businessId"}}},attrs:{type:Object,default:function(){}},defaultSelectedRowKeys:{type:Object,default:function(){return{selectedRowKeys:[],selectedRows:[]}}},isShowPrice:{type:Boolean,default:!1},customerType:{type:Array,default:function(){return[1,2,3,4]}},sortList:{type:Array,default:void 0},defaultValue:{type:[Array,Object],default:void 0},beforeClose:{type:Function,default:void 0},selectionLimit:{type:Number,default:100},placeholder:{type:String,default:null}},data:function(){return{tableData:[],levelPrices:{data:[],loading:!1},searchResult:{customerTypeIds:[],keywords:null,priceLevelId:null,regionId:null},customers:{loading:!1},categories:{keyword:"",data:[],loading:{}}}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},filteredCategories:function(){var e=this;return this.categories.keyword?this.categories.data.filter((function(t){return t.label.indexOf(e.categories.keyword)>-1})):this.categories.data},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.customers.loading}})}},baseReplaceFields:function(){return le({key:"businessId"},this.replaceFields)},sortColumns:function(){return this.sortList?this.sortList:[{key:"name"},{key:"region"},{key:"priceLevel"}]},getTitle:function(){return this.customerType.includes(1)&&this.customerType.includes(2)?"客户":this.customerType.includes(1)?"供应商":"客户"},tablePlaceholder:function(){return this.placeholder?this.placeholder:"".concat(this.getTitle,"名称/联系人/手机")}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="businessId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.cache||(this.reset().dealResult().loadTableData(),this.handleFetchCategories(),this.handleFetchLevelPrice()))},defaultSelectedRowKeys:{handler:function(e){var t=Z.deepClone(e);this.selectionContent.selectedRowKeys=t.selectedRowKeys,this.selectionContent.selectedRows=t.selectedRows},immediate:!0}},filters:{balance:function(e,t){if(e){var n=e.filter((function(e){return e.value===t}));return n.length?n[0].label:"-"}return"-"}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.customers.loading=!0,this.$post(ke,le(le({pageNum:t.current,pageSize:t.pageSize,orderCustomerTypeList:this.customerType,keyword:this.searchResult.keywords},this.searchResult),this.rules)).then((function(t){e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum})).finally((function(){e.customers.loading=!1}))},onCustomersSearch:function(e,t){this.searchResult[e]=t,this.handleSelectedClear().loadTableData()},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},handleFetchCategories:function(){var e=this;this.categories.loading=!0,this.$post(Ce).then((function(t){e.categories.data=t.data||[]})).catch((function(e){return console.error(e)})).finally((function(){e.categories.loading=!1}))},handleFetchLevelPrice:function(){var e=this;this.isShowPrice&&(this.levelPrices.loading=!0,this.$post(_e).then((function(t){e.levelPrices.data=t.data||[]})).finally((function(){e.levelPrices.loading=!1})))},onOperationOptionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const nt=tt;var at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",e._b({staticClass:"d-select-customer a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title||"选择"+e.getTitle,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},"a-modal",e.attrs,!1),[n("div",{staticClass:"customer-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{attrs:{maxLength:40,placeholder:"请输入分类名称"},model:{value:e.categories.keyword,callback:function(t){e.$set(e.categories,"keyword",t)},expression:"categories.keyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.categories.loading,expression:"categories.loading"}],staticClass:"classify-wrap"},[n("a-checkbox-group",{attrs:{name:"checkboxgroup"},on:{change:function(t){return e.onCustomersSearch("customerTypeIds",arguments[0])}},model:{value:e.searchResult.customerTypeIds,callback:function(t){e.$set(e.searchResult,"customerTypeIds",t)},expression:"searchResult.customerTypeIds"}},[n("a-row",[n("a-space",{attrs:{direction:"vertical"}},e._l(e.filteredCategories,(function(t,a){return n("a-col",{key:a,attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])],1)})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationOptionClick}},[n("a-space",[n("a-input-search",{attrs:{maxLength:40,placeholder:e.tablePlaceholder},on:{search:function(t){return e.onCustomersSearch("keywords",arguments[0])}},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.isShowPrice?n("a-select",{staticStyle:{width:"120px"},attrs:{loading:e.levelPrices.loading,allowClear:"",placeholder:"级别价"},on:{change:function(t){return e.onCustomersSearch("priceLevelId",arguments[0])}}},e._l(e.levelPrices.data,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):e._e(),e._v(" "),n("select-sale-area",{staticClass:"select-area",attrs:{placeholder:"销售区域"},on:{sureSelect:function(t){return e.onCustomersSearch("regionId",arguments[0])}}})],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.customers.loading,expression:"customers.loading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate,"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{title:e.getTitle+"名称","data-index":"name"}}),e._v(" "),n("a-table-column",{key:"region",attrs:{title:"销售区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2,tip:""+t.region}},[e._v("\n              "+e._s(t.region)+"\n            ")])]}}])}),e._v(" "),n("a-table-column",{key:"priceLevel",attrs:{"data-index":"priceLevel",title:"级别价"}}),e._v(" "),n("a-table-column",{key:"balanceList1",attrs:{title:"应收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,1))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList2",attrs:{title:"应付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,2))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList3",attrs:{title:"预收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,3))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList4",attrs:{title:"预付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,4))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList5",attrs:{title:"积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,5))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList6",attrs:{title:"第三方ERP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,6))+"\n          ")]}}])})],1)],1)])])};at._withStripped=!0;const it=ce({render:at,staticRenderFns:[]},void 0,nt,void 0,!1,void 0,!1,void 0,void 0,void 0);return it.install=function(e){e.component(it.name,it)},it}))},"2c08":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("caad"),n("d81d"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("d3b7"),n("b64b"),n("159b"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("2532"),n("b680"),n("a434"),n("c740"),n("cfba"),n("bc3a"),n("99af"),n("07ac"),n("50f6"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W){"use strict";function U(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var G=U(h),Y=U(K),X=U(z),J=U(W);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Z(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}function ee(e){if(!e&&"object"!==Q(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Q(e[n])?t[n]=ee(e[n]):t[n]=e[n]})),t}function te(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ae(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ie(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}"object"!==("undefined"==typeof Int8Array?"undefined":Q(Int8Array))&&(G.default.prototype.$isServer||document.childNodes);var re=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function se(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const le={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:Y.default},methods:{handleClick:function(){this.$emit("click")}}};var ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};ce._withStripped=!0;const ue=se({render:ce,staticRenderFns:[]},void 0,le,void 0,!1,void 0,!1,void 0,void 0,void 0);function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=G.default.prototype.$isServer,me=!pe&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},ge=!pe&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};G.default.use(J.default);var ve={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},ye=!G.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",be={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:ve.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===ve.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=Z((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=Z((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),me(document,"keydown",this._keyDownHandler),me(document,ye,this._mouseWheelHandler)},deviceSupportUninstall:function(){ge(document,"keydown",this._keyDownHandler),ge(document,ye,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=Z((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),me(document,"mousemove",this._dragHandler),me(document,"mouseup",(function(){ge(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(ve),t=(Object.values(ve).indexOf(this.mode)+1)%e.length;this.mode=ve[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=fe({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const we=be;var ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};ke._withStripped=!0;const Ce=se({render:ke,staticRenderFns:[]},void 0,we,void 0,!1,void 0,!1,void 0,void 0,void 0);var _e="",Se=function(){return void 0!==document.documentElement.style.objectFit},xe=function(e,t){return Re(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},Re=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},Oe="none",De="contain",Le="cover",Te="fill",$e="scale-down",Ve={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:ue,IconFont:Y.default,ImageViewer:Ce},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?Se()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!Se()&&this.fit!==Te},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(xe(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===$e&&(e=t<i&&n<o?Oe:De),e){case Oe:return{width:"auto",height:"auto"};case De:return r?{width:"auto"}:{height:"auto"};case Le:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){_e=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=_e,this.showViewer=!1}}};const Ie=Ve;var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};Fe._withStripped=!0;const Ee=se({render:Fe,staticRenderFns:[]},void 0,Ie,void 0,!1,void 0,!1,void 0,void 0,void 0);function Pe(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];void 0!==o&&(e[i]=o)}}return e}var Ae={zIndex:2e3,initialIndex:0,urlList:[]},Ne=G.default.extend(Ce);Ee.install=function(e){e.component(Ee.name,Ee)},Ee.api=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Pe({},Ae,e);var t=new Ne({el:document.createElement("div"),propsData:e,methods:{hide:function(){this.deviceSupportUninstall(),this.$el.parentNode.removeChild(this.$el)},download:function(){e.download&&e.download(this.currentImg)}}}),n=e.body?document.body:e.target;console.log(n),document.body.appendChild(t.$el)}(e)};var Me="/gateway/oss-service/api/v1/",je=(localStorage.getItem("Access-Token")||"").replace(/\"/g,""),Be=X.default.create({timeout:3e5});Be.interceptors.request.use((function(e){return je&&(e.headers.Authorization="Bearer ".concat(je)),e}));var Ke={name:"AttachmentUpload",components:{IconFont:Y.default},props:{isFailReplace:{type:Boolean,default:!1},limit:{type:Number,default:20},list:{type:Array,default:function(){return[]}},propsKey:{type:Object,default:function(){return{fileId:"annexId",primaryKey:"id"}}},cache:{type:Boolean,default:!1}},data:function(){return this.Authorization="Bearer ".concat(je),{baseUrl:Me+"fileservice/files/advanceduploadbusiness",errorIndex:-1,fileListUploadList:[],fileList:[],businesParams:{},isStart:!0,isOverisOverMaxLimite:!1,deleteList:[],loading:!1}},created:function(){this.getUploadBusinessId()},computed:{formateIcon:function(){return function(e){var t={"docx,doc":"icondoc",pdf:"iconpdf","xlsx,csv,xls":"iconxls","zip,rar":"iconzip","bmp,png,jpeg,jpg,gif":"iconimage",mp3:"iconaudio",mp4:"iconmedia","wps,pptx,ppt":"iconppt",txt:"icontxt"};return t[oe(Object.keys(t).filter((function(t){return t.includes(e)})),1)[0]]}},showPreview:function(){return function(e){return!["mp3","mp4","zip","rar"].includes(e)}},fileName:function(){return function(e){return e.substring(0,e.lastIndexOf("."))}}},watch:{list:{handler:function(e){e.length&&this.loadPreviewList()},deep:!0}},methods:{loadPreviewList:function(){var e=this,t=this.businesParams.corpId;if(t){var n=this.list.map((function(t){return t[e.propsKey.fileId]}));this.loading=!0,this.fileList=[],this.$post(Me+"fileservice/objects/list_files_businessId",{businessId:n,corpId:t}).then((function(t){e.fileList=t.data.map((function(t,n){return{fileId:t.businessId,suffix:t.suffix,mediaId:t.id,size:t.filesSize/1024/1024>1?(t.filesSize/1024/1024).toFixed(1)+"M":(t.filesSize/1024).toFixed(1)+"K",url:t.preUrl,name:t.fileName,status:"done",id:e.list[n][e.propsKey.primaryKey]}}))})).finally((function(){e.loading=!1}))}},getUploadBusinessId:function(){var e=this;this.$get(Me+"fileservice/material/get_upload_business_id").then((function(t){var n=t.data;e.businesParams=n,e.list.length&&e.loadPreviewList()}))},beforeUploadUltiple:function(e,t){var n=e.name.slice(e.name.lastIndexOf(".")+1),a=["docx","doc","pdf","csv","pptx","wps","txt","xlsx","xls","zip","rar","bmp","png","jpeg","jpg","gif","txt","mp3","mp4"];if(!a.includes(n))return this.$message.error("上传附件格式错误！"),Promise.reject();if(e.size/1024/1024>20)return this.$message.error("超出单个文件限制大小，请调整后重新上传"),Promise.reject();if(this.isStart&&(this.isOverisOverMaxLimite=!1),this.isOverisOverMaxLimite)return!1;if(this.isStart){if(t.length+this.fileList.length>this.limit)return this.$message.error("已达当前最大限制数"),this.isStart=!1,this.isOverisOverMaxLimite=!0,!1;var i,o=t.filter((function(e){return e.size/1024/1024<20&&a.includes(e.name.slice(e.name.lastIndexOf(".")+1))})).map((function(e){return{name:e.name,uid:e.uid,status:"uploading",progress:3,url:"",mediaId:"",file:e,suffix:e.name.slice(e.name.lastIndexOf(".")+1),size:e.size/1024/1024>1?(e.size/1024/1024).toFixed(1)+"M":(e.size/1024).toFixed(1)+"K"}}));(i=this.fileList).push.apply(i,ie(o)),this.isStart=!1}},beforeUploadSingle:function(e){var t=e.size,n=e.name,a=e.uid,i=n.slice(n.lastIndexOf(".")+1);return["docx","doc","pdf","csv","pptx","wps","txt","xlsx","xls","zip","rar","bmp","png","jpeg","jpg","gif","txt","mp3","mp4"].includes(i)?t/1024/1024>20?(this.$message.error("超出单个文件限制大小，请调整后重新上传"),Promise.reject()):void this.$set(this.fileList,this.errorIndex,{name:n,uid:a,status:"uploading",progress:3,url:"",mediaId:"",suffix:n.slice(n.lastIndexOf(".")+1),size:t/1024/1024>1?(t/1024/1024).toFixed(1)+"M":(t/1024).toFixed(1)+"K"}):(this.$message.error("上传附件格式错误！"),Promise.reject())},singleChange:function(e){var t=e.file,n=t.status,a=t.percent,i=t.response;if("done"===n&&i&&i.data&&100===a){var o=i.data.mediaId;this.loadPreview({mediaId:o,corpId:this.businesParams.corpId||""},this.errorIndex,!1)}this.fileList[this.errorIndex].status=n,this.fileList[this.errorIndex].progress=Math.floor(a),this.fileListUploadList.splice(this.errorIndex,1,e.file)},ultipleChange:function(e){var t=e.file,n=t.response,a=t.percent,i=t.status,o=t.uid,r=e.fileList;if(this.isStart||(this.isStart=!0),!this.isOverisOverMaxLimite)try{this.fileListUploadList=r;var s=this.fileList.findIndex((function(e){return e.uid===o}));if(n&&"SYS_0000"!==n.code)return this.$message.error(n.message),this.fileList[s].status="error",this.fileList.filter((function(e){return["error","done"].includes(e.status)})).length===this.fileListUploadList.length&&this.$emit("ultipleSuccess",this.fileList),!1;"done"===i&&n&&n.data&&100===a&&this.loadPreview({mediaId:n.data.mediaId,corpId:this.businesParams.corpId||""},s),this.fileList[s].status=i,this.fileList[s].progress=Math.floor(a)}catch(e){console.error(e)}},loadPreview:function(e,t){var n=this,a=e.mediaId,i=e.corpId,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="".concat(Me,"fileservice/previwe/file_not_check_status");Be.post(r,{mediaId:a,corpId:i}).then((function(e){"SYS_0000"===e.data.code?(n.fileList[t].url=e.data.data.url,n.fileList[t].mediaId=e.data.data.mediaId,n.fileList[t].fileId=e.data.data.fileId):n.fileList[t].status="error",o?n.fileList.filter((function(e){return["error","done"].includes(e.status)})).length===n.fileListUploadList.length&&n.$emit("ultipleSuccess",n.fileList):n.$emit("singleSuccess",n.fileList)})).catch((function(){n.fileList[t].status="error"}))},handleRestUpload:function(e){this.errorIndex=e,this.isFailReplace?document.querySelector(".upload input").click():(this.fileList[e].progress=0,this.fileList[e].status="uploading",this.fileList[e].url="",this.reUpload())},handleDelete:function(e,t){this.fileList.splice(t,1),this.fileListUploadList.splice(t,1),this.deleteList.push(e)},deleteFile:function(){var e={corpId:this.businesParams.corpId,mediaIdList:this.deleteList};return this.$post(Me+"fileservice/objects/deletebykey",e,{isRemovePending:!1})},reUpload:function(){var e,t,n=this;Be({url:this.baseUrl,method:"post",onUploadProgress:function(e){var t=e.lengthComputable,a=e.loaded,i=e.total;t&&(n.fileList[n.errorIndex].progress=a/i*100)},data:(e={corpId:this.businesParams.corpId||"",businessId:this.businesParams.businessId,file:this.fileList[this.errorIndex].file},t=Object.keys(e).reduce((function(t,n){return!t.append(n,e[n])&&t}),new FormData),t.check=function(){return e},t)}).then((function(e){if(e.data.code&&"SYS_0000"===e.data.code){var t=e.data.data.mediaId;n.loadPreview({mediaId:t,corpId:n.businesParams.corpId||""},n.errorIndex,!1),n.fileList[n.errorIndex].status="done",n.$emit("singleSuccess",n.fileList)}else n.$message.error(e.data.message),n.fileList[n.errorIndex].status="error",n.$emit("singleFail",n.fileList)})).catch((function(){n.fileList[n.errorIndex].status="error",n.$emit("singleFail",n.fileList)}))},previewFile:function(e){["bmp","png","jpeg","jpg","gif"].includes(e.suffix)?Ee.api({urlList:[e.url]}):window.open(e.url)},save:function(e){var t,n=this;return(t=re.mark((function t(){var a,i,o;return re.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=n.fileList.filter((function(e){return"error"!==e.status}))).length){t.next=5;break}return n.$message.error("请上传附件"),e&&e(!1),t.abrupt("return");case 5:if(i={businessId:n.businesParams.businessId,groupId:0},!n.deleteList.length){t.next=9;break}return t.next=9,n.deleteFile();case 9:if(o=n.fileList.every((function(e){return"done"===e.status})),a.filter((function(e){return!e.id})).length){t.next=13;break}return e&&e(o,a),t.abrupt("return");case 13:if(o){t.next=16;break}return e&&e(o,a),t.abrupt("return");case 16:n.$post(Me+"fileservice/material/submit_pic_material",i).then((function(t){var i=t.code,r=t.message;"SYS_0000"===i?e&&e(o,a):(n.$message.error(r),e&&e(!1))})).catch((function(t){console.error(t),e&&e(!1)}));case 17:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function r(e){te(o,a,i,r,s,"next",e)}function s(e){te(o,a,i,r,s,"throw",e)}r(void 0)}))})()}}};const ze=Ke;var He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"attachmentUpload"},[n("p",{staticClass:"title"},[e._v("附件")]),e._v(" "),n("div",{staticClass:"file-content"},[n("a-upload-dragger",{ref:"upload",staticClass:"uploadRef",attrs:{name:"file",multiple:!0,headers:{Authorization:e.Authorization},action:e.baseUrl,data:e.businesParams,beforeUpload:e.beforeUploadUltiple,fileList:e.fileListUploadList,showUploadList:!1},on:{change:e.ultipleChange}},[n("p",{staticClass:"ant-upload-hint"},[n("a-icon",{attrs:{slot:"indicator",type:"upload"},slot:"indicator"}),e._v("\n        点击上传或将文件拖拽至框内上传\n      ")],1)]),e._v(" "),n("a-upload-dragger",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"upload",attrs:{name:"file",headers:{Authorization:e.Authorization},data:e.businesParams,action:e.baseUrl,beforeUpload:e.beforeUploadSingle,showUploadList:!1},on:{change:e.singleChange}}),e._v(" "),n("div",{staticClass:"desc"},[e._v("附件最大20M，支持格式：PDF，Word，Excel，Txt，JPG，PNG，BMP，GIF，RAR，ZIP")]),e._v(" "),n("div",{staticClass:"file-list"},[n("a-spin",{staticClass:"spin",attrs:{spinning:e.loading}},[n("a-icon",{staticStyle:{"font-size":"30px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),e._v(" "),e._l(e.fileList,(function(t,a){return n("div",{key:a,staticClass:"file-item"},[n("icon-font",{staticClass:"file-icon",attrs:{type:e.formateIcon(t.suffix)}}),e._v(" "),n("div",{staticClass:"file-info"},[n("div",{staticClass:"file-name"},[n("span",{staticClass:"name"},[e._v(e._s(e.fileName(t.name)))]),e._v(" "),n("span",[e._v("."+e._s(t.suffix))]),e._v(" "),n("span",{staticClass:"size"},[e._v("（"+e._s(t.size)+"）")])]),e._v(" "),"uploading"===t.status?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"bar",style:{width:t.progress+"%"}})]),e._v(" "),n("span",{staticClass:"progress-value"},[e._v(e._s(t.progress)+"%")]),e._v(" "),n("span",{staticClass:"delete",on:{click:function(n){return e.handleDelete(t.mediaId,a)}}},[e._v("删除")])]):n("div",{staticClass:"handle-box"},["error"===t.status?n("span",{staticClass:"error-msg"},[e._v("链接超时，上传失败")]):e._e(),e._v(" "),"error"===t.status?n("span",{on:{click:function(t){return e.handleRestUpload(a)}}},[e._v("重新上传")]):e._e(),e._v(" "),"done"===t.status&&e.showPreview(t.suffix)?n("span",{on:{click:function(n){return e.previewFile(t)}}},[e._v("预览")]):e._e(),e._v(" "),n("span",{on:{click:function(n){return e.handleDelete(t.mediaId,a)}}},[e._v("删除")])])])],1)}))],2)],1)])};He._withStripped=!0;const qe=se({render:He,staticRenderFns:[]},void 0,ze,void 0,!1,void 0,!1,void 0,void 0,void 0);qe.install=function(e){e.component(qe.name,qe)};const We={name:"UploadModal",components:{AttachmentUpload:qe},props:{billType:{type:Number,default:-1},visible:{type:Boolean,default:!1},fileList:{type:Array,default:function(){return[]}},setContainer:{type:Function,default:function(){return document.querySelector("body")}},beforeClose:{type:Function,default:void 0},cache:{type:Boolean,default:!1}},data:function(){return{loading:!1,cachedFileList:[]}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},disabled:function(){return[1,3].includes(this.billType)}},watch:{modalVisible:function(e){if(e){var t=this.$refs.uploadAttachment?this.$refs.uploadAttachment.fileList:[];this.cachedFileList=ee(t)}}},methods:{handleAffix:function(){if(this.beforeClose){var e=this.$refs.uploadAttachment.fileList;e&&e.length?(this.modalVisible=!1,this.beforeClose({fileList:e||[],callback:this.$refs.uploadAttachment.save})):this.$message.error("请上传附件")}else this.handleUploadSave()},handleUploadSave:function(){var e=this;this.loading=!0,this.$refs.uploadAttachment.save((function(t,n){if(t){var a=n.map((function(e,t){return{annexId:e.fileId,id:e.id,sort:t+1,url:e.url}}));e.$emit("confirm",{data:a,rows:a}),e.modalVisible=!1}else console.log("上传失败");e.loading=!1}))},changeFileList:function(e){console.log(e)},handleSuccess:function(e){console.log("upload",e)},handleCancel:function(){this.modalVisible=!1,this.$refs.uploadAttachment.fileList=this.cachedFileList,this.$emit("close")}}};var Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-upload-modal",attrs:{confirmLoading:e.loading,title:"附件上传","get-container":e.setContainer,"ok-button-props":{props:{disabled:e.disabled}},width:816,bodyStyle:{height:"420px"}},on:{cancel:e.handleCancel,ok:e.handleAffix},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("attachment-upload",{ref:"uploadAttachment",attrs:{list:e.fileList,limit:20,cache:e.cache},on:{ultipleSuccess:e.handleSuccess}})],1)};Ue._withStripped=!0;const Ge=se({render:Ue,staticRenderFns:[]},void 0,We,void 0,!1,void 0,!1,void 0,void 0,void 0);return Ge.install=function(e){e.component(Ge.name,Ge)},Ge}))},"2ca0":function(e,t,n){"use strict";var a=n("23e7"),i=n("e330"),o=n("06cf").f,r=n("50c4"),s=n("577e"),l=n("5a34"),c=n("1d80"),u=n("ab13"),d=n("c430"),h=i("".startsWith),f=i("".slice),p=Math.min,m=u("startsWith"),g=!d&&!m&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}();a({target:"String",proto:!0,forced:!g&&!m},{startsWith:function(e){var t=s(c(this));l(e);var n=r(p(arguments.length>1?arguments[1]:void 0,t.length)),a=s(e);return h?h(t,a,n):f(t,n,n+a.length)===a}})},4562:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("4de4"),n("d81d"),n("d3b7"),n("99af"),n("ac1f"),n("1276"),n("caad"),n("2532"),n("a434"),n("a15b"),n("159b"),n("466d"),n("b64b"),n("cfba"),n("07ac"),n("b680"),n("2b0e"),n("5319"),n("fb6a"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("50f6"),n("3177"),n("2ca0"),n("7db0"),n("7edb"),n("aa47"),n("fb19"),n("73c8"),n("04b3"),n("4e82"),n("9911"),n("e439"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G,Y,X,J,Q,Z){"use strict";function ee(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var te=ee(m),ne=ee(y),ae=ee(q),ie=ee(Y),oe=ee(X),re=ee(J);function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ue(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return he(he({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=he({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=se({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===le(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=he(he({},e.selectionContent.selectedRows),{},se({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=se({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};function pe(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const me={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:te.default},methods:{handleClick:function(){this.$emit("click")}}};var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};ge._withStripped=!0;const ve=pe({render:ge,staticRenderFns:[]},void 0,me,void 0,!1,void 0,!1,void 0,void 0,void 0);var ye=ne.default.prototype.$isServer,be=!ye&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},we=!ye&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};function ke(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}function Ce(e){if(!e&&"object"!==le(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===le(e[n])?t[n]=Ce(e[n]):t[n]=e[n]})),t}"object"!==("undefined"==typeof Int8Array?"undefined":le(Int8Array))&&(ne.default.prototype.$isServer||document.childNodes);var _e=function(e){return!e||"{}"===JSON.stringify(e)||"[]"===JSON.stringify(e)||!e},Se=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&null!==e[n]&&void 0!==e[n]&&(t[n]=e[n]);return t};ne.default.use(ae.default);var xe={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},Re=!ne.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",Oe={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:xe.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===xe.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=ke((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=ke((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),be(document,"keydown",this._keyDownHandler),be(document,Re,this._mouseWheelHandler)},deviceSupportUninstall:function(){we(document,"keydown",this._keyDownHandler),we(document,Re,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=ke((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),be(document,"mousemove",this._dragHandler),be(document,"mouseup",(function(){we(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(xe),t=(Object.values(xe).indexOf(this.mode)+1)%e.length;this.mode=xe[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=he({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const De=Oe;var Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};Le._withStripped=!0;const Te=pe({render:Le,staticRenderFns:[]},void 0,De,void 0,!1,void 0,!1,void 0,void 0,void 0);var $e="",Ve=function(){return void 0!==document.documentElement.style.objectFit},Ie=function(e,t){return Fe(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},Fe=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},Ee="none",Pe="contain",Ae="cover",Ne="fill",Me="scale-down",je={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:ve,IconFont:te.default,ImageViewer:Te},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?Ve()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!Ve()&&this.fit!==Ne},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(Ie(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===Me&&(e=t<i&&n<o?Ee:Pe),e){case Ee:return{width:"auto",height:"auto"};case Pe:return r?{width:"auto"}:{height:"auto"};case Ae:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){$e=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=$e,this.showViewer=!1}}};const Be=je;var Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};Ke._withStripped=!0;const ze=pe({render:Ke,staticRenderFns:[]},void 0,Be,void 0,!1,void 0,!1,void 0,void 0,void 0);function He(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];void 0!==o&&(e[i]=o)}}return e}var qe={zIndex:2e3,initialIndex:0,urlList:[]},We=ne.default.extend(Te);ze.install=function(e){e.component(ze.name,ze)},ze.api=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=He({},qe,e);var t=new We({el:document.createElement("div"),propsData:e,methods:{hide:function(){this.deviceSupportUninstall(),this.$el.parentNode.removeChild(this.$el)},download:function(){e.download&&e.download(this.currentImg)}}}),n=e.body?document.body:e.target;console.log(n),document.body.appendChild(t.$el)}(e)};const Ue={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:W.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:W.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&W.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};Ge._withStripped=!0;const Ye=pe({render:Ge,staticRenderFns:[]},void 0,Ue,void 0,!1,void 0,!1,void 0,void 0,void 0);function Xe(){return Xe=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xe.apply(this,arguments)}Ye.install=function(e){e.component(Ye.name,Ye)};var Je=["attrs","props","domProps"],Qe=["class","style","directives"],Ze=["on","nativeOn"],et=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},tt=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==Je.indexOf(n))e[n]=Xe({},e[n],t[n]);else if(-1!==Qe.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==Ze.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?et(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function nt(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var at=ie.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function it(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var ot=["key"],rt={},st={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return he({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:he({},this.$listeners)};return t("a-table",tt([{},{props:he(he({},n),{},{columns:a}),scopedSlots:he({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":re.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=Q.getKey(t),i=Q.getStyle(t),o=Q.getClass(t),r=Q.getOptionProps(t),s=Q.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[Q.camelize(t)]=s[e]}));var c=Q.getSlots(t),u=c.default,d=it(c,["default"]),h=at({},d,r,{style:i,class:o},l);if(a&&(h.key=a),Q.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=it(t,["slots","scopedSlots"]),u=at({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){rt[e.key]=e.width||0}));var o=ne.default.observable(rt),r=null,s=t.key,l=nt(t,ot),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",tt([{attrs:{width:c.width}},l]),[n]):e("th",tt([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",tt([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(re.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=he(he({},a.cellWidth),{},se({},c.key,c.width));a.$emit("update:cellWidth",he({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);oe.default.create(t[t.length>1?1:0],he(he({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(st.name,st)}};ve.install=function(e){e.component(ve.name,ve)};const lt={name:"DOperationBox",components:{IconFontBox:ve,CellEllipsisTip:Ye},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return he({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(he(he({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=Ce(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=he({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};ct._withStripped=!0;const ut=pe({render:ct,staticRenderFns:[]},void 0,lt,void 0,!1,void 0,!1,void 0,void 0,void 0);ut.install=function(e){e.component(ut.name,ut)};var dt=[{id:0,name:"草稿"},{id:1,name:"已过账"},{id:3,name:"已红冲"}],ht={0:dt[0],1:dt[1],2:dt[2]},ft=[{id:0,name:"未支付"},{id:1,name:"部分支付"},{id:2,name:"已支付"}],pt={0:ft[0],1:ft[1]},mt=[{id:1,name:"库存高于上限"},{id:2,name:"库存低于下限"},{id:3,name:"有货"},{id:4,name:"缺货"}],gt={0:pt[0],1:pt[1]},vt=[{id:5,name:"ERP草稿",color:"#52C41A"},{id:1,name:"已过账",color:"#52C41A"},{id:4,name:"ERP删除",color:"#BBBBBB"},{id:2,name:"草稿",color:"#52C41A"},{id:3,name:"已红冲",color:"#F5222D"},{id:0,name:"未同步",color:"#378EFB"}],yt=[{id:0,name:"已下架"},{id:1,name:"已上架"}],bt=[{id:1,name:"应收调整"},{id:2,name:"应付调整"}],wt=[{id:0,name:"草稿"},{id:1,name:"盘点完成"}],kt=[{id:0,name:"全部"},{id:1,name:"采购入库"},{id:2,name:"退货入库"},{id:3,name:"盘盈入库"},{id:4,name:"其它入库"},{id:5,name:"销售出库"},{id:6,name:"采购退货"},{id:7,name:"盘亏出库"},{id:8,name:"采购入库"},{id:9,name:"其它出库"},{id:10,name:"同价调拨入库"},{id:11,name:"同价调拨出库"},{id:12,name:"撤销出库"},{id:13,name:"进销存同步"},{id:14,name:"撤销退货"},{id:15,name:"退货单取消"},{id:16,name:"订货单取消"}],Ct=[{id:-1,name:"已取消",key:"canceled",btnKeys:["detail","del","share","print","export","copy"]},{id:0,name:"草稿",key:"draft",btnKeys:["detail","submit","submit_audit","del","share","print","export","copy"]},{id:1,name:"待审核",key:"to_audit",btnKeys:["detail","audit","cancel_bill","share","print","export","copy"]},{id:2,name:"待出库",key:"to_stock_removal",btnKeys:["detail","stock_removal","auditee","cancel_bill","share","print","export","copy"]},{id:3,name:"部分出库",key:"portion_stock_removal",btnKeys:["detail","stock_removal","suspend_bill","share","print","export","copy"]},{id:4,name:"待发货",key:"to_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:5,name:"部分发货",key:"portion_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:6,name:"待收货",key:"to_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:7,name:"部分收货",key:"portion_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:8,name:"已完成",key:"finish",btnKeys:["detail","share","print","export","copy"]},{id:9,name:"已中止",key:"suspend",btnKeys:["detail","share","print","export","copy"]}],_t=[{id:1,name:"已打印"},{id:0,name:"未打印"}],St=[{id:0,name:"PC端代开"},{id:1,name:"企业微信代开"},{id:2,name:"小程序商城"},{id:3,name:"巡店"},{id:4,name:"Excel导入"}],xt=[{id:1,name:"买赠"},{id:2,name:"秒杀"},{id:3,name:"特价"},{id:4,name:"订单促销"},{id:5,name:"组合促销"},{id:6,name:"一口价"},{id:7,name:"拼团"},{id:8,name:"优惠券"},{id:9,name:"分销"}],Rt=[{id:0,name:"不开发票"},{id:1,name:"普通发票"},{id:2,name:"增值税发票"}],Ot=Object.freeze({__proto__:null,billStatus:{0:{name:"草稿",color:"#378EFB",icon:"iconcaogao"},1:{name:"已过账",color:"#52C41A",icon:"iconyiguozhang",stocktakingName:"盘点完成",stocktakingIcon:"icon_stocktaking_completed"},3:{name:"已红冲",color:"#F5222D",icon:"iconyihongchong"}},payStockSync:[{id:2,name:"ERP草稿",color:"#52c41a"},{id:3,name:"已过账",color:"#52c41a"},{id:4,name:"ERP删除",color:"#bbbbbb"},{id:5,name:"同步失败",color:"#f5222d"},{id:0,name:"未同步",color:"#378efb"}],payStockSyncMap:{0:{name:"未同步",color:"#378efb"},2:{name:"ERP草稿",color:"#52c41a"},3:{name:"已过账",color:"#52c41a"},4:{name:"ERP删除",color:"#bbbbbb"},5:{name:"同步失败",color:"#f5222d"}},inStockMap:[{id:0,name:"盘盈入库"},{id:2,name:"其它入库"}],outStockMap:[{id:1,name:"盘亏出库"},{id:3,name:"其它出库"}],orderStatus:dt,orderStatusMap:ht,paymentStatus:ft,paymentStatusMap:pt,stockStatus:mt,stockStatusMap:gt,stockSync:vt,stockSyncMap:{},saleStatus:yt,modeOfPayment:[{id:0,name:"线下支付"},{id:1,name:"银行卡转账"}],exchangePayment:bt,stockBillStatus:wt,stockInAndOut:kt,accountType:[{id:0,name:"微信账户"},{id:1,name:"预付款账户"},{id:2,name:"现金账户"},{id:3,name:"银行卡账户"}],saleOrderStatus:Ct,printStatus:_t,billSource:St,marketingType:xt,invoiceType:Rt}),Dt="/gateway/goodsservice/api/v1/",Lt="".concat(Dt,"goods/custom/list"),Tt="".concat("/gateway/customer-service/api/v1/","order/get_customer_list"),$t="".concat(Dt,"price_system/leve_price_name/select_list"),Vt="".concat(Dt,"setting/query_goods_attr_setting_list"),It="".concat(Dt,"warehouse/list"),Ft="".concat(Dt,"goods/get_sku_unit_list"),Et="".concat("/gateway/saas-platform-service/api/v1/","staffer/get_corp_all"),Pt="".concat(Dt,"category/get_category_list"),At="".concat("/gateway/logisticsservice/api/v1/","deliveryMethod/list");const Nt=pe({},void 0,{name:"DMixSelect",props:{value:{type:[String,Number,Array],default:void 0},resultName:{type:String,default:""},type:{type:Number,default:0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:120},list:{type:Array,default:null},exclude:{type:Array,default:function(){return[]}},mode:{type:String,default:"select"},getPopupContainer:{type:Function,default:function(){return document.querySelector(".mix-select")}}},data:function(){return{actValue:void 0,options:[],selectLoading:!1}},computed:{modalPlaceholder:function(){return this.placeholder},actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:function(e){this.actValue=e},type:{handler:function(){this.options=[],this.getData()}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;if(console.log(Ot,this.type),!this.$slots.default)if(this.list)this.options=this.list;else if([0,1,2,11].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$post(11===this.type?$t:Vt,{type:this.type}).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1})).catch((function(){e.selectLoading=!1}))}else if([14].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$get(At).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1}))}else switch(this.type){case 3:this.options=dt;break;case 4:this.options=ft;break;case 5:this.options=mt;break;case 6:this.options=yt;break;case 7:this.options=bt;break;case 8:this.options=vt;break;case 9:this.options=wt;break;case 10:this.options=kt;break;case 12:this.options=Ct;break;case 13:this.options=_t;break;case 15:this.options=St;break;case 16:this.options=xt;break;case 17:this.options=Rt;break;default:this.options=[]}},handleChange:function(e){var t=le(e);if(null==e||"object"===t&&!e.length)return this.$emit("input",void 0),this.actValue=void 0,void this.$emit("change",{config:{resultName:this.resultName,status:"delete",type:"select"}});var n="number"===t?{}:[];this.options.forEach((function(a){"number"===t?a.id===e&&(n=a):e.includes(a.id)&&n.push(a)})),this.$emit("input",e),this.actValue=e,this.$emit("change",{data:e,rows:n,config:{resultName:this.resultName,status:"select",type:"select"}})},optionsVisibleHandle:function(){this.options.length||this.$slots.default||this.getData()},resetData:function(){this.actValue=void 0,this.$emit("input",void 0)}},render:function(e){var t=this,n=this;return e("div",{class:"mix-select",style:"width: ".concat(n.actWidth)},[e("a-select",{scopedSlots:n.$scopedSlots,props:{value:n.actValue,allowClear:n.allowClear,placeholder:n.modalPlaceholder,mode:n.mode,getPopupContainer:n.getPopupContainer,disabled:n.disabled},style:"width:100%;",on:{dropdownVisibleChange:n.optionsVisibleHandle,change:n.handleChange}},[n.selectLoading?e("a-spin",{props:{size:"small"},slot:"notFoundContent"}):function(){if(t.$slots.default)return t.$slots.default;var n=[];return t.options.forEach((function(a,i){t.exclude.includes(a.id)||n.push(e("a-select-option",{props:{value:a.id,key:i,title:a.name}},a.name))})),n}()])])}},"data-v-c44b6be8",void 0,void 0,!1,void 0,void 0,void 0);function Mt(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function jt(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){Mt(o,a,i,r,s,"next",e)}function s(e){Mt(o,a,i,r,s,"throw",e)}r(void 0)}))}}Nt.install=function(e){e.component(Nt.name,Nt)};var Bt=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),Kt={name:"MixSearchInput",props:{value:{type:[Object,String],default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},maxLength:{type:Number,default:40},name:{type:String,default:""},next:{type:Function,default:void 0},restore:{type:Boolean,default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",loading:!1,dataList:[],readonly:!1,dialogFocus:!1,localDataCache:null,isBlur:!1,replaceFields:{key:"id",name:"name"}}},watch:{value:{handler:function(e){this.inputValue=e?e.name||e.value:void 0},deep:!0,immediate:!0}},methods:{generateRequest:function(){var e=arguments,t=this;return jt(Bt.mark((function n(){var a,i,o,r,s,l,c,u,d,h,f,p,m;return Bt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},t.loading=!0,!["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(t.name)){n.next=12;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName",code:"code",barCode:"barCode"},n.next=6,t.$get(Lt,He({type:4,isShowSku:!0,pageNum:1,pageSize:30},a,t.dialogConfig.rules));case 6:return i=n.sent,o=i.data,t.localDataCache=o?o.list:[],n.abrupt("return",o?o.list:[]);case 12:if(!["person","preparer","handler"].includes(t.name)){n.next=25;break}if(!t.localDataCache){n.next=17;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 17:return n.next=19,t.$get(Et);case 19:return r=n.sent,s=r.data,t.localDataCache=s,n.abrupt("return",s);case 23:n.next=72;break;case 25:if(!["warehouse"].includes(t.name)){n.next=34;break}return n.next=28,t.$get(It,he({pageNum:1,pageSize:30},a));case 28:return l=n.sent,c=l.data,t.localDataCache=c?c.list:[],n.abrupt("return",c?c.list:[]);case 34:if(!["customer","supplier","supplierCustomer"].includes(t.name)){n.next=44;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName"},n.next=38,t.$post(Tt,he({pageNum:1,pageSize:30},a));case 38:return u=n.sent,d=u.data,t.localDataCache=d?d.list:[],n.abrupt("return",d?d.list:[]);case 44:if(!["unit","brand","tag"].includes(t.name)){n.next=57;break}if(!t.localDataCache){n.next=49;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 49:return n.next=51,t.$post(Vt,{type:["unit","brand","tag"].indexOf(t.name)});case 51:return h=n.sent,f=h.data,t.localDataCache=f,n.abrupt("return",f);case 55:n.next=72;break;case 57:if(!["rateUnit"].includes(t.name)){n.next=71;break}if(t.replaceFields={key:"id",name:"unitName"},!t.localDataCache){n.next=63;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 63:return n.next=65,t.$post(Ft,t.dialogConfig.productId);case 65:return p=n.sent,m=p.data,t.localDataCache=m,n.abrupt("return",m);case 69:n.next=72;break;case 71:["account"].includes(t.name)?console.log("还没做"):console.log("未知的 name:",t.name);case 72:case"end":return n.stop()}}),n)})))()},generateLocalSearch:function(e){var t=this,n=[];return this.localDataCache.forEach((function(a){-1!==a[t.replaceFields.name].indexOf(e)&&n.push(a)})),n},clickHandle:function(){var e=this;this.disabled||this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.$emit("enterHandle",{data:null,action:"click",inputValue:this.inputValue,callback:function(){this.inputValue=""}}),setTimeout((function(){e.dialogFocus=!1,(e.value&&e.value.name!==e.inputValue||!e.value)&&(e.inputValue="")}),300))},enterHandle:function(){var e=this;this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.matchingData("enter"),setTimeout((function(){e.dialogFocus=!1}),300))},matchingData:function(e){var t=this,n=function(){var n=null,a=_e(t.value);if(t.dataList.length&&t.inputValue)for(var i=0;i<t.dataList.length;i++){var o=t.dataList[i];o[t.replaceFields.name]!==t.inputValue&&o[t.replaceFields.pinyin]!==t.inputValue&&o[t.replaceFields.code]!==t.inputValue&&o[t.replaceFields.barCode]!==t.inputValue||(n=o)}else a||t.inputValue!==t.value.name&&t.inputValue!==t.value.value||(n=t.value);t.restore&&"blur"===e&&(n||a||(t.inputValue=t.value.name||t.value.value,n=t.value)),t.$emit("enterHandle",{data:n,rows:n?[n]:null,action:e,inputValue:t.inputValue,baseRows:t.dataList}),t.inputValue=""};if(this.loading)var a=setInterval((function(){t.loading||(n(),clearInterval(a),a=null)}),500);else n()},changeHandle:function(){var e=this;if(this.isBlur||this.inputValue||this.$emit("clear"),this.readonly){var t=_e(this.value);this.inputValue=t?this.value.name||this.value.value:""}else this.inputValue&&this.generateRequest({keywords:this.inputValue}).then((function(t){e.dataList=t,e.loading=!1}))},blurHandle:function(){var e=this;this.isBlur=!1,setTimeout((function(){e.dialogFocus||(e.inputValue?(_e(e.value)||e.inputValue!==e.value.name)&&e.matchingData("blur"):e.restore?e.inputValue=e.value.name||e.value.value:e.value&&e.$emit("clear"))}),300)},focusHandle:function(){this.isBlur=!0,this.readonly=this.next&&!this.next("mixSearch")},focus:function(){this.$refs.mixSearchInput.focus()}}};const zt=Kt;var Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input",{ref:"mixSearchInput",staticClass:"mix-search-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,allowClear:e.allowClear,maxLength:e.maxLength,title:e.inputValue},on:{pressEnter:e.enterHandle,change:e.changeHandle,blur:e.blurHandle,focus:e.focusHandle},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[n("a-button",{attrs:{slot:"suffix",type:"link",icon:e.loading?"loading":"ellipsis"},on:{click:e.clickHandle},slot:"suffix"})],1)};Ht._withStripped=!0;const qt=pe({render:Ht,staticRenderFns:[]},void 0,zt,"data-v-225db93a",!1,void 0,!1,void 0,void 0,void 0);var Wt={product:{name:"SelectProduct",key:"id",value:"name",type:1},couponProduct:{name:"SelectProduct",key:"id",value:"name",type:2},recommendProduct:{name:"SelectProduct",key:"id",value:"name",type:3},purchaseProduct:{name:"SelectProduct",key:"id",value:"name",type:4},rateProduct:{name:"SelectProduct",key:"id",value:"name",type:6},person:{name:"PeopleModal",key:"id",value:"name"},preparer:{name:"PeopleModal",key:"id",value:"name"},handler:{name:"PeopleModal",key:"id",value:"name"},warehouse:{name:"ChooseEntrepot",key:"id",value:"name"},customer:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplier:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplierCustomer:{name:"ChoiceCustomer",key:"businessId",value:"name"},unit:{name:"GoodAttrModal",key:"id",value:"name"},brand:{name:"GoodAttrModal",key:"id",value:"name"},tag:{name:"GoodAttrModal",key:"id",value:"name"},payment:{name:"payment",key:"id",value:"name"},rateUnit:{name:"GoodAttrModal",key:"id",value:"unitName"}};const Ut={name:"Empty",components:{empty:Z.empty,loading:Z.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};Gt._withStripped=!0;const Yt=pe({render:Gt,staticRenderFns:[]},void 0,Ut,void 0,!1,void 0,!1,void 0,void 0,void 0);function Xt(e){return"object"===le(e)&&null!==e&&e.constructor&&e.constructor===Object}function Jt(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(Xt(e[o])&&Xt(n[o])?Jt(e[o],n[o]):!Xt(e[o])&&Xt(n[o])?(e[o]={},Jt(e[o],n[o])):e[o]=n[o])}}return e}Yt.install=function(e){e.component(Yt.name,Yt)};var Qt={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=he(he({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=he(he({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=he(he({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=he({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=Jt(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:le(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(he(he({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},Zt={name:"DSelectWarehouse",components:{STable:st,Empty:Yt,DOperationBox:ut,CellEllipsisTip:Ye},mixins:[fe,Qt],props:{visible:{type:Boolean,default:!1},width:{type:[String,Number],default:1e3},title:{type:String,default:"选择仓库"},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"id"}}},beforeClose:{type:Function,default:void 0},rules:{type:Object,default:function(){}},cache:{type:Boolean,default:!1},defaultValue:{type:[Object,Array],default:null},categoryInit:{type:Number,default:1},selectionLimit:{type:Number,default:100}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},data:function(){return{tableData:[],classifyOptions:[],classifyValue:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:""},resultMap:{},disabled:{warehouse:!1},opened:!1}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},baseReplaceFields:function(){return he({key:"id"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},allClassifyOptions:function(){return[{categoryName:"全部分类",haveChild:!0,isLeaf:!1,id:"1",parentId:"0",pathCode:"1",scopedSlots:{title:"custom"},children:[{categoryName:"未分类",haveChild:!1,id:"0",parentId:"1",isLeaf:!0,pathCode:"0",scopedSlots:{title:"custom"}}].concat(ue(this.classifyOptions))}]}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="id",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&(this.reset().dealResult().loadTableData(),this.loadClassify()),this.opened=!0)}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(It,he(he({},this.searchResult),{},{pageNum:t.current,pageSize:t.pageSize},this.rules)).then((function(t){t.data&&(e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},searchHandle:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},classifySearchHandle:function(e){console.log("分类检索:",e)},classifyOnSelect:function(e,t){console.log("classifyOnSelect",t,this.classifyValue);var n=t.node;this.searchResult.categoryPath=t.selected?n.dataRef.pathCode:null,this.handleSelectedClear().loadTableData()},loadClassify:function(e){var t=this;if(this.$get(Pt,{}).then((function(){})),e)return new Promise((function(n){var a=e.dataRef;t.$get(Pt,{categoryType:2,parentId:a.id}).then((function(e){var i=e.data;i.length&&(a.children=i,t.classifyOptions=ue(t.classifyOptions)),n()}))}));this.$get(Pt,{categoryType:2,parentId:this.categoryInit}).then((function(e){t.classifyOptions=e.data}))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const en=Zt;var tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-warehouse a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"warehouse-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入分类名称"},on:{search:e.classifySearchHandle}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"classify-wrap"},[n("a-tree",{attrs:{loadData:e.loadClassify,replaceFields:{children:"children",value:"id",title:"categoryName",key:"id"},"tree-data":e.allClassifyOptions,defaultExpandedKeys:["1"],defaultSelectedKeys:["1"],showIcon:""},on:{select:e.classifyOnSelect},model:{value:e.classifyValue,callback:function(t){e.classifyValue=t},expression:"classifyValue"}})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"仓库名称"},on:{search:e.searchHandle},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"index",attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(t,n,a){return[e._v("\n            "+e._s((e.pagination.current-1)*e.pagination.pageSize+a+1)+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:200,"data-index":"name",title:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:100,"data-index":"code",title:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{title:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{tip:""+t.regionName+t.address}},[e._v(" "+e._s(t.regionName)+e._s(t.address)+" ")])]}}])}),e._v(" "),n("a-table-column",{attrs:{width:75,title:"可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.erpId?"是":"否")+"\n          ")]}}])})],1)],1)])])};tn._withStripped=!0;const nn=pe({render:tn,staticRenderFns:[]},void 0,en,void 0,!1,void 0,!1,void 0,void 0,void 0);nn.install=function(e){e.component(nn.name,nn)};const an=pe({},void 0,{name:"DSelectWarehouseInput",props:{name:{type:String,default:"warehouse"},value:{type:[Object,String],default:void 0},resultName:{type:String,default:""},width:{type:[Number,String],default:240},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},restore:{type:Boolean,default:!1},require:{type:Boolean,default:!1},maxLength:{type:Number,default:40},next:{type:Function,default:null},origin:{type:String,default:"page"},valueMode:{type:[Boolean,String],default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{componentMap:Wt,visible:!1,modalValue:null,dialog:null,dialogProps:{},multiple:!1}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:{handler:function(e){this.modalValue=e||void 0},deep:!0,immediate:!0},name:function(){this.generateDialog()},visible:function(e){e&&this.generateDialog()}},created:function(){this.dialog||this.generateDialog()},methods:{generateDialog:function(){var e,t="string"==typeof this.modalValue?[]:this.modalValue?Object.keys(this.modalValue):[];this.multiple=!0===this.valueMode&&t&&!t.length,e={warehouse:{title:"选择仓库",multiple:!0===this.valueMode&&this.multiple}},this.dialog=nn,this.dialogProps=He(this.dialogProps,e[this.name],this.dialogConfig)},enterHandle:function(e){e.data?(this.dialogProps.rules&&(this.dialogProps.rules.keywords=""),this.resultExchange(e)):"blur"!==e.action?(this.dialogProps=He(this.dialogProps,{rules:{keywords:this.modalValue&&this.modalValue.name===e.inputValue?"":e.inputValue}}),this.generateDialog(),this.visible=!0):this.modalValue&&this.modalValue.name!==e.inputValue&&this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},clearHandle:function(){this.modalValue=void 0,this.$emit("input",void 0),this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},confirmHandle:function(e){["filterDropDown"].includes(this.origin)&&this.next&&this.next("mixSearch"),e?this.resultExchange(e):this.restore&&this.modalValue&&(this.modalValue=he({},this.modalValue))},resultExchange:function(e){var t=e.rows[0];"select"!==this.valueMode&&(this.$emit("input",t),this.modalValue=t),this.$emit("change",he(he({},e),{},{data:this.multiple?e.rows:t,rows:e.rows,multiple:this.multiple,config:{name:this.name,resultName:this.resultName,type:"mixSearch"}}))},getData:function(){return this.modalValue},resetData:function(){this.modalValue=void 0},setData:function(e){this.modalValue=e},focus:function(){this.$refs.SearchInput.focus()}},render:function(e){var t=this;return e("div",{attrs:{class:"select-good-attr",style:"width: ".concat(t.actWidth,";display: inline-block")}},[e("div",{attrs:{class:"input-box"}},[e("SearchInput",{props:{value:t.modalValue,placeholder:t.placeholder,maxLength:t.maxLength,disabled:t.disabled,name:t.name,allowClear:t.allowClear,next:t.next,restore:t.restore,dialogConfig:t.dialogProps},ref:"SearchInput",on:{enterHandle:t.enterHandle,clear:t.clearHandle}})]),e(this.dialog,{on:{confirm:t.confirmHandle,"update:visible":function(e){t.visible=e},cancel:t.confirmHandle},attrs:he({},this.dialogProps),props:he(he({},t.dialogProps),{},{visible:t.visible})})])},components:{SearchInput:qt}},void 0,void 0,void 0,!1,void 0,void 0,void 0);an.install=function(e){e.component(an.name,an)};var on=[],rn=function e(t){for(var n=0;n<t.length;n++){var a=t[n],i=a.id;on.push({key:i,title:a.categoryName}),a.children&&e(a.children)}},sn=function e(t,n){for(var a,i=0;i<n.length;i++){var o=n[i];o.children&&(o.children.some((function(e){return e.id===t}))?a=o.id:e(t,o.children)&&(a=e(t,o.children)))}return a},ln={name:"DSelectProduct",mixins:[fe],provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},props:{visible:{type:Boolean,default:!1},width:{tpye:[String,Number],default:1250},title:{type:String,default:"选择商品"},cache:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},replaceFields:{type:Object,default:function(){return{key:"id"}}},rules:{type:Object,default:function(){return{}}},origin:{type:String,default:"page"},sortList:{type:Array,default:void 0},mode:{type:String,default:"default"},defaultValue:{type:[Object,Array],default:null},displayItems:{type:Array,default:function(){return["classify","warehouse","brand","shelves","inventory","salesPromotion","bought"]}},selectionLimit:{type:Number,default:100}},data:function(){return{modalConfig:{},tableData:[],tableLoading:!1,scrollHeight:0,inventory:!1,promotion:!1,isBought:!1,searchResult:{type:4,isShowSku:!0,keywords:void 0,customerId:void 0,warehouseId:void 0,brandId:void 0,categoryPath:void 0,saleStatus:1,checkList:"",isOverrideWarehouse:"",showList:[]},resultMap:{warehouse:{key:"warehouseId",ref:"warehouseMixSearch"}},disabled:{warehouse:!1},headerConfig:{1:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],2:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}],3:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],4:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"avgPrice"}],5:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"},{key:"levelPrice"}],6:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"stock"},{key:"avgPrice"}],7:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],8:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],9:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"}],10:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}]},treeData:[{categoryName:"全部分类",key:"1",pathCode:"",id:"1",children:[{categoryName:"未分类",key:"2",isLeaf:!0,pathCode:"0",id:"2"}]}],name:"warehouse",keywordtree:"",expandedKeys:[],autoExpandParent:!0,searchValue:"",tabLable:"0"}},watch:{visible:function(e){var t=this;e&&(this.selectionContent.primaryKey=this.baseReplaceFields.key,this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.modalConfig={title:"选择商品"},this.$nextTick((function(){t.handleSelectedClear(),t.dealResult(),t.cache||(t.mergeResult(),t.dealResult(),"0"===t.tabLable?t.initTreeData():t.loadTableData())})))}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},sortColumns:function(){return this.sortList?this.sortList:this.headerConfig[this.searchResult.type]},baseReplaceFields:function(){return he({key:"id",warehouse:"warehouseId"},this.replaceFields)}},filters:{getPrice:function(e){return void 0===e||""===e||null===e?"-":e}},methods:{inventoryChange:function(){this.inventory?this.changeData(!0,"2"):this.changeData(!1,"2")},isBoughtChange:function(){this.isBought?(this.tabLable="1",this.changeData(!0,"1")):(this.searchResult.categoryPath="",this.tabLable="0",this.changeData(!1,"1"))},promotionChange:function(){this.promotion?this.changeData(!0,"3"):this.changeData(!1,"3")},onSearchTree:function(e){var t=this,n=e.target.value,a=on.map((function(e){return e.title.indexOf(n)>-1?sn(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:n,autoExpandParent:!0})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onLoadData:function(e){var t=this;return new Promise((function(n){e.dataRef.children?n():t.$get(Pt,{categoryType:0,parentId:e.dataRef.id}).then((function(a){"warehouse"===t.name&&(a.data.length&&(e.dataRef.children=a.data,t.treeData=ue(t.treeData),rn(t.treeData)),n())}))}))},initTreeData:function(){var e=this;this.$get(Pt,{categoryType:0,parentId:0}).then((function(t){e.treeData[0].children=e.treeData[0].children.concat(t.data),rn(e.treeData),e.treeData&&e.treeData.length>0&&(e.searchResult.categoryPath=e.treeData[0].pathCode,e.loadTableData())}))},changeData:function(e,t){var n;n=this.searchResult.checkList?this.searchResult.checkList.split(","):[],e?n.includes(t)||n.push(t):n.includes(t)&&n.splice(n.indexOf(t),1),this.searchResult.checkList=n.join(","),this.searchReset().loadTableData()},loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Lt,he(he({},Se(this.searchResult)),{},{pageNum:t.current,pageSize:t.pageSize,sort:-1})).then((function(t){t.data&&(e.tableData=t.data.list,e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},dealResult:function(){var e=this;if("warehouse"===this.mode&&(this.defaultValue&&this.defaultValue[this.baseReplaceFields.warehouse]?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=this.defaultValue[this.baseReplaceFields.warehouse]):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse&&(this.searchResult.warehouseId=this.rules.warehouse.id))),this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t],a=le(n);if("warehouse"===t&&"warehouse"===this.mode)return;"object"===a?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}if(this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=he(he({},e.selectionContent.selectedRows),{},se({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=se({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this.rules.checkList&&this.rules.checkList.length>0){var i=this.rules.checkList.split(",");i.includes("1")?(this.tabLable="1",this.searchResult.categoryPath="",this.isBought=!0):(this.tabLable="0",this.isBought=!1),i.includes("2")?this.inventory=!0:this.tabLable=!1,i.includes("3")?this.promotion=!0:this.promotion=!1}},onSearch:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},saleChange:function(e){var t=e.data;this.searchResult.saleStatus=t,this.searchReset().loadTableData()},warehouseChange:function(e){"warehouse"===this.mode?e.data?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=e.data.id):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse?this.searchResult.warehouseId=this.rules.warehouse.id:this.searchResult.warehouseId=void 0):(this.handleSelectedClear(),e.data?this.searchResult.warehouseId=e.data.id:this.searchResult.warehouseId=void 0),this.searchReset().loadTableData()},brandChange:function(){this.handleSelectedClear(),this.searchReset().loadTableData()},selectCurrentNode:function(e,t){this.handleSelectedClear();var n=t.node.dataRef;this.searchResult.categoryPath=t.selected?n.pathCode:null,this.searchReset().loadTableData()},tableChange:function(e,t,n){if(e.current===this.pagination.current||e.pageSize!==this.pagination.pageSize)return this.handleSelectedClear(),e.current=1,void this.loadTableData();this.loadTableData(e)},searchReset:function(){return this.tableData=[],this.pagination.current=1,this.pagination.total=0,this},rowClick:function(e){var t=this;console.log("单击",e),this.multiple?this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])?(this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]):(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e):(this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=se({},e[this.baseReplaceFields.key],e))},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.okHandle()},mergeResult:function(){this.pagination.current=1,this.searchResult={type:this.rules.type||4,isShowSku:this.rules.isShowSku||!0,keywords:this.rules.keywords||void 0,customerId:this.rules.customerId||void 0,warehouseId:this.rules.warehouseId||void 0,brandId:this.rules.brandId||void 0,categoryPath:this.rules.categoryPath||void 0,saleStatus:this.rules.saleStatus||void 0,checkList:this.rules.saleStatus||""}},okHandle:function(){if(!(this.selectionContent.selectedRowKeys.length>this.selectionLimit))return this.multiple?this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),void this.$emit("update:visible",!1)):void this.$emit("update:visible",!1):void(this.$attrs.product&&this.selectionContent.selectedRowKeys[0]===this.$attrs.product[this.baseReplaceFields.key]?this.$emit("update:visible",!1):this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.$emit("update:visible",!1)):this.$emit("update:visible",!1));this.$message.warning("最多选择".concat(this.selectionLimit,"条"))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()}},components:{OperationBox:ut,DSelectWarehouseInput:an,MixSelect:Nt,Empty:Yt,HImage:ze,CellEllipsisTip:Ye,STable:st}};const cn=ln;var un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-product a-table-common",attrs:{keyboard:!1,maskClosable:!1,title:e.modalConfig.title,width:e.width},on:{ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{ref:"productModal"},[n("div",{staticClass:"choose-product-content"},["0"===e.tabLable&&e.displayItems.includes("classify")?n("div",{staticClass:"tree-control"},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"请输入分类名称"},on:{change:e.onSearchTree},model:{value:e.keywordtree,callback:function(t){e.keywordtree=t},expression:"keywordtree"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"tree-control-contain"},[n("a-tree",{attrs:{"auto-expand-parent":e.autoExpandParent,"expanded-keys":e.expandedKeys,"load-data":e.onLoadData,replaceFields:{children:"children",title:"categoryName",key:"id"},"tree-data":e.treeData},on:{expand:e.onExpand,select:e.selectCurrentNode}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"table-control",class:{"table-width":"1"===e.tabLable||!e.displayItems.includes("classify")}},[n("operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{staticStyle:{width:"240px"},attrs:{maxLength:40,allowClear:"",placeholder:"商品名称/编号/条码/关键字"},on:{search:e.onSearch},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),e.displayItems.includes("warehouse")?n("DSelectWarehouseInput",{ref:"warehouseMixSearch",attrs:{disabled:e.disabled.warehouse,width:120,allowClear:"",name:"warehouse",placeholder:"仓库"},on:{change:e.warehouseChange}}):e._e(),e._v(" "),e.displayItems.includes("brand")?n("MixSelect",{attrs:{type:1,width:120,allowClear:""},on:{change:e.brandChange},model:{value:e.searchResult.brandId,callback:function(t){e.$set(e.searchResult,"brandId",t)},expression:"searchResult.brandId"}}):e._e(),e._v(" "),e.displayItems.includes("shelves")?n("MixSelect",{attrs:{list:[{id:1,name:"上架"},{id:0,name:"下架"}],width:120,"allow-clear":"",placeholder:"上下架"},on:{change:e.saleChange},model:{value:e.searchResult.saleStatus,callback:function(t){e.$set(e.searchResult,"saleStatus",t)},expression:"searchResult.saleStatus"}}):e._e(),e._v(" "),e.displayItems.includes("inventory")?n("a-checkbox",{staticClass:"check-line",on:{change:e.inventoryChange},model:{value:e.inventory,callback:function(t){e.inventory=t},expression:"inventory"}},[e._v("库存大于0\n          ")]):e._e(),e._v(" "),e.displayItems.includes("salesPromotion")?n("a-checkbox",{staticClass:"check-line",on:{change:e.promotionChange},model:{value:e.promotion,callback:function(t){e.promotion=t},expression:"promotion"}},[e._v("促销商品\n          ")]):e._e(),e._v(" "),e.displayItems.includes("bought")?n("a-checkbox",{staticClass:"check-line",on:{change:e.isBoughtChange},model:{value:e.isBought,callback:function(t){e.isBought=t},expression:"isBought"}},[e._v("买过商品\n          ")]):e._e()],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-content",attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,"row-selection":e.rowSelection,rowKey:e.selectionContent.primaryKey,scroll:{y:"calc(100vh - 490px)"},"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"code",attrs:{"data-index":"code",title:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"barCode",attrs:{title:"商品条码"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.barCode||"-"}})]}}])}),e._v(" "),n("a-table-column",{key:"cover",attrs:{title:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("h-image",{staticStyle:{width:"48px",height:"48px"},attrs:{initial:0,"preview-src-list":[t.cover],src:e._f("formatImage")(t.cover,48),fit:"cover",popover:""}})]}}])}),e._v(" "),n("a-table-column",{key:"name",attrs:{title:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.name}})]}}])}),e._v(" "),n("a-table-column",{key:"skuName",attrs:{"data-index":"skuName",title:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"warehouseName",attrs:{"data-index":"warehouseName",title:"仓库"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"stock",attrs:{"data-index":"stock",title:"库存数量"}}),e._v(" "),n("a-table-column",{key:"avgPrice",attrs:{"data-index":"avgPrice",title:"成本均价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"lastPrice",attrs:{"data-index":"lastPrice",title:"最近进价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"baseUnitName",attrs:{"data-index":"baseUnitName",title:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"unitPrice",attrs:{"data-index":"unitPrice",title:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"levelPrice",attrs:{"data-index":"levelPrice",title:"级别价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])})],1)],1)])])])};un._withStripped=!0;const dn=pe({render:un,staticRenderFns:[]},void 0,cn,void 0,!1,void 0,!1,void 0,void 0,void 0);return dn.install=function(e){e.component(dn.name,dn)},dn}))},"46a4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("s-table",{attrs:{"data-source":e.data,pagination:!1,rowKey:"titles",draggable:"",rowSelection:e.rowSelection,"cell-width":e.cellWidth,"exclude-width":["index"]},on:{"update:cellWidth":function(t){e.cellWidth=t},"update:cell-width":function(t){e.cellWidth=t}}},[n("a-table-column",{key:"index",attrs:{title:"索引",width:e.cellWidth.index},scopedSlots:e._u([{key:"default",fn:function(t,n,a){return[e._v(" "+e._s(a)+" ")]}}])}),n("a-table-column",{key:"titles",attrs:{title:"标题",width:e.cellWidth.titles},scopedSlots:e._u([{key:"filterDropdown",fn:function(t){var a=t.setSelectedKeys,i=t.selectedKeys,o=t.confirm,r=t.clearFilters,s=t.column;return n("d-filter-dropdown",{ref:"numberH",attrs:{name:"amount",data:{setSelectedKeys:a,selectedKeys:i,confirm:o,clearFilters:r,column:s}},on:{confirm:e.searchResultDeal}})}},{key:"default",fn:function(t,n,a){return[e._v(" "+e._s(t.titles)+"="+e._s(a)+" ")]}}])}),n("a-table-column",{key:"content",attrs:{title:"内容","data-index":"content",width:e.cellWidth.content},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t)+" ")]}}])}),n("a-table-column",{key:"desc",attrs:{title:"备注","data-index":"desc",width:e.cellWidth.desc}})],1),n("a-table",{staticClass:"footer-table",attrs:{showHeader:!1,pagination:!1,"data-source":e.totalData,rowSelection:e.rowSelection,rowKey:"titles"},on:{change:e.onDrag}},[n("a-table-column",{key:"index",attrs:{title:"索引",customCell:function(t,n){return e.customCell(2,t,n)},width:e.cellWidth.index},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t)+" ")]}}])}),n("a-table-column",{key:"titles",attrs:{width:e.cellWidth.titles,"data-index":"titles"}}),n("a-table-column",{key:"content",attrs:{width:e.cellWidth.content,"data-index":"content"}}),n("a-table-column",{key:"desc",attrs:{width:e.cellWidth.desc,"data-index":"desc"}})],1),n("DMixSearch",{ref:"mixSearch",attrs:{name:"account",valueMode:!0,dialogConfig:{verifyTotalMoney:!1,customerId:"105320613599559680"}},on:{change:e.handleChange},model:{value:e.accountModel,callback:function(t){e.accountModel=t},expression:"accountModel"}}),n("a-button",{on:{click:function(t){e.productVisible=!0}}},[e._v("点击")]),n("a-button",{on:{click:e.handleMixSearchFocus}},[e._v("Focus")]),n("div",[n("DSelectProduct",{attrs:{rules:{type:4},visible:e.productVisible},on:{confirm:e.handleConfirm,"update:visible":function(t){e.productVisible=t}}}),n("div",[n("DDropSuspension",{attrs:{title:"哇哇"}})],1)],1),n("AddressBox"),n("DSelectPayAccount",{attrs:{visible:e.dSelectPayAccountVisible,type:1,dueMoney:1e3,customerId:12312,excludeAccountTypes:[]},on:{"update:visible":function(t){e.dSelectPayAccountVisible=t},confirm:e.handlePay}}),n("a-button",{on:{click:function(t){e.dSelectPayAccountVisible=!0}}},[e._v("账户选择")]),n("DMixTreeSelect",{attrs:{name:"area"}}),n("MixModal",{attrs:{visible:e.mixModalVisible,defaultValue:[15e4,150100,150200,150300,150400,150500,150600,150700,150800,150900,152200,152500,152900],name:"area",multiple:"",extrasOperations:["refresh","checkAll"]},on:{"update:visible":function(t){e.mixModalVisible=t},confirm:e.handleConfirm}}),n("a-button",{on:{click:function(t){e.mixModalVisible=!0}}},[e._v(" Mix Modal ")]),n("DMixSelect",{staticClass:"mix-sdsadas",staticStyle:{color:"red"},attrs:{type:14,disabled:!0}}),n("DInputSearch",{model:{value:e.inputSearchValue,callback:function(t){e.inputSearchValue=t},expression:"inputSearchValue"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索 ")])],1),n("DSelectWarehouse",{attrs:{visible:e.warehouseVisible,defaultValue:{id:"87640380953145344",sort:4564,name:"测试仓库2",categoryId:"87560154390810624",categoryName:"全部分类",categoryPath:"87560154390810624",erpId:0,isDefault:0,code:"112",address:"",province:13e4,city:130100,district:130103,regionName:"河北省石家庄市桥东区"}},on:{"update:visible":function(t){e.warehouseVisible=t}}}),n("a-button",{on:{click:function(t){e.warehouseVisible=!0}}},[e._v(" 仓库 ")]),n("d-select-customer",{attrs:{multiple:"",isShowPrice:""},on:{confirm:e.onCustomerConfirm}}),n("a-button",{on:{click:function(t){e.customerVisible=!0}}},[e._v("客户")]),n("DSelectProductAttr",{attrs:{visible:e.selectProductAttrVisible,type:3},on:{"update:visible":function(t){e.selectProductAttrVisible=t}}}),n("a-button",{on:{click:function(t){e.selectProductAttrVisible=!0}}},[e._v("单位")]),n("a-button",{on:{click:function(t){e.customerVisible=!0}}},[e._v("customerVisible")]),n("set-customer-range",{attrs:{visible:e.customerVisible,data:{customerClassification:2,degreePrice:2,salesTerritory:2,brand:0,specifiedCustomer:1,includeVisitor:!0,salesTerritoryList:[{id:"77479764432121856",isChecked:null,name:"四川",pathCode:"77479764432121856",fullPath:"四川",hasChildren:!0,isLeaf:!1,bindCustomerNum:null,title:"四川",dataRef:{id:"77479764432121856",isChecked:null,name:"四川",pathCode:"77479764432121856",fullPath:"四川",hasChildren:!0,isLeaf:!1,bindCustomerNum:null,scopedSlots:{icon:"radio"}}},{id:1,isChecked:!1,name:"暂无销售区域",pathCode:"1",fullPath:"",hasChildren:!1,isLeaf:!0,bindCustomerNum:1,title:"暂无销售区域",dataRef:{id:1,isChecked:!1,name:"暂无销售区域",pathCode:"1",fullPath:"",hasChildren:!1,isLeaf:!0,bindCustomerNum:1,scopedSlots:{icon:"radio"}}},{id:"87493521741246464",isChecked:null,name:"销售区域销售区域销售区域销售区",pathCode:"87493521741246464",fullPath:"销售区域销售区域销售区域销售区",hasChildren:!0,isLeaf:!1,bindCustomerNum:null,title:"销售区域销售区域销售区域销售区",dataRef:{id:"87493521741246464",isChecked:null,name:"销售区域销售区域销售区域销售区",pathCode:"87493521741246464",fullPath:"销售区域销售区域销售区域销售区",hasChildren:!0,isLeaf:!1,bindCustomerNum:null,scopedSlots:{icon:"radio"}}}],degreePriceList:[{id:"75238611890667520",name:"默认订货价",levelType:0},{id:"75239200326352896",name:"预售级别价",levelType:1}],specifiedCustomerList:[{businessId:"109300113844146176",name:"新增非订货",spellName:"xinzengfeidinghuo",region:"销售区域是",pathCode:"85811380364017665",customerType:[{value:"96658716078866432",label:"测试分类"}],priceLevel:null,priceLevelId:0,depotName:null,depotId:0,orderCustomerType:4,orderContactsList:[],balanceList:[{value:1,label:0},{value:2,label:0},{value:3,label:0},{value:4,label:0},{value:5,label:0},{value:6,label:0}],superiorList:[{value:"68754523361284096",label:"舒子栋"}],id:"109300113844146176"},{businessId:"109299823417954304",name:"新增订货1",spellName:"xinzengdinghuo1",region:"销售区域销售区域销售区域销售区",pathCode:"87493521741246464",customerType:[{value:"87983197233713152",label:"淡淡的"},{value:"96658716078866432",label:"测试分类"}],priceLevel:"默认订货价",priceLevelId:"75238611890667520",depotName:"成都6仓",depotId:"88357379144425472",orderCustomerType:2,orderContactsList:[{value:"109299830229504000",label:"新增联系人1"}],balanceList:[{value:1,label:0},{value:2,label:0},{value:3,label:0},{value:4,label:0},{value:5,label:0},{value:6,label:0}],superiorList:[{value:"69730231140392960",label:"维维01"},{value:"69857688682627072",label:"吴冬梅"}],id:"109299823417954304"},{businessId:"105762080875847680",name:"3333122",spellName:"3333122",region:"销售区域销售区域销售区域销售区",pathCode:"87493521741246464",customerType:[{value:"87983197233713152",label:"淡淡的"},{value:"96658548436729856",label:"测试"},{value:"96658716078866432",label:"测试分类"},{value:"91248316288679936",label:"你哈"}],priceLevel:"默认订货价",priceLevelId:"75238611890667520",depotName:"成都7仓",depotId:"88358326096633856",orderCustomerType:3,orderContactsList:[{value:"105966845446561792",label:"lqy 联系人 不要删"}],balanceList:[{value:1,label:0},{value:2,label:0},{value:3,label:0},{value:4,label:0},{value:5,label:0},{value:6,label:0}],superiorList:[{value:"68754523361284096",label:"舒子栋"}],id:"105762080875847680"}],customerClassificationList:[{value:"96658548436729856",label:"测试",id:"96658548436729856"},{value:"91248316288679936",label:"你哈",id:"91248316288679936"}],goodsBrandShorts:[],goodsClassificationShorts:[],goodsShorts:[]}},on:{"update:visible":function(t){e.customerVisible=t}}}),n("d-select-address",{attrs:{visible:e.selectAddressVisible},on:{"update:visible":function(t){e.selectAddressVisible=t},confirm:e.handleChange}}),n("a-button",{on:{click:function(t){e.selectAddressVisible=!0}}},[e._v("选择地址")]),n("DUploadModal",{attrs:{visible:e.dUploadModalVisible,beforeClose:e.onUploadModalBeforeClose},on:{"update:visible":function(t){e.dUploadModalVisible=t}}}),n("a-button",{on:{click:function(t){e.dUploadModalVisible=!0}}},[e._v("上传附件")]),n("d-select-people",{attrs:{visible:e.selectPeopleVisible,multiple:"",defaultValue:{stafferId:"69730231140392960",isLocked:0,isDismiss:0,leaderName:null,isAdmin:0,stafferNo:"1012",name:"维维01",departmentName:"成都蓝景信息技术有限公司",entryDate:1626055382628,mobile:"13982043448",email:"",duty:"",leaderId:null,idCard:"",dutyLevel:"",gender:1,loginRange:"成都蓝景信息技术有限公司,分公司a",qq:"",birthday1:0,birthday2:0,bloodType:"",shengXiao:"",xingZuo:"",schoolName:"",educationalBackground:"",officePhone:"",resideAddress:"",homeAddress:"",emergencyContactName:"",emergencyContactPhone:"",summary1:"",wxStatus:1,id:"__vue_devtool_undefined__",value:"维维01"},selectionLimit:3},on:{"update:visible":function(t){e.selectPeopleVisible=t},confirm:e.handleChange}}),n("a-button",{on:{click:function(t){e.selectPeopleVisible=!0}}},[e._v("经手人")]),n("div",{staticStyle:{width:"50px",height:"50px"}},[n("h-image",{attrs:{src:"https://ryanc.cc/avatar",popover:!0,previewSrcList:["https://ryanc.cc/avatar"],popoverConfig:{placement:"right",trigger:"hover",width:"300px",height:"100%"}}},[n("a-icon",{staticClass:"img-icon",attrs:{slot:"error",type:"picture"},slot:"error"})],1)],1),n("Trade",{ref:"trade"})],1)},i=[],o=n("0069"),r=n.n(o),s=n("69b6"),l=n.n(s),c=n("fae9"),u=n.n(c),d=n("b369"),h=n.n(d),f=n("2c08"),p=n.n(f),m=n("ee2a"),g=n.n(m),v=n("646b"),y=n.n(v),b=n("96d3"),w=n.n(b),k=n("2872"),C=n.n(k),_=n("ec0f"),S=n.n(_),x=n("ab26"),R=n.n(x),O=n("6968"),D=n.n(O),L=n("00eef"),T=n.n(L),$=n("937e"),V=n.n($),I=n("8b5c"),F=n.n(I),E=n("847b"),P=n.n(E),A=n("ce95"),N=n.n(A),M=n("4562"),j=n.n(M),B=n("f9f1"),K=n.n(B),z=n("ac08"),H=n.n(z),q=n("b1d8"),W=n.n(q),U=n("1e20"),G=n.n(U),Y=n("58e8"),X=n.n(Y),J={name:"StableDemo",mixins:[X.a,G.a],components:{STable:W.a,DFilterDropdown:H.a,DMixSearch:K.a,DSelectProduct:j.a,DDropSuspension:N.a,AddressBox:P.a,DSelectPayAccount:F.a,DMixTreeSelect:V.a,MixModal:T.a,DMixSelect:D.a,DInputSearch:R.a,DSelectWarehouse:S.a,DSelectCustomer:C.a,DSelectProductAttr:w.a,SetCustomerRange:y.a,DSelectAddress:g.a,DUploadModal:p.a,HImage:h.a,DSelectPeople:u.a,Trade:l.a},data:function(){return{data:[{titles:"这是一只哇哇橘",content:"哇哇橘，橘哇哇。",desc:"这里是备注"},{titles:"这是一只哇哇橘2",content:"哇哇橘，橘哇哇。",desc:"这里是备注2"}],cellWidth:{index:100,titles:100,content:100,desc:100},totalData:[{titles:"表格列",content:"内容列",desc:"备注列"}],productVisible:!1,warehouseVisible:!1,map:null,inputSearchValue:"",customerVisible:!1,mixModalVisible:!1,dSelectPayAccountVisible:!1,selectProductAttrVisible:!1,selectAddressVisible:!1,dUploadModalVisible:!1,selectPeopleVisible:!1,mixSearchModel:{name:1},accountModel:null}},created:function(){console.log(r()())},methods:{onDrag:function(){},customCell:function(e,t,n){return console.log(t,n),{attrs:{colSpan:e}}},searchResultDeal:function(e){console.log(e)},handleConfirm:function(e){console.log(e)},handleChange:function(e){console.log("回调来了",e)},handlePay:function(e){console.log("回调来了",e)},onCustomerConfirm:function(e){console.log("选择客户：",e)},onUploadModalBeforeClose:function(e){var t=e.fileList,n=e.callback;console.log("fileList:",t),n((function(e,t){console.log("status:",e),console.log("result:",t)}))},handleMixSearchFocus:function(){this.$refs.mixSearch.focus()}}},Q=J,Z=(n("8070"),n("2877")),ee=Object(Z["a"])(Q,a,i,!1,null,"3fa82bd1",null);t["default"]=ee.exports},"4e82":function(e,t,n){"use strict";var a=n("23e7"),i=n("e330"),o=n("59ed"),r=n("7b0b"),s=n("07fa"),l=n("577e"),c=n("d039"),u=n("addb"),d=n("a640"),h=n("04d1"),f=n("d998"),p=n("2d00"),m=n("512ce"),g=[],v=i(g.sort),y=i(g.push),b=c((function(){g.sort(void 0)})),w=c((function(){g.sort(null)})),k=d("sort"),C=!c((function(){if(p)return p<70;if(!(h&&h>3)){if(f)return!0;if(m)return m<603;var e,t,n,a,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)g.push({k:t+a,v:n})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),_=b||!w||!k||!C,S=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:l(t)>l(n)?1:-1}};a({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&o(e);var t=r(this);if(C)return void 0===e?v(t):v(t,e);var n,a,i=[],l=s(t);for(a=0;a<l;a++)a in t&&y(i,t[a]);u(i,S(e)),n=i.length,a=0;while(a<n)t[a]=i[a++];while(a<l)delete t[a++];return t}})},"4ec9":function(e,t,n){"use strict";var a=n("6d61"),i=n("6566");a("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"4fad":function(e,t,n){var a=n("d039"),i=n("861d"),o=n("c6b6"),r=n("d86b"),s=Object.isExtensible,l=a((function(){s(1)}));e.exports=l||r?function(e){return!!i(e)&&((!r||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},"58e8":function(e,t,n){!function(t,a){e.exports=a(n("99af"),n("159b"),n("caad"),n("2532"),n("4de4"))}(0,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function a(e){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?n(Object(i),!0).forEach((function(n){t(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var i={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return a(a({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=a({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var n=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(t){return t!==e[n.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=t({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var n=this;if(this.rules)for(var i in this.rules)if(this.rules.hasOwnProperty(i)){var o=this.rules[i];"object"===e(o)?(this.$refs[this.resultMap[i].ref]&&this.$refs[this.resultMap[i].ref].setData(o),this.resultMap[i]?this.searchResult[this.resultMap[i].key]=o.id:this.searchResult[i]=o.id,this.disabled[i]=!!o.disabled):this.resultMap[i]?this.searchResult[this.resultMap[i].key]=o:this.searchResult[i]=o}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(e){n.selectionContent.selectedRowKeys.push(e[n.baseReplaceFields.key]),n.selectionContent.selectedRows=a(a({},n.selectionContent.selectedRows),{},t({},e[n.baseReplaceFields.key],e))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=t({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};return i}))},"646b":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("dca8"),n("b64b"),n("d3b7"),n("a434"),n("d81d"),n("159b"),n("7db0"),n("caad"),n("2532"),n("99af"),n("4de4"),n("04b3"),n("cfba"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3177"),n("2ca0"),n("7edb"),n("aa47"),n("fb19"),n("73c8"),n("4e82"),n("9911"),n("e439"),n("90b7"),n("07ac"),n("b680"),n("50f6"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G,Y,X,J,Q,Z,ee,te,ne,ae){"use strict";function ie(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var oe=ie(p),re=ie(w),se=ie(U),le=ie(G),ce=ie(Y),ue=ie(ae);function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function he(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function fe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=he(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const ye={name:"Empty",components:{empty:f.empty,loading:f.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};be._withStripped=!0;const we=ve({render:be,staticRenderFns:[]},void 0,ye,void 0,!1,void 0,!1,void 0,void 0,void 0);function ke(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||he(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){Ce(o,a,i,r,s,"next",e)}function s(e){Ce(o,a,i,r,s,"throw",e)}r(void 0)}))}}we.install=function(e){e.component(we.name,we)};var Se=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),xe=Se,Re="/gateway/saas-platform-service/api/v1/",Oe="/gateway/goodsservice/api/v1/",De="/gateway/customer-service/api/v1/",Le="/gateway/logisticsservice/api/v1/",Te={province:"".concat(Re,"address/province"),city:"".concat(Re,"address/city"),district:"".concat(Re,"address/district")},$e="".concat(Oe,"goods/custom/list"),Ve="".concat(De,"order/get_region_list"),Ie="".concat(De,"order/get_customer_list"),Fe="".concat(De,"order/get_customer_type_list"),Ee="".concat(Oe,"setting/query_goods_attr_setting_list"),Pe="".concat(Oe,"price_system/leve_price_name/select_list"),Ae="".concat(Oe,"/category/get_category_list_with_nocategory_qty"),Ne="".concat(Oe,"price_system/leve_price/select_list"),Me="".concat(Le,"deliveryMethod/list"),je="".concat(Le,"logisticsCorp/system/list"),Be="".concat(Le,"logisticsCorp/custom/list"),Ke={name:"DSelectSaleArea",props:{width:{require:!1,type:String,default:"120"},maxHeight:{require:!1,type:String,default:"300"},placeholder:{require:!1,type:String,default:"销售区域"}},data:function(){return{value:void 0,parentId:0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},treeData:[],apiName:null}},created:function(){this.treeData.length||this.getList([],!1)},methods:{openSelect:function(){this.treeData.length||this.getList([],!1)},getList:function(){var e=arguments,t=this;return _e(xe.mark((function n(){var a,i,o,r;return xe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:[],i=e.length>1&&void 0!==e[1]&&e[1],n.prev=2,n.next=5,t.$post(Ve,{businessId:t.parentId});case 5:o=n.sent,(r=o.data).length>0&&(i?(a.children=r,t.treeData=ke(t.treeData)):t.treeData=r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onLoadData:function(e){var t=this;return new Promise((function(n){var a=e.dataRef;a.hasChildren?setTimeout((function(){t.parentId=a.id,t.getList(a,!0),n()}),300):n()}))},changeValue:function(e){this.$emit("sureSelect",e)}}};const ze=Ke;var He=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{style:{width:e.width+"px"},attrs:{allowClear:"","tree-data-simple-mode":"","dropdown-style":{width:+e.width+60+"px",maxHeight:e.maxHeight+"px",overflow:"auto"},"tree-data":e.treeData,placeholder:e.placeholder,"load-data":e.onLoadData,replaceFields:e.replaceFields},on:{change:e.changeValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})};He._withStripped=!0;const qe=ve({render:He,staticRenderFns:[]},void 0,ze,"data-v-1c52a95a",!1,void 0,!1,void 0,void 0,void 0);qe.install=function(e){e.component(qe.name,qe)};const We={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:oe.default},methods:{handleClick:function(){this.$emit("click")}}};var Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};Ue._withStripped=!0;const Ge=ve({render:Ue,staticRenderFns:[]},void 0,We,void 0,!1,void 0,!1,void 0,void 0,void 0);function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Xe(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}function Je(e){if(!e&&"object"!==Ye(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Ye(e[n])?t[n]=Je(e[n]):t[n]=e[n]})),t}Ge.install=function(e){e.component(Ge.name,Ge)},"object"!==("undefined"==typeof Int8Array?"undefined":Ye(Int8Array))&&(re.default.prototype.$isServer||document.childNodes);const Qe={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:q.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:q.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&q.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};Ze._withStripped=!0;const et=ve({render:Ze,staticRenderFns:[]},void 0,Qe,void 0,!1,void 0,!1,void 0,void 0,void 0);et.install=function(e){e.component(et.name,et)};const tt={name:"DOperationBox",components:{IconFontBox:Ge,CellEllipsisTip:et},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return ge({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(ge(ge({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=Je(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=ge({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};nt._withStripped=!0;const at=ve({render:nt,staticRenderFns:[]},void 0,tt,void 0,!1,void 0,!1,void 0,void 0,void 0);function it(){return it=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},it.apply(this,arguments)}at.install=function(e){e.component(at.name,at)};var ot=["attrs","props","domProps"],rt=["class","style","directives"],st=["on","nativeOn"],lt=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},ct=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==ot.indexOf(n))e[n]=it({},e[n],t[n]);else if(-1!==rt.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==st.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?lt(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function ut(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var dt=se.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function ht(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var ft=["key"],pt={},mt={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return ge({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:ge({},this.$listeners)};return t("a-table",ct([{},{props:ge(ge({},n),{},{columns:a}),scopedSlots:ge({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":ce.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=X.getKey(t),i=X.getStyle(t),o=X.getClass(t),r=X.getOptionProps(t),s=X.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[X.camelize(t)]=s[e]}));var c=X.getSlots(t),u=c.default,d=ht(c,["default"]),h=dt({},d,r,{style:i,class:o},l);if(a&&(h.key=a),X.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=ht(t,["slots","scopedSlots"]),u=dt({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){pt[e.key]=e.width||0}));var o=re.default.observable(pt),r=null,s=t.key,l=ut(t,ft),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",ct([{attrs:{width:c.width}},l]),[n]):e("th",ct([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",ct([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(ce.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=ge(ge({},a.cellWidth),{},pe({},c.key,c.width));a.$emit("update:cellWidth",ge({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);le.default.create(t[t.length>1?1:0],ge(ge({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(mt.name,mt)}},gt={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return ge(ge({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=ge({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=pe({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===Ye(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=ge(ge({},e.selectionContent.selectedRows),{},pe({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=pe({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};function vt(e){return"object"===Ye(e)&&null!==e&&e.constructor&&e.constructor===Object}function yt(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(vt(e[o])&&vt(n[o])?yt(e[o],n[o]):!vt(e[o])&&vt(n[o])?(e[o]={},yt(e[o],n[o])):e[o]=n[o])}}return e}var bt={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=ge(ge({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=ge(ge({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=ge(ge({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=ge({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=yt(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:Ye(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(ge(ge({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},wt={name:"DSelectCustomer",components:{Empty:we,SelectSaleArea:qe,DOperationBox:at,CellEllipsisTip:et,STable:mt},mixins:[gt,bt],props:{visible:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},cache:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:1e3},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"businessId"}}},attrs:{type:Object,default:function(){}},defaultSelectedRowKeys:{type:Object,default:function(){return{selectedRowKeys:[],selectedRows:[]}}},isShowPrice:{type:Boolean,default:!1},customerType:{type:Array,default:function(){return[1,2,3,4]}},sortList:{type:Array,default:void 0},defaultValue:{type:[Array,Object],default:void 0},beforeClose:{type:Function,default:void 0},selectionLimit:{type:Number,default:100},placeholder:{type:String,default:null}},data:function(){return{tableData:[],levelPrices:{data:[],loading:!1},searchResult:{customerTypeIds:[],keywords:null,priceLevelId:null,regionId:null},customers:{loading:!1},categories:{keyword:"",data:[],loading:{}}}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},filteredCategories:function(){var e=this;return this.categories.keyword?this.categories.data.filter((function(t){return t.label.indexOf(e.categories.keyword)>-1})):this.categories.data},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.customers.loading}})}},baseReplaceFields:function(){return ge({key:"businessId"},this.replaceFields)},sortColumns:function(){return this.sortList?this.sortList:[{key:"name"},{key:"region"},{key:"priceLevel"}]},getTitle:function(){return this.customerType.includes(1)&&this.customerType.includes(2)?"客户":this.customerType.includes(1)?"供应商":"客户"},tablePlaceholder:function(){return this.placeholder?this.placeholder:"".concat(this.getTitle,"名称/联系人/手机")}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="businessId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.cache||(this.reset().dealResult().loadTableData(),this.handleFetchCategories(),this.handleFetchLevelPrice()))},defaultSelectedRowKeys:{handler:function(e){var t=ee.deepClone(e);this.selectionContent.selectedRowKeys=t.selectedRowKeys,this.selectionContent.selectedRows=t.selectedRows},immediate:!0}},filters:{balance:function(e,t){if(e){var n=e.filter((function(e){return e.value===t}));return n.length?n[0].label:"-"}return"-"}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.customers.loading=!0,this.$post(Ie,ge(ge({pageNum:t.current,pageSize:t.pageSize,orderCustomerTypeList:this.customerType,keyword:this.searchResult.keywords},this.searchResult),this.rules)).then((function(t){e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum})).finally((function(){e.customers.loading=!1}))},onCustomersSearch:function(e,t){this.searchResult[e]=t,this.handleSelectedClear().loadTableData()},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},handleFetchCategories:function(){var e=this;this.categories.loading=!0,this.$post(Fe).then((function(t){e.categories.data=t.data||[]})).catch((function(e){return console.error(e)})).finally((function(){e.categories.loading=!1}))},handleFetchLevelPrice:function(){var e=this;this.isShowPrice&&(this.levelPrices.loading=!0,this.$post(Ne).then((function(t){e.levelPrices.data=t.data||[]})).finally((function(){e.levelPrices.loading=!1})))},onOperationOptionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const kt=wt;var Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",e._b({staticClass:"d-select-customer a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title||"选择"+e.getTitle,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},"a-modal",e.attrs,!1),[n("div",{staticClass:"customer-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{attrs:{maxLength:40,placeholder:"请输入分类名称"},model:{value:e.categories.keyword,callback:function(t){e.$set(e.categories,"keyword",t)},expression:"categories.keyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.categories.loading,expression:"categories.loading"}],staticClass:"classify-wrap"},[n("a-checkbox-group",{attrs:{name:"checkboxgroup"},on:{change:function(t){return e.onCustomersSearch("customerTypeIds",arguments[0])}},model:{value:e.searchResult.customerTypeIds,callback:function(t){e.$set(e.searchResult,"customerTypeIds",t)},expression:"searchResult.customerTypeIds"}},[n("a-row",[n("a-space",{attrs:{direction:"vertical"}},e._l(e.filteredCategories,(function(t,a){return n("a-col",{key:a,attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])],1)})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationOptionClick}},[n("a-space",[n("a-input-search",{attrs:{maxLength:40,placeholder:e.tablePlaceholder},on:{search:function(t){return e.onCustomersSearch("keywords",arguments[0])}},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.isShowPrice?n("a-select",{staticStyle:{width:"120px"},attrs:{loading:e.levelPrices.loading,allowClear:"",placeholder:"级别价"},on:{change:function(t){return e.onCustomersSearch("priceLevelId",arguments[0])}}},e._l(e.levelPrices.data,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):e._e(),e._v(" "),n("select-sale-area",{staticClass:"select-area",attrs:{placeholder:"销售区域"},on:{sureSelect:function(t){return e.onCustomersSearch("regionId",arguments[0])}}})],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.customers.loading,expression:"customers.loading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate,"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{title:e.getTitle+"名称","data-index":"name"}}),e._v(" "),n("a-table-column",{key:"region",attrs:{title:"销售区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2,tip:""+t.region}},[e._v("\n              "+e._s(t.region)+"\n            ")])]}}])}),e._v(" "),n("a-table-column",{key:"priceLevel",attrs:{"data-index":"priceLevel",title:"级别价"}}),e._v(" "),n("a-table-column",{key:"balanceList1",attrs:{title:"应收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,1))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList2",attrs:{title:"应付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,2))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList3",attrs:{title:"预收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,3))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList4",attrs:{title:"预付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,4))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList5",attrs:{title:"积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,5))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList6",attrs:{title:"第三方ERP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,6))+"\n          ")]}}])})],1)],1)])])};Ct._withStripped=!0;const _t=ve({render:Ct,staticRenderFns:[]},void 0,kt,void 0,!1,void 0,!1,void 0,void 0,void 0);_t.install=function(e){e.component(_t.name,_t)};var St=re.default.prototype.$isServer,xt=!St&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},Rt=!St&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};re.default.use(ue.default);var Ot={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},Dt=!re.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",Lt={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:Ot.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===Ot.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=Xe((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=Xe((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),xt(document,"keydown",this._keyDownHandler),xt(document,Dt,this._mouseWheelHandler)},deviceSupportUninstall:function(){Rt(document,"keydown",this._keyDownHandler),Rt(document,Dt,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=Xe((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),xt(document,"mousemove",this._dragHandler),xt(document,"mouseup",(function(){Rt(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(Ot),t=(Object.values(Ot).indexOf(this.mode)+1)%e.length;this.mode=Ot[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=ge({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const Tt=Lt;var $t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};$t._withStripped=!0;const Vt=ve({render:$t,staticRenderFns:[]},void 0,Tt,void 0,!1,void 0,!1,void 0,void 0,void 0);var It="",Ft=function(){return void 0!==document.documentElement.style.objectFit},Et=function(e,t){return Pt(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},Pt=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},At="none",Nt="contain",Mt="cover",jt="fill",Bt="scale-down",Kt={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:Ge,IconFont:oe.default,ImageViewer:Vt},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?Ft()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!Ft()&&this.fit!==jt},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(Et(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===Bt&&(e=t<i&&n<o?At:Nt),e){case At:return{width:"auto",height:"auto"};case Nt:return r?{width:"auto"}:{height:"auto"};case Mt:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){It=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=It,this.showViewer=!1}}};const zt=Kt;var Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};Ht._withStripped=!0;var qt={name:"SelectProduct",mixins:[gt],components:{Empty:we,HImage:ve({render:Ht,staticRenderFns:[]},void 0,zt,void 0,!1,void 0,!1,void 0,void 0,void 0),CellEllipsisTip:et},props:{value:{type:[Array,Object],default:function(){return[]}},title:{type:String,default:"选择商品"},visible:{type:Boolean,default:!1},okText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},beforeClose:{type:Function,default:null},productType:{type:Number,default:1},replaceFields:{type:Object,default:function(){return{key:"id"}}}},data:function(){return{loading:!1,scrollHeight:532,tableLoading:!1,selectionConfig:{selections:!1},modalReplaceFields:{key:"id"}}},watch:{visible:function(e){e&&(this.modalReplaceFields=ge({key:"id"},this.replaceFields),this.selectionContent.primaryKey=this.modalReplaceFields.key,this.loadTableData())}},computed:{tableConfig:function(){return{locale:{emptyText:this.tableLoading?"加载中":""}}},modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.loading=!0,this.request({isShowSku:!0,pageNum:t.current,pageSize:t.pageSize,type:this.productType,sort:-1}).then((function(n){console.log(n),e.tableData=n.data&&n.data.list||[],t.total=n.data.total,e.pagination=t,e.loading=!1})).catch((function(){e.loading=!1}))},request:function(e){return this.$get($e,e)},okHandle:function(){this.beforeClose?this.beforeClose({selectedRowKeys:this.selectionContent.selectedRowKeys,selectedRow:this.getRowData()},this.cancelHandle):(this.$emit("confirm",{selectedRowKeys:this.selectionContent.selectedRowKeys,selectedRow:this.getRowData()}),this.cancelHandle())},cancelHandle:function(){this.modalVisible=!1},pageChange:function(e){var t=e.pageSize,n=e.current;this.pagination.pageSize=t,this.pagination.current=n,this.loadTableData()}}};const Wt=qt;var Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"add-modal",staticStyle:{height:"90%"},attrs:{title:e.title,"ok-text":e.okText,"cancel-text":e.cancelText,width:1e3,maskClosable:!1,keyboard:!1},on:{ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("a-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"row-selection":e.rowSelection,"data-source":e.tableData,locale:e.tableConfig.locale,scroll:{y:e.scrollHeight},pagination:e.pagination,"row-key":e.modalReplaceFields.key},on:{change:e.pageChange}},[n("a-table-column",{key:"code",attrs:{title:"商品编号","data-index":"code"}}),e._v(" "),n("a-table-column",{key:"barCode",attrs:{title:"条码","data-index":"barCode"}}),e._v(" "),n("a-table-column",{key:"cover",attrs:{title:"图片","data-index":"cover"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("div",{staticClass:"list-content-image"},[n("h-image",{attrs:{src:e,alt:""}})],1)]}}])}),e._v(" "),n("a-table-column",{key:"name",attrs:{title:"商品名称","data-index":"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2}},[e._v("\n          "+e._s(t)+"\n        ")])]}}])}),e._v(" "),n("a-table-column",{attrs:{title:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2}},[e._v("\n          "+e._s(t.skuAmount?t.skuAmount+"种":"无")+"\n        ")])]}}])}),e._v(" "),n("a-table-column",{key:"stock",attrs:{title:"库存","data-index":"stock"}})],1)],1)};Ut._withStripped=!0;const Gt=ve({render:Ut,staticRenderFns:[]},void 0,Wt,void 0,!1,void 0,!1,void 0,void 0,void 0);Gt.install=function(e){e.component(Gt.name,Gt)};const Yt=ve({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return ge({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0),Xt={name:"SelectTree",props:{value:{type:[Array,Number,String],default:void 0},multiple:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){return{}}},loadData:{type:Function,default:null}},data:function(){return{treeData:[],spreadData:{}}},computed:{baseReplaceFields:function(){return ge({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},treeCheckValue:{get:function(){return"object"===Ye(this.checkValue)?this.checkValue:[this.checkValue]}}},watch:{options:{handler:function(e){console.log("lst",e),this.setOptions()},deep:!0,immediate:!0}},methods:{setOptions:function(){var e=this;this.spreadData={};var t=function t(n){var a=[];return n.forEach((function(n){e.spreadData[n[e.replaceFields.key]]=n,n.children&&(n.children=t(n.children)),a.push(ge(ge({},n),{},{scopedSlots:{icon:"radio"}}))})),a};this.treeData.length?this.treeData=t(this.treeData):this.treeData=t(this.options)},selectHandle:function(e,t){console.log(e,t)},getData:function(){var e=this,t=Ye(this.checkValue),n=[];return console.log(this.spreadData),"object"===t?this.checkValue.forEach((function(t){var a="object"===Ye(t)?t[e.replaceFields.key]:t;e.spreadData[a]&&n.push(e.spreadData[a])})):this.spreadData[this.checkValue]&&n.push(this.spreadData[this.checkValue]),{checkValue:this.checkValue,data:this.checkValue,rows:this.row||n}},onSelect:function(e,t){this.checkValue=e,this.row=t.checkedNodes.map((function(e){return e.data.props}))}},components:{Empty:we}};var Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mix-modal-select-tree"},[e.options.length?e._e():n("empty"),e._v(" "),e.multiple?[n("a-tree",{attrs:{showIcon:"",checkable:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,multiple:"",loadData:e.loadData},on:{check:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}]),model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}})]:[n("a-radio-group",{model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},[n("a-tree",{attrs:{showIcon:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,loadData:e.loadData,selectable:!1},on:{select:e.selectHandle},scopedSlots:e._u([{key:"radio",fn:function(t){return[n("div",{staticClass:"radio-line"},[n("a-radio",{staticClass:"radio-line",attrs:{value:t[e.baseReplaceFields.key]}})],1)]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(t.name)+"\n        ")]}}],null,!1,3749490323),model:{value:e.treeCheckValue,callback:function(t){e.treeCheckValue=t},expression:"treeCheckValue"}})],1)]],2)};Jt._withStripped=!0;const Qt={name:"MixModal",props:{visible:{type:Boolean,default:!1},name:{type:String,default:"brand",validator:function(e){return-1!==["unit","brand","tag","levelPrice","productCategory","specialCategory","salesArea","classification","delivery","area","logistics","customLogistics"].indexOf(e)}},title:{type:String,default:"请选择"},cache:{type:Boolean,default:!1},beforeClose:{type:Function,default:null},defaultValue:{type:[String,Boolean,Number,Array],default:null},multiple:{type:Boolean,default:!1},extrasOperations:{type:Array,default:function(){return["refresh"]}},rules:{type:Object,default:function(){}}},data:function(){var e=this;return{keywords:"",placeholder:"请输入",options:[],checkValue:[],modelProps:{},testValue:[],loading:!0,modelType:"selectGroup",request:null,replaceFields:{key:"id",name:"name"},getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(Te.city,ge(ge({},t),e.rules)):t.provinceId&&t.cityId?e.$get(Te.district,ge(ge({},t),e.rules)):void 0:e.$get(Te.province,e.rules)}}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t[e.replaceFields["selectGroup"===e.modelType?"name":"title"]].match(e.keywords))return t})):this.options}},watch:{visible:function(e){e&&(this.keywords="",this.options.length&&this.cache||(this.options=[],this.refresh(),this.getList(),this.rules&&this.rules.keywords&&(this.keywords=this.rules.keywords)))},name:function(){this.refresh()}},methods:{refresh:function(){this.options=[],this.setModel(),this.getList()},handleCheckAll:function(){var e=this;this.checkValue=this.options.map((function(t){return t[e.replaceFields.key]}))},setModel:function(){["unit","brand","tag","levelPrice","classification","delivery","logistics"].includes(this.name)?this.modelType="selectGroup":["productCategory","salesArea","area"].includes(this.name)&&(this.modelType="selectTree")},getList:function(){var e=this;if(this.checkValue=this.defaultValue||[],this.loading=!0,["unit","brand","tag"].includes(this.name)){this.checkValue=this.defaultValue||[];var t={type:["unit","brand","tag"].indexOf(this.name)};this.$post(Ee,ge(ge({},t),this.rules)).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))}else["levelPrice"].includes(this.name)?(this.checkValue=this.defaultValue||[],this.replaceFields={},this.$post(Pe,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):["productCategory","specialCategory"].includes(this.name)?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"categoryName"},this.getCateGory(),this.request=this.getCateGory):"salesArea"===this.name?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"name"},this.getCustomerRegionList(),this.request=this.getCustomerRegionList):"classification"===this.name?(this.replaceFields={key:"value",name:"label"},this.$post(Fe,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):"delivery"===this.name?this.$get(Me,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):"area"===this.name?(this.replaceFields={key:"id",title:"name"},this.getRegion().then((function(t){e.options=t.data.map((function(e){return ge(ge({},e),{},{isLeaf:!1})})),e.request=e.getRegionList})).finally((function(){e.loading=!1}))):"logistics"===this.name?this.$get(je,this.rules).then((function(t){e.options=t.data;var n=e.options.filter((function(e){return e.isCheck})).map((function(e){return e.id}));console.log("isCheckedValue:",n),e.checkValue=n})).finally((function(){e.loading=!1})):"customLogistics"===this.name?this.$get(Be,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):(console.error("当前传入名称为：",this.name,"。请确认是否正确！！！"),this.loading=!1)},getCateGory:function(e){var t=this;if(e)return new Promise((function(n){e.dataRef.children?n():t.$get(Ae,ge({categoryType:["productCategory","specialCategory"].indexOf(t.name),parentId:e.dataRef.id},t.rules)).then((function(a){e.dataRef.children=a.data.categoryLists,t.options=ke(t.options),n(a.data.categoryLists)}))}));this.$get(Ae,ge({categoryType:["productCategory","specialCategory"].indexOf(this.name),parentId:0},this.rules)).then((function(e){t.loading=!1,t.options=e.data.categoryLists}))},getCustomerRegionList:function(e){var t=this;if(e)return new Promise((function(n){if(e.dataRef.children)n();else{var a=e.dataRef;t.$post(Ve,ge({businessId:a.id||0},t.rules)).then((function(a){e.dataRef.children=a.data,t.options=ke(t.options),n(a.data)})).finally((function(){t.loading=!1}))}}));this.$post(Ve,ge({businessId:0},this.rules)).then((function(e){t.options=e.data})).finally((function(){t.loading=!1}))},getRegionList:function(e){var t=this,n=null,a=null;return e.dataRef&&e.$parent.dataRef&&(n=e.dataRef.parentId,a=e.dataRef.id),e.dataRef&&!e.$parent.dataRef&&(n=e.dataRef.id),new Promise((function(i){e.dataRef.children?i():t.getRegion({provinceId:n,cityId:a}).then((function(n){e.dataRef.children=n.data.map((function(e){return ge(ge({},e),{},{isLeaf:!!a})})),t.options=ke(t.options),i(n.data)})).finally((function(){t.loading=!1}))}))},okHandle:function(){var e=this.$refs.contentModel.getData();e.isCheckAll=this.checkValue.length===this.options.length,this.beforeClose?this.beforeClose(e,this.cancelHandle):(this.$emit("confirm",e),this.modalVisible=!1)},cancelHandle:function(){this.modalVisible=!1}},components:{SelectGroup:Yt,SelectTree:ve({render:Jt,staticRenderFns:[]},void 0,Xt,void 0,!1,void 0,!1,void 0,void 0,void 0),Empty:we}};var Zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:"816px"},on:{cancel:e.cancelHandle,ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.extrasOperations.includes("refresh")?n("a-button",{attrs:{type:"link"},on:{click:e.refresh}},[e._v("刷新")]):e._e(),e._v(" "),(e.extrasOperations.includes("checkAll")&&this.multiple&&this.modelType,e._e())],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},["selectGroup"===e.modelType?n("SelectGroup",{ref:"contentModel",attrs:{multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e(),e._v(" "),"selectTree"===e.modelType?n("SelectTree",{ref:"contentModel",attrs:{"load-data":e.request,multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e()],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};Zt._withStripped=!0;const en=ve({render:Zt,staticRenderFns:[]},void 0,Qt,void 0,!1,void 0,!1,void 0,void 0,void 0);en.install=function(e){e.component(en.name,en)};const tn={name:"TagList",model:{prop:"list",event:"changeList"},components:{IconFont:oe.default},props:{list:{type:Array,default:function(){return[]}},addText:{type:String,default:"添加"}},methods:{onClickAdd:function(){this.$emit("handleAdd")},onclickRemove:function(e,t){this.list.splice(t,1)}}};var nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customer-tag-wrap"},[e._l(e.list,(function(t,a){return n("div",{key:a,staticClass:"tag-item"},[e._v("\n    "+e._s(t.name||t.label)),n("icon-font",{staticClass:"tag-item-icon",attrs:{type:"icon_close"},on:{click:function(n){return e.onclickRemove(t,a)}}})],1)})),e._v(" "),n("div",{staticClass:"tag-item add",on:{click:e.onClickAdd}},[e._v("+ "+e._s(e.addText))])],2)};nn._withStripped=!0;var an={name:"SetCustomerRange",components:{DSelectCustomer:_t,SelectProduct:Gt,MixModal:en,CellEllipsisTip:et,TagList:ve({render:nn,staticRenderFns:[]},void 0,tn,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{visible:{required:!0,type:Boolean},title:{type:String,default:"设置销售范围"},isBatch:{type:Boolean,default:!1},batchList:{type:Array,default:function(){return[]}},currentItem:{type:Object,default:function(){return null}},salesType:{type:Number,default:1},dimension:{type:Number,default:0},data:{type:Object,default:function(){return{}}}},data:function(){var e=this,t="/gateway/goodsservice/api/v1/";return this.setSalesRangeByGoods=function(n){return e.$post("".concat(t,"sale_range/goods/add_sale_range"),n)},this.setSalesRangeByCustomer=function(n){return e.$post("".concat(t,"sale_range/customer/add_sale_range"),n)},this.getSalesRangeByGoods=function(n){return e.$get("".concat(t,"sale_range/goods/get_sale_range"),n)},{loading:!1,visibleMixModal:!1,labelW:3,contentW:21,wrapperCol:{span:21,offset:3},mixModalName:"brand",defaultCheck:[],rules:{customerClassificationList:[{message:"请选择分类",trigger:"change",validator:this.arrayValidator}],degreePriceList:[{message:"请选择等级",trigger:"change",validator:this.arrayValidator}],salesTerritoryList:[{message:"请选择区域",trigger:"change",validator:this.arrayValidator}],goodsClassificationShorts:[{message:"请选择商品",trigger:"change",validator:this.arrayValidator}],goodsBrandShorts:[{message:"请选择品牌",trigger:"change",validator:this.arrayValidator}]},confirmLoading:!1,dataForm:{customerClassification:1,degreePrice:1,salesTerritory:1,brand:0,specifiedCustomer:1,includeVisitor:!0,salesTerritoryList:[],degreePriceList:[],specifiedCustomerList:[],customerClassificationList:[],goodsBrandShorts:[],goodsClassificationShorts:[],goodsShorts:[]},designatedGoodsColumns:[{dataIndex:"action",key:"action",width:64,align:"center",slots:{title:"action"},scopedSlots:{customRender:"actionIcon"}},{title:"编号",dataIndex:"code",width:140},{title:"名称",dataIndex:"name",scopedSlots:{customRender:"goodsCell"}},{title:"规格",dataIndex:"skuAmount",width:140,scopedSlots:{customRender:"goodsNumCell"}}],showCustomerModal:!1,showGoodsModal:!1,showCommonModal:!1,modalType:"",commonModal:{type:3,title:"商品分类",apiType:6,placeholder:"分类名称",selectValue:[],selectArr:[]},modalConfig:Object.freeze({customerClassification:{type:2,title:"添加客户分类",apiType:8,placeholder:"客户分类名称",listName:"customerClassificationList",keyName:""},gradePrice:{type:2,title:"添加级别价",placeholder:"级别价名称",apiType:3,listName:"degreePriceList"},salesArea:{type:2,title:"添加销售区域",placeholder:"销售区域名称",apiType:5,listName:"salesTerritoryList"},designatedCustomer:{type:2,title:"添加客户",placeholder:"客户名称",apiType:5,listName:"specifiedCustomerList"},goodsClassification:{type:2,title:"添加商品分类",placeholder:"商品分类名称",apiType:6,keyName:"categoryName",listName:"goodsClassificationShorts"},goodsBrand:{type:2,title:"添加品牌",placeholder:"品牌名称",apiType:1,listName:"goodsBrandShorts"},goods:{type:2,title:"添加商品",placeholder:"商品名称",listName:"goodsShorts"}})}},computed:{isSalesRage:function(){return 1===this.salesType},modalVisible:{get:function(){return this.visible,this.visible},set:function(e){this.$emit("update:visible",e)}},apiConfig:function(){return this.isSalesRage?{get:"getSalesRangeByGoods",set:"setSalesRangeByGoods"}:{get:"getSalesRangeByCustomer",set:"setSalesRangeByCustomer"}},saleRangeByLists:function(){return this.isBatch?this.batchList:this.currentItem?[this.currentItem]:[]},message:function(){return this.isSalesRage?"以下客户范围叠加生效。例：选择客户分类为A类客户，级别价为普通等级，则客户应为A类客户中的普通等级客户才可视为满足条件":"商品范围叠加生效。例：选择商品分类为A类商品，商品品牌为B品牌，则商品应为A类商品中的B品牌商品才可视为满足条件"}},watch:{modalVisible:function(e){e&&Object.keys(this.data).length&&(this.dataForm=Object.assign({},this.dataForm,this.data),this.generatorIds("customerClassificationList","customerClassificationId"),this.generatorIds("specifiedCustomerList","customerId"),this.generatorIds("degreePriceList","customerDegreeId"),this.generatorIds("salesTerritoryList","salesTerritoryId"))}},methods:{initPage:function(){console.log("初始化页面"),this.isBatch?this.resetSalesEditorForm():this.getFormData()},generatorIds:function(e,t){var n=this.dataForm[e]||[];if(n.length){for(var a=[],i=0,o=n.length;i<o;i++){var r=n[i];a.push({id:r.id||r[t],name:r.name||r.label||r[t]})}this.dataForm[e]=a}},getFormData:function(){var e=this,t=this.currentItem;this.loading=!0,this.confirmLoading=!0;var n={parentId:t.parentId,second:this.dimension};n=this.isSalesRage?ge(ge({},n),{},{goodsDataId:t.id,goodsDataPathCode:t.pathCode||"",goodsDataType:t.dataType}):ge(ge({},n),{},{customerDataId:t.id,customerDataPathCode:t.pathCode||"",customerDataType:t.dataType}),this[this.apiConfig.get](n).then((function(t){console.log(t,"返回结果");var n=t.data;n&&(e.formatRadio(n),e.dataForm=ge(ge({},e.dataForm),n))})).finally((function(){e.loading=!1,e.confirmLoading=!1}))},formatRadio:function(e){this.dataForm.specifiedCustomer=e.isInclude,this.isSalesRage?(e.customerClassificationList.length?this.dataForm.customerClassification=2:this.dataForm.customerClassification=1,e.degreePriceList.length?this.dataForm.degreePrice=2:this.dataForm.degreePrice=1,e.salesTerritoryList.length?this.dataForm.salesTerritory=2:this.dataForm.salesTerritory=1):(e.goodsBrandShorts.length?this.dataForm.brand=2:this.dataForm.brand=1,e.goodsClassificationShorts.length?this.dataForm.customerClassification=2:this.dataForm.customerClassification=1)},onClickRemove:function(e,t){this.dataForm.goodsShorts.splice(t,1),console.log(e,t)},onRemoveAllGoods:function(){this.dataForm.goodsShorts=[]},showDialog:function(e,t){this.modalType=e,this.defaultCheck=this.dataForm[t].map((function(e){return e.id})),"goods"===e?this.showGoodsModal=!0:"designatedCustomer"===e?this.showCustomerModal=!0:(this.commonModal=this.modalConfig[e],"goodsClassification"===e||"salesArea"===e?(this.commonModal.selectValue=this.dataForm[this.commonModal.listName].map((function(e){return e.id})),this.commonModal.selectArr=this.dataForm[this.commonModal.listName]):(this.commonModal.selectArr=[],this.commonModal.selectValue=this.dataForm[this.commonModal.listName].map((function(e){return e.id}))),this.mixModalName={gradePrice:"levelPrice",customerClassification:"classification"}[e]||e,console.log(this.mixModalName,"mixModalName"),this.visibleMixModal=!0)},handleCustomerSelectOk:function(e){console.log("Select customer result: ",e);var t=e.rows.map((function(e){return e.id=e.id||e.businessId,e}));this.handleChangeList(t,"set")},handleGoodsSelectOk:function(e,t){console.log(t,e,"选中商品"),this.handleChangeList(t,"set")},handleCommonSelectOk:function(e){var t=e.checkValue,n=e.rows;console.log(n,t,"公用弹窗选中"),n.forEach((function(e){e.value&&(e.id=e.value)}));var a=[];if(n.length===t.length)a=n;else{var i=[],o=this.dataForm[this.commonModal.listName];t.forEach((function(e){var t,a=!1,r=fe(n);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(e===s.id){a=!0;break}}}catch(e){r.e(e)}finally{r.f()}a||i.push(o.find((function(t){return t.id===e})))})),console.log("未加载数据数组",i),i.forEach((function(e){var t,i=!1,o=fe(n);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(e.pathCode.includes(r.pathCode)){console.log("这个互斥了： ",e),i=!0;break}}}catch(e){o.e(e)}finally{o.f()}i||a.push(e)})),a=a.concat(n)}this.handleChangeList(a,"set")},handleChangeList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=this.modalConfig[this.modalType];console.log(e,"selectedRows"),this.pushList(e,n.listName,n.keyName,t||"add")},pushList:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add",o=[];if("set"===i)o=e.map((function(e){return ge(ge({},e),{},{id:e.id,name:e.name||e[a||"name"]})}));else{if(e.map((function(e){n.dataForm[t].find((function(t){return t.id===e.id}))||o.push(ge(ge({},e),{},{id:e.id,name:e[a||"name"]}))})),!o.length)return!1;o=this.dataForm[t].concat(o)}this.dataForm[t]=o},okHandle:function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;console.log(e.dataForm),console.log("验证通过"),e.confirmSet()}))},cancelHandle:function(){this.modalVisible=!1},resetSalesEditorForm:function(){var e=this;setTimeout((function(){e.dataForm=e.$options.data().dataForm}),500)},confirmSet:function(){this.confirmLoading=!0;var e=this.dataForm,t={firstLevel:this.salesType,second:this.dimension,isInclude:e.include};t=this.isSalesRage?ge(ge({},t),{},{includeVisitor:e.includeVisitor,customerClassificationList:this.mapIds(e.customerClassificationList,"customerClassification"),degreePriceList:this.mapIds(e.degreePriceList,"degreePrice"),salesTerritoryList:this.mapIds(e.salesTerritoryList,"salesTerritory"),specifiedCustomerList:this.mapIds(e.specifiedCustomerList,"specifiedCustomer"),saleRangeByLists:this.saleRangeByLists.map((function(e){return{goodsDataIds:e.id,goodsDataPathCode:e.pathCode||"",goodsDataType:e.dataType}}))}):ge(ge({},t),{},{designatedGoodsShortIDs:this.mapIds(e.goodsShorts),goodsClassificationShorts:this.mapIds(e.goodsClassificationShorts,"classify"),goodsBrandShortIDs:this.mapIds(e.goodsBrandShorts,"brand"),saleRangeByCustomerLists:this.saleRangeByLists.map((function(e){return{customerDataId:e.id,customerDataPathCode:e.pathCode||"",customerDataType:e.dataType}}))}),console.log("paramsData",t),console.log("dataForm",this.dataForm),this.$emit("success",t,this.dataForm),this.modalVisible=!1,this.confirmLoading=!1},arrayValidator:function(e,t,n){t.length||(this.$message.error(e.message),n(new Error(e.message))),n()},mapIds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t&&1===this.dataForm[t]?[]:"salesTerritory"===t?e.map((function(e){return{id:e.id||e.value,name:e.name,pathCode:e.pathCode}})):e.map((function(e){return e.id||e.value}))}}};const on=an;var rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"sales-area-edit",attrs:{title:e.title,"confirm-loading":e.confirmLoading,"mask-closable":!1,width:"816px"},on:{ok:e.okHandle,cancel:e.cancelHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-alert",{attrs:{message:e.message,type:"info","show-icon":""}}),e._v(" "),n("a-form-model",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules}},[n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" "+e._s(e.isSalesRage?"客户":"商品")+"分类 ")]),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-radio-group",{model:{value:e.dataForm.customerClassification,callback:function(t){e.$set(e.dataForm,"customerClassification",t)},expression:"dataForm.customerClassification"}},[n("a-radio",{attrs:{value:1}},[e._v(" 全部分类 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 部分分类 ")])],1)],1)],1)],1),e._v(" "),2===e.dataForm.customerClassification&&e.isSalesRage?n("a-form-model-item",{attrs:{prop:"customerClassificationList",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加分类"},on:{handleAdd:function(t){return e.showDialog("customerClassification","customerClassificationList")}},model:{value:e.dataForm.customerClassificationList,callback:function(t){e.$set(e.dataForm,"customerClassificationList",t)},expression:"dataForm.customerClassificationList"}})],1):e._e(),e._v(" "),2!==e.dataForm.customerClassification||e.isSalesRage?e._e():n("a-form-model-item",{attrs:{prop:"goodsClassificationShorts",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加分类"},on:{handleAdd:function(t){return e.showDialog("goodsClassification")}},model:{value:e.dataForm.goodsClassificationShorts,callback:function(t){e.$set(e.dataForm,"goodsClassificationShorts",t)},expression:"dataForm.goodsClassificationShorts"}})],1),e._v(" "),e.isSalesRage?[n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" 级别价 ")]),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-radio-group",{model:{value:e.dataForm.degreePrice,callback:function(t){e.$set(e.dataForm,"degreePrice",t)},expression:"dataForm.degreePrice"}},[n("a-radio",{attrs:{value:1}},[e._v(" 全部级别价 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 部分级别价 ")])],1)],1)],1)],1),e._v(" "),2===e.dataForm.degreePrice?n("a-form-model-item",{attrs:{prop:"degreePriceList",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加级别价"},on:{handleAdd:function(t){return e.showDialog("gradePrice","degreePriceList")}},model:{value:e.dataForm.degreePriceList,callback:function(t){e.$set(e.dataForm,"degreePriceList",t)},expression:"dataForm.degreePriceList"}})],1):e._e(),e._v(" "),n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" 销售区域 ")]),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-radio-group",{model:{value:e.dataForm.salesTerritory,callback:function(t){e.$set(e.dataForm,"salesTerritory",t)},expression:"dataForm.salesTerritory"}},[n("a-radio",{attrs:{value:1}},[e._v(" 全部区域 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 部分区域 ")])],1)],1)],1)],1),e._v(" "),2===e.dataForm.salesTerritory?n("a-form-model-item",{attrs:{prop:"salesTerritoryList",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加销售区域"},on:{handleAdd:function(t){return e.showDialog("salesArea","salesTerritoryList")}},model:{value:e.dataForm.salesTerritoryList,callback:function(t){e.$set(e.dataForm,"salesTerritoryList",t)},expression:"dataForm.salesTerritoryList"}})],1):e._e(),e._v(" "),n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" 指定客户 ")]),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-radio-group",{model:{value:e.dataForm.specifiedCustomer,callback:function(t){e.$set(e.dataForm,"specifiedCustomer",t)},expression:"dataForm.specifiedCustomer"}},[n("a-radio",{attrs:{value:1}},[e._v(" 添加指定客户 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 排除指定客户 "),n("span",{staticClass:"tip"},[e._v("(从以上所选分类、等级、销售区域中排除部分客户)")])])],1)],1)],1)],1),e._v(" "),n("a-form-model-item",{attrs:{prop:"specifiedCustomerList",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加客户"},on:{handleAdd:function(t){return e.showDialog("designatedCustomer","specifiedCustomerList")}},model:{value:e.dataForm.specifiedCustomerList,callback:function(t){e.$set(e.dataForm,"specifiedCustomerList",t)},expression:"dataForm.specifiedCustomerList"}})],1),e._v(" "),n("a-form-model-item",[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-checkbox",{model:{value:e.dataForm.includeVisitor,callback:function(t){e.$set(e.dataForm,"includeVisitor",t)},expression:"dataForm.includeVisitor"}},[e._v(" 游客 ")])],1)],1)],1)]:[n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" 商品品牌 ")]),e._v(" "),n("a-radio-group",{model:{value:e.dataForm.brand,callback:function(t){e.$set(e.dataForm,"brand",t)},expression:"dataForm.brand"}},[n("a-radio",{attrs:{value:1}},[e._v(" 全部品牌 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 部分品牌 ")])],1)],1)],1),e._v(" "),2===e.dataForm.brand?n("a-form-model-item",{attrs:{prop:"goodsBrandShorts",wrapperCol:e.wrapperCol}},[n("tag-list",{attrs:{"add-text":"添加品牌"},on:{handleAdd:function(t){return e.showDialog("goodsBrand")}},model:{value:e.dataForm.goodsBrandShorts,callback:function(t){e.$set(e.dataForm,"goodsBrandShorts",t)},expression:"dataForm.goodsBrandShorts"}})],1):e._e(),e._v(" "),n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}},[e._v(" 指定商品 ")]),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-radio-group",{model:{value:e.dataForm.specifiedCustomer,callback:function(t){e.$set(e.dataForm,"specifiedCustomer",t)},expression:"dataForm.specifiedCustomer"}},[n("a-radio",{attrs:{value:1}},[e._v(" 添加指定商品 ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v(" 排除指定商品 "),n("span",{staticClass:"tip"},[e._v("(从以上所选分类、品牌中排除部分商品)")])])],1)],1)],1)],1),e._v(" "),n("a-form-model-item",[n("a-row",[n("a-col",{staticClass:"label-wrap",attrs:{span:e.labelW}}),e._v(" "),n("a-col",{attrs:{span:e.contentW}},[n("a-table",{staticClass:"designated-goods-table",attrs:{"data-source":e.dataForm.goodsShorts,columns:e.designatedGoodsColumns,"row-key":"id",pagination:!1,scroll:{y:260}},scopedSlots:e._u([{key:"actionIcon",fn:function(t,a,i){return[n("a-icon",{attrs:{type:"minus-circle"},on:{click:function(t){return e.onClickRemove(a,i)}}})]}},{key:"goodsCell",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2}},[e._v("\n                    "+e._s(t)+"\n                  ")])]}},{key:"goodsNumCell",fn:function(t){return[n("span",[e._v(e._s(t?t+"种":"-"))])]}}])},[n("span",{staticClass:"designated-goods-table-action",attrs:{slot:"action",title:"移除所有"},slot:"action"},[n("a-icon",{attrs:{type:"minus-circle"},on:{click:e.onRemoveAllGoods}})],1),e._v(" "),e._v(" "),e._v(" "),e._v(" "),n("template",{slot:"footer"},[n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.showDialog("goods")}}},[e._v(" +添加商品 ")])],1)],2)],1)],1)],1)]],2)],1),e._v(" "),n("d-select-customer",{attrs:{multiple:"",visible:e.showCustomerModal},on:{"update:visible":function(t){e.showCustomerModal=t},confirm:e.handleCustomerSelectOk}}),e._v(" "),n("select-product",{attrs:{visible:e.showGoodsModal},on:{"update:visible":function(t){e.showGoodsModal=t}}}),e._v(" "),n("mix-modal",{attrs:{visible:e.visibleMixModal,name:e.mixModalName,"default-value":e.defaultCheck,multiple:""},on:{"update:visible":function(t){e.visibleMixModal=t},confirm:e.handleCommonSelectOk}})],1)};rn._withStripped=!0;const sn=ve({render:rn,staticRenderFns:[]},void 0,on,void 0,!1,void 0,!1,void 0,void 0,void 0);return sn.install=function(e){e.component(sn.name,sn)},sn}))},6566:function(e,t,n){"use strict";var a=n("9bf2").f,i=n("7c73"),o=n("e2cc"),r=n("0366"),s=n("19aa"),l=n("2266"),c=n("7dd0"),u=n("2626"),d=n("83ab"),h=n("f183").fastKey,f=n("69f3"),p=f.set,m=f.getterFor;e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,a){s(e,f),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=a&&l(a,e[c],{that:e,AS_ENTRIES:n})})),f=u.prototype,g=m(t),v=function(e,t,n){var a,i,o=g(e),r=y(e,t);return r?r.value=n:(o.last=r={index:i=h(t,!0),key:t,value:n,previous:a=o.last,next:void 0,removed:!1},o.first||(o.first=r),a&&(a.next=r),d?o.size++:e.size++,"F"!==i&&(o.index[i]=r)),e},y=function(e,t){var n,a=g(e),i=h(t);if("F"!==i)return a.index[i];for(n=a.first;n;n=n.next)if(n.key==t)return n};return o(f,{clear:function(){var e=this,t=g(e),n=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=g(t),a=y(t,e);if(a){var i=a.next,o=a.previous;delete n.index[a.index],a.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==a&&(n.first=i),n.last==a&&(n.last=o),d?n.size--:t.size--}return!!a},forEach:function(e){var t,n=g(this),a=r(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:n.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),o(f,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),d&&a(f,"size",{get:function(){return g(this).size}}),u},setStrong:function(e,t,n){var a=t+" Iterator",i=m(t),o=m(a);c(e,t,(function(e,t){p(this,{type:a,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},6968:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("caad"),n("159b"),n("2532"))}(0,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=[{id:0,name:"草稿"},{id:1,name:"已过账"},{id:3,name:"已红冲"}],n={0:t[0],1:t[1],2:t[2]},a=[{id:0,name:"未支付"},{id:1,name:"部分支付"},{id:2,name:"已支付"}],i={0:a[0],1:a[1]},o=[{id:1,name:"库存高于上限"},{id:2,name:"库存低于下限"},{id:3,name:"有货"},{id:4,name:"缺货"}],r={0:i[0],1:i[1]},s=[{id:5,name:"ERP草稿",color:"#52C41A"},{id:1,name:"已过账",color:"#52C41A"},{id:4,name:"ERP删除",color:"#BBBBBB"},{id:2,name:"草稿",color:"#52C41A"},{id:3,name:"已红冲",color:"#F5222D"},{id:0,name:"未同步",color:"#378EFB"}],l=[{id:0,name:"已下架"},{id:1,name:"已上架"}],c=[{id:1,name:"应收调整"},{id:2,name:"应付调整"}],u=[{id:0,name:"草稿"},{id:1,name:"盘点完成"}],d=[{id:0,name:"全部"},{id:1,name:"采购入库"},{id:2,name:"退货入库"},{id:3,name:"盘盈入库"},{id:4,name:"其它入库"},{id:5,name:"销售出库"},{id:6,name:"采购退货"},{id:7,name:"盘亏出库"},{id:8,name:"采购入库"},{id:9,name:"其它出库"},{id:10,name:"同价调拨入库"},{id:11,name:"同价调拨出库"},{id:12,name:"撤销出库"},{id:13,name:"进销存同步"},{id:14,name:"撤销退货"},{id:15,name:"退货单取消"},{id:16,name:"订货单取消"}],h=[{id:-1,name:"已取消",key:"canceled",btnKeys:["detail","del","share","print","export","copy"]},{id:0,name:"草稿",key:"draft",btnKeys:["detail","submit","submit_audit","del","share","print","export","copy"]},{id:1,name:"待审核",key:"to_audit",btnKeys:["detail","audit","cancel_bill","share","print","export","copy"]},{id:2,name:"待出库",key:"to_stock_removal",btnKeys:["detail","stock_removal","auditee","cancel_bill","share","print","export","copy"]},{id:3,name:"部分出库",key:"portion_stock_removal",btnKeys:["detail","stock_removal","suspend_bill","share","print","export","copy"]},{id:4,name:"待发货",key:"to_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:5,name:"部分发货",key:"portion_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:6,name:"待收货",key:"to_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:7,name:"部分收货",key:"portion_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:8,name:"已完成",key:"finish",btnKeys:["detail","share","print","export","copy"]},{id:9,name:"已中止",key:"suspend",btnKeys:["detail","share","print","export","copy"]}],f=[{id:1,name:"已打印"},{id:0,name:"未打印"}],p=[{id:0,name:"PC端代开"},{id:1,name:"企业微信代开"},{id:2,name:"小程序商城"},{id:3,name:"巡店"},{id:4,name:"Excel导入"}],m=[{id:1,name:"买赠"},{id:2,name:"秒杀"},{id:3,name:"特价"},{id:4,name:"订单促销"},{id:5,name:"组合促销"},{id:6,name:"一口价"},{id:7,name:"拼团"},{id:8,name:"优惠券"},{id:9,name:"分销"}],g=[{id:0,name:"不开发票"},{id:1,name:"普通发票"},{id:2,name:"增值税发票"}],v=Object.freeze({__proto__:null,billStatus:{0:{name:"草稿",color:"#378EFB",icon:"iconcaogao"},1:{name:"已过账",color:"#52C41A",icon:"iconyiguozhang",stocktakingName:"盘点完成",stocktakingIcon:"icon_stocktaking_completed"},3:{name:"已红冲",color:"#F5222D",icon:"iconyihongchong"}},payStockSync:[{id:2,name:"ERP草稿",color:"#52c41a"},{id:3,name:"已过账",color:"#52c41a"},{id:4,name:"ERP删除",color:"#bbbbbb"},{id:5,name:"同步失败",color:"#f5222d"},{id:0,name:"未同步",color:"#378efb"}],payStockSyncMap:{0:{name:"未同步",color:"#378efb"},2:{name:"ERP草稿",color:"#52c41a"},3:{name:"已过账",color:"#52c41a"},4:{name:"ERP删除",color:"#bbbbbb"},5:{name:"同步失败",color:"#f5222d"}},inStockMap:[{id:0,name:"盘盈入库"},{id:2,name:"其它入库"}],outStockMap:[{id:1,name:"盘亏出库"},{id:3,name:"其它出库"}],orderStatus:t,orderStatusMap:n,paymentStatus:a,paymentStatusMap:i,stockStatus:o,stockStatusMap:r,stockSync:s,stockSyncMap:{},saleStatus:l,modeOfPayment:[{id:0,name:"线下支付"},{id:1,name:"银行卡转账"}],exchangePayment:c,stockBillStatus:u,stockInAndOut:d,accountType:[{id:0,name:"微信账户"},{id:1,name:"预付款账户"},{id:2,name:"现金账户"},{id:3,name:"银行卡账户"}],saleOrderStatus:h,printStatus:f,billSource:p,marketingType:m,invoiceType:g}),y="/gateway/goodsservice/api/v1/",b="".concat(y,"price_system/leve_price_name/select_list"),w="".concat(y,"setting/query_goods_attr_setting_list"),k="".concat("/gateway/logisticsservice/api/v1/","deliveryMethod/list");function C(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const _=C({},void 0,{name:"DMixSelect",props:{value:{type:[String,Number,Array],default:void 0},resultName:{type:String,default:""},type:{type:Number,default:0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:120},list:{type:Array,default:null},exclude:{type:Array,default:function(){return[]}},mode:{type:String,default:"select"},getPopupContainer:{type:Function,default:function(){return document.querySelector(".mix-select")}}},data:function(){return{actValue:void 0,options:[],selectLoading:!1}},computed:{modalPlaceholder:function(){return this.placeholder},actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:function(e){this.actValue=e},type:{handler:function(){this.options=[],this.getData()}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;if(console.log(v,this.type),!this.$slots.default)if(this.list)this.options=this.list;else if([0,1,2,11].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$post(11===this.type?b:w,{type:this.type}).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1})).catch((function(){e.selectLoading=!1}))}else if([14].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$get(k).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1}))}else switch(this.type){case 3:this.options=t;break;case 4:this.options=a;break;case 5:this.options=o;break;case 6:this.options=l;break;case 7:this.options=c;break;case 8:this.options=s;break;case 9:this.options=u;break;case 10:this.options=d;break;case 12:this.options=h;break;case 13:this.options=f;break;case 15:this.options=p;break;case 16:this.options=m;break;case 17:this.options=g;break;default:this.options=[]}},handleChange:function(t){var n=e(t);if(null==t||"object"===n&&!t.length)return this.$emit("input",void 0),this.actValue=void 0,void this.$emit("change",{config:{resultName:this.resultName,status:"delete",type:"select"}});var a="number"===n?{}:[];this.options.forEach((function(e){"number"===n?e.id===t&&(a=e):t.includes(e.id)&&a.push(e)})),this.$emit("input",t),this.actValue=t,this.$emit("change",{data:t,rows:a,config:{resultName:this.resultName,status:"select",type:"select"}})},optionsVisibleHandle:function(){this.options.length||this.$slots.default||this.getData()},resetData:function(){this.actValue=void 0,this.$emit("input",void 0)}},render:function(e){var t=this,n=this;return e("div",{class:"mix-select",style:"width: ".concat(n.actWidth)},[e("a-select",{scopedSlots:n.$scopedSlots,props:{value:n.actValue,allowClear:n.allowClear,placeholder:n.modalPlaceholder,mode:n.mode,getPopupContainer:n.getPopupContainer,disabled:n.disabled},style:"width:100%;",on:{dropdownVisibleChange:n.optionsVisibleHandle,change:n.handleChange}},[n.selectLoading?e("a-spin",{props:{size:"small"},slot:"notFoundContent"}):function(){if(t.$slots.default)return t.$slots.default;var n=[];return t.options.forEach((function(a,i){t.exclude.includes(a.id)||n.push(e("a-select-option",{props:{value:a.id,key:i,title:a.name}},a.name))})),n}()])])}},"data-v-c44b6be8",void 0,void 0,!1,void 0,void 0,void 0);return _.install=function(e){e.component(_.name,_)},_}))},"69b6":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("159b"),n("d3b7"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("04b3"))}(0,(function(e,t,n,a,i,o,r,s){"use strict";function l(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const c={name:"Empty",components:{empty:s.empty,loading:s.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};u._withStripped=!0;var d={name:"Trade",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"设置行业"},checked:{type:Array,default:function(){return[]}},expanded:{type:Array,default:function(){return[]}}},components:{Empty:l({render:u,staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0)},data:function(){return{confirmLoading:!1,refreshLoading:!1,searchValue:"",autoExpandParent:!0,gData:[],checkBox:this.checked,expandedKeys:this.expanded,dataList:[],actForm:{}}},mounted:function(){this.getList()},methods:{onCheck:function(e){var t=e.checked;this.$emit("change",t,this.handleOk(t))},getList:function(){var e=this,t=function t(n){var a=[];return n.forEach((function(n){n.scopedSlots={title:"title"},e.dataList.push(n),n.children&&n.children.length&&t(n.children),a.push(n)})),a};this.refreshLoading=!0,this.$get("".concat("/gateway/saas-platform-service/api/v1/","trade/trade_category_list")).then((function(n){n.data&&(e.gData=t(n.data))})).finally((function(){e.refreshLoading=!1}))},getParentKey:function(e,t){for(var n,a=0;a<t.length;a++){var i=t[a];i.children&&(i.children.some((function(t){return t.id===e}))?n=i.id:this.getParentKey(e,i.children)&&(n=this.getParentKey(e,i.children)))}return n},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSearch:function(){var e=this,t=this.searchValue;this.expandedKeys=this.dataList.map((function(n){return n.name.indexOf(t)>-1?e.getParentKey(n.id,e.gData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t})),this.autoExpandParent=!0},handleRefresh:function(){this.autoExpandParent=!1,this.expandedKeys=[],this.searchValue="",this.checkBox=[],this.getList()},handleOk:function(e){var t=this,n=[];return this.checkBox=e,function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.gData,i=arguments.length>1?arguments[1]:void 0;a.forEach((function(a){t.checkBox.includes(a.id)&&n.push({categoryId:i.id,categoryName:i.name,industryId:a.id,industryName:a.name}),a.children&&a.children.length&&e(a.children,a)}))}(),n},handleCancel:function(){this.modalVisible=!1},resetChecked:function(e){this.checkBox=[],this.checkBox=e||this.checked}}};const h=d;var f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-trade"},[n("div",{staticClass:"search-wrap"},[n("div",{staticClass:"line-box"},[n("a-input-search",{attrs:{placeholder:"请输入"},on:{input:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),n("div",{staticClass:"line-box"},[n("a-button",{on:{click:e.handleSearch}},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"line-box"},[n("a-button",{attrs:{type:"link",loading:e.refreshLoading},on:{click:e.handleRefresh}},[e._v("刷新")])],1)]),e._v(" "),n("div",{staticClass:"tree-box"},[e.gData.length?[n("a-tree",{staticClass:"trade-tree",attrs:{"default-checked-keys":e.checkBox,checkable:"",checkStrictly:"","checked-keys":e.checkBox,"expanded-keys":e.expandedKeys,"auto-expand-parent":e.autoExpandParent,"tree-data":e.gData,defaultExpandAll:"",multiple:"",selectable:!1,replaceFields:{children:"children",title:"name",key:"id"}},on:{check:e.onCheck,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.name;return[a.indexOf(e.searchValue)>-1?n("span",[e._v("\n            "+e._s(a.substr(0,a.indexOf(e.searchValue)))),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v(e._s(a.substr(a.indexOf(e.searchValue)+e.searchValue.length))+"\n          ")]):n("span",[e._v(e._s(a))])]}}],null,!1,3378640099)})]:[n("Empty",{staticStyle:{padding:"26px 0px 0px"},attrs:{text:"暂无行业"}})]],2)])};f._withStripped=!0;const p=l({render:f,staticRenderFns:[]},void 0,h,void 0,!1,void 0,!1,void 0,void 0,void 0);return p.install=function(e){e.component(p.name,p)},p}))},"6d61":function(e,t,n){"use strict";var a=n("23e7"),i=n("da84"),o=n("e330"),r=n("94ca"),s=n("6eeb"),l=n("f183"),c=n("2266"),u=n("19aa"),d=n("1626"),h=n("861d"),f=n("d039"),p=n("1c7e"),m=n("d44e"),g=n("7156");e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),b=v?"set":"add",w=i[e],k=w&&w.prototype,C=w,_={},S=function(e){var t=o(k[e]);s(k,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return y&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})},x=r(e,!d(w)||!(y||k.forEach&&!f((function(){(new w).entries().next()}))));if(x)C=n.getConstructor(t,e,v,b),l.enable();else if(r(e,!0)){var R=new C,O=R[b](y?{}:-0,1)!=R,D=f((function(){R.has(1)})),L=p((function(e){new w(e)})),T=!y&&f((function(){var e=new w,t=5;while(t--)e[b](t,t);return!e.has(-0)}));L||(C=t((function(e,t){u(e,k);var n=g(new w,e,C);return void 0!=t&&c(t,n[b],{that:n,AS_ENTRIES:v}),n})),C.prototype=k,k.constructor=C),(D||T)&&(S("delete"),S("has"),v&&S("get")),(T||O)&&S(b),y&&k.clear&&delete k.clear}return _[e]=C,a({global:!0,forced:C!=w},_),m(C,e),y||n.setStrong(C,e,v),C}},7569:function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";function e(e,t){return void 0===t?e:Number(Math.round(e+"e"+(t||0))+"e-"+(t||0))}function t(t,n,a,i){var o,r;try{o=n.toString().split(".")[1].length}catch(t){o=0}try{r=a.toString().split(".")[1].length}catch(t){r=0}var s=Math.pow(10,Math.max(o,r)),l=[e((Math.round(s*n)+Math.round(s*a))/s,i),e((Math.round(s*n)-Math.round(s*a))/s,i),e(Math.round(s*n)*Math.round(s*a)/(s*s),i),e(Math.round(s*n)/Math.round(s*a),i)];s=String(e(l[t],i||0));return i?s.includes(".")?s.split(".")[0]+"."+s.split(".")[1].padEnd(i,0):(s+".").padEnd((s+".").length+i,0):l[t]}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return"symbol"!=n(e)&&!isNaN(parseFloat(e))&&isFinite(e)}return{add:function e(n,a,i){return Array.isArray(n)?n.length?n.reduce((function(t,n){return e(t,n,a)}),0):0:t(0,n,a,i)},calc:t,devide:function e(n,a,i){return Array.isArray(n)?2<=n.length?n.reduce((function(t,n){return e(t,n,a)})):"":n&&a?t(3,n,a,i):""},fmtNum:function(t,n,i,o){var r=1<arguments.length&&void 0!==n&&n,s=2<arguments.length?i:void 0;n=3<arguments.length?o:void 0;return void 0===t||null==t?"":a(i=t+"")?(o=!i.includes("."),t=0==(s=void 0===s?o?0:i.split(".")[1].length:s)?Math.round(i)+"":(o?i:e(+i+"",s)+"").split(".")[0],i=e(+i+"",s)+"",i=((i=0==s||o?"":i.split(".")[1])||"").padEnd(s,0),i=(r?t.replace(/(?=(?!\b)(\d{3})+$)/g,","):t)+(i.length?"."+i:""),n?Number(i):i):""},isNum:a,multiply:function e(n,a,i){return Array.isArray(n)?n.length?n.reduce((function(t,n){return e(t,n,a)}),1):0:t(2,n,a,i)},round:e,subtract:function e(n,a,i){n=0<arguments.length&&void 0!==n?n:0;var o=1<arguments.length&&void 0!==a?a:0;i=2<arguments.length?i:void 0;return Array.isArray(n)?n.length?n.reduce((function(t,n){return e(t,n,o)})):0:t(1,n,o,i)},isInteger:function(e){return"number"==typeof e&&!isNaN(e)&&e%1==0}}}))},"7edb":function(e,t,n){var a=n("ae52");e.exports=a},8070:function(e,t,n){"use strict";n("8088")},8088:function(e,t,n){},"847b":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("99af"),n("4de4"),n("d81d"),n("159b"),n("d3b7"),n("25f0"),n("498a"),n("3177"),n("a434"))}(0,(function(e,t,n,a,i,o,r,s,l,c){"use strict";function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(c);function h(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){h(o,a,i,r,s,"next",e)}function s(e){h(o,a,i,r,s,"throw",e)}r(void 0)}))}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.__PARENTSAPPJSONP__&&window.__POWERED_BY_QIANKUN__?window.__PARENTSAPPJSONP__(n,(function(e){t=e})):window.TMAPCALLBACK[n]=function(e){t=e},document.body.appendChild(a);var i=function(){document.body.removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},w={"北京市":{city:"北京市",short:"京",lng:"116.39737",lat:"39.939502"},"天津市":{city:"天津市",short:"津",lng:"117.133262",lat:"39.256321"},"上海市":{city:"上海市",short:"沪",lng:"121.36464",lat:"31.303465"},"重庆市":{city:"重庆市",short:"渝",lng:"106.32485",lat:"29.895013"},"河北省":{city:"石家庄",short:"冀",lng:"114.336873",lat:"38.21885"},"山西省":{city:"太原",short:"晋",lng:"112.349964",lat:"38.044464"},"辽宁省":{city:"沈阳",short:"辽",lng:"123.241164",lat:"41.948112"},"吉林省":{city:"长春",short:"吉",lng:"125.228072",lat:"43.894927"},"黑龙江省":{city:"哈尔滨",short:"黑",lng:"126.479088",lat:"45.985284"},"江苏省":{city:"南京",short:"苏",lng:"118.715429",lat:"32.246466"},"浙江省":{city:"杭州",short:"浙",lng:"120.040035",lat:"30.350837"},"安徽省":{city:"合肥",short:"皖",lng:"117.170056",lat:"31.99595"},"福建省":{city:"福州",short:"闽",lng:"119.156964",lat:"26.182279"},"江西省":{city:"南昌",short:"赣",lng:"115.808656",lat:"28.774611"},"山东省":{city:"济南",short:"鲁",lng:"116.912494",lat:"36.812038"},"河南省":{city:"郑州",short:"豫",lng:"113.453802",lat:"34.895028"},"湖北省":{city:"武汉",short:"鄂",lng:"114.116105",lat:"30.764814"},"湖南省":{city:"长沙",short:"湘",lng:"112.800698",lat:"28.474291"},"广东省":{city:"广州",short:"粤",lng:"113.233035",lat:"23.224606"},"海南省":{city:"海口",short:"琼",lng:"110.179083",lat:"19.921006"},"四川省":{city:"成都",short:"川",lng:"103.924003",lat:"30.796585"},"贵州省":{city:"贵阳",short:"黔",lng:"106.499624",lat:"26.844365"},"云南省":{city:"昆明",short:"滇",lng:"102.599397",lat:"25.248948"},"陕西省":{city:"西安",short:"陕",lng:"108.780889",lat:"34.408508"},"甘肃省":{city:"兰州",short:"甘",lng:"103.66644",lat:"36.218003"},"青海省":{city:"西宁",short:"青",lng:"101.605943",lat:"36.752842"},"西藏自治区":{city:"拉萨",short:"藏",lng:"90.972306",lat:"29.838888"},"广西壮族自治区":{city:"南宁",short:"桂",lng:"108.265765",lat:"23.020403"},"内蒙古自治区":{city:"呼和浩特",short:"蒙",lng:"111.614073",lat:"40.951504"},"宁夏回族自治区":{city:"银川",short:"宁",lng:"106.094884",lat:"38.624116"},"新疆维吾尔自治区":{city:"乌鲁木齐",short:"新",lng:"87.476819",lat:"43.894927"},"香港特别行政区":{city:"香港",short:"港",lng:"114.1529",lat:"22.542716"},"澳门地区":{city:"澳门",short:"澳",lng:"113.417008",lat:"22.337477"},"台湾省":{city:"台北",short:"台.",lng:"121.36464",lat:"25.248948"}},k="https://apis.map.qq.com",C={geocoder:"".concat(k,"/ws/geocoder/v1"),placeSearch:"".concat(k,"/ws/place/v1/search"),placeExplore:"".concat(k,"/ws/place/v1/explore"),placeDetail:"".concat(k,"/ws/place/v1/detail"),placeSuggestion:"".concat(k,"/ws/place/v1/suggestion"),district:"".concat(k,"/ws/district/v1"),directionDriving:"".concat(k,"/ws/direction/v1/driving"),directionTransit:"".concat(k,"/ws/direction/v1/transit"),directionWalking:"".concat(k,"/ws/direction/v1/walking"),directionBicycling:"".concat(k,"/ws/direction/v1/bicycling"),distanceMatrix:"".concat(k,"/ws/distance/v1/matrix"),locationIP:"".concat(k,"/ws/location/v1/ip"),staticmap:"".concat(k,"/ws/staticmap/v2"),coordTranslate:"".concat(k,"/ws/coord/v1/translate")},_=function(e){var t="";if(e)for(var n in e)e.hasOwnProperty(n)&&(t+="".concat(t?"".concat(t,"&"):"").concat(n,"=").concat(e[n]));return t},S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.mapOptions={key:"T74BZ-KJV6U-EVEVH-B2ZLQ-YIZQF-3PFPB",container:"map",center:{lat:39.908802,lng:116.397502},zoom:16,location:!1,showMarker:!1,success:null,fail:null},this.varia={queue:[],mapStatus:!1,centerMarker:null,on:{tilesloaded:null}},this._init(t)}var t,n,a,i;return t=e,n=[{key:"_init",value:function(e){this._initConfig(e),e&&e.container&&(this._initMap(),this._afterInit())}},{key:"_initConfig",value:function(e){this.mapOptions=this.merge(this.mapOptions,e)}},{key:"_initMap",value:(i=f(v.mark((function e(){var t=this;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=this.mapOptions.key,b("https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=TMapLoad"));case 2:this.mapOptions.center=this.latLng(this.mapOptions.center),this.map=new TMap.Map(this.mapOptions.container,this.mapOptions),this.map.once("tilesloaded",(function(){t.varia.mapStatus=!0,t.runQueue(),t.mapOptions.success&&t.mapOptions.success()}));case 5:case"end":return e.stop()}var n}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_afterInit",value:function(){this.mapOptions.location&&this.location(),this.mapOptions.showMarker&&this.setMarker(this.mapOptions.center)}},{key:"run",value:function(e,t){this.varia.mapStatus?this[e](t):this.varia.queue.push({name:e,options:t})}},{key:"on",value:function(e,t){console.log(e,t)}},{key:"runQueue",value:function(){var e=this;this.varia.queue.forEach((function(t){e[t.name](t.options)})),this.varia.queue=[]}},{key:"request",value:function(e,t){var n,a,i=(n=this.mapOptions,a="key=".concat(n.key,"&output=jsonp"),{parseLocation:function(e){return b("https://apis.map.qq.com/ws/geocoder/v1/?".concat(_(e),"&").concat(a))},placeSearch:function(e){return b("".concat(C.placeSearch,"?").concat(_(e),"&").concat(a))},placeExplore:function(e){return b("".concat(C.placeExplore,"?").concat(_(e),"&").concat(a))},placeDetail:function(e){return b("".concat(C.placeDetail,"?").concat(_(e),"&").concat(a))},suggestion:function(e){return b("".concat(C.placeSuggestion,"?").concat(_(e),"&").concat(a))},geocoder:function(e){var t=e.address;return t&&w[t]&&(e.address="".concat(t).concat(w[t].city)),b("".concat(C.geocoder,"?").concat(_(e),"&").concat(a))},directionDriving:function(e){return b("".concat(C.directionDriving,"?").concat(_(e),"&").concat(a))},directionWalking:function(e){return b("".concat(C.directionWalking,"?").concat(_(e),"&").concat(a))},directionBicycling:function(e){return b("".concat(C.directionBicycling,"?").concat(_(e),"&").concat(a))},directionTransit:function(e){return b("".concat(C.directionTransit,"?").concat(_(e),"&").concat(a))},distanceMatrix:function(e){return b("".concat(C.distanceMatrix,"?").concat(_(e),"&").concat(a))},district:function(e){return b("".concat(C.district,"?").concat(_(e),"&").concat(a))},coordTranslate:function(e){return b("".concat(C.coordTranslate,"?").concat(_(e),"&").concat(a))},locationIP:function(e){return b("".concat(C.locationIP,"?").concat(_(e),"&").concat(a))}});if(!i[e])throw Error("错误警告: ".concat(e," 不是一个正确的地图请求方法，请使用正确的方法。"));return i[e](t)}},{key:"merge",value:function(e,t){for(var n in t)e[n]=e[n]&&"[object Object]"===e[n].toString()?this.merge(e[n],t[n]):e[n]=t[n];return e}},{key:"destory",value:function(){this.map.destroy()}},{key:"random",value:function(){return Math.floor(1234567890*Math.random())}},{key:"latLng",value:function(e){var t=e.lng,n=e.lat;return new TMap.LatLng(n,t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){console.log(e,"设置地图中心点"),this.map.setCenter(this.latLng(e))}},{key:"setRotation",value:function(e){this.map.setRotation(e)}},{key:"setPitch",value:function(e){this.map.setPitch(e)}},{key:"setScale",value:function(e){this.map.setScale(e)}},{key:"setMode",value:function(e){"2D"===e?this.map.setViewMode("2D"):"3D"===e&&(this.map.setViewMode("3D"),this.map.setPitch(70))}},{key:"setMarker",value:function(e,t){var n=this;console.log("setMarker-point-内部函数",e),console.log("setMarker-styles-内部函数",t),this.removeMarker(),console.log("marker-layer-".concat(Math.floor(1e4*Math.random())),"IDDDDD"),console.log(this,"this"),this.varia.centerMarker=new TMap.MultiMarker({id:"marker-layer-".concat(Math.floor(1e4*Math.random())),map:this.map,styles:g({marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},t),geometries:function(e){var t=n;if("[object Object]"===Object.prototype.toString.call(e))return e.lat=Number(e.lat),e.lng=Number(e.lng),[{id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}}];var a=[];return e.forEach((function(e){a.push({id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}})})),a}(e)})}},{key:"setMarkerCrm",value:function(e){this.varia.centerMarker=new TMap.MultiMarker({id:"marker_".concat(this.random()),map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},geometries:[{id:"markergeo_".concat(this.random()),styleId:"marker_".concat(this.random()),position:new TMap.LatLng(e.lat,e.lng),properties:{title:"marker"}}]})}},{key:"removeMarker",value:function(){console.log("移除marker事件"),console.log(this.varia.centerMarker),this.varia.centerMarker&&(this.varia.centerMarker.setMap(null),this.varia.centerMarker=null)}},{key:"removeCluster",value:function(){}},{key:"setCircle",value:function(e){return new TMap.MultiCircle({id:"circle",map:this.map,geometries:[{center:this.latLng(e),radius:1e3}]})}},{key:"setMarkerCluster",value:function(e){var t=this;return console.log("setMarkerCluster"),this.varia.markerCluster=new TMap.MarkerCluster({id:"marker_".concat(this.random()),map:this.map,enableDefaultStyle:!1,minimumClusterSize:2,geometries:function(e){var n=t;if("[object Object]"===Object.prototype.toString.call(e))return[{position:n.latLng(e)}];var a=[];return e.forEach((function(e){a.push({position:n.latLng(e)})})),a}(e),zoomOnClick:!0,gridSize:60,averageCenter:!1,maxZoom:10}),this.varia.markerCluster}}],n&&y(t.prototype,n),a&&y(t,a),e}();function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const D={name:"Map",props:{sceneId:{type:String,default:"default"},visible:Boolean,inputValue:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100%"},searchInput:{type:Boolean,default:!0},optionSelect:{type:String,default:"title"},intLocation:{type:Boolean,default:!0},config:{type:Object,default:function(){return{}}}},data:function(){return{list:[],actInputValue:"",realDot:!1,glMap:null,id:"TMapSearch_"+d.default.guid()}},watch:{inputValue:function(e){e!==this.actInputValue&&(this.realDot=!0,this.actInputValue=e)},visible:function(e){e&&(this.glMap||this.initMap(),this.actInputValue=this.inputValue)}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this;this.$nextTick((function(){e.glMap=new S(g({container:e.id,success:function(){console.log("地图加载完毕！"),e.$emit("init",e.glMap),e.initComplate()}},e.config)),e.actInputValue=e.inputValue,e.searchInput&&e.actInputValue&&e.intLocation&&(e.realDot=!0,e.handleSearch()),e.glMap._afterInit()}))},initComplate:function(){var e=this,t=this;this.$nextTick((function(){setTimeout((function(){e.actInputValue=e.inputValue,t.glMap.request("suggestion",{keyword:e.inputValue}).then((function(e){e.count&&t.setPosition(e.data[0].id,e.data),t.list=e.data||[],t.$forceUpdate()})),t.$forceUpdate(),e.glMap.map.on("click",(function(e){var n=e.latLng.getLat(),a=e.latLng.getLng();t.setCenter({lat:n,lng:a});var i=[];t.glMap.request("parseLocation",{location:n+","+a}).then((function(e){console.log(e,"根据经纬度".concat(n+","+a,"解析地址信息"));var o={adcode:Number(e.result.ad_info.adcode),address:e.result.formatted_addresses.recommend,city:e.result.address_component.city,district:e.result.address_component.district,location:e.result.location,id:"123456ABCD",title:e.result.formatted_addresses.recommend,province:e.result.address_component.province,type:0};console.log(o,"传给外面的数据对象 - item--1"),t.$emit("change",o),i.push(o),t.actInputValue=e.result.formatted_addresses.recommend,t.setPosition("123456ABCD",i),t.glMap.request("suggestion",{keyword:e.result.address+e.result.formatted_addresses.recommend}).then((function(e){console.log(e,"res1"),e.count&&i.push.apply(i,R(e.data)),t.list=i,t.$forceUpdate()}))}))}))}),1e3)}))},inputHandler:function(e){var t=this;e&&(this.realDot?this.glMap.request("geocoder",{address:e}).then((function(e){t.realDot=!1,e.status?t.handleSearch():t.setAutoPosition(e.result)})):this.glMap.request("suggestion",{keyword:e}).then((function(e){console.log(e,"inputHandler--suggestion - input 输入框 输入关键词"),t.list=e.data})))},handleSearch:function(){var e=this;this.actInputValue&&(this.realDot?this.glMap.request("geocoder",{address:this.actInputValue}).then((function(t){e.realDot=!1,t.status?e.handleSearch():e.setAutoPosition(t.result)})):this.glMap.request("suggestion",{keyword:this.actInputValue}).then((function(t){console.log(t,"handleSearch--suggestion - input 手动调用搜索"),e.list=t.data})))},handleSelect:function(e){if(console.log("handleSelect：",e),e){var t=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(t.location),this.glMap.setMarker(t.location),console.log(t,"传给外面的数据对象 - item--2"),this.$emit("change",t)}},setPosition:function(e,t){this.list=t;var n=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(n.location),this.glMap.setMarker(n.location),this.$forceUpdate()},setCenter:function(e){this.glMap.setMarker(e)},setAutoPosition:function(e){console.log(e)},setAddress:function(e){this.inputHandler(e)},resetValue:function(e){var t=this;this.$nextTick((function(){(t.actInputValue||t.inputValue)&&(t.actInputValue=t.inputValue,t.list=[],t.actInputValue&&!e&&(t.realDot=!0,t.handleSearch()),t.realDot=!1,t.handleSearch())}))}}};var L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-search-wrapper"},[e.searchInput?n("a-auto-complete",{staticClass:"map-search",attrs:{autoFocus:"",placeholder:"请输入"},on:{search:e.inputHandler,select:e.handleSelect},model:{value:e.actInputValue,callback:function(t){e.actInputValue="string"==typeof t?t.trim():t},expression:"actInputValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t[e.optionSelect]))])})),1)],2):e._e(),e._v(" "),n("div",{staticClass:"t-map-search",style:{height:e.height,width:e.width},attrs:{id:e.id}})],1)};L._withStripped=!0;const T={name:"Manage",components:{GlMap:O({render:L,staticRenderFns:[]},void 0,D,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},visible:{type:Boolean,default:!1},title:{type:String,default:"地址定位"},config:{type:Object,default:function(){return null}},inputValue:{type:String,default:""},baseValue:{type:String,default:""}},data:function(){return{flag:!0,cache:null,addressInfo:{},glmap:new S}},watch:{visible:function(e){var t=this;this.$nextTick((function(){t.addressInfo={},e&&t.$nextTick((function(){setTimeout((function(){t.inputValue&&t.$refs.map&&t.$refs.map&&(console.log(t.inputValue,"this.inputValue"),t.parseAddress(t.inputValue,(function(e){if(e.length){var n=e[0];t.addressInfo=n,t.cache?t.$refs.map.setPosition(t.cache.id,d.default.unique([t.cache].concat(R(e)),"id")):t.$refs.map.setPosition(n.id,e)}else t.$refs.map.setPosition(t.cache.id,[t.cache])})))}),1e3)}))}))}},computed:{modalVisible:{get:function(){return this.visible},set:function(){this.$emit("update:visible",!1)}}},mounted:function(){},methods:{parseAddress:function(e,t){"string"==typeof e&&e.trim().length&&this.glmap.request("suggestion",{keyword:e}).then((function(e){e.count?t&&t(e.data):t&&t(null)}))},handleOk:function(){console.log(this.addressInfo,"点击弹框确定按钮返回  addressInfo 给最外面"),this.cache=this.addressInfo,this.$emit("ok",this.addressInfo),this.modalVisible=!1},handleCancel:function(){this.modalVisible=!1},handleChange:function(e){console.log(e,"弹框输入框选项发生变化，选中项赋值给 - addressInfo"),this.addressInfo=e}}};var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"map-dialog-modal",attrs:{title:e.title,maskClosable:!1,width:"810px",keyboard:!1},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("gl-map",{ref:"map",attrs:{sceneId:e.sceneId,visible:e.modalVisible,inputValue:e.inputValue,intLocation:!1},on:{change:e.handleChange}})],1)};$._withStripped=!0;const V={name:"AddressSearch",components:{MapDialog:O({render:$,staticRenderFns:[]},void 0,T,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},value:{type:String,default:""},icon:{type:String,default:"environment"},showBtn:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},defaultBtn:{type:Boolean,default:!1}},data:function(){return{dataSource:[],poiPicker:null,list:[],glMap:null,mapVisible:!1}},computed:{autoValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.autoValue=this.value,this.glMap=new S},methods:{handleSearch:function(e){var t=this;e&&this.glMap.request("suggestion",{keyword:e}).then((function(e){t.$set(t,"list",e.data)}))},handleBtn:function(){console.log("handleBtn"),this.disabled||(this.defaultBtn?this.mapVisible=!0:this.$emit("btnClick"))},handleSelect:function(e){if(e){var t=this.list.filter((function(t){return t.id===e}))[0];this.autoValue=t.title,this.$emit("change",t)}},resetOption:function(){var e=this;this.$nextTick((function(){e.list=[],e.handleSearch(e.value)}))},handleMapOk:function(e){e.adcode&&(this.autoValue=e.title||e.address,this.$emit("change",e))}}};var I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a-auto-complete",{staticClass:"map-search",attrs:{placeholder:"请输入",disabled:e.disabled},on:{search:e.handleSearch,select:e.handleSelect},model:{value:e.autoValue,callback:function(t){e.autoValue=t},expression:"autoValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.title))])})),1),e._v(" "),e._t("default",[n("a-input",{attrs:{maxLength:e.maxLength}},[e.showBtn?n("a-button",{staticClass:"dot-btn",staticStyle:{"margin-right":"-12px"},attrs:{slot:"suffix",type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleBtn(t)}},slot:"suffix"},[n("a-icon",{attrs:{type:e.icon}})],1):e._e()],1)])],2),e._v(" "),n("map-dialog",{ref:"mapDialog",attrs:{visible:e.mapVisible,title:"设置地址",sceneId:e.sceneId,inputValue:e.autoValue},on:{"update:visible":function(t){e.mapVisible=t},ok:e.handleMapOk}})],1)};I._withStripped=!0;const F=O({render:I,staticRenderFns:[]},void 0,V,void 0,!1,void 0,!1,void 0,void 0,void 0);var E={name:"AreaSelect",props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:"span"},bottom:{type:String,default:"24px"},level:{type:Number,default:3},disabled:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}},url:{type:String,default:""},loadData:{type:Function,default:null},dealData:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1}},data:function(){return{model:[{name:"province",label:"省"},{name:"city",label:"市"},{name:"district",label:"区"}],selectData:[],areaData:{province:[],city:[],district:[]},$request:null}},watch:{value:{handler:function(e){if(e.length){if(e[e.length-1]===this.selectData[this.selectData.length-1])return;this.dealValue()}else this.selectData=[],this.areaData.city=[],this.areaData.district=[]},deep:!0}},mounted:function(){var e=this;this.url?this.$request=function(t){return e.$get(e.url,t)}:this.$request=this.loadData,this.value.length?this.dealValue():this.getList()},methods:{getList:function(e,t,n){var a=this;this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){e||(a.areaData.province=n.data),e&&!t&&(a.areaData.city=n.data),e&&t&&(a.areaData.district=n.data)}))},dealValue:function(e,t,n){for(var a=this,i=JSON.parse(JSON.stringify(this.value)),o=0;o<i.length;o++)if(!i[o]){i.splice(o,i.length);break}this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){var o=n.data;e||(a.areaData.province=o,i[0]&&a.dealValue(i[0]),1===i.length&&(a.selectData=i,a.dealResult())),e&&!t&&(a.areaData.city=o,i[1]&&a.dealValue(i[0],i[1]),2===i.length&&(a.selectData=i,a.dealResult())),e&&t&&(a.areaData.district=o,3===i.length&&(a.selectData=i,a.dealResult()))}))},handleChange:function(e,t){"province"===t.name&&(this.areaData.city=[],this.areaData.district=[],this.selectData=[e],this.getList(e)),"city"===t.name&&(this.areaData.district=[],this.selectData=[this.selectData[0],e],this.getList.apply(this,R(this.selectData))),this.dealResult(),this.$emit("input",JSON.parse(JSON.stringify(this.selectData)))},dealResult:function(){var e=this,t=this.areaData.province.filter((function(t){return t.id===e.selectData[0]}))[0]||null,n=this.areaData.city.filter((function(t){return t.id===e.selectData[1]}))[0]||null,a=this.areaData.district.filter((function(t){return t.id===e.selectData[2]}))[0]||null;this.$emit("change",this.selectData,{province:t,city:n,district:a})}}};const P=E;var A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{staticClass:"area-wrap",attrs:{gutter:12}},[e._l(e.model,(function(t,a){return[a<=e.level-1?n("a-col",{key:a,style:{marginBottom:"span"===e.type||e.model.length-1===a?"":e.bottom},attrs:{span:"span"===e.type?24/e.model.length:24}},[n("a-select",{staticClass:"area-select",attrs:{placeholder:t.label,disabled:e.disabled},on:{change:function(n){return e.handleChange(n,t)}},model:{value:e.selectData[a],callback:function(t){e.$set(e.selectData,a,t)},expression:"selectData[index]"}},e._l(e.areaData[t.name],(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e()]}))],2)};A._withStripped=!0;const N=O({render:A,staticRenderFns:[]},void 0,P,void 0,!1,void 0,!1,void 0,void 0,void 0);var M="/gateway/saas-platform-service/api/v1/",j={province:"".concat(M,"address/province"),city:"".concat(M,"address/city"),district:"".concat(M,"address/district")},B="".concat(M,"address/get_by_name"),K={name:"AddressBox",props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},syncInputBox:{type:Boolean,default:!0},value:{type:Object,default:function(){return{address:"",province:"",cityName:"",city:"",provinceName:"",districtName:"",district:"",fullAddress:"",lng:"",lat:"",point:null}}}},data:function(){var e=this;return{actForm:{address:""},outerLocation:{},area:[],areaData:null,confirmLoading:!1,mapLoadArea:!1,getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(j.city,t):t.provinceId&&t.cityId?e.$get(j.district,t):void 0:e.$get(j.province,t)},getAddressCodeByName:function(t){return e.$get(B,t)},isFirst:!0}},components:{AddressSearch:F,AreaSelect:N},watch:{value:{handler:function(){this.generateForm()},deep:!0},actForm:{handler:function(e){this.isFirst?this.isFirst=!1:this.$emit("inputChange",e)},deep:!0}},mounted:function(){this.generateForm()},methods:{generateForm:function(){this.actForm=g({address:"",province:"",city:"",district:""},this.value),this.area=[],this.actForm.province&&this.area.push(this.actForm.province),this.actForm.city?this.area.push(this.actForm.city):this.actForm.province||(this.area=[]),this.actForm.district?this.area.push(this.actForm.district):this.actForm.province||this.actForm.district||(this.area=[])},handleMapOk:function(e){var t=this;return f(v.mark((function n(){return v.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,"地图选择 ok----"),e.adcode){n.next=3;break}return n.abrupt("return");case 3:e&&(t.getAddressCodeByName({provinceName:e.province,cityName:e.city,districtName:e.district}).then((function(e){t.mapLoadArea=!0;var n=e.data,a=n.subAddress,i=a.subAddress;t.area=[n.id,a.id,i.id]})),t.actForm.address=e.title||e.address,t.$emit("input",t.actForm));case 4:case"end":return n.stop()}}),n)})))()},handleAreaChange:function(e,t){if(this.areaData=t,this.mapLoadArea)return this.actForm.province=e[0],this.actForm.city=e[1],this.actForm.district=e[2],this.actForm.provinceName=t.province.name,this.actForm.cityName=t.city.name,this.actForm.districtName=t.district.name,this.$emit("input",this.actForm),void(this.mapLoadArea=!1);this.actForm=g(g({},this.actForm),{},{province:t.province&&t.province.id,city:t.city&&t.city.id,district:t.district&&t.district.id,provinceName:t.province&&t.province.name,cityName:t.city&&t.city.name,districtName:t.district&&t.district.name}),this.syncInputBox&&(this.actForm.address="".concat(t.province&&t.province.name||"").concat(t.city&&t.city.name||"").concat(t.district&&t.district.name||"")),this.$emit("input",this.actForm)},getData:function(){return this.areaData}}};const z=K;var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model-item",{attrs:{label:"省/市/区",prop:"area"}},[n("area-select",{attrs:{loadData:e.getRegion},on:{change:e.handleAreaChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"详细地址",prop:"address"}},[n("address-search",{ref:"autoComplete",attrs:{sceneId:e.sceneId,maxLength:e.maxLength,defaultBtn:""},on:{change:e.handleMapOk},model:{value:e.actForm.address,callback:function(t){e.$set(e.actForm,"address",t)},expression:"actForm.address"}})],1)],1)};H._withStripped=!0;const q=O({render:H,staticRenderFns:[]},void 0,z,void 0,!1,void 0,!1,void 0,void 0,void 0);return q.install=function(e){e.component(q.name,q)},q}))},"857a":function(e,t,n){var a=n("e330"),i=n("1d80"),o=n("577e"),r=/"/g,s=a("".replace);e.exports=function(e,t,n,a){var l=o(i(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+s(o(a),r,"&quot;")+'"'),c+">"+l+"</"+t+">"}},"8b5c":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("7db0"),n("a9e3"),n("4de4"),n("ac1f"),n("466d"),n("caad"),n("2532"),n("d3b7"),n("d81d"),n("159b"),n("04b3"),n("7569"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h){"use strict";function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const v={name:"Empty",components:{empty:d.empty,loading:d.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};y._withStripped=!0;const b=g({render:y,staticRenderFns:[]},void 0,v,void 0,!1,void 0,!1,void 0,void 0,void 0);b.install=function(e){e.component(b.name,b)};var w=[{id:0,name:"微信账户"},{id:1,name:"预付款账户"},{id:2,name:"现金账户"},{id:3,name:"银行卡账户"}],k="".concat("/gateway/billservice/api/v1/","account/check_list"),C="SYS_0000",_={0:"付款账户选择",1:"多账户选择"};const S={name:"DSelectPayAccount",components:{Empty:b},filters:{payAccountConvert:function(e){var t=w.find((function(t){return t.id===e}));return t?t.name:"--"}},props:{type:{type:Number,default:0},width:{type:[String,Number],default:816},visible:{type:Boolean,default:!1},payType:{type:Number,default:1},dueMoney:{type:[Number,String],default:0},customerId:{type:[String,Number],default:""},beforeClose:{type:Function,default:null},cache:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},excludeAccountTypes:{type:Array,default:function(){return[]}},defaultValue:{type:[String,Number,Array,Object],default:null},verifyTotalMoney:{type:Boolean,default:!0}},data:function(){return{modalTitles:_,loading:!1,tableData:[],totalMoney:0,keywords:null}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},locale:function(){return{emptyText:this.$createElement("Empty",{props:{loading:this.loading}})}},filteredTableData:function(){var e=this;return this.keywords?this.includedTableData.filter((function(t){var n=t.name,a=t.bankDeposit,i=t.accountNumber;if(n.match(e.keywords)||a.match(e.keywords)||i.match(e.keywords))return t})):this.includedTableData},includedTableData:function(){var e=this;return this.tableData.filter((function(t){if(!e.excludeAccountTypes.includes(t.type))return t}))}},watch:{visible:function(e){e&&!this.cache?this.loadData():this.tableData.length||this.loadData(),this.rules.keywords&&(this.keywords=this.rules.keywords)}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.$get(k,m({accountType:this.payType,customerId:this.customerId},this.rules)).then((function(t){var n=t.code,a=t.data;if(n===C){if(e.tableData=a.map((function(t,n){if(0===e.type){var a=!1;return e.defaultValue&&(a=e.defaultValue===t.accountId),m({checked:a,payMoney:0,index:n+1,sort:n+1,accountType:t.type},t)}if(1===e.type){var i=0;if(e.defaultValue&&"[object Array]"===Object.prototype.toString.call(e.defaultValue)){var o=e.defaultValue.find((function(e){return e.accountId===t.accountId}));o&&(i=o.payMoney,t.payMoney=o.payMoney,e.payMoneyBlur(t))}return m({payMoney:i,index:n+1,sort:n+1,accountType:t.type},t)}})),0===e.type&&e.tableData.length&&!e.tableData.find((function(e){return e.checked}))){var i=e.tableData.find((function(e){return 2===e.type}));i?i.checked=!0:e.tableData[0].checked=!0}e.$emit("data",e.tableData)}})).finally((function(){e.loading=!1}))},handleOk:function(){var e=this,t=null;if(1===this.type){var n=this.filteredTableData.filter((function(e){return e.checked=void 0,Number(e.payMoney)}));if(t={type:this.type,disabled:this.filteredTableData.length>1,paymentAccounts:n,payMoney:this.totalMoney},this.verifyTotalMoney&&t.payMoney>this.dueMoney)return void this.$message.error("请输入最大本次应付金额且最多2位小数的数值")}else t=this.filteredTableData.filter((function(e){return e.checked}));this.beforeClose?this.beforeClose({data:t,rows:t},(function(){e.$emit("update:visible",!1)})):(this.$emit("confirm",{data:t,rows:t}),this.$emit("update:visible",!1))},payMoneyBlur:function(e){1===e.type&&e.payMoney>e.balance&&(this.$message.error("预付金额小于本次付款金额，无法完成抵扣。"),e.payMoney=0),e.payMoney=h.fmtNum(e.payMoney,!1,2,!1);var t=this.tableData.reduce((function(e,t){return e+Number(t.payMoney)}),0);this.totalMoney=h.fmtNum(t,!1,2,!1)},handleCancel:function(){this.$emit("update:visible",!1)},radioChange:function(e){var t=this;this.filteredTableData.forEach((function(e){return e.checked=!1})),this.$nextTick((function(){t.filteredTableData[e].checked=!0}))}}};var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-pay-account a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.modalTitles[e.type],width:e.width,"cancel-text":"取消(Esc)","ok-text":"确定(Enter)"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[0===e.type?n("div",{staticClass:"single-account"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入关键字"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),n("a-table",{attrs:{customRow:function(t,n){return{on:{click:function(){e.radioChange(n)}}}},"data-source":e.filteredTableData,loading:e.loading,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},"row-key":"index"}},[n("a-table-column",{key:"index",attrs:{width:64,align:"center","data-index":"index"},scopedSlots:e._u([{key:"default",fn:function(t,a,i){return[n("span",{on:{click:function(t){return e.radioChange(i)}}},[n("a-radio",{attrs:{checked:a.checked}})],1)]}}],null,!1,4291464169)}),e._v(" "),n("a-table-column",{attrs:{width:160,"data-index":"type",title:"账户类型"},scopedSlots:e._u([{key:"default",fn:function(t,n){return[e._v("\n          "+e._s(e._f("payAccountConvert")(n.type))+"\n        ")]}}],null,!1,2287724343)}),e._v(" "),n("a-table-column",{attrs:{width:192,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{key:"bankDeposit",attrs:{width:160,"data-index":"bankDeposit",title:"开户银行"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)}),e._v(" "),n("a-table-column",{key:"accountNumber",attrs:{width:160,"data-index":"accountNumber",title:"银行账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)})],1)],1):n("div",{staticClass:"multiple-account"},[n("div",{staticClass:"dialog-pay"},[e._v("应"+e._s(1===e.payType?"付":"收")+"金额：¥"+e._s(e.dueMoney))]),e._v(" "),n("a-table",{staticClass:"account",attrs:{"data-source":e.filteredTableData,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},bordered:"",rowKey:"index"}},[n("a-table-column",{key:"index",staticClass:"style-padding",attrs:{width:88,align:"center","data-index":"index",title:"行号"}}),e._v(" "),n("a-table-column",{staticClass:"style-padding",attrs:{width:358,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{attrs:{width:"100%","data-index":"payMoney",title:"金额"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},on:{blur:function(t){return e.payMoneyBlur(a)}},model:{value:a.payMoney,callback:function(t){e.$set(a,"payMoney",t)},expression:"record.payMoney"}})]}}])}),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"total"},[n("div",{staticClass:"name"},[e._v("合计")]),e._v(" "),n("div",{staticStyle:{width:"358px"}}),e._v(" "),n("div",{staticClass:"money"},[e._v(e._s(e.totalMoney))])])])],2)],1)])};x._withStripped=!0;const R=g({render:x,staticRenderFns:[]},void 0,S,void 0,!1,void 0,!1,void 0,void 0,void 0);return R.install=function(e){e.component(R.name,R)},R}))},"90b7":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=function(){return Array.from(arguments).reduce((function(t,n){for(var a in n)t[a]=t[a]&&"[object Object]"===t[a].toString()?e(t[a],n[a]):t[a]=n[a];return t}),{})};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function a(e,t){return n(e)===t}function i(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(!e||!n||"object"!==t(e)&&"object"!==t(n))return e===n;if(e.prototype!==n.prototype)return!1;var a=Object.keys(e);return a.length===Object.keys(n).length&&(Array.isArray(e)&&Array.isArray(n)||"Object"==o(e)&&"Object"==o(n))&&a.every((function(t){return i(e[t],n[t])}));function o(e){return Object.prototype.toString.call(e).slice(8,-1)}}return{merge:e,clone:function(e){var t,n={};for(t in e)n[t]=e[t];return n},deepClone:function(e){return n=[],i=[],function e(o){if(null===o)return null;if("object"!==t(o))return o;var r;a(o,"array")?r=[]:a(o,"regexp")?(r=new RegExp(o.source,getRegExp(o)),o.lastIndex&&(r.lastIndex=o.lastIndex)):r=a(o,"date")?new Date(o.getTime()):(l=Object.getPrototypeOf(o),Object.create(l));var s,l=n.indexOf(o);if(-1!==l)return i[l];for(s in n.push(o),i.push(r),o)r[s]=e(o[s]);return r}(e);var n,i},findKey:function(e,t){for(var n in e)if("function"==typeof t&&t(e[n])||Array.isArray(t)&&e[n][t[0]]===t[1]||"string"==typeof t&&t in e[n]||i(e[n],t))return n},convertKey:function e(t,a,i){if(!["array","object"].includes(n(t)))throw new TypeError("The first argument should be either an object or an array！");if("[object Object]"!==Object.prototype.toString.call(a))throw new TypeError("The parameter keyMap should be an object!");var o=Array.isArray(t)?[]:{};if(t instanceof Object)for(var r in t){var s=Object.keys(a).includes(r)?a[r]:r;o[s]=t[r],i&&["array","object"].includes(n(t[r]))&&Object.keys(t[r]).length&&(o[s]=e(t[r],a,i))}return o}}}))},"937e":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("caad"),n("d3b7"))}(0,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n="".concat("/gateway/customer-service/api/v1/","order/get_region_list"),a="".concat("/gateway/goodsservice/api/v1/","category/get_category_list"),i={name:"DMixTreeSelect",props:{value:{type:[String,Number,String,Object],default:void 0},name:{type:String,default:"warehouse"},allowClear:{type:Boolean,default:!0},dropHeight:{type:[String,Number],default:300},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:120}},data:function(){return{actValue:void 0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},options:[],request:null,parentId:0}},computed:{modalPlaceholder:function(){return this.placeholder?this.placeholder:this.selectPlaceholder[this.type]},actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")},dropdownWidth:function(){return"string"==typeof this.width?this.width.indexOf("%")?this.width:"".concat(parseInt(this.width)+100,"px"):"".concat(this.width+100,"px")},dropdownHeight:function(){return"string"==typeof this.dropHeight?this.dropHeight:"".concat(this.dropHeight,"px")}},watch:{value:function(e){this.actValue=e}},created:function(){console.log("下拉树子组件挂载"),this.generateRequest().loadData()},methods:{generateRequest:function(){var e=this;return["warehouse"].includes(this.name)?(this.replaceFields={children:"children",value:"id",title:"categoryName",key:"id"},this.request=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categoryType:2,parentId:e.parentId};return e.$get(a,t)}):["area"].includes(this.name)&&(this.replaceFields={children:"children",value:"id",title:"name",key:"id"},this.request=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{businessId:e.parentId};return e.$post(n,t)}),this},loadData:function(e){var n=this;if(e)return new Promise((function(a){var i=e.dataRef;n.parentId=i.id,n.request().then((function(e){var o=e.data;["warehouse","area"].includes(n.name)&&(o.length&&(i.children=o,n.options=t(n.options)),a())}))}));this.request().then((function(e){n.options=e.data}))},changeValue:function(e,t,n){this.$emit("change",{data:e,rows:e?[n.triggerNode.dataRef]:null})}}};function o(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const r=i;var s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{style:{width:e.actWidth},attrs:{allowClear:e.allowClear,"tree-data-simple-mode":"","dropdown-style":{width:e.dropdownWidth,maxHeight:e.dropdownHeight,overflow:"auto"},"tree-data":e.options,placeholder:e.placeholder,"load-data":e.loadData,replaceFields:e.replaceFields,dropdownClassName:"d-tree-select"},on:{change:e.changeValue},model:{value:e.actValue,callback:function(t){e.actValue=t},expression:"actValue"}})};s._withStripped=!0;const l=o({render:s,staticRenderFns:[]},void 0,r,void 0,!1,void 0,!1,void 0,void 0,void 0);return l.install=function(e){e.component(l.name,l)},l}))},"96d3":function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("4de4"),n("ac1f"),n("466d"),n("d3b7"),n("d81d"),n("7db0"),n("caad"),n("2532"),n("a434"),n("04b3"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d){"use strict";function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const g=m({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return p({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0),v={name:"Empty",components:{empty:d.empty,loading:d.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};y._withStripped=!0;const b=m({render:y,staticRenderFns:[]},void 0,v,void 0,!1,void 0,!1,void 0,void 0,void 0);b.install=function(e){e.component(b.name,b)};var w="/gateway/goodsservice/api/v1/",k="".concat(w,"setting/query_goods_attr_setting_list"),C="".concat(w,"goods/get_sku_unit_list"),_="".concat(w,"warehouse/get_warehouse_by_corp_id");const S={name:"DSelectProductAttr",components:{SelectGroup:g,Empty:b},props:{value:{type:Object,default:null},visible:{type:Boolean,default:!1},width:{type:Number,default:816},destory:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入搜索关键字"},type:{type:Number,default:0},productId:{type:Array,default:function(){return[]}},inputValue:{type:String,default:""},replaceFields:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}}},data:function(){return{selectValue:void 0,keywords:"",options:[],loading:!1}},watch:{modalVisible:{handler:function(e){e&&(this.init(),this.value&&(this.selectValue=this.value.id)),this.rules.keywords&&(this.keywords=this.rules.keywords)},immediate:!0}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},title:function(){var e=this.type;return 0===e?"选择单位":1===e?"选择品牌":2===e?"选择标签":3===e?"选择单位":"选择仓库"},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t.name.match(e.keywords))return t})):this.options},baseReplaceFields:function(){return p({key:"id",name:"name"},this.replaceFields)}},methods:{init:function(){var e=this;this.loading=!0,4===this.type?this.$get(_,p({pageNum:1,pageSize:100},this.rules)).then((function(t){e.options=t.data.list})).finally((function(){e.loading=!1})):3===this.type?this.$post(C,this.productId).then((function(t){e.options=t.data.map((function(e){return p(p({},e),{},{name:e.unitName})}))})).finally((function(){e.loading=!1})):this.$post(k,p({type:this.type},this.rules)).then((function(t){e.options=t.data})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},handlerAfterClose:function(){this.$emit("afterClose")},handleOk:function(){var e=this,t=this.options.find((function(t){return t.id===e.selectValue})),n=this.options.filter((function(t){return t.id===e.selectValue}));this.$emit("confirm",{data:t,rows:n,baseRows:this.options}),this.modalVisible=!1}}};var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{afterClose:e.handlerAfterClose,destroyOnClose:e.destory,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:function(t){e.modalVisible=!1},ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1)],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},[n("select-group",{attrs:{options:e.filteredOptions,replaceFields:e.baseReplaceFields},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};x._withStripped=!0;const R=m({render:x,staticRenderFns:[]},void 0,S,void 0,!1,void 0,!1,void 0,void 0,void 0);return R.install=function(e){e.component(R.name,R)},R}))},9911:function(e,t,n){"use strict";var a=n("23e7"),i=n("857a"),o=n("af03");a({target:"String",proto:!0,forced:o("link")},{link:function(e){return i(this,"a","href",e)}})},a15b:function(e,t,n){"use strict";var a=n("23e7"),i=n("e330"),o=n("44ad"),r=n("fc6a"),s=n("a640"),l=i([].join),c=o!=Object,u=s("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(r(this),void 0===e?",":e)}})},aa47:function(e,t,n){"use strict";
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,a,i=l(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e){return d(e)||h(e)||f(e)||m()}function d(e){if(Array.isArray(e))return p(e)}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.r(t),n.d(t,"MultiDrag",(function(){return zt})),n.d(t,"Sortable",(function(){return nt})),n.d(t,"Swap",(function(){return $t}));var g="1.14.0";function v(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var y=v(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),b=v(/Edge/i),w=v(/firefox/i),k=v(/safari/i)&&!v(/chrome/i)&&!v(/android/i),C=v(/iP(ad|od|hone)/i),_=v(/chrome/i)&&v(/android/i),S={capture:!1,passive:!1};function x(e,t,n){e.addEventListener(t,n,!y&&S)}function R(e,t,n){e.removeEventListener(t,n,!y&&S)}function O(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function D(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function L(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&O(e,t):O(e,t))||a&&e===n)return e;if(e===n)break}while(e=D(e))}return null}var T,$=/\s+/g;function V(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace($," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace($," ")}}function I(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"===typeof n?"":"px")}}function F(e,t){var n="";if("string"===typeof e)n=e;else do{var a=I(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function E(e,t,n){if(e){var a=e.getElementsByTagName(t),i=0,o=a.length;if(n)for(;i<o;i++)n(a[i],i);return a}return[]}function P(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,n,a,i){if(e.getBoundingClientRect||e===window){var o,r,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==P()?(o=e.getBoundingClientRect(),r=o.top,s=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!y))do{if(i&&i.getBoundingClientRect&&("none"!==I(i,"transform")||n&&"static"!==I(i,"position"))){var h=i.getBoundingClientRect();r-=h.top+parseInt(I(i,"border-top-width")),s-=h.left+parseInt(I(i,"border-left-width")),l=r+o.height,c=s+o.width;break}}while(i=i.parentNode);if(a&&e!==window){var f=F(i||e),p=f&&f.a,m=f&&f.d;f&&(r/=m,s/=p,d/=p,u/=m,l=r+u,c=s+d)}return{top:r,left:s,bottom:l,right:c,width:d,height:u}}}function N(e,t,n){var a=H(e,!0),i=A(e)[t];while(a){var o=A(a)[n],r=void 0;if(r="top"===n||"left"===n?i>=o:i<=o,!r)return a;if(a===P())break;a=H(a,!1)}return!1}function M(e,t,n,a){var i=0,o=0,r=e.children;while(o<r.length){if("none"!==r[o].style.display&&r[o]!==nt.ghost&&(a||r[o]!==nt.dragged)&&L(r[o],n.draggable,e,!1)){if(i===t)return r[o];i++}o++}return null}function j(e,t){var n=e.lastElementChild;while(n&&(n===nt.ghost||"none"===I(n,"display")||t&&!O(n,t)))n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===nt.clone||t&&!O(e,t)||n++;return n}function K(e){var t=0,n=0,a=P();if(e)do{var i=F(e),o=i.a,r=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[t,n]}function z(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}function H(e,t){if(!e||!e.getBoundingClientRect)return P();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=I(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(a||t)return n;a=!0}}}while(n=n.parentNode);return P()}function q(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function W(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function U(e,t){return function(){if(!T){var n=arguments,a=this;1===n.length?e.call(a,n[0]):e.apply(a,n),T=setTimeout((function(){T=void 0}),t)}}}function G(){clearTimeout(T),T=void 0}function Y(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function X(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function J(e,t){I(e,"position","absolute"),I(e,"top",t.top),I(e,"left",t.left),I(e,"width",t.width),I(e,"height",t.height)}function Q(e){I(e,"position",""),I(e,"top",""),I(e,"left",""),I(e,"width",""),I(e,"height","")}var Z="Sortable"+(new Date).getTime();function ee(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==I(e,"display")&&e!==nt.ghost){t.push({target:e,rect:A(e)});var n=i({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=F(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(z(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,s=A(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=F(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&W(l,s)&&!W(r,s)&&(u.top-s.top)/(u.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(t=ne(u,l,c,a.options)),W(s,r)||(n.prevFromRect=r,n.prevToRect=s,t||(t=a.options.animation),a.animate(n,u,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){I(e,"transition",""),I(e,"transform","");var i=F(this.el),o=i&&i.a,r=i&&i.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(r||1);e.animatingX=!!s,e.animatingY=!!l,I(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=te(e),I(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),I(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){I(e,"transition",""),I(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function te(e){return e.offsetWidth}function ne(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var ae=[],ie={initializeByDefault:!0},oe={mount:function(e){for(var t in ie)ie.hasOwnProperty(t)&&!(t in e)&&(e[t]=ie[t]);ae.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ae.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";ae.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](i({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](i({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var i in ae.forEach((function(a){var i=a.pluginName;if(e.options[i]||a.initializeByDefault){var o=new a(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,s(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return ae.forEach((function(a){"function"===typeof a.eventProperties&&s(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return ae.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(a=i.optionListeners[t].call(e[i.pluginName],n))})),a}};function re(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,r=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,h=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[Z],t){var g,v=t.options,w="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||y||b?(g=document.createEvent("Event"),g.initEvent(a,!0,!0)):g=new CustomEvent(a,{bubbles:!0,cancelable:!0}),g.to=s||n,g.from=l||n,g.item=o||n,g.clone=r,g.oldIndex=c,g.newIndex=u,g.oldDraggableIndex=d,g.newDraggableIndex=h,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var k=i(i({},m),oe.getEventProperties(a,t));for(var C in k)g[C]=k[C];n&&n.dispatchEvent(g),v[w]&&v[w].call(t,g)}}var se=["evt"],le=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=c(n,se);oe.pluginEvent.bind(nt)(e,t,i({dragEl:ue,parentEl:de,ghostEl:he,rootEl:fe,nextEl:pe,lastDownEl:me,cloneEl:ge,cloneHidden:ve,dragStarted:Te,putSortable:_e,activeSortable:nt.active,originalEvent:a,oldIndex:ye,oldDraggableIndex:we,newIndex:be,newDraggableIndex:ke,hideGhostForTarget:Qe,unhideGhostForTarget:Ze,cloneNowHidden:function(){ve=!0},cloneNowShown:function(){ve=!1},dispatchSortableEvent:function(e){ce({sortable:t,name:e,originalEvent:a})}},o))};function ce(e){re(i({putSortable:_e,cloneEl:ge,targetEl:ue,rootEl:fe,oldIndex:ye,oldDraggableIndex:we,newIndex:be,newDraggableIndex:ke},e))}var ue,de,he,fe,pe,me,ge,ve,ye,be,we,ke,Ce,_e,Se,xe,Re,Oe,De,Le,Te,$e,Ve,Ie,Fe,Ee=!1,Pe=!1,Ae=[],Ne=!1,Me=!1,je=[],Be=!1,Ke=[],ze="undefined"!==typeof document,He=C,qe=b||y?"cssFloat":"float",We=ze&&!_&&!C&&"draggable"in document.createElement("div"),Ue=function(){if(ze){if(y)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ge=function(e,t){var n=I(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=M(e,0,t),o=M(e,1,t),r=i&&I(i),s=o&&I(o),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+A(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r["float"]&&"none"!==r["float"]){var u="left"===r["float"]?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=a&&"none"===n[qe]||o&&"none"===n[qe]&&l+c>a)?"vertical":"horizontal"},Ye=function(e,t,n){var a=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return a===r||i===s||a+o/2===r+l/2},Xe=function(e,t){var n;return Ae.some((function(a){var i=a[Z].options.emptyInsertThreshold;if(i&&!j(a)){var o=A(a),r=e>=o.left-i&&e<=o.right+i,s=t>=o.top-i&&t<=o.bottom+i;return r&&s?n=a:void 0}})),n},Je=function(e){function t(e,n){return function(a,i,o,r){var s=a.options.group.name&&i.options.group.name&&a.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(a,i,o,r),n)(a,i,o,r);var l=(n?a:i).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},a=e.group;a&&"object"==o(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Qe=function(){!Ue&&he&&I(he,"display","none")},Ze=function(){!Ue&&he&&I(he,"display","")};ze&&document.addEventListener("click",(function(e){if(Pe)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Pe=!1,!1}),!0);var et=function(e){if(ue){e=e.touches?e.touches[0]:e;var t=Xe(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Z]._onDragOver(n)}}},tt=function(e){ue&&ue.parentNode[Z]._isOutsideThisEl(e.target)};function nt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=s({},t),e[Z]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ge(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==nt.supportPointer&&"PointerEvent"in window&&!k,emptyInsertThreshold:5};for(var a in oe.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var i in Je(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&We,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?x(e,"pointerdown",this._onTapStart):(x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Ae.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),s(this,ee())}function at(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function it(e,t,n,a,i,o,r,s){var l,c,u=e[Z],d=u.options.onMove;return!window.CustomEvent||y||b?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=i||t,l.relatedRect=o||A(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),d&&(c=d.call(u,l,r)),c}function ot(e){e.draggable=!1}function rt(){Be=!1}function st(e,t,n){var a=A(M(n.el,0,n.options,!0)),i=10;return t?e.clientX<a.left-i||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-i||e.clientY<a.bottom&&e.clientX<a.left}function lt(e,t,n){var a=A(j(n.el,n.options.draggable)),i=10;return t?e.clientX>a.right+i||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+i}function ct(e,t,n,a,i,o,r,s){var l=a?e.clientY:e.clientX,c=a?n.height:n.width,u=a?n.top:n.left,d=a?n.bottom:n.right,h=!1;if(!r)if(s&&Ie<c*i){if(!Ne&&(1===Ve?l>u+c*o/2:l<d-c*o/2)&&(Ne=!0),Ne)h=!0;else if(1===Ve?l<u+Ie:l>d-Ie)return-Ve}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return ut(t);return h=h||r,h&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}function ut(e){return B(ue)<B(e)?1:-1}function dt(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;while(n--)a+=t.charCodeAt(n);return a.toString(36)}function ht(e){Ke.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var a=t[n];a.checked&&Ke.push(a)}}function ft(e){return setTimeout(e,0)}function pt(e){return clearTimeout(e)}nt.prototype={constructor:nt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||($e=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,ue):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,i=a.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=a.filter;if(ht(n),!ue&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||a.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!k||!s||"SELECT"!==s.tagName.toUpperCase())&&(s=L(s,a.draggable,n,!1),(!s||!s.animated)&&me!==s)){if(ye=B(s),we=B(s,a.draggable),"function"===typeof c){if(c.call(this,e,s,this))return ce({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),le("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=L(l,a.trim(),n,!1),a)return ce({sortable:t,rootEl:a,name:"filter",targetEl:s,fromEl:n,toEl:n}),le("filter",t,{evt:e}),!0})),c))return void(i&&e.cancelable&&e.preventDefault());a.handle&&!L(l,a.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var a,i=this,o=i.el,r=i.options,s=o.ownerDocument;if(n&&!ue&&n.parentNode===o){var l=A(n);if(fe=o,ue=n,de=ue.parentNode,pe=ue.nextSibling,me=n,Ce=r.group,nt.dragged=ue,Se={target:ue,clientX:(t||e).clientX,clientY:(t||e).clientY},De=Se.clientX-l.left,Le=Se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ue.style["will-change"]="all",a=function(){le("delayEnded",i,{evt:e}),nt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!w&&i.nativeDraggable&&(ue.draggable=!0),i._triggerDragStart(e,t),ce({sortable:i,name:"choose",originalEvent:e}),V(ue,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){E(ue,e.trim(),ot)})),x(s,"dragover",et),x(s,"mousemove",et),x(s,"touchmove",et),x(s,"mouseup",i._onDrop),x(s,"touchend",i._onDrop),x(s,"touchcancel",i._onDrop),w&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ue.draggable=!0),le("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(b||y))a();else{if(nt.eventCanceled)return void this._onDrop();x(s,"mouseup",i._disableDelayedDrag),x(s,"touchend",i._disableDelayedDrag),x(s,"touchcancel",i._disableDelayedDrag),x(s,"mousemove",i._delayedDragTouchMoveHandler),x(s,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&x(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(a,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ue&&ot(ue),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;R(e,"mouseup",this._disableDelayedDrag),R(e,"touchend",this._disableDelayedDrag),R(e,"touchcancel",this._disableDelayedDrag),R(e,"mousemove",this._delayedDragTouchMoveHandler),R(e,"touchmove",this._delayedDragTouchMoveHandler),R(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,t?"touchmove":"mousemove",this._onTouchMove):(x(ue,"dragend",this),x(fe,"dragstart",this._onDragStart));try{document.selection?ft((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Ee=!1,fe&&ue){le("dragStarted",this,{evt:t}),this.nativeDraggable&&x(document,"dragover",tt);var n=this.options;!e&&V(ue,n.dragClass,!1),V(ue,n.ghostClass,!0),nt.active=this,e&&this._appendGhost(),ce({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(xe){this._lastX=xe.clientX,this._lastY=xe.clientY,Qe();var e=document.elementFromPoint(xe.clientX,xe.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(xe.clientX,xe.clientY),e===t)break;t=e}if(ue.parentNode[Z]._isOutsideThisEl(e),t)do{if(t[Z]){var n=void 0;if(n=t[Z]._onDragOver({clientX:xe.clientX,clientY:xe.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ze()}},_onTouchMove:function(e){if(Se){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=he&&F(he,!0),r=he&&o&&o.a,s=he&&o&&o.d,l=He&&Fe&&K(Fe),c=(i.clientX-Se.clientX+a.x)/(r||1)+(l?l[0]-je[0]:0)/(r||1),u=(i.clientY-Se.clientY+a.y)/(s||1)+(l?l[1]-je[1]:0)/(s||1);if(!nt.active&&!Ee){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(he){o?(o.e+=c-(Re||0),o.f+=u-(Oe||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");I(he,"webkitTransform",d),I(he,"mozTransform",d),I(he,"msTransform",d),I(he,"transform",d),Re=c,Oe=u,xe=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!he){var e=this.options.fallbackOnBody?document.body:fe,t=A(ue,!0,He,!0,e),n=this.options;if(He){Fe=e;while("static"===I(Fe,"position")&&"none"===I(Fe,"transform")&&Fe!==document)Fe=Fe.parentNode;Fe!==document.body&&Fe!==document.documentElement?(Fe===document&&(Fe=P()),t.top+=Fe.scrollTop,t.left+=Fe.scrollLeft):Fe=P(),je=K(Fe)}he=ue.cloneNode(!0),V(he,n.ghostClass,!1),V(he,n.fallbackClass,!0),V(he,n.dragClass,!0),I(he,"transition",""),I(he,"transform",""),I(he,"box-sizing","border-box"),I(he,"margin",0),I(he,"top",t.top),I(he,"left",t.left),I(he,"width",t.width),I(he,"height",t.height),I(he,"opacity","0.8"),I(he,"position",He?"absolute":"fixed"),I(he,"zIndex","100000"),I(he,"pointerEvents","none"),nt.ghost=he,e.appendChild(he),I(he,"transform-origin",De/parseInt(he.style.width)*100+"% "+Le/parseInt(he.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,i=n.options;le("dragStart",this,{evt:e}),nt.eventCanceled?this._onDrop():(le("setupClone",this),nt.eventCanceled||(ge=X(ue),ge.draggable=!1,ge.style["will-change"]="",this._hideClone(),V(ge,this.options.chosenClass,!1),nt.clone=ge),n.cloneId=ft((function(){le("clone",n),nt.eventCanceled||(n.options.removeCloneOnHide||fe.insertBefore(ge,ue),n._hideClone(),ce({sortable:n,name:"clone"}))})),!t&&V(ue,i.dragClass,!0),t?(Pe=!0,n._loopId=setInterval(n._emulateDragOver,50)):(R(document,"mouseup",n._onDrop),R(document,"touchend",n._onDrop),R(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(n,a,ue)),x(document,"drop",n),I(ue,"transform","translateZ(0)")),Ee=!0,n._dragStartId=ft(n._dragStarted.bind(n,t,e)),x(document,"selectstart",n),Te=!0,k&&I(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,o,r=this.el,s=e.target,l=this.options,c=l.group,u=nt.active,d=Ce===c,h=l.sort,f=_e||u,p=this,m=!1;if(!Be){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=L(s,l.draggable,r,!0),$("dragOver"),nt.eventCanceled)return m;if(ue.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return E(!1);if(Pe=!1,u&&!l.disabled&&(d?h||(a=de!==fe):_e===this||(this.lastPutMode=Ce.checkPull(this,u,ue,e))&&c.checkPut(this,u,ue,e))){if(o="vertical"===this._getDirection(e,s),t=A(ue),$("dragOverValid"),nt.eventCanceled)return m;if(a)return de=fe,F(),this._hideClone(),$("revert"),nt.eventCanceled||(pe?fe.insertBefore(ue,pe):fe.appendChild(ue)),E(!0);var g=j(r,l.draggable);if(!g||lt(e,o,this)&&!g.animated){if(g===ue)return E(!1);if(g&&r===e.target&&(s=g),s&&(n=A(s)),!1!==it(fe,r,ue,t,s,n,e,!!s))return F(),r.appendChild(ue),de=r,P(),E(!0)}else if(g&&st(e,o,this)){var v=M(r,0,l,!0);if(v===ue)return E(!1);if(s=v,n=A(s),!1!==it(fe,r,ue,t,s,n,e,!1))return F(),r.insertBefore(ue,v),de=r,P(),E(!0)}else if(s.parentNode===r){n=A(s);var y,b,w=0,k=ue.parentNode!==r,C=!Ye(ue.animated&&ue.toRect||t,s.animated&&s.toRect||n,o),_=o?"top":"left",S=N(s,"top","top")||N(ue,"top","top"),x=S?S.scrollTop:void 0;if($e!==s&&(y=n[_],Ne=!1,Me=!C&&l.invertSwap||k),w=ct(e,s,n,o,C?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Me,$e===s),0!==w){var R=B(ue);do{R-=w,b=de.children[R]}while(b&&("none"===I(b,"display")||b===he))}if(0===w||b===s)return E(!1);$e=s,Ve=w;var O=s.nextElementSibling,D=!1;D=1===w;var T=it(fe,r,ue,t,s,n,e,D);if(!1!==T)return 1!==T&&-1!==T||(D=1===T),Be=!0,setTimeout(rt,30),F(),D&&!O?r.appendChild(ue):s.parentNode.insertBefore(ue,D?O:s),S&&Y(S,0,x-S.scrollTop),de=ue.parentNode,void 0===y||Me||(Ie=Math.abs(y-A(s)[_])),P(),E(!0)}if(r.contains(ue))return E(!1)}return!1}function $(l,c){le(l,p,i({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:h,fromSortable:f,target:s,completed:E,onMove:function(n,a){return it(fe,r,ue,t,n,A(n),e,a)},changed:P},c))}function F(){$("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function E(t){return $("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(p),p!==f&&(V(ue,_e?_e.options.ghostClass:u.options.ghostClass,!1),V(ue,l.ghostClass,!0)),_e!==p&&p!==nt.active?_e=p:p===nt.active&&_e&&(_e=null),f===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){$("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(s===ue&&!ue.animated||s===r&&!s.animated)&&($e=null),l.dragoverBubble||e.rootEl||s===document||(ue.parentNode[Z]._isOutsideThisEl(e.target),!t&&et(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function P(){be=B(ue),ke=B(ue,l.draggable),ce({sortable:p,name:"change",toEl:r,newIndex:be,newDraggableIndex:ke,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){R(document,"mousemove",this._onTouchMove),R(document,"touchmove",this._onTouchMove),R(document,"pointermove",this._onTouchMove),R(document,"dragover",et),R(document,"mousemove",et),R(document,"touchmove",et)},_offUpEvents:function(){var e=this.el.ownerDocument;R(e,"mouseup",this._onDrop),R(e,"touchend",this._onDrop),R(e,"pointerup",this._onDrop),R(e,"touchcancel",this._onDrop),R(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;be=B(ue),ke=B(ue,n.draggable),le("drop",this,{evt:e}),de=ue&&ue.parentNode,be=B(ue),ke=B(ue,n.draggable),nt.eventCanceled||(Ee=!1,Me=!1,Ne=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pt(this.cloneId),pt(this._dragStartId),this.nativeDraggable&&(R(document,"drop",this),R(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),k&&I(document.body,"user-select",""),I(ue,"transform",""),e&&(Te&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),he&&he.parentNode&&he.parentNode.removeChild(he),(fe===de||_e&&"clone"!==_e.lastPutMode)&&ge&&ge.parentNode&&ge.parentNode.removeChild(ge),ue&&(this.nativeDraggable&&R(ue,"dragend",this),ot(ue),ue.style["will-change"]="",Te&&!Ee&&V(ue,_e?_e.options.ghostClass:this.options.ghostClass,!1),V(ue,this.options.chosenClass,!1),ce({sortable:this,name:"unchoose",toEl:de,newIndex:null,newDraggableIndex:null,originalEvent:e}),fe!==de?(be>=0&&(ce({rootEl:de,name:"add",toEl:de,fromEl:fe,originalEvent:e}),ce({sortable:this,name:"remove",toEl:de,originalEvent:e}),ce({rootEl:de,name:"sort",toEl:de,fromEl:fe,originalEvent:e}),ce({sortable:this,name:"sort",toEl:de,originalEvent:e})),_e&&_e.save()):be!==ye&&be>=0&&(ce({sortable:this,name:"update",toEl:de,originalEvent:e}),ce({sortable:this,name:"sort",toEl:de,originalEvent:e})),nt.active&&(null!=be&&-1!==be||(be=ye,ke=we),ce({sortable:this,name:"end",toEl:de,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){le("nulling",this),fe=ue=de=he=pe=ge=me=ve=Se=xe=Te=be=ke=ye=we=$e=Ve=_e=Ce=nt.dragged=nt.ghost=nt.clone=nt.active=null,Ke.forEach((function(e){e.checked=!0})),Ke.length=Re=Oe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ue&&(this._onDragOver(e),at(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,i=n.length,o=this.options;a<i;a++)e=n[a],L(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||dt(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var i=a.children[t];L(i,this.options.draggable,a,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return L(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=oe.modifyOption(this,e,t);n[e]="undefined"!==typeof a?a:t,"group"===e&&Je(n)},destroy:function(){le("destroy",this);var e=this.el;e[Z]=null,R(e,"mousedown",this._onTapStart),R(e,"touchstart",this._onTapStart),R(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(R(e,"dragover",this),R(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ae.splice(Ae.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ve){if(le("hideClone",this),nt.eventCanceled)return;I(ge,"display","none"),this.options.removeCloneOnHide&&ge.parentNode&&ge.parentNode.removeChild(ge),ve=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ve){if(le("showClone",this),nt.eventCanceled)return;ue.parentNode!=fe||this.options.group.revertClone?pe?fe.insertBefore(ge,pe):fe.appendChild(ge):fe.insertBefore(ge,ue),this.options.group.revertClone&&this.animate(ue,ge),I(ge,"display",""),ve=!1}}else this._hideClone()}},ze&&x(document,"touchmove",(function(e){(nt.active||Ee)&&e.cancelable&&e.preventDefault()})),nt.utils={on:x,off:R,css:I,find:E,is:function(e,t){return!!L(e,t,e,!1)},extend:q,throttle:U,closest:L,toggleClass:V,clone:X,index:B,nextTick:ft,cancelNextTick:pt,detectDirection:Ge,getChild:M},nt.get=function(e){return e[Z]},nt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(nt.utils=i(i({},nt.utils),e.utils)),oe.mount(e)}))},nt.create=function(e,t){return new nt(e,t)},nt.version=g;var mt,gt,vt,yt,bt,wt,kt=[],Ct=!1;function _t(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?R(document,"dragover",this._handleAutoScroll):(R(document,"pointermove",this._handleFallbackAutoScroll),R(document,"touchmove",this._handleFallbackAutoScroll),R(document,"mousemove",this._handleFallbackAutoScroll)),xt(),St(),G()},nulling:function(){bt=gt=mt=Ct=wt=vt=yt=null,kt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(a,i);if(bt=e,t||this.options.forceAutoScrollFallback||b||y||k){Ot(e,this.options,o,t);var r=H(o,!0);!Ct||wt&&a===vt&&i===yt||(wt&&xt(),wt=setInterval((function(){var o=H(document.elementFromPoint(a,i),!0);o!==r&&(r=o,St()),Ot(e,n.options,o,t)}),10),vt=a,yt=i)}else{if(!this.options.bubbleScroll||H(o,!0)===P())return void St();Ot(e,this.options,H(o,!1),!1)}}},s(e,{pluginName:"scroll",initializeByDefault:!0})}function St(){kt.forEach((function(e){clearInterval(e.pid)})),kt=[]}function xt(){clearInterval(wt)}var Rt,Ot=U((function(e,t,n,a){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=P(),u=!1;gt!==n&&(gt=n,St(),mt=t.scroll,i=t.scrollFn,!0===mt&&(mt=H(n,!0)));var d=0,h=mt;do{var f=h,p=A(f),m=p.top,g=p.bottom,v=p.left,y=p.right,b=p.width,w=p.height,k=void 0,C=void 0,_=f.scrollWidth,S=f.scrollHeight,x=I(f),R=f.scrollLeft,O=f.scrollTop;f===c?(k=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(k=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var D=k&&(Math.abs(y-o)<=s&&R+b<_)-(Math.abs(v-o)<=s&&!!R),L=C&&(Math.abs(g-r)<=s&&O+w<S)-(Math.abs(m-r)<=s&&!!O);if(!kt[d])for(var T=0;T<=d;T++)kt[T]||(kt[T]={});kt[d].vx==D&&kt[d].vy==L&&kt[d].el===f||(kt[d].el=f,kt[d].vx=D,kt[d].vy=L,clearInterval(kt[d].pid),0==D&&0==L||(u=!0,kt[d].pid=setInterval(function(){a&&0===this.layer&&nt.active._onTouchMove(bt);var t=kt[this.layer].vy?kt[this.layer].vy*l:0,n=kt[this.layer].vx?kt[this.layer].vx*l:0;"function"===typeof i&&"continue"!==i.call(nt.dragged.parentNode[Z],n,t,e,bt,kt[this.layer].el)||Y(kt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=H(h,!1)));Ct=u}}),30),Dt=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Lt(){}function Tt(){}function $t(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;Rt=t},dragOverValid:function(e){var t=e.completed,n=e.target,a=e.onMove,i=e.activeSortable,o=e.changed,r=e.cancel;if(i.options.swap){var s=this.sortable.el,l=this.options;if(n&&n!==s){var c=Rt;!1!==a(n)?(V(n,l.swapClass,!0),Rt=n):Rt=null,c&&c!==Rt&&V(c,l.swapClass,!1)}o(),t(!0),r()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,a=e.dragEl,i=n||this.sortable,o=this.options;Rt&&V(Rt,o.swapClass,!1),Rt&&(o.swap||n&&n.options.swap)&&a!==Rt&&(i.captureAnimationState(),i!==t&&t.captureAnimationState(),Vt(a,Rt),i.animateAll(),i!==t&&t.animateAll())},nulling:function(){Rt=null}},s(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Rt}}})}function Vt(e,t){var n,a,i=e.parentNode,o=t.parentNode;i&&o&&!i.isEqualNode(t)&&!o.isEqualNode(e)&&(n=B(e),a=B(t),i.isEqualNode(o)&&n<a&&a++,i.insertBefore(t,i.children[n]),o.insertBefore(e,o.children[a]))}Lt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=M(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Dt},s(Lt,{pluginName:"revertOnSpill"}),Tt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:Dt},s(Tt,{pluginName:"removeOnSpill"});var It,Ft,Et,Pt,At,Nt=[],Mt=[],jt=!1,Bt=!1,Kt=!1;function zt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?x(document,"pointerup",this._deselectMultiDrag):(x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag)),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var a="";Nt.length&&Ft===e?Nt.forEach((function(e,t){a+=(t?", ":"")+e.textContent})):a=n.textContent,t.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;Et=t},delayEnded:function(){this.isMultiDrag=~Nt.indexOf(Et)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var a=0;a<Nt.length;a++)Mt.push(X(Nt[a])),Mt[a].sortableIndex=Nt[a].sortableIndex,Mt[a].draggable=!1,Mt[a].style["will-change"]="",V(Mt[a],this.options.selectedClass,!1),Nt[a]===Et&&V(Mt[a],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,a=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Nt.length&&Ft===t&&(qt(!0,n),a("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,a=e.cancel;this.isMultiDrag&&(qt(!1,n),Mt.forEach((function(e){I(e,"display","")})),t(),At=!1,a())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),a=e.cancel;this.isMultiDrag&&(Mt.forEach((function(e){I(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),At=!0,a())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&Ft&&Ft.multiDrag._deselectMultiDrag(),Nt.forEach((function(e){e.sortableIndex=B(e)})),Nt=Nt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Kt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Nt.forEach((function(e){e!==Et&&I(e,"position","absolute")}));var a=A(Et,!1,!0,!0);Nt.forEach((function(e){e!==Et&&J(e,a)})),Bt=!0,jt=!0}n.animateAll((function(){Bt=!1,jt=!1,t.options.animation&&Nt.forEach((function(e){Q(e)})),t.options.sort&&Wt()}))}},dragOver:function(e){var t=e.target,n=e.completed,a=e.cancel;Bt&&~Nt.indexOf(t)&&(n(!1),a())},revert:function(e){var t=e.fromSortable,n=e.rootEl,a=e.sortable,i=e.dragRect;Nt.length>1&&(Nt.forEach((function(e){a.addAnimationState({target:e,rect:Bt?A(e):i}),Q(e),e.fromRect=i,t.removeAnimationState(e)})),Bt=!1,Ht(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,a=e.insertion,i=e.activeSortable,o=e.parentEl,r=e.putSortable,s=this.options;if(a){if(n&&i._hideClone(),jt=!1,s.animation&&Nt.length>1&&(Bt||!n&&!i.options.sort&&!r)){var l=A(Et,!1,!0,!0);Nt.forEach((function(e){e!==Et&&(J(e,l),o.appendChild(e))})),Bt=!0}if(!n)if(Bt||Wt(),Nt.length>1){var c=At;i._showClone(t),i.options.animation&&!At&&c&&Mt.forEach((function(e){i.addAnimationState({target:e,rect:Pt}),e.fromRect=Pt,e.thisAnimationDuration=null}))}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,a=e.activeSortable;if(Nt.forEach((function(e){e.thisAnimationDuration=null})),a.options.animation&&!n&&a.multiDrag.isMultiDrag){Pt=s({},t);var i=F(Et,!0);Pt.top-=i.f,Pt.left-=i.e}},dragOverAnimationComplete:function(){Bt&&(Bt=!1,Wt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,a=e.parentEl,i=e.sortable,o=e.dispatchSortableEvent,r=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,u=a.children;if(!Kt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),V(Et,c.selectedClass,!~Nt.indexOf(Et)),~Nt.indexOf(Et))Nt.splice(Nt.indexOf(Et),1),It=null,re({sortable:i,rootEl:n,name:"deselect",targetEl:Et,originalEvt:t});else{if(Nt.push(Et),re({sortable:i,rootEl:n,name:"select",targetEl:Et,originalEvt:t}),t.shiftKey&&It&&i.el.contains(It)){var d,h,f=B(It),p=B(Et);if(~f&&~p&&f!==p)for(p>f?(h=f,d=p):(h=p,d=f+1);h<d;h++)~Nt.indexOf(u[h])||(V(u[h],c.selectedClass,!0),Nt.push(u[h]),re({sortable:i,rootEl:n,name:"select",targetEl:u[h],originalEvt:t}))}else It=Et;Ft=l}if(Kt&&this.isMultiDrag){if(Bt=!1,(a[Z].options.sort||a!==n)&&Nt.length>1){var m=A(Et),g=B(Et,":not(."+this.options.selectedClass+")");if(!jt&&c.animation&&(Et.thisAnimationDuration=null),l.captureAnimationState(),!jt&&(c.animation&&(Et.fromRect=m,Nt.forEach((function(e){if(e.thisAnimationDuration=null,e!==Et){var t=Bt?A(e):m;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),Wt(),Nt.forEach((function(e){u[g]?a.insertBefore(e,u[g]):a.appendChild(e),g++})),r===B(Et))){var v=!1;Nt.forEach((function(e){e.sortableIndex===B(e)||(v=!0)})),v&&o("update")}Nt.forEach((function(e){Q(e)})),l.animateAll()}Ft=l}(n===a||s&&"clone"!==s.lastPutMode)&&Mt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Kt=!1,Mt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),R(document,"pointerup",this._deselectMultiDrag),R(document,"mouseup",this._deselectMultiDrag),R(document,"touchend",this._deselectMultiDrag),R(document,"keydown",this._checkKeyDown),R(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(("undefined"===typeof Kt||!Kt)&&Ft===this.sortable&&(!e||!L(e.target,this.options.draggable,this.sortable.el,!1))&&(!e||0===e.button))while(Nt.length){var t=Nt[0];V(t,this.options.selectedClass,!1),Nt.shift(),re({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},s(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Z];t&&t.options.multiDrag&&!~Nt.indexOf(e)&&(Ft&&Ft!==t&&(Ft.multiDrag._deselectMultiDrag(),Ft=t),V(e,t.options.selectedClass,!0),Nt.push(e))},deselect:function(e){var t=e.parentNode[Z],n=Nt.indexOf(e);t&&t.options.multiDrag&&~n&&(V(e,t.options.selectedClass,!1),Nt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return Nt.forEach((function(a){var i;t.push({multiDragElement:a,index:a.sortableIndex}),i=Bt&&a!==Et?-1:Bt?B(a,":not(."+e.options.selectedClass+")"):B(a),n.push({multiDragElement:a,index:i})})),{items:u(Nt),clones:[].concat(Mt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),"ctrl"===e?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Ht(e,t){Nt.forEach((function(n,a){var i=t.children[n.sortableIndex+(e?Number(a):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function qt(e,t){Mt.forEach((function(n,a){var i=t.children[n.sortableIndex+(e?Number(a):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function Wt(){Nt.forEach((function(e){e!==Et&&e.parentNode&&e.parentNode.removeChild(e)}))}nt.mount(new _t),nt.mount(Tt,Lt),t["default"]=nt},ab26:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("498a"))}(0,(function(){"use strict";function e(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const t={name:"DInputSearch",props:{value:{type:String,default:void 0},allowClear:Boolean,placeholder:{type:String,default:"请输入"},width:{type:[String,Number],default:"240px"},maxLength:{type:Number,default:40}},data:function(){return{actValue:""}},watch:{value:function(e){this.actValue=e}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},methods:{resetData:function(){this.actValue=void 0,this.$emit("input",void 0)},onSearch:function(e){var t=e?e.trim():e;this.$emit("search",{data:t,rows:[t],config:{resultName:this.$attrs.resultName||"inputSearch"}})},handleChange:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e),t.$emit("input",t.actValue)}))}}};var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input-search",{staticClass:"d-input-search",style:{width:e.actWidth},attrs:{"max-length":e.maxLength,placeholder:e.placeholder,allowClear:e.allowClear},on:{search:e.onSearch,change:e.handleChange},model:{value:e.actValue,callback:function(t){e.actValue=t},expression:"actValue"}},[e._t("enterButton",[n("a-button",[e._v(" 搜索 ")])],{slot:"enterButton"})],2)};n._withStripped=!0;const a=e({render:n,staticRenderFns:[]},void 0,t,void 0,!1,void 0,!1,void 0,void 0,void 0);return a.install=function(e){e.component(a.name,a)},a}))},ac08:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("caad"),n("d3b7"),n("b64b"),n("a15b"),n("159b"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("d81d"),n("99af"),n("2532"),n("a434"),n("cfba"),n("07ac"),n("b680"),n("50f6"),n("3177"),n("2ca0"),n("7db0"),n("7edb"),n("aa47"),n("fb19"),n("73c8"),n("04b3"),n("4e82"),n("9911"),n("e439"),n("90b7"),n("7569"),n("25f0"),n("498a"),n("4ec9"),n("3ca3"),n("ddb0"),n("c740"),n("c1df"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G,Y,X,J,Q,Z,ee,te,ne,ae,ie,oe,re,se,le,ce,ue,de){"use strict";function he(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var fe=he(h),pe=he(K),me=he(q),ge=he(W),ve=he(Y),ye=he(X),be=he(J),we=he(de);function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){Se(o,a,i,r,s,"next",e)}function s(e){Se(o,a,i,r,s,"throw",e)}r(void 0)}))}}var Re=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),Oe=Re,De="/gateway/saas-platform-service/api/v1/",Le="/gateway/goodsservice/api/v1/",Te="/gateway/customer-service/api/v1/",$e="/gateway/logisticsservice/api/v1/",Ve={province:"".concat(De,"address/province"),city:"".concat(De,"address/city"),district:"".concat(De,"address/district")},Ie="".concat(De,"address/get_by_name"),Fe="".concat(Le,"goods/custom/list"),Ee="".concat(Te,"order/get_region_list"),Pe="".concat(Te,"order/get_customer_list"),Ae="".concat(Te,"order/get_customer_type_list"),Ne="".concat(Le,"setting/query_goods_attr_setting_list"),Me="".concat(Le,"price_system/leve_price_name/select_list"),je="".concat(Le,"/category/get_category_list_with_nocategory_qty"),Be="".concat(Le,"setting/query_goods_attr_setting_list"),Ke="".concat(Le,"warehouse/list"),ze="".concat(Le,"goods/get_sku_unit_list"),He="".concat(De,"staffer/get_corp_all"),qe="".concat(Le,"category/get_category_list"),We="".concat(Le,"warehouse/get_warehouse_by_corp_id"),Ue="".concat(Le,"price_system/leve_price/select_list"),Ge="".concat(De,"department/get_corp_tree"),Ye="".concat(De,"staffer/list"),Xe="".concat("/gateway/billservice/api/v1/","account/check_list"),Je="".concat($e,"deliveryMethod/list"),Qe="".concat($e,"deliveryMethod/list"),Ze="".concat($e,"logisticsCorp/custom/list"),et="".concat($e,"logisticsCorp/system/list"),tt="".concat($e,"logisticsCorp/custom/list"),nt="".concat(Te,"order/get_deliverys"),at="".concat(Te,"order/add_delivery"),it="".concat(Te,"order/update_delivery"),ot="".concat(Te,"order/delete_delivery"),rt="".concat(Te,"order/set_default_delivery"),st="".concat(Te,"customer_info/get_level_price");function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}function ut(e){if(!e&&"object"!==lt(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===lt(e[n])?t[n]=ut(e[n]):t[n]=e[n]})),t}"object"!==("undefined"==typeof Int8Array?"undefined":lt(Int8Array))&&(fe.default.prototype.$isServer||document.childNodes);var dt=function(e){return!e||"{}"===JSON.stringify(e)||"[]"===JSON.stringify(e)||!e},ht=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&null!==e[n]&&void 0!==e[n]&&(t[n]=e[n]);return t};function ft(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];void 0!==o&&(e[i]=o)}}return e}var pt={name:"MixSearchInput",props:{value:{type:[Object,String],default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},maxLength:{type:Number,default:40},name:{type:String,default:""},next:{type:Function,default:void 0},restore:{type:Boolean,default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",loading:!1,dataList:[],readonly:!1,dialogFocus:!1,localDataCache:null,isBlur:!1,replaceFields:{key:"id",name:"name"}}},watch:{value:{handler:function(e){this.inputValue=e?e.name||e.value:void 0},deep:!0,immediate:!0}},methods:{generateRequest:function(){var e=arguments,t=this;return xe(Oe.mark((function n(){var a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},t.loading=!0,!["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(t.name)){n.next=12;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName",code:"code",barCode:"barCode"},n.next=6,t.$get(Fe,ft({type:4,isShowSku:!0,pageNum:1,pageSize:30},a,t.dialogConfig.rules));case 6:return i=n.sent,o=i.data,t.localDataCache=o?o.list:[],n.abrupt("return",o?o.list:[]);case 12:if(!["person","preparer","handler"].includes(t.name)){n.next=25;break}if(!t.localDataCache){n.next=17;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 17:return n.next=19,t.$get(He,t.dialogConfig.rules);case 19:return r=n.sent,s=r.data,t.localDataCache=s,n.abrupt("return",s);case 23:n.next=138;break;case 25:if(!["warehouse"].includes(t.name)){n.next=34;break}return n.next=28,t.$get(Ke,_e(_e({pageNum:1,pageSize:30},a),t.dialogConfig.rules));case 28:return l=n.sent,c=l.data,t.localDataCache=c?c.list:[],n.abrupt("return",c?c.list:[]);case 34:if(!["customer","supplier","supplierCustomer"].includes(t.name)){n.next=44;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName"},n.next=38,t.$post(Pe,_e(_e({pageNum:1,pageSize:30},a),t.dialogConfig.rules));case 38:return u=n.sent,d=u.data,t.localDataCache=d?d.list:[],n.abrupt("return",d?d.list:[]);case 44:if(!["unit","brand","tag"].includes(t.name)){n.next=57;break}if(!t.localDataCache){n.next=49;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 49:return n.next=51,t.$post(Be,_e({type:["unit","brand","tag"].indexOf(t.name)},t.dialogConfig.rules));case 51:return h=n.sent,f=h.data,t.localDataCache=f,n.abrupt("return",f);case 55:n.next=138;break;case 57:if(!["rateUnit"].includes(t.name)){n.next=71;break}if(t.replaceFields={key:"id",name:"unitName"},!t.localDataCache){n.next=63;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 63:return n.next=65,t.$post(ze,t.dialogConfig.productId);case 65:return p=n.sent,m=p.data,t.localDataCache=m,n.abrupt("return",m);case 69:n.next=138;break;case 71:if(!["account"].includes(t.name)){n.next=84;break}if(!t.localDataCache){n.next=76;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 76:return n.next=78,t.$get(Xe,_e({accountType:t.dialogConfig.payType||1,customerId:t.dialogConfig.customerId},t.dialogConfig.rules));case 78:return g=n.sent,v=g.data,t.localDataCache=v,n.abrupt("return",v);case 82:n.next=138;break;case 84:if("delivery"!==t.name){n.next=97;break}if(!t.localDataCache){n.next=89;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 89:return n.next=91,t.$get(Je,t.dialogConfig.rules);case 91:return y=n.sent,b=y.data,t.localDataCache=b,n.abrupt("return",b);case 95:n.next=138;break;case 97:if("logistics"!==t.name){n.next=110;break}if(!t.localDataCache){n.next=102;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 102:return n.next=104,t.$get(et,t.dialogConfig.rules);case 104:return w=n.sent,k=w.data,t.localDataCache=k,n.abrupt("return",k);case 108:n.next=138;break;case 110:if("customLogistics"!==t.name){n.next=123;break}if(!t.localDataCache){n.next=115;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 115:return n.next=117,t.$get(tt,t.dialogConfig.rules);case 117:return C=n.sent,_=C.data,t.localDataCache=_,n.abrupt("return",_);case 121:n.next=138;break;case 123:if("address"!==t.name){n.next=137;break}if(t.replaceFields={key:"businessId",name:"deliveryName"},!t.localDataCache){n.next=129;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 129:return n.next=131,t.$post(nt,{businessId:t.dialogConfig.customerId});case 131:return S=n.sent,x=S.data,t.localDataCache=x,n.abrupt("return",x);case 135:n.next=138;break;case 137:console.log("未知的 name:",t.name);case 138:case"end":return n.stop()}}),n)})))()},generateLocalSearch:function(e){var t=this,n=[];return this.localDataCache.forEach((function(a){-1!==a[t.replaceFields.name].indexOf(e)&&n.push(a)})),n},clickHandle:function(){var e=this;this.disabled||this.next&&!this.next("mixSearch","click")||this.dialogFocus||(this.dialogFocus=!0,this.$emit("enterHandle",{data:null,action:"click",inputValue:this.inputValue,callback:function(){this.inputValue=""}}),setTimeout((function(){e.dialogFocus=!1,(e.value&&e.value.name!==e.inputValue||!e.value)&&(e.inputValue="")}),300))},handleInputClick:function(){this.dialogConfig.readonly&&this.clickHandle()},enterHandle:function(){var e=this;this.next&&!this.next("mixSearch","enter")||this.dialogFocus||(this.dialogFocus=!0,this.inputValue?this.generateRequest({keywords:this.inputValue}).then((function(t){e.dataList=t,e.loading=!1,e.matchingData("enter")})).catch((function(){e.loading=!1})).finally((function(){setTimeout((function(){e.dialogFocus=!1}),300)})):(this.dataList=[],this.loading=!1,this.matchingData("enter"),setTimeout((function(){e.dialogFocus=!1}),300)))},matchingData:function(e){var t=this,n=function(){var n=null,a=dt(t.value);if(t.dataList.length&&t.inputValue)for(var i=0;i<t.dataList.length;i++){var o=t.dataList[i];o[t.replaceFields.name]!==t.inputValue&&o[t.replaceFields.pinyin]!==t.inputValue&&o[t.replaceFields.code]!==t.inputValue&&o[t.replaceFields.barCode]!==t.inputValue||(n=o)}else a||t.inputValue!==t.value.name&&t.inputValue!==t.value.value||(n=t.value);t.restore&&"blur"===e&&(n||a||(t.inputValue=t.value.name||t.value.value,n=t.value)),t.$emit("enterHandle",{data:n,rows:n?[n]:null,action:e,inputValue:t.inputValue,baseRows:t.dataList}),t.inputValue=""};if(this.loading)var a=setInterval((function(){t.loading||(n(),clearInterval(a),a=null)}),500);else n()},changeHandle:function(){if(this.isBlur||this.inputValue||this.$emit("clear"),this.readonly){var e=dt(this.value);this.inputValue=e?this.value.name||this.value.value:""}},blurHandle:function(){var e=this;this.isBlur=!1,setTimeout((function(){e.dialogFocus||(e.inputValue?(dt(e.value)||e.inputValue!==e.value.name)&&e.matchingData("blur"):e.restore?e.inputValue=e.value.name||e.value.value:e.value&&e.$emit("clear"))}),300)},focusHandle:function(){this.isBlur=!0,this.readonly=this.next&&!this.next("mixSearch","focus")},focus:function(){this.$refs.mixSearchInput.focus()}}};function mt(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const gt=pt;var vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input",{ref:"mixSearchInput",staticClass:"mix-search-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,allowClear:e.allowClear,maxLength:e.maxLength,title:e.inputValue,readOnly:e.dialogConfig.readonly},on:{pressEnter:e.enterHandle,change:e.changeHandle,blur:e.blurHandle,focus:e.focusHandle,click:e.handleInputClick},scopedSlots:e._u([{key:"suffix",fn:function(){return[n("a-button",{attrs:{type:"link",icon:e.loading?"loading":"ellipsis"},on:{click:e.clickHandle}})]},proxy:!0}]),model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})};vt._withStripped=!0;const yt=mt({render:vt,staticRenderFns:[]},void 0,gt,"data-v-f165b002",!1,void 0,!1,void 0,void 0,void 0);function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function wt(e){return function(e){if(Array.isArray(e))return bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kt={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return _e(_e({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=_e({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ke({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===lt(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=_e(_e({},e.selectionContent.selectedRows),{},ke({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ke({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};const Ct={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:pe.default},methods:{handleClick:function(){this.$emit("click")}}};var _t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};_t._withStripped=!0;const St=mt({render:_t,staticRenderFns:[]},void 0,Ct,void 0,!1,void 0,!1,void 0,void 0,void 0);var xt=fe.default.prototype.$isServer,Rt=!xt&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},Ot=!xt&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};fe.default.use(me.default);var Dt={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},Lt=!fe.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",Tt={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:Dt.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===Dt.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=ct((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=ct((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Rt(document,"keydown",this._keyDownHandler),Rt(document,Lt,this._mouseWheelHandler)},deviceSupportUninstall:function(){Ot(document,"keydown",this._keyDownHandler),Ot(document,Lt,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=ct((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),Rt(document,"mousemove",this._dragHandler),Rt(document,"mouseup",(function(){Ot(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(Dt),t=(Object.values(Dt).indexOf(this.mode)+1)%e.length;this.mode=Dt[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=_e({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const $t=Tt;var Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};Vt._withStripped=!0;const It=mt({render:Vt,staticRenderFns:[]},void 0,$t,void 0,!1,void 0,!1,void 0,void 0,void 0);var Ft="",Et=function(){return void 0!==document.documentElement.style.objectFit},Pt=function(e,t){return At(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},At=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},Nt="none",Mt="contain",jt="cover",Bt="fill",Kt="scale-down",zt={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:St,IconFont:pe.default,ImageViewer:It},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?Et()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!Et()&&this.fit!==Bt},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(Pt(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===Kt&&(e=t<i&&n<o?Nt:Mt),e){case Nt:return{width:"auto",height:"auto"};case Mt:return r?{width:"auto"}:{height:"auto"};case jt:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){Ft=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=Ft,this.showViewer=!1}}};const Ht=zt;var qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};qt._withStripped=!0;const Wt=mt({render:qt,staticRenderFns:[]},void 0,Ht,void 0,!1,void 0,!1,void 0,void 0,void 0);var Ut={zIndex:2e3,initialIndex:0,urlList:[]},Gt=fe.default.extend(It);Wt.install=function(e){e.component(Wt.name,Wt)},Wt.api=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ft({},Ut,e);var t=new Gt({el:document.createElement("div"),propsData:e,methods:{hide:function(){this.deviceSupportUninstall(),this.$el.parentNode.removeChild(this.$el)},download:function(){e.download&&e.download(this.currentImg)}}}),n=e.body?document.body:e.target;console.log(n),document.body.appendChild(t.$el)}(e)};const Yt={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:W.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:W.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&W.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};Xt._withStripped=!0;const Jt=mt({render:Xt,staticRenderFns:[]},void 0,Yt,void 0,!1,void 0,!1,void 0,void 0,void 0);function Qt(){return Qt=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qt.apply(this,arguments)}Jt.install=function(e){e.component(Jt.name,Jt)};var Zt=["attrs","props","domProps"],en=["class","style","directives"],tn=["on","nativeOn"],nn=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},an=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==Zt.indexOf(n))e[n]=Qt({},e[n],t[n]);else if(-1!==en.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==tn.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?nn(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function on(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var rn=ve.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function sn(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var ln=["key"],cn={},un={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return _e({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:_e({},this.$listeners)};return t("a-table",an([{},{props:_e(_e({},n),{},{columns:a}),scopedSlots:_e({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":be.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=Q.getKey(t),i=Q.getStyle(t),o=Q.getClass(t),r=Q.getOptionProps(t),s=Q.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[Q.camelize(t)]=s[e]}));var c=Q.getSlots(t),u=c.default,d=sn(c,["default"]),h=rn({},d,r,{style:i,class:o},l);if(a&&(h.key=a),Q.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=sn(t,["slots","scopedSlots"]),u=rn({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){cn[e.key]=e.width||0}));var o=fe.default.observable(cn),r=null,s=t.key,l=on(t,ln),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",an([{attrs:{width:c.width}},l]),[n]):e("th",an([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",an([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(be.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=_e(_e({},a.cellWidth),{},ke({},c.key,c.width));a.$emit("update:cellWidth",_e({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);ye.default.create(t[t.length>1?1:0],_e(_e({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(un.name,un)}};St.install=function(e){e.component(St.name,St)};const dn={name:"DOperationBox",components:{IconFontBox:St,CellEllipsisTip:Jt},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return _e({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(_e(_e({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=ut(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=_e({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};hn._withStripped=!0;const fn=mt({render:hn,staticRenderFns:[]},void 0,dn,void 0,!1,void 0,!1,void 0,void 0,void 0);fn.install=function(e){e.component(fn.name,fn)};var pn=[{id:2,name:"ERP草稿",color:"#52c41a"},{id:3,name:"已过账",color:"#52c41a"},{id:4,name:"ERP删除",color:"#bbbbbb"},{id:5,name:"同步失败",color:"#f5222d"},{id:0,name:"未同步",color:"#378efb"}],mn=[{id:0,name:"盘盈入库"},{id:2,name:"其它入库"}],gn=[{id:1,name:"盘亏出库"},{id:3,name:"其它出库"}],vn=[{id:0,name:"草稿"},{id:1,name:"已过账"},{id:3,name:"已红冲"}],yn={0:vn[0],1:vn[1],2:vn[2]},bn=[{id:0,name:"未支付"},{id:1,name:"部分支付"},{id:2,name:"已支付"}],wn={0:bn[0],1:bn[1]},kn=[{id:1,name:"库存高于上限"},{id:2,name:"库存低于下限"},{id:3,name:"有货"},{id:4,name:"缺货"}],Cn={0:wn[0],1:wn[1]},_n=[{id:5,name:"ERP草稿",color:"#52C41A"},{id:1,name:"已过账",color:"#52C41A"},{id:4,name:"ERP删除",color:"#BBBBBB"},{id:2,name:"草稿",color:"#52C41A"},{id:3,name:"已红冲",color:"#F5222D"},{id:0,name:"未同步",color:"#378EFB"}],Sn=[{id:0,name:"已下架"},{id:1,name:"已上架"}],xn=[{id:0,name:"线下支付"},{id:1,name:"银行卡转账"}],Rn=[{id:1,name:"应收调整"},{id:2,name:"应付调整"}],On=[{id:0,name:"草稿"},{id:1,name:"盘点完成"}],Dn=[{id:0,name:"全部"},{id:1,name:"采购入库"},{id:2,name:"退货入库"},{id:3,name:"盘盈入库"},{id:4,name:"其它入库"},{id:5,name:"销售出库"},{id:6,name:"采购退货"},{id:7,name:"盘亏出库"},{id:8,name:"采购入库"},{id:9,name:"其它出库"},{id:10,name:"同价调拨入库"},{id:11,name:"同价调拨出库"},{id:12,name:"撤销出库"},{id:13,name:"进销存同步"},{id:14,name:"撤销退货"},{id:15,name:"退货单取消"},{id:16,name:"订货单取消"}],Ln=[{id:0,name:"微信账户"},{id:1,name:"预付款账户"},{id:2,name:"现金账户"},{id:3,name:"银行卡账户"}],Tn=[{id:-1,name:"已取消",key:"canceled",btnKeys:["detail","del","share","print","export","copy"]},{id:0,name:"草稿",key:"draft",btnKeys:["detail","submit","submit_audit","del","share","print","export","copy"]},{id:1,name:"待审核",key:"to_audit",btnKeys:["detail","audit","cancel_bill","share","print","export","copy"]},{id:2,name:"待出库",key:"to_stock_removal",btnKeys:["detail","stock_removal","auditee","cancel_bill","share","print","export","copy"]},{id:3,name:"部分出库",key:"portion_stock_removal",btnKeys:["detail","stock_removal","suspend_bill","share","print","export","copy"]},{id:4,name:"待发货",key:"to_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:5,name:"部分发货",key:"portion_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:6,name:"待收货",key:"to_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:7,name:"部分收货",key:"portion_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:8,name:"已完成",key:"finish",btnKeys:["detail","share","print","export","copy"]},{id:9,name:"已中止",key:"suspend",btnKeys:["detail","share","print","export","copy"]}],$n=[{id:1,name:"已打印"},{id:0,name:"未打印"}],Vn=[{id:0,name:"PC端代开"},{id:1,name:"企业微信代开"},{id:2,name:"小程序商城"},{id:3,name:"巡店"},{id:4,name:"Excel导入"}],In=[{id:1,name:"买赠"},{id:2,name:"秒杀"},{id:3,name:"特价"},{id:4,name:"订单促销"},{id:5,name:"组合促销"},{id:6,name:"一口价"},{id:7,name:"拼团"},{id:8,name:"优惠券"},{id:9,name:"分销"}],Fn=[{id:0,name:"不开发票"},{id:1,name:"普通发票"},{id:2,name:"增值税发票"}],En=Object.freeze({__proto__:null,billStatus:{0:{name:"草稿",color:"#378EFB",icon:"iconcaogao"},1:{name:"已过账",color:"#52C41A",icon:"iconyiguozhang",stocktakingName:"盘点完成",stocktakingIcon:"icon_stocktaking_completed"},3:{name:"已红冲",color:"#F5222D",icon:"iconyihongchong"}},payStockSync:pn,payStockSyncMap:{0:{name:"未同步",color:"#378efb"},2:{name:"ERP草稿",color:"#52c41a"},3:{name:"已过账",color:"#52c41a"},4:{name:"ERP删除",color:"#bbbbbb"},5:{name:"同步失败",color:"#f5222d"}},inStockMap:mn,outStockMap:gn,orderStatus:vn,orderStatusMap:yn,paymentStatus:bn,paymentStatusMap:wn,stockStatus:kn,stockStatusMap:Cn,stockSync:_n,stockSyncMap:{},saleStatus:Sn,modeOfPayment:xn,exchangePayment:Rn,stockBillStatus:On,stockInAndOut:Dn,accountType:Ln,saleOrderStatus:Tn,printStatus:$n,billSource:Vn,marketingType:In,invoiceType:Fn});const Pn=mt({},void 0,{name:"DMixSelect",props:{value:{type:[String,Number,Array],default:void 0},resultName:{type:String,default:""},type:{type:Number,default:0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:120},list:{type:Array,default:null},exclude:{type:Array,default:function(){return[]}},mode:{type:String,default:"select"},getPopupContainer:{type:Function,default:function(){return document.querySelector(".mix-select")}}},data:function(){return{actValue:void 0,options:[],selectLoading:!1}},computed:{modalPlaceholder:function(){return this.placeholder},actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:function(e){this.actValue=e},type:{handler:function(){this.options=[],this.getData()}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;if(console.log(En,this.type),!this.$slots.default)if(this.list)this.options=this.list;else if([0,1,2,11].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$post(11===this.type?Me:Be,{type:this.type}).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1})).catch((function(){e.selectLoading=!1}))}else if([14].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$get(Je).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1}))}else switch(this.type){case 3:this.options=vn;break;case 4:this.options=bn;break;case 5:this.options=kn;break;case 6:this.options=Sn;break;case 7:this.options=Rn;break;case 8:this.options=_n;break;case 9:this.options=On;break;case 10:this.options=Dn;break;case 12:this.options=Tn;break;case 13:this.options=$n;break;case 15:this.options=Vn;break;case 16:this.options=In;break;case 17:this.options=Fn;break;default:this.options=[]}},handleChange:function(e){var t=lt(e);if(null==e||"object"===t&&!e.length)return this.$emit("input",void 0),this.actValue=void 0,void this.$emit("change",{config:{resultName:this.resultName,status:"delete",type:"select"}});var n="number"===t?{}:[];this.options.forEach((function(a){"number"===t?a.id===e&&(n=a):e.includes(a.id)&&n.push(a)})),this.$emit("input",e),this.actValue=e,this.$emit("change",{data:e,rows:n,config:{resultName:this.resultName,status:"select",type:"select"}})},optionsVisibleHandle:function(){this.options.length||this.$slots.default||this.getData()},resetData:function(){this.actValue=void 0,this.$emit("input",void 0)}},render:function(e){var t=this,n=this;return e("div",{class:"mix-select",style:"width: ".concat(n.actWidth)},[e("a-select",{scopedSlots:n.$scopedSlots,props:{value:n.actValue,allowClear:n.allowClear,placeholder:n.modalPlaceholder,mode:n.mode,getPopupContainer:n.getPopupContainer,disabled:n.disabled},style:"width:100%;",on:{dropdownVisibleChange:n.optionsVisibleHandle,change:n.handleChange}},[n.selectLoading?e("a-spin",{props:{size:"small"},slot:"notFoundContent"}):function(){if(t.$slots.default)return t.$slots.default;var n=[];return t.options.forEach((function(a,i){t.exclude.includes(a.id)||n.push(e("a-select-option",{props:{value:a.id,key:i,title:a.name}},a.name))})),n}()])])}},"data-v-c44b6be8",void 0,void 0,!1,void 0,void 0,void 0);Pn.install=function(e){e.component(Pn.name,Pn)};var An={name:"MixSearchInput",props:{value:{type:[Object,String],default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},maxLength:{type:Number,default:40},name:{type:String,default:""},next:{type:Function,default:void 0},restore:{type:Boolean,default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",loading:!1,dataList:[],readonly:!1,dialogFocus:!1,localDataCache:null,isBlur:!1,replaceFields:{key:"id",name:"name"}}},watch:{value:{handler:function(e){this.inputValue=e?e.name||e.value:void 0},deep:!0,immediate:!0}},methods:{generateRequest:function(){var e=arguments,t=this;return xe(Oe.mark((function n(){var a,i,o,r,s,l,c,u,d,h,f,p,m;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},t.loading=!0,!["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(t.name)){n.next=12;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName",code:"code",barCode:"barCode"},n.next=6,t.$get(Fe,ft({type:4,isShowSku:!0,pageNum:1,pageSize:30},a,t.dialogConfig.rules));case 6:return i=n.sent,o=i.data,t.localDataCache=o?o.list:[],n.abrupt("return",o?o.list:[]);case 12:if(!["person","preparer","handler"].includes(t.name)){n.next=25;break}if(!t.localDataCache){n.next=17;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 17:return n.next=19,t.$get(He);case 19:return r=n.sent,s=r.data,t.localDataCache=s,n.abrupt("return",s);case 23:n.next=72;break;case 25:if(!["warehouse"].includes(t.name)){n.next=34;break}return n.next=28,t.$get(Ke,_e({pageNum:1,pageSize:30},a));case 28:return l=n.sent,c=l.data,t.localDataCache=c?c.list:[],n.abrupt("return",c?c.list:[]);case 34:if(!["customer","supplier","supplierCustomer"].includes(t.name)){n.next=44;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName"},n.next=38,t.$post(Pe,_e({pageNum:1,pageSize:30},a));case 38:return u=n.sent,d=u.data,t.localDataCache=d?d.list:[],n.abrupt("return",d?d.list:[]);case 44:if(!["unit","brand","tag"].includes(t.name)){n.next=57;break}if(!t.localDataCache){n.next=49;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 49:return n.next=51,t.$post(Be,{type:["unit","brand","tag"].indexOf(t.name)});case 51:return h=n.sent,f=h.data,t.localDataCache=f,n.abrupt("return",f);case 55:n.next=72;break;case 57:if(!["rateUnit"].includes(t.name)){n.next=71;break}if(t.replaceFields={key:"id",name:"unitName"},!t.localDataCache){n.next=63;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 63:return n.next=65,t.$post(ze,t.dialogConfig.productId);case 65:return p=n.sent,m=p.data,t.localDataCache=m,n.abrupt("return",m);case 69:n.next=72;break;case 71:["account"].includes(t.name)?console.log("还没做"):console.log("未知的 name:",t.name);case 72:case"end":return n.stop()}}),n)})))()},generateLocalSearch:function(e){var t=this,n=[];return this.localDataCache.forEach((function(a){-1!==a[t.replaceFields.name].indexOf(e)&&n.push(a)})),n},clickHandle:function(){var e=this;this.disabled||this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.$emit("enterHandle",{data:null,action:"click",inputValue:this.inputValue,callback:function(){this.inputValue=""}}),setTimeout((function(){e.dialogFocus=!1,(e.value&&e.value.name!==e.inputValue||!e.value)&&(e.inputValue="")}),300))},enterHandle:function(){var e=this;this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.matchingData("enter"),setTimeout((function(){e.dialogFocus=!1}),300))},matchingData:function(e){var t=this,n=function(){var n=null,a=dt(t.value);if(t.dataList.length&&t.inputValue)for(var i=0;i<t.dataList.length;i++){var o=t.dataList[i];o[t.replaceFields.name]!==t.inputValue&&o[t.replaceFields.pinyin]!==t.inputValue&&o[t.replaceFields.code]!==t.inputValue&&o[t.replaceFields.barCode]!==t.inputValue||(n=o)}else a||t.inputValue!==t.value.name&&t.inputValue!==t.value.value||(n=t.value);t.restore&&"blur"===e&&(n||a||(t.inputValue=t.value.name||t.value.value,n=t.value)),t.$emit("enterHandle",{data:n,rows:n?[n]:null,action:e,inputValue:t.inputValue,baseRows:t.dataList}),t.inputValue=""};if(this.loading)var a=setInterval((function(){t.loading||(n(),clearInterval(a),a=null)}),500);else n()},changeHandle:function(){var e=this;if(this.isBlur||this.inputValue||this.$emit("clear"),this.readonly){var t=dt(this.value);this.inputValue=t?this.value.name||this.value.value:""}else this.inputValue&&this.generateRequest({keywords:this.inputValue}).then((function(t){e.dataList=t,e.loading=!1}))},blurHandle:function(){var e=this;this.isBlur=!1,setTimeout((function(){e.dialogFocus||(e.inputValue?(dt(e.value)||e.inputValue!==e.value.name)&&e.matchingData("blur"):e.restore?e.inputValue=e.value.name||e.value.value:e.value&&e.$emit("clear"))}),300)},focusHandle:function(){this.isBlur=!0,this.readonly=this.next&&!this.next("mixSearch")},focus:function(){this.$refs.mixSearchInput.focus()}}};const Nn=An;var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input",{ref:"mixSearchInput",staticClass:"mix-search-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,allowClear:e.allowClear,maxLength:e.maxLength,title:e.inputValue},on:{pressEnter:e.enterHandle,change:e.changeHandle,blur:e.blurHandle,focus:e.focusHandle},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[n("a-button",{attrs:{slot:"suffix",type:"link",icon:e.loading?"loading":"ellipsis"},on:{click:e.clickHandle},slot:"suffix"})],1)};Mn._withStripped=!0;const jn=mt({render:Mn,staticRenderFns:[]},void 0,Nn,"data-v-225db93a",!1,void 0,!1,void 0,void 0,void 0);var Bn={product:{name:"SelectProduct",key:"id",value:"name",type:1},couponProduct:{name:"SelectProduct",key:"id",value:"name",type:2},recommendProduct:{name:"SelectProduct",key:"id",value:"name",type:3},purchaseProduct:{name:"SelectProduct",key:"id",value:"name",type:4},rateProduct:{name:"SelectProduct",key:"id",value:"name",type:6},person:{name:"PeopleModal",key:"id",value:"name"},preparer:{name:"PeopleModal",key:"id",value:"name"},handler:{name:"PeopleModal",key:"id",value:"name"},warehouse:{name:"ChooseEntrepot",key:"id",value:"name"},customer:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplier:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplierCustomer:{name:"ChoiceCustomer",key:"businessId",value:"name"},unit:{name:"GoodAttrModal",key:"id",value:"name"},brand:{name:"GoodAttrModal",key:"id",value:"name"},tag:{name:"GoodAttrModal",key:"id",value:"name"},payment:{name:"payment",key:"id",value:"name"},rateUnit:{name:"GoodAttrModal",key:"id",value:"unitName"}};const Kn={name:"Empty",components:{empty:Z.empty,loading:Z.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};zn._withStripped=!0;const Hn=mt({render:zn,staticRenderFns:[]},void 0,Kn,void 0,!1,void 0,!1,void 0,void 0,void 0);function qn(e){return"object"===lt(e)&&null!==e&&e.constructor&&e.constructor===Object}function Wn(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(qn(e[o])&&qn(n[o])?Wn(e[o],n[o]):!qn(e[o])&&qn(n[o])?(e[o]={},Wn(e[o],n[o])):e[o]=n[o])}}return e}Hn.install=function(e){e.component(Hn.name,Hn)};var Un={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=_e(_e({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=_e(_e({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=_e(_e({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=_e({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=Wn(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:lt(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(_e(_e({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},Gn={name:"DSelectWarehouse",components:{STable:un,Empty:Hn,DOperationBox:fn,CellEllipsisTip:Jt},mixins:[kt,Un],props:{visible:{type:Boolean,default:!1},width:{type:[String,Number],default:1e3},title:{type:String,default:"选择仓库"},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"id"}}},beforeClose:{type:Function,default:void 0},rules:{type:Object,default:function(){}},cache:{type:Boolean,default:!1},defaultValue:{type:[Object,Array],default:null},categoryInit:{type:Number,default:1},selectionLimit:{type:Number,default:100}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},data:function(){return{tableData:[],classifyOptions:[],classifyValue:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:""},resultMap:{},disabled:{warehouse:!1},opened:!1}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},baseReplaceFields:function(){return _e({key:"id"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},allClassifyOptions:function(){return[{categoryName:"全部分类",haveChild:!0,isLeaf:!1,id:"1",parentId:"0",pathCode:"1",scopedSlots:{title:"custom"},children:[{categoryName:"未分类",haveChild:!1,id:"0",parentId:"1",isLeaf:!0,pathCode:"0",scopedSlots:{title:"custom"}}].concat(wt(this.classifyOptions))}]}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="id",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&(this.reset().dealResult().loadTableData(),this.loadClassify()),this.opened=!0)}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Ke,_e(_e({},this.searchResult),{},{pageNum:t.current,pageSize:t.pageSize},this.rules)).then((function(t){t.data&&(e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},searchHandle:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},classifySearchHandle:function(e){console.log("分类检索:",e)},classifyOnSelect:function(e,t){console.log("classifyOnSelect",t,this.classifyValue);var n=t.node;this.searchResult.categoryPath=t.selected?n.dataRef.pathCode:null,this.handleSelectedClear().loadTableData()},loadClassify:function(e){var t=this;if(this.$get(qe,{}).then((function(){})),e)return new Promise((function(n){var a=e.dataRef;t.$get(qe,{categoryType:2,parentId:a.id}).then((function(e){var i=e.data;i.length&&(a.children=i,t.classifyOptions=wt(t.classifyOptions)),n()}))}));this.$get(qe,{categoryType:2,parentId:this.categoryInit}).then((function(e){t.classifyOptions=e.data}))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const Yn=Gn;var Xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-warehouse a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"warehouse-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入分类名称"},on:{search:e.classifySearchHandle}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"classify-wrap"},[n("a-tree",{attrs:{loadData:e.loadClassify,replaceFields:{children:"children",value:"id",title:"categoryName",key:"id"},"tree-data":e.allClassifyOptions,defaultExpandedKeys:["1"],defaultSelectedKeys:["1"],showIcon:""},on:{select:e.classifyOnSelect},model:{value:e.classifyValue,callback:function(t){e.classifyValue=t},expression:"classifyValue"}})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"仓库名称"},on:{search:e.searchHandle},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"index",attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(t,n,a){return[e._v("\n            "+e._s((e.pagination.current-1)*e.pagination.pageSize+a+1)+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:200,"data-index":"name",title:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:100,"data-index":"code",title:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{title:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{tip:""+t.regionName+t.address}},[e._v(" "+e._s(t.regionName)+e._s(t.address)+" ")])]}}])}),e._v(" "),n("a-table-column",{attrs:{width:75,title:"可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.erpId?"是":"否")+"\n          ")]}}])})],1)],1)])])};Xn._withStripped=!0;const Jn=mt({render:Xn,staticRenderFns:[]},void 0,Yn,void 0,!1,void 0,!1,void 0,void 0,void 0);Jn.install=function(e){e.component(Jn.name,Jn)};const Qn=mt({},void 0,{name:"DSelectWarehouseInput",props:{name:{type:String,default:"warehouse"},value:{type:[Object,String],default:void 0},resultName:{type:String,default:""},width:{type:[Number,String],default:240},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},restore:{type:Boolean,default:!1},require:{type:Boolean,default:!1},maxLength:{type:Number,default:40},next:{type:Function,default:null},origin:{type:String,default:"page"},valueMode:{type:[Boolean,String],default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{componentMap:Bn,visible:!1,modalValue:null,dialog:null,dialogProps:{},multiple:!1}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:{handler:function(e){this.modalValue=e||void 0},deep:!0,immediate:!0},name:function(){this.generateDialog()},visible:function(e){e&&this.generateDialog()}},created:function(){this.dialog||this.generateDialog()},methods:{generateDialog:function(){var e,t="string"==typeof this.modalValue?[]:this.modalValue?Object.keys(this.modalValue):[];this.multiple=!0===this.valueMode&&t&&!t.length,e={warehouse:{title:"选择仓库",multiple:!0===this.valueMode&&this.multiple}},this.dialog=Jn,this.dialogProps=ft(this.dialogProps,e[this.name],this.dialogConfig)},enterHandle:function(e){e.data?(this.dialogProps.rules&&(this.dialogProps.rules.keywords=""),this.resultExchange(e)):"blur"!==e.action?(this.dialogProps=ft(this.dialogProps,{rules:{keywords:this.modalValue&&this.modalValue.name===e.inputValue?"":e.inputValue}}),this.generateDialog(),this.visible=!0):this.modalValue&&this.modalValue.name!==e.inputValue&&this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},clearHandle:function(){this.modalValue=void 0,this.$emit("input",void 0),this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},confirmHandle:function(e){["filterDropDown"].includes(this.origin)&&this.next&&this.next("mixSearch"),e?this.resultExchange(e):this.restore&&this.modalValue&&(this.modalValue=_e({},this.modalValue))},resultExchange:function(e){var t=e.rows[0];"select"!==this.valueMode&&(this.$emit("input",t),this.modalValue=t),this.$emit("change",_e(_e({},e),{},{data:this.multiple?e.rows:t,rows:e.rows,multiple:this.multiple,config:{name:this.name,resultName:this.resultName,type:"mixSearch"}}))},getData:function(){return this.modalValue},resetData:function(){this.modalValue=void 0},setData:function(e){this.modalValue=e},focus:function(){this.$refs.SearchInput.focus()}},render:function(e){var t=this;return e("div",{attrs:{class:"select-good-attr",style:"width: ".concat(t.actWidth,";display: inline-block")}},[e("div",{attrs:{class:"input-box"}},[e("SearchInput",{props:{value:t.modalValue,placeholder:t.placeholder,maxLength:t.maxLength,disabled:t.disabled,name:t.name,allowClear:t.allowClear,next:t.next,restore:t.restore,dialogConfig:t.dialogProps},ref:"SearchInput",on:{enterHandle:t.enterHandle,clear:t.clearHandle}})]),e(this.dialog,{on:{confirm:t.confirmHandle,"update:visible":function(e){t.visible=e},cancel:t.confirmHandle},attrs:_e({},this.dialogProps),props:_e(_e({},t.dialogProps),{},{visible:t.visible})})])},components:{SearchInput:jn}},void 0,void 0,void 0,!1,void 0,void 0,void 0);Qn.install=function(e){e.component(Qn.name,Qn)};var Zn=[],ea=function e(t){for(var n=0;n<t.length;n++){var a=t[n],i=a.id;Zn.push({key:i,title:a.categoryName}),a.children&&e(a.children)}},ta=function e(t,n){for(var a,i=0;i<n.length;i++){var o=n[i];o.children&&(o.children.some((function(e){return e.id===t}))?a=o.id:e(t,o.children)&&(a=e(t,o.children)))}return a},na={name:"DSelectProduct",mixins:[kt],provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},props:{visible:{type:Boolean,default:!1},width:{tpye:[String,Number],default:1250},title:{type:String,default:"选择商品"},cache:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},replaceFields:{type:Object,default:function(){return{key:"id"}}},rules:{type:Object,default:function(){return{}}},origin:{type:String,default:"page"},sortList:{type:Array,default:void 0},mode:{type:String,default:"default"},defaultValue:{type:[Object,Array],default:null},displayItems:{type:Array,default:function(){return["classify","warehouse","brand","shelves","inventory","salesPromotion","bought"]}},selectionLimit:{type:Number,default:100}},data:function(){return{modalConfig:{},tableData:[],tableLoading:!1,scrollHeight:0,inventory:!1,promotion:!1,isBought:!1,searchResult:{type:4,isShowSku:!0,keywords:void 0,customerId:void 0,warehouseId:void 0,brandId:void 0,categoryPath:void 0,saleStatus:1,checkList:"",isOverrideWarehouse:"",showList:[]},resultMap:{warehouse:{key:"warehouseId",ref:"warehouseMixSearch"}},disabled:{warehouse:!1},headerConfig:{1:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],2:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}],3:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],4:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"avgPrice"}],5:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"},{key:"levelPrice"}],6:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"stock"},{key:"avgPrice"}],7:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],8:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],9:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"}],10:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}]},treeData:[{categoryName:"全部分类",key:"1",pathCode:"",id:"1",children:[{categoryName:"未分类",key:"2",isLeaf:!0,pathCode:"0",id:"2"}]}],name:"warehouse",keywordtree:"",expandedKeys:[],autoExpandParent:!0,searchValue:"",tabLable:"0"}},watch:{visible:function(e){var t=this;e&&(this.selectionContent.primaryKey=this.baseReplaceFields.key,this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.modalConfig={title:"选择商品"},this.$nextTick((function(){t.handleSelectedClear(),t.dealResult(),t.cache||(t.mergeResult(),t.dealResult(),"0"===t.tabLable?t.initTreeData():t.loadTableData())})))}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},sortColumns:function(){return this.sortList?this.sortList:this.headerConfig[this.searchResult.type]},baseReplaceFields:function(){return _e({key:"id",warehouse:"warehouseId"},this.replaceFields)}},filters:{getPrice:function(e){return void 0===e||""===e||null===e?"-":e}},methods:{inventoryChange:function(){this.inventory?this.changeData(!0,"2"):this.changeData(!1,"2")},isBoughtChange:function(){this.isBought?(this.tabLable="1",this.changeData(!0,"1")):(this.searchResult.categoryPath="",this.tabLable="0",this.changeData(!1,"1"))},promotionChange:function(){this.promotion?this.changeData(!0,"3"):this.changeData(!1,"3")},onSearchTree:function(e){var t=this,n=e.target.value,a=Zn.map((function(e){return e.title.indexOf(n)>-1?ta(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:n,autoExpandParent:!0})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onLoadData:function(e){var t=this;return new Promise((function(n){e.dataRef.children?n():t.$get(qe,{categoryType:0,parentId:e.dataRef.id}).then((function(a){"warehouse"===t.name&&(a.data.length&&(e.dataRef.children=a.data,t.treeData=wt(t.treeData),ea(t.treeData)),n())}))}))},initTreeData:function(){var e=this;this.$get(qe,{categoryType:0,parentId:0}).then((function(t){e.treeData[0].children=e.treeData[0].children.concat(t.data),ea(e.treeData),e.treeData&&e.treeData.length>0&&(e.searchResult.categoryPath=e.treeData[0].pathCode,e.loadTableData())}))},changeData:function(e,t){var n;n=this.searchResult.checkList?this.searchResult.checkList.split(","):[],e?n.includes(t)||n.push(t):n.includes(t)&&n.splice(n.indexOf(t),1),this.searchResult.checkList=n.join(","),this.searchReset().loadTableData()},loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Fe,_e(_e({},ht(this.searchResult)),{},{pageNum:t.current,pageSize:t.pageSize,sort:-1})).then((function(t){t.data&&(e.tableData=t.data.list,e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},dealResult:function(){var e=this;if("warehouse"===this.mode&&(this.defaultValue&&this.defaultValue[this.baseReplaceFields.warehouse]?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=this.defaultValue[this.baseReplaceFields.warehouse]):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse&&(this.searchResult.warehouseId=this.rules.warehouse.id))),this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t],a=lt(n);if("warehouse"===t&&"warehouse"===this.mode)return;"object"===a?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}if(this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=_e(_e({},e.selectionContent.selectedRows),{},ke({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ke({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this.rules.checkList&&this.rules.checkList.length>0){var i=this.rules.checkList.split(",");i.includes("1")?(this.tabLable="1",this.searchResult.categoryPath="",this.isBought=!0):(this.tabLable="0",this.isBought=!1),i.includes("2")?this.inventory=!0:this.tabLable=!1,i.includes("3")?this.promotion=!0:this.promotion=!1}},onSearch:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},saleChange:function(e){var t=e.data;this.searchResult.saleStatus=t,this.searchReset().loadTableData()},warehouseChange:function(e){"warehouse"===this.mode?e.data?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=e.data.id):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse?this.searchResult.warehouseId=this.rules.warehouse.id:this.searchResult.warehouseId=void 0):(this.handleSelectedClear(),e.data?this.searchResult.warehouseId=e.data.id:this.searchResult.warehouseId=void 0),this.searchReset().loadTableData()},brandChange:function(){this.handleSelectedClear(),this.searchReset().loadTableData()},selectCurrentNode:function(e,t){this.handleSelectedClear();var n=t.node.dataRef;this.searchResult.categoryPath=t.selected?n.pathCode:null,this.searchReset().loadTableData()},tableChange:function(e,t,n){if(e.current===this.pagination.current||e.pageSize!==this.pagination.pageSize)return this.handleSelectedClear(),e.current=1,void this.loadTableData();this.loadTableData(e)},searchReset:function(){return this.tableData=[],this.pagination.current=1,this.pagination.total=0,this},rowClick:function(e){var t=this;console.log("单击",e),this.multiple?this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])?(this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]):(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e):(this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ke({},e[this.baseReplaceFields.key],e))},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.okHandle()},mergeResult:function(){this.pagination.current=1,this.searchResult={type:this.rules.type||4,isShowSku:this.rules.isShowSku||!0,keywords:this.rules.keywords||void 0,customerId:this.rules.customerId||void 0,warehouseId:this.rules.warehouseId||void 0,brandId:this.rules.brandId||void 0,categoryPath:this.rules.categoryPath||void 0,saleStatus:this.rules.saleStatus||void 0,checkList:this.rules.saleStatus||""}},okHandle:function(){if(!(this.selectionContent.selectedRowKeys.length>this.selectionLimit))return this.multiple?this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),void this.$emit("update:visible",!1)):void this.$emit("update:visible",!1):void(this.$attrs.product&&this.selectionContent.selectedRowKeys[0]===this.$attrs.product[this.baseReplaceFields.key]?this.$emit("update:visible",!1):this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.$emit("update:visible",!1)):this.$emit("update:visible",!1));this.$message.warning("最多选择".concat(this.selectionLimit,"条"))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()}},components:{OperationBox:fn,DSelectWarehouseInput:Qn,MixSelect:Pn,Empty:Hn,HImage:Wt,CellEllipsisTip:Jt,STable:un}};const aa=na;var ia=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-product a-table-common",attrs:{keyboard:!1,maskClosable:!1,title:e.modalConfig.title,width:e.width},on:{ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{ref:"productModal"},[n("div",{staticClass:"choose-product-content"},["0"===e.tabLable&&e.displayItems.includes("classify")?n("div",{staticClass:"tree-control"},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"请输入分类名称"},on:{change:e.onSearchTree},model:{value:e.keywordtree,callback:function(t){e.keywordtree=t},expression:"keywordtree"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"tree-control-contain"},[n("a-tree",{attrs:{"auto-expand-parent":e.autoExpandParent,"expanded-keys":e.expandedKeys,"load-data":e.onLoadData,replaceFields:{children:"children",title:"categoryName",key:"id"},"tree-data":e.treeData},on:{expand:e.onExpand,select:e.selectCurrentNode}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"table-control",class:{"table-width":"1"===e.tabLable||!e.displayItems.includes("classify")}},[n("operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{staticStyle:{width:"240px"},attrs:{maxLength:40,allowClear:"",placeholder:"商品名称/编号/条码/关键字"},on:{search:e.onSearch},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),e.displayItems.includes("warehouse")?n("DSelectWarehouseInput",{ref:"warehouseMixSearch",attrs:{disabled:e.disabled.warehouse,width:120,allowClear:"",name:"warehouse",placeholder:"仓库"},on:{change:e.warehouseChange}}):e._e(),e._v(" "),e.displayItems.includes("brand")?n("MixSelect",{attrs:{type:1,width:120,allowClear:""},on:{change:e.brandChange},model:{value:e.searchResult.brandId,callback:function(t){e.$set(e.searchResult,"brandId",t)},expression:"searchResult.brandId"}}):e._e(),e._v(" "),e.displayItems.includes("shelves")?n("MixSelect",{attrs:{list:[{id:1,name:"上架"},{id:0,name:"下架"}],width:120,"allow-clear":"",placeholder:"上下架"},on:{change:e.saleChange},model:{value:e.searchResult.saleStatus,callback:function(t){e.$set(e.searchResult,"saleStatus",t)},expression:"searchResult.saleStatus"}}):e._e(),e._v(" "),e.displayItems.includes("inventory")?n("a-checkbox",{staticClass:"check-line",on:{change:e.inventoryChange},model:{value:e.inventory,callback:function(t){e.inventory=t},expression:"inventory"}},[e._v("库存大于0\n          ")]):e._e(),e._v(" "),e.displayItems.includes("salesPromotion")?n("a-checkbox",{staticClass:"check-line",on:{change:e.promotionChange},model:{value:e.promotion,callback:function(t){e.promotion=t},expression:"promotion"}},[e._v("促销商品\n          ")]):e._e(),e._v(" "),e.displayItems.includes("bought")?n("a-checkbox",{staticClass:"check-line",on:{change:e.isBoughtChange},model:{value:e.isBought,callback:function(t){e.isBought=t},expression:"isBought"}},[e._v("买过商品\n          ")]):e._e()],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-content",attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,"row-selection":e.rowSelection,rowKey:e.selectionContent.primaryKey,scroll:{y:"calc(100vh - 490px)"},"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"code",attrs:{"data-index":"code",title:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"barCode",attrs:{title:"商品条码"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.barCode||"-"}})]}}])}),e._v(" "),n("a-table-column",{key:"cover",attrs:{title:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("h-image",{staticStyle:{width:"48px",height:"48px"},attrs:{initial:0,"preview-src-list":[t.cover],src:e._f("formatImage")(t.cover,48),fit:"cover",popover:""}})]}}])}),e._v(" "),n("a-table-column",{key:"name",attrs:{title:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.name}})]}}])}),e._v(" "),n("a-table-column",{key:"skuName",attrs:{"data-index":"skuName",title:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"warehouseName",attrs:{"data-index":"warehouseName",title:"仓库"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"stock",attrs:{"data-index":"stock",title:"库存数量"}}),e._v(" "),n("a-table-column",{key:"avgPrice",attrs:{"data-index":"avgPrice",title:"成本均价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"lastPrice",attrs:{"data-index":"lastPrice",title:"最近进价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"baseUnitName",attrs:{"data-index":"baseUnitName",title:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"unitPrice",attrs:{"data-index":"unitPrice",title:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"levelPrice",attrs:{"data-index":"levelPrice",title:"级别价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])})],1)],1)])])])};ia._withStripped=!0;const oa=mt({render:ia,staticRenderFns:[]},void 0,aa,void 0,!1,void 0,!1,void 0,void 0,void 0);oa.install=function(e){e.component(oa.name,oa)};var ra={name:"DSelectPeople",mixins:[kt,Un],components:{CellEllipsisTip:Jt,STable:un,DOperationBox:fn,Empty:Hn},props:{width:{type:Number,default:1e3},cache:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},title:{type:String,default:"选择经手人"},placeholderLeft:{type:String,default:"请输入部门名称"},placeholderRight:{type:String,default:"姓名/手机号"},multiple:{type:Boolean,default:!1},beforeClose:{type:Function,default:void 0},replaceFields:{type:Object,default:function(){}},rules:{type:Object,default:function(){return{}}},defaultValue:{type:[Object,Array],default:null},selectionLimit:{type:Number,default:100}},data:function(){return{corpTree:{data:[],keywords:null,expandedKeys:[],selectedKeys:[],autoExpandParent:!0,treeFirstNode:null,loading:!1},tableData:[],searchData:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:{}},opened:!1}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="stafferId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&this.reset().dealResult().getCorpTree(),this.opened=!0)}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},baseReplaceFields:function(){return _e({key:"stafferId"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}}},methods:{onSelectCorpTreeNode:function(e,t){console.log("onSelectCorpTreeNode",e,t),t.selected?this.corpTree.selectedKeys=[t.node.dataRef.businessId]:this.corpTree.selectedKeys=[this.corpTree.treeFirstNode.businessId],this.searchResult.categoryPath=t.selected?t.node.dataRef:this.corpTree.treeFirstNode,this.dealResult().loadTableData()},onExpand:function(e){this.corpTree.expandedKeys=e,this.corpTree.autoExpandParent=!1},getParentKey:function(e,t){for(var n,a=0;a<t.length;a++){var i=t[a];i.children&&(i.children.some((function(t){return t.businessId===e}))?n=i.businessId:this.getParentKey(e,i.children)&&(n=this.getParentKey(e,i.children)))}return n},onSearchTree:function(e){var t=this,n=e.target.value;this.corpTree.expandedKeys=this.searchData.map((function(e){return e.name.indexOf(n)>-1?t.getParentKey(e.businessId,t.corpTree.data):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t})),this.corpTree.autoExpandParent=!0},handleSearchByKeywords:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},loadTableData:function(){var e=arguments,t=this;return xe(Oe.mark((function n(){var a,i,o;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.pagination,n.prev=1,t.tableLoading=!0,n.next=5,t.$post(Ye,_e({corpId:t.searchResult.categoryPath.corpId||"",departmentId:t.searchResult.categoryPath.businessId||"",keyword:t.searchResult.keywords||"",dismiss:!1,entryDateBegin:"",entryDateEnd:"",isAdmin:"",locked:!1,normal:!0,pageNum:a.pageNum||1,pageSize:a.pageSize||30},t.rules));case 5:i=n.sent,o=i.data,t.tableData=o.list,t.dealSelectionCheckBox(),t.pagination.total=o.total,t.pagination.current=o.pageNum,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error(n.t0);case 16:return n.prev=16,t.tableLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()},getCorpTree:function(){var e=this;return xe(Oe.mark((function t(){var n,a;return Oe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.corpTree.loading=!0,t.next=4,e.$get(Ge);case 4:n=t.sent,a=n.data,e.corpTree.data=a,function t(n){var a=[];return n.forEach((function(n){n.scopedSlots={title:"title"},e.searchData.push(n),n.children&&n.children.length&&t(n.children),a.push(n)})),a}(a),e.corpTree.data&&e.corpTree.data.length>0&&(e.corpTree.treeFirstNode=e.corpTree.data[0],e.corpTree.selectedKeys=[e.corpTree.treeFirstNode.businessId],e.searchResult.categoryPath=e.corpTree.data[0],e.loadTableData()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:return t.prev=15,e.corpTree.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},handleOk:function(){if(this.selectionContent.selectedRowKeys.length>this.selectionLimit)this.$message.warning("最多选择".concat(this.selectionLimit,"条"));else{var e={data:this.selectionContent.selectedRowKeys,rows:this.getRowData()};this.beforeClose?this.beforeClose(e):this.$emit("confirm",e),this.$emit("update:visible",!1)}},reset:function(){return this.tableData=[],this.corpTree.keywords="",this.corpTree.expandedKeys=[],this.corpTree.selectedKeys=[],this.corpTree.autoExpandParent=!0,this.corpTree.data=[],this.searchResult={keywords:"",categoryPath:{}},this.corpTree.treeFirstNode=null,this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this},onOperationClick:function(e){"clear"===e.name&&this.handleSelectedClear()},handleCancel:function(){this.$emit("cancel"),this.$emit("update:visible",!1)}}};const sa=ra;var la=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-people a-table-common modal-reset-no-padding",attrs:{footer:null,keyboard:!1,maskClosable:!1,title:e.title,width:e.width,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"people-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:e.placeholderLeft,allowClear:""},on:{change:e.onSearchTree},model:{value:e.corpTree.keywords,callback:function(t){e.$set(e.corpTree,"keywords",t)},expression:"corpTree.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.corpTree.loading,expression:"corpTree.loading"}],staticClass:"classify-wrap"},[n("a-tree",{attrs:{"auto-expand-parent":e.corpTree.autoExpandParent,"expanded-keys":e.corpTree.expandedKeys,replaceFields:{children:"children",title:"name",key:"businessId"},"selected-keys":e.corpTree.selectedKeys,"tree-data":e.corpTree.data},on:{expand:e.onExpand,select:e.onSelectCorpTreeNode},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.name;return[a.indexOf(e.corpTree.keywords)>-1?n("span",[e._v("\n              "+e._s(a.substr(0,a.indexOf(e.corpTree.keywords)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.corpTree.keywords))]),e._v("\n              "+e._s(a.substr(a.indexOf(e.corpTree.keywords)+e.corpTree.keywords.length))+"\n            ")]):n("span",[e._v(e._s(a))])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationClick}},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholderRight,allowClear:""},on:{search:e.handleSearchByKeywords},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{"data-index":"name",title:"姓名"}}),e._v(" "),n("a-table-column",{key:"stafferNo",attrs:{"data-index":"stafferNo",title:"编号"}}),e._v(" "),n("a-table-column",{key:"departmentName",attrs:{title:"部门"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.departmentName}})]}}])}),e._v(" "),n("a-table-column",{key:"mobile",attrs:{"data-index":"mobile",title:"联系电话"}})],1)],1)]),e._v(" "),n("div",{staticClass:"select-people-footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n    "),n("a-button",{attrs:{disabled:!e.selectionContent.selectedRowKeys||0===e.selectionContent.selectedRowKeys.length,type:"primary"},on:{click:e.handleOk}},[e._v("\n      确 定\n    ")])],1)])};la._withStripped=!0;const ca=mt({render:la,staticRenderFns:[]},void 0,sa,void 0,!1,void 0,!1,void 0,void 0,void 0);ca.install=function(e){e.component(ca.name,ca)};var ua={name:"DSelectSaleArea",props:{width:{require:!1,type:String,default:"120"},maxHeight:{require:!1,type:String,default:"300"},placeholder:{require:!1,type:String,default:"销售区域"}},data:function(){return{value:void 0,parentId:0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},treeData:[],apiName:null}},created:function(){this.treeData.length||this.getList([],!1)},methods:{openSelect:function(){this.treeData.length||this.getList([],!1)},getList:function(){var e=arguments,t=this;return xe(Oe.mark((function n(){var a,i,o,r;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:[],i=e.length>1&&void 0!==e[1]&&e[1],n.prev=2,n.next=5,t.$post(Ee,{businessId:t.parentId});case 5:o=n.sent,(r=o.data).length>0&&(i?(a.children=r,t.treeData=wt(t.treeData)):t.treeData=r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onLoadData:function(e){var t=this;return new Promise((function(n){var a=e.dataRef;a.hasChildren?setTimeout((function(){t.parentId=a.id,t.getList(a,!0),n()}),300):n()}))},changeValue:function(e){this.$emit("sureSelect",e)}}};const da=ua;var ha=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{style:{width:e.width+"px"},attrs:{allowClear:"","tree-data-simple-mode":"","dropdown-style":{width:+e.width+60+"px",maxHeight:e.maxHeight+"px",overflow:"auto"},"tree-data":e.treeData,placeholder:e.placeholder,"load-data":e.onLoadData,replaceFields:e.replaceFields},on:{change:e.changeValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})};ha._withStripped=!0;const fa=mt({render:ha,staticRenderFns:[]},void 0,da,"data-v-1c52a95a",!1,void 0,!1,void 0,void 0,void 0);fa.install=function(e){e.component(fa.name,fa)};var pa={name:"DSelectCustomer",components:{Empty:Hn,SelectSaleArea:fa,DOperationBox:fn,CellEllipsisTip:Jt,STable:un},mixins:[kt,Un],props:{visible:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},cache:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:1e3},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"businessId"}}},attrs:{type:Object,default:function(){}},defaultSelectedRowKeys:{type:Object,default:function(){return{selectedRowKeys:[],selectedRows:[]}}},isShowPrice:{type:Boolean,default:!1},customerType:{type:Array,default:function(){return[1,2,3,4]}},sortList:{type:Array,default:void 0},defaultValue:{type:[Array,Object],default:void 0},beforeClose:{type:Function,default:void 0},selectionLimit:{type:Number,default:100},placeholder:{type:String,default:null}},data:function(){return{tableData:[],levelPrices:{data:[],loading:!1},searchResult:{customerTypeIds:[],keywords:null,priceLevelId:null,regionId:null},customers:{loading:!1},categories:{keyword:"",data:[],loading:{}}}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},filteredCategories:function(){var e=this;return this.categories.keyword?this.categories.data.filter((function(t){return t.label.indexOf(e.categories.keyword)>-1})):this.categories.data},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.customers.loading}})}},baseReplaceFields:function(){return _e({key:"businessId"},this.replaceFields)},sortColumns:function(){return this.sortList?this.sortList:[{key:"name"},{key:"region"},{key:"priceLevel"}]},getTitle:function(){return this.customerType.includes(1)&&this.customerType.includes(2)?"客户":this.customerType.includes(1)?"供应商":"客户"},tablePlaceholder:function(){return this.placeholder?this.placeholder:"".concat(this.getTitle,"名称/联系人/手机")}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="businessId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.cache||(this.reset().dealResult().loadTableData(),this.handleFetchCategories(),this.handleFetchLevelPrice()))},defaultSelectedRowKeys:{handler:function(e){var t=ae.deepClone(e);this.selectionContent.selectedRowKeys=t.selectedRowKeys,this.selectionContent.selectedRows=t.selectedRows},immediate:!0}},filters:{balance:function(e,t){if(e){var n=e.filter((function(e){return e.value===t}));return n.length?n[0].label:"-"}return"-"}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.customers.loading=!0,this.$post(Pe,_e(_e({pageNum:t.current,pageSize:t.pageSize,orderCustomerTypeList:this.customerType,keyword:this.searchResult.keywords},this.searchResult),this.rules)).then((function(t){e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum})).finally((function(){e.customers.loading=!1}))},onCustomersSearch:function(e,t){this.searchResult[e]=t,this.handleSelectedClear().loadTableData()},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},handleFetchCategories:function(){var e=this;this.categories.loading=!0,this.$post(Ae).then((function(t){e.categories.data=t.data||[]})).catch((function(e){return console.error(e)})).finally((function(){e.categories.loading=!1}))},handleFetchLevelPrice:function(){var e=this;this.isShowPrice&&(this.levelPrices.loading=!0,this.$post(Ue).then((function(t){e.levelPrices.data=t.data||[]})).finally((function(){e.levelPrices.loading=!1})))},onOperationOptionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const ma=pa;var ga=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",e._b({staticClass:"d-select-customer a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title||"选择"+e.getTitle,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},"a-modal",e.attrs,!1),[n("div",{staticClass:"customer-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{attrs:{maxLength:40,placeholder:"请输入分类名称"},model:{value:e.categories.keyword,callback:function(t){e.$set(e.categories,"keyword",t)},expression:"categories.keyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.categories.loading,expression:"categories.loading"}],staticClass:"classify-wrap"},[n("a-checkbox-group",{attrs:{name:"checkboxgroup"},on:{change:function(t){return e.onCustomersSearch("customerTypeIds",arguments[0])}},model:{value:e.searchResult.customerTypeIds,callback:function(t){e.$set(e.searchResult,"customerTypeIds",t)},expression:"searchResult.customerTypeIds"}},[n("a-row",[n("a-space",{attrs:{direction:"vertical"}},e._l(e.filteredCategories,(function(t,a){return n("a-col",{key:a,attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])],1)})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationOptionClick}},[n("a-space",[n("a-input-search",{attrs:{maxLength:40,placeholder:e.tablePlaceholder},on:{search:function(t){return e.onCustomersSearch("keywords",arguments[0])}},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.isShowPrice?n("a-select",{staticStyle:{width:"120px"},attrs:{loading:e.levelPrices.loading,allowClear:"",placeholder:"级别价"},on:{change:function(t){return e.onCustomersSearch("priceLevelId",arguments[0])}}},e._l(e.levelPrices.data,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):e._e(),e._v(" "),n("select-sale-area",{staticClass:"select-area",attrs:{placeholder:"销售区域"},on:{sureSelect:function(t){return e.onCustomersSearch("regionId",arguments[0])}}})],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.customers.loading,expression:"customers.loading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate,"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{title:e.getTitle+"名称","data-index":"name"}}),e._v(" "),n("a-table-column",{key:"region",attrs:{title:"销售区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2,tip:""+t.region}},[e._v("\n              "+e._s(t.region)+"\n            ")])]}}])}),e._v(" "),n("a-table-column",{key:"priceLevel",attrs:{"data-index":"priceLevel",title:"级别价"}}),e._v(" "),n("a-table-column",{key:"balanceList1",attrs:{title:"应收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,1))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList2",attrs:{title:"应付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,2))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList3",attrs:{title:"预收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,3))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList4",attrs:{title:"预付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,4))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList5",attrs:{title:"积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,5))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList6",attrs:{title:"第三方ERP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,6))+"\n          ")]}}])})],1)],1)])])};ga._withStripped=!0;const va=mt({render:ga,staticRenderFns:[]},void 0,ma,void 0,!1,void 0,!1,void 0,void 0,void 0);va.install=function(e){e.component(va.name,va)};const ya=mt({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return _e({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0),ba={name:"DSelectProductAttr",components:{SelectGroup:ya,Empty:Hn},props:{value:{type:Object,default:null},visible:{type:Boolean,default:!1},width:{type:Number,default:816},destory:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入搜索关键字"},type:{type:Number,default:0},productId:{type:Array,default:function(){return[]}},inputValue:{type:String,default:""},replaceFields:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}}},data:function(){return{selectValue:void 0,keywords:"",options:[],loading:!1}},watch:{modalVisible:{handler:function(e){e&&(this.init(),this.value&&(this.selectValue=this.value.id)),this.rules.keywords&&(this.keywords=this.rules.keywords)},immediate:!0}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},title:function(){var e=this.type;return 0===e?"选择单位":1===e?"选择品牌":2===e?"选择标签":3===e?"选择单位":"选择仓库"},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t.name.match(e.keywords))return t})):this.options},baseReplaceFields:function(){return _e({key:"id",name:"name"},this.replaceFields)}},methods:{init:function(){var e=this;this.loading=!0,4===this.type?this.$get(We,_e({pageNum:1,pageSize:100},this.rules)).then((function(t){e.options=t.data.list})).finally((function(){e.loading=!1})):3===this.type?this.$post(ze,this.productId).then((function(t){e.options=t.data.map((function(e){return _e(_e({},e),{},{name:e.unitName})}))})).finally((function(){e.loading=!1})):this.$post(Be,_e({type:this.type},this.rules)).then((function(t){e.options=t.data})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},handlerAfterClose:function(){this.$emit("afterClose")},handleOk:function(){var e=this,t=this.options.find((function(t){return t.id===e.selectValue})),n=this.options.filter((function(t){return t.id===e.selectValue}));this.$emit("confirm",{data:t,rows:n,baseRows:this.options}),this.modalVisible=!1}}};var wa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{afterClose:e.handlerAfterClose,destroyOnClose:e.destory,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:function(t){e.modalVisible=!1},ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1)],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},[n("select-group",{attrs:{options:e.filteredOptions,replaceFields:e.baseReplaceFields},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};wa._withStripped=!0;const ka=mt({render:wa,staticRenderFns:[]},void 0,ba,void 0,!1,void 0,!1,void 0,void 0,void 0);ka.install=function(e){e.component(ka.name,ka)};var Ca="SYS_0000",_a={0:"付款账户选择",1:"多账户选择"};const Sa={name:"DSelectPayAccount",components:{Empty:Hn},filters:{payAccountConvert:function(e){var t=Ln.find((function(t){return t.id===e}));return t?t.name:"--"}},props:{type:{type:Number,default:0},width:{type:[String,Number],default:816},visible:{type:Boolean,default:!1},payType:{type:Number,default:1},dueMoney:{type:[Number,String],default:0},customerId:{type:[String,Number],default:""},beforeClose:{type:Function,default:null},cache:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},excludeAccountTypes:{type:Array,default:function(){return[]}},defaultValue:{type:[String,Number,Array,Object],default:null},verifyTotalMoney:{type:Boolean,default:!0}},data:function(){return{modalTitles:_a,loading:!1,tableData:[],totalMoney:0,keywords:null}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},locale:function(){return{emptyText:this.$createElement("Empty",{props:{loading:this.loading}})}},filteredTableData:function(){var e=this;return this.keywords?this.includedTableData.filter((function(t){var n=t.name,a=t.bankDeposit,i=t.accountNumber;if(n.match(e.keywords)||a.match(e.keywords)||i.match(e.keywords))return t})):this.includedTableData},includedTableData:function(){var e=this;return this.tableData.filter((function(t){if(!e.excludeAccountTypes.includes(t.type))return t}))}},watch:{visible:function(e){e&&!this.cache?this.loadData():this.tableData.length||this.loadData(),this.rules.keywords&&(this.keywords=this.rules.keywords)}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.$get(Xe,_e({accountType:this.payType,customerId:this.customerId},this.rules)).then((function(t){var n=t.code,a=t.data;if(n===Ca){if(e.tableData=a.map((function(t,n){if(0===e.type){var a=!1;return e.defaultValue&&(a=e.defaultValue===t.accountId),_e({checked:a,payMoney:0,index:n+1,sort:n+1,accountType:t.type},t)}if(1===e.type){var i=0;if(e.defaultValue&&"[object Array]"===Object.prototype.toString.call(e.defaultValue)){var o=e.defaultValue.find((function(e){return e.accountId===t.accountId}));o&&(i=o.payMoney,t.payMoney=o.payMoney,e.payMoneyBlur(t))}return _e({payMoney:i,index:n+1,sort:n+1,accountType:t.type},t)}})),0===e.type&&e.tableData.length&&!e.tableData.find((function(e){return e.checked}))){var i=e.tableData.find((function(e){return 2===e.type}));i?i.checked=!0:e.tableData[0].checked=!0}e.$emit("data",e.tableData)}})).finally((function(){e.loading=!1}))},handleOk:function(){var e=this,t=null;if(1===this.type){var n=this.filteredTableData.filter((function(e){return e.checked=void 0,Number(e.payMoney)}));if(t={type:this.type,disabled:this.filteredTableData.length>1,paymentAccounts:n,payMoney:this.totalMoney},this.verifyTotalMoney&&t.payMoney>this.dueMoney)return void this.$message.error("请输入最大本次应付金额且最多2位小数的数值")}else t=this.filteredTableData.filter((function(e){return e.checked}));this.beforeClose?this.beforeClose({data:t,rows:t},(function(){e.$emit("update:visible",!1)})):(this.$emit("confirm",{data:t,rows:t}),this.$emit("update:visible",!1))},payMoneyBlur:function(e){1===e.type&&e.payMoney>e.balance&&(this.$message.error("预付金额小于本次付款金额，无法完成抵扣。"),e.payMoney=0),e.payMoney=ie.fmtNum(e.payMoney,!1,2,!1);var t=this.tableData.reduce((function(e,t){return e+Number(t.payMoney)}),0);this.totalMoney=ie.fmtNum(t,!1,2,!1)},handleCancel:function(){this.$emit("update:visible",!1)},radioChange:function(e){var t=this;this.filteredTableData.forEach((function(e){return e.checked=!1})),this.$nextTick((function(){t.filteredTableData[e].checked=!0}))}}};var xa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-pay-account a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.modalTitles[e.type],width:e.width,"cancel-text":"取消(Esc)","ok-text":"确定(Enter)"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[0===e.type?n("div",{staticClass:"single-account"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入关键字"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),n("a-table",{attrs:{customRow:function(t,n){return{on:{click:function(){e.radioChange(n)}}}},"data-source":e.filteredTableData,loading:e.loading,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},"row-key":"index"}},[n("a-table-column",{key:"index",attrs:{width:64,align:"center","data-index":"index"},scopedSlots:e._u([{key:"default",fn:function(t,a,i){return[n("span",{on:{click:function(t){return e.radioChange(i)}}},[n("a-radio",{attrs:{checked:a.checked}})],1)]}}],null,!1,4291464169)}),e._v(" "),n("a-table-column",{attrs:{width:160,"data-index":"type",title:"账户类型"},scopedSlots:e._u([{key:"default",fn:function(t,n){return[e._v("\n          "+e._s(e._f("payAccountConvert")(n.type))+"\n        ")]}}],null,!1,2287724343)}),e._v(" "),n("a-table-column",{attrs:{width:192,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{key:"bankDeposit",attrs:{width:160,"data-index":"bankDeposit",title:"开户银行"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)}),e._v(" "),n("a-table-column",{key:"accountNumber",attrs:{width:160,"data-index":"accountNumber",title:"银行账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)})],1)],1):n("div",{staticClass:"multiple-account"},[n("div",{staticClass:"dialog-pay"},[e._v("应"+e._s(1===e.payType?"付":"收")+"金额：¥"+e._s(e.dueMoney))]),e._v(" "),n("a-table",{staticClass:"account",attrs:{"data-source":e.filteredTableData,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},bordered:"",rowKey:"index"}},[n("a-table-column",{key:"index",staticClass:"style-padding",attrs:{width:88,align:"center","data-index":"index",title:"行号"}}),e._v(" "),n("a-table-column",{staticClass:"style-padding",attrs:{width:358,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{attrs:{width:"100%","data-index":"payMoney",title:"金额"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},on:{blur:function(t){return e.payMoneyBlur(a)}},model:{value:a.payMoney,callback:function(t){e.$set(a,"payMoney",t)},expression:"record.payMoney"}})]}}])}),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"total"},[n("div",{staticClass:"name"},[e._v("合计")]),e._v(" "),n("div",{staticStyle:{width:"358px"}}),e._v(" "),n("div",{staticClass:"money"},[e._v(e._s(e.totalMoney))])])])],2)],1)])};xa._withStripped=!0;const Ra=mt({render:xa,staticRenderFns:[]},void 0,Sa,void 0,!1,void 0,!1,void 0,void 0,void 0);function Oa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Ra.install=function(e){e.component(Ra.name,Ra)};var Da=function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.__PARENTSAPPJSONP__&&window.__POWERED_BY_QIANKUN__?window.__PARENTSAPPJSONP__(n,(function(e){t=e})):window.TMAPCALLBACK[n]=function(e){t=e},document.body.appendChild(a);var i=function(){document.body.removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},La={"北京市":{city:"北京市",short:"京",lng:"116.39737",lat:"39.939502"},"天津市":{city:"天津市",short:"津",lng:"117.133262",lat:"39.256321"},"上海市":{city:"上海市",short:"沪",lng:"121.36464",lat:"31.303465"},"重庆市":{city:"重庆市",short:"渝",lng:"106.32485",lat:"29.895013"},"河北省":{city:"石家庄",short:"冀",lng:"114.336873",lat:"38.21885"},"山西省":{city:"太原",short:"晋",lng:"112.349964",lat:"38.044464"},"辽宁省":{city:"沈阳",short:"辽",lng:"123.241164",lat:"41.948112"},"吉林省":{city:"长春",short:"吉",lng:"125.228072",lat:"43.894927"},"黑龙江省":{city:"哈尔滨",short:"黑",lng:"126.479088",lat:"45.985284"},"江苏省":{city:"南京",short:"苏",lng:"118.715429",lat:"32.246466"},"浙江省":{city:"杭州",short:"浙",lng:"120.040035",lat:"30.350837"},"安徽省":{city:"合肥",short:"皖",lng:"117.170056",lat:"31.99595"},"福建省":{city:"福州",short:"闽",lng:"119.156964",lat:"26.182279"},"江西省":{city:"南昌",short:"赣",lng:"115.808656",lat:"28.774611"},"山东省":{city:"济南",short:"鲁",lng:"116.912494",lat:"36.812038"},"河南省":{city:"郑州",short:"豫",lng:"113.453802",lat:"34.895028"},"湖北省":{city:"武汉",short:"鄂",lng:"114.116105",lat:"30.764814"},"湖南省":{city:"长沙",short:"湘",lng:"112.800698",lat:"28.474291"},"广东省":{city:"广州",short:"粤",lng:"113.233035",lat:"23.224606"},"海南省":{city:"海口",short:"琼",lng:"110.179083",lat:"19.921006"},"四川省":{city:"成都",short:"川",lng:"103.924003",lat:"30.796585"},"贵州省":{city:"贵阳",short:"黔",lng:"106.499624",lat:"26.844365"},"云南省":{city:"昆明",short:"滇",lng:"102.599397",lat:"25.248948"},"陕西省":{city:"西安",short:"陕",lng:"108.780889",lat:"34.408508"},"甘肃省":{city:"兰州",short:"甘",lng:"103.66644",lat:"36.218003"},"青海省":{city:"西宁",short:"青",lng:"101.605943",lat:"36.752842"},"西藏自治区":{city:"拉萨",short:"藏",lng:"90.972306",lat:"29.838888"},"广西壮族自治区":{city:"南宁",short:"桂",lng:"108.265765",lat:"23.020403"},"内蒙古自治区":{city:"呼和浩特",short:"蒙",lng:"111.614073",lat:"40.951504"},"宁夏回族自治区":{city:"银川",short:"宁",lng:"106.094884",lat:"38.624116"},"新疆维吾尔自治区":{city:"乌鲁木齐",short:"新",lng:"87.476819",lat:"43.894927"},"香港特别行政区":{city:"香港",short:"港",lng:"114.1529",lat:"22.542716"},"澳门地区":{city:"澳门",short:"澳",lng:"113.417008",lat:"22.337477"},"台湾省":{city:"台北",short:"台.",lng:"121.36464",lat:"25.248948"}},Ta="https://apis.map.qq.com",$a={geocoder:"".concat(Ta,"/ws/geocoder/v1"),placeSearch:"".concat(Ta,"/ws/place/v1/search"),placeExplore:"".concat(Ta,"/ws/place/v1/explore"),placeDetail:"".concat(Ta,"/ws/place/v1/detail"),placeSuggestion:"".concat(Ta,"/ws/place/v1/suggestion"),district:"".concat(Ta,"/ws/district/v1"),directionDriving:"".concat(Ta,"/ws/direction/v1/driving"),directionTransit:"".concat(Ta,"/ws/direction/v1/transit"),directionWalking:"".concat(Ta,"/ws/direction/v1/walking"),directionBicycling:"".concat(Ta,"/ws/direction/v1/bicycling"),distanceMatrix:"".concat(Ta,"/ws/distance/v1/matrix"),locationIP:"".concat(Ta,"/ws/location/v1/ip"),staticmap:"".concat(Ta,"/ws/staticmap/v2"),coordTranslate:"".concat(Ta,"/ws/coord/v1/translate")},Va=function(e){var t="";if(e)for(var n in e)e.hasOwnProperty(n)&&(t+="".concat(t?"".concat(t,"&"):"").concat(n,"=").concat(e[n]));return t},Ia=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.mapOptions={key:"T74BZ-KJV6U-EVEVH-B2ZLQ-YIZQF-3PFPB",container:"map",center:{lat:39.908802,lng:116.397502},zoom:16,location:!1,showMarker:!1,success:null,fail:null},this.varia={queue:[],mapStatus:!1,centerMarker:null,on:{tilesloaded:null}},this._init(t)}var t,n,a,i;return t=e,n=[{key:"_init",value:function(e){this._initConfig(e),e&&e.container&&(this._initMap(),this._afterInit())}},{key:"_initConfig",value:function(e){this.mapOptions=this.merge(this.mapOptions,e)}},{key:"_initMap",value:(i=xe(Oe.mark((function e(){var t=this;return Oe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=this.mapOptions.key,Da("https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=TMapLoad"));case 2:this.mapOptions.center=this.latLng(this.mapOptions.center),this.map=new TMap.Map(this.mapOptions.container,this.mapOptions),this.map.once("tilesloaded",(function(){t.varia.mapStatus=!0,t.runQueue(),t.mapOptions.success&&t.mapOptions.success()}));case 5:case"end":return e.stop()}var n}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_afterInit",value:function(){this.mapOptions.location&&this.location(),this.mapOptions.showMarker&&this.setMarker(this.mapOptions.center)}},{key:"run",value:function(e,t){this.varia.mapStatus?this[e](t):this.varia.queue.push({name:e,options:t})}},{key:"on",value:function(e,t){console.log(e,t)}},{key:"runQueue",value:function(){var e=this;this.varia.queue.forEach((function(t){e[t.name](t.options)})),this.varia.queue=[]}},{key:"request",value:function(e,t){var n,a,i=(n=this.mapOptions,a="key=".concat(n.key,"&output=jsonp"),{parseLocation:function(e){return Da("https://apis.map.qq.com/ws/geocoder/v1/?".concat(Va(e),"&").concat(a))},placeSearch:function(e){return Da("".concat($a.placeSearch,"?").concat(Va(e),"&").concat(a))},placeExplore:function(e){return Da("".concat($a.placeExplore,"?").concat(Va(e),"&").concat(a))},placeDetail:function(e){return Da("".concat($a.placeDetail,"?").concat(Va(e),"&").concat(a))},suggestion:function(e){return Da("".concat($a.placeSuggestion,"?").concat(Va(e),"&").concat(a))},geocoder:function(e){var t=e.address;return t&&La[t]&&(e.address="".concat(t).concat(La[t].city)),Da("".concat($a.geocoder,"?").concat(Va(e),"&").concat(a))},directionDriving:function(e){return Da("".concat($a.directionDriving,"?").concat(Va(e),"&").concat(a))},directionWalking:function(e){return Da("".concat($a.directionWalking,"?").concat(Va(e),"&").concat(a))},directionBicycling:function(e){return Da("".concat($a.directionBicycling,"?").concat(Va(e),"&").concat(a))},directionTransit:function(e){return Da("".concat($a.directionTransit,"?").concat(Va(e),"&").concat(a))},distanceMatrix:function(e){return Da("".concat($a.distanceMatrix,"?").concat(Va(e),"&").concat(a))},district:function(e){return Da("".concat($a.district,"?").concat(Va(e),"&").concat(a))},coordTranslate:function(e){return Da("".concat($a.coordTranslate,"?").concat(Va(e),"&").concat(a))},locationIP:function(e){return Da("".concat($a.locationIP,"?").concat(Va(e),"&").concat(a))}});if(!i[e])throw Error("错误警告: ".concat(e," 不是一个正确的地图请求方法，请使用正确的方法。"));return i[e](t)}},{key:"merge",value:function(e,t){for(var n in t)e[n]=e[n]&&"[object Object]"===e[n].toString()?this.merge(e[n],t[n]):e[n]=t[n];return e}},{key:"destory",value:function(){this.map.destroy()}},{key:"random",value:function(){return Math.floor(1234567890*Math.random())}},{key:"latLng",value:function(e){var t=e.lng,n=e.lat;return new TMap.LatLng(n,t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){console.log(e,"设置地图中心点"),this.map.setCenter(this.latLng(e))}},{key:"setRotation",value:function(e){this.map.setRotation(e)}},{key:"setPitch",value:function(e){this.map.setPitch(e)}},{key:"setScale",value:function(e){this.map.setScale(e)}},{key:"setMode",value:function(e){"2D"===e?this.map.setViewMode("2D"):"3D"===e&&(this.map.setViewMode("3D"),this.map.setPitch(70))}},{key:"setMarker",value:function(e,t){var n=this;console.log("setMarker-point-内部函数",e),console.log("setMarker-styles-内部函数",t),this.removeMarker(),console.log("marker-layer-".concat(Math.floor(1e4*Math.random())),"IDDDDD"),console.log(this,"this"),this.varia.centerMarker=new TMap.MultiMarker({id:"marker-layer-".concat(Math.floor(1e4*Math.random())),map:this.map,styles:_e({marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},t),geometries:function(e){var t=n;if("[object Object]"===Object.prototype.toString.call(e))return e.lat=Number(e.lat),e.lng=Number(e.lng),[{id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}}];var a=[];return e.forEach((function(e){a.push({id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}})})),a}(e)})}},{key:"setMarkerCrm",value:function(e){this.varia.centerMarker=new TMap.MultiMarker({id:"marker_".concat(this.random()),map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},geometries:[{id:"markergeo_".concat(this.random()),styleId:"marker_".concat(this.random()),position:new TMap.LatLng(e.lat,e.lng),properties:{title:"marker"}}]})}},{key:"removeMarker",value:function(){console.log("移除marker事件"),console.log(this.varia.centerMarker),this.varia.centerMarker&&(this.varia.centerMarker.setMap(null),this.varia.centerMarker=null)}},{key:"removeCluster",value:function(){}},{key:"setCircle",value:function(e){return new TMap.MultiCircle({id:"circle",map:this.map,geometries:[{center:this.latLng(e),radius:1e3}]})}},{key:"setMarkerCluster",value:function(e){var t=this;return console.log("setMarkerCluster"),this.varia.markerCluster=new TMap.MarkerCluster({id:"marker_".concat(this.random()),map:this.map,enableDefaultStyle:!1,minimumClusterSize:2,geometries:function(e){var n=t;if("[object Object]"===Object.prototype.toString.call(e))return[{position:n.latLng(e)}];var a=[];return e.forEach((function(e){a.push({position:n.latLng(e)})})),a}(e),zoomOnClick:!0,gridSize:60,averageCenter:!1,maxZoom:10}),this.varia.markerCluster}}],n&&Oa(t.prototype,n),a&&Oa(t,a),e}();const Fa={name:"Map",props:{sceneId:{type:String,default:"default"},visible:Boolean,inputValue:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100%"},searchInput:{type:Boolean,default:!0},optionSelect:{type:String,default:"title"},intLocation:{type:Boolean,default:!0},config:{type:Object,default:function(){return{}}}},data:function(){return{list:[],actInputValue:"",realDot:!1,glMap:null,id:"TMapSearch_"+ge.default.guid()}},watch:{inputValue:function(e){e!==this.actInputValue&&(this.realDot=!0,this.actInputValue=e)},visible:function(e){e&&(this.glMap||this.initMap(),this.actInputValue=this.inputValue)}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this;this.$nextTick((function(){e.glMap=new Ia(_e({container:e.id,success:function(){console.log("地图加载完毕！"),e.$emit("init",e.glMap),e.initComplate()}},e.config)),e.actInputValue=e.inputValue,e.searchInput&&e.actInputValue&&e.intLocation&&(e.realDot=!0,e.handleSearch()),e.glMap._afterInit()}))},initComplate:function(){var e=this,t=this;this.$nextTick((function(){setTimeout((function(){e.actInputValue=e.inputValue,t.glMap.request("suggestion",{keyword:e.inputValue}).then((function(e){e.count&&t.setPosition(e.data[0].id,e.data),t.list=e.data||[],t.$forceUpdate()})),t.$forceUpdate(),e.glMap.map.on("click",(function(e){var n=e.latLng.getLat(),a=e.latLng.getLng();t.setCenter({lat:n,lng:a});var i=[];t.glMap.request("parseLocation",{location:n+","+a}).then((function(e){console.log(e,"根据经纬度".concat(n+","+a,"解析地址信息"));var o={adcode:Number(e.result.ad_info.adcode),address:e.result.formatted_addresses.recommend,city:e.result.address_component.city,district:e.result.address_component.district,location:e.result.location,id:"123456ABCD",title:e.result.formatted_addresses.recommend,province:e.result.address_component.province,type:0};console.log(o,"传给外面的数据对象 - item--1"),t.$emit("change",o),i.push(o),t.actInputValue=e.result.formatted_addresses.recommend,t.setPosition("123456ABCD",i),t.glMap.request("suggestion",{keyword:e.result.address+e.result.formatted_addresses.recommend}).then((function(e){console.log(e,"res1"),e.count&&i.push.apply(i,wt(e.data)),t.list=i,t.$forceUpdate()}))}))}))}),1e3)}))},inputHandler:function(e){var t=this;e&&(this.realDot?this.glMap.request("geocoder",{address:e}).then((function(e){t.realDot=!1,e.status?t.handleSearch():t.setAutoPosition(e.result)})):this.glMap.request("suggestion",{keyword:e}).then((function(e){console.log(e,"inputHandler--suggestion - input 输入框 输入关键词"),t.list=e.data})))},handleSearch:function(){var e=this;this.actInputValue&&(this.realDot?this.glMap.request("geocoder",{address:this.actInputValue}).then((function(t){e.realDot=!1,t.status?e.handleSearch():e.setAutoPosition(t.result)})):this.glMap.request("suggestion",{keyword:this.actInputValue}).then((function(t){console.log(t,"handleSearch--suggestion - input 手动调用搜索"),e.list=t.data})))},handleSelect:function(e){if(console.log("handleSelect：",e),e){var t=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(t.location),this.glMap.setMarker(t.location),console.log(t,"传给外面的数据对象 - item--2"),this.$emit("change",t)}},setPosition:function(e,t){this.list=t;var n=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(n.location),this.glMap.setMarker(n.location),this.$forceUpdate()},setCenter:function(e){this.glMap.setMarker(e)},setAutoPosition:function(e){console.log(e)},setAddress:function(e){this.inputHandler(e)},resetValue:function(e){var t=this;this.$nextTick((function(){(t.actInputValue||t.inputValue)&&(t.actInputValue=t.inputValue,t.list=[],t.actInputValue&&!e&&(t.realDot=!0,t.handleSearch()),t.realDot=!1,t.handleSearch())}))}}};var Ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-search-wrapper"},[e.searchInput?n("a-auto-complete",{staticClass:"map-search",attrs:{autoFocus:"",placeholder:"请输入"},on:{search:e.inputHandler,select:e.handleSelect},model:{value:e.actInputValue,callback:function(t){e.actInputValue="string"==typeof t?t.trim():t},expression:"actInputValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t[e.optionSelect]))])})),1)],2):e._e(),e._v(" "),n("div",{staticClass:"t-map-search",style:{height:e.height,width:e.width},attrs:{id:e.id}})],1)};Ea._withStripped=!0;const Pa={name:"Manage",components:{GlMap:mt({render:Ea,staticRenderFns:[]},void 0,Fa,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},visible:{type:Boolean,default:!1},title:{type:String,default:"地址定位"},config:{type:Object,default:function(){return null}},inputValue:{type:String,default:""},baseValue:{type:String,default:""}},data:function(){return{flag:!0,cache:null,addressInfo:{},glmap:new Ia}},watch:{visible:function(e){var t=this;this.$nextTick((function(){t.addressInfo={},e&&t.$nextTick((function(){setTimeout((function(){t.inputValue&&t.$refs.map&&t.$refs.map&&(console.log(t.inputValue,"this.inputValue"),t.parseAddress(t.inputValue,(function(e){if(e.length){var n=e[0];t.addressInfo=n,t.cache?t.$refs.map.setPosition(t.cache.id,ge.default.unique([t.cache].concat(wt(e)),"id")):t.$refs.map.setPosition(n.id,e)}else t.$refs.map.setPosition(t.cache.id,[t.cache])})))}),1e3)}))}))}},computed:{modalVisible:{get:function(){return this.visible},set:function(){this.$emit("update:visible",!1)}}},mounted:function(){},methods:{parseAddress:function(e,t){"string"==typeof e&&e.trim().length&&this.glmap.request("suggestion",{keyword:e}).then((function(e){e.count?t&&t(e.data):t&&t(null)}))},handleOk:function(){console.log(this.addressInfo,"点击弹框确定按钮返回  addressInfo 给最外面"),this.cache=this.addressInfo,this.$emit("ok",this.addressInfo),this.modalVisible=!1},handleCancel:function(){this.modalVisible=!1},handleChange:function(e){console.log(e,"弹框输入框选项发生变化，选中项赋值给 - addressInfo"),this.addressInfo=e}}};var Aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"map-dialog-modal",attrs:{title:e.title,maskClosable:!1,width:"810px",keyboard:!1},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("gl-map",{ref:"map",attrs:{sceneId:e.sceneId,visible:e.modalVisible,inputValue:e.inputValue,intLocation:!1},on:{change:e.handleChange}})],1)};Aa._withStripped=!0;const Na={name:"AddressSearch",components:{MapDialog:mt({render:Aa,staticRenderFns:[]},void 0,Pa,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},value:{type:String,default:""},icon:{type:String,default:"environment"},showBtn:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},defaultBtn:{type:Boolean,default:!1}},data:function(){return{dataSource:[],poiPicker:null,list:[],glMap:null,mapVisible:!1}},computed:{autoValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.autoValue=this.value,this.glMap=new Ia},methods:{handleSearch:function(e){var t=this;e&&this.glMap.request("suggestion",{keyword:e}).then((function(e){t.$set(t,"list",e.data)}))},handleBtn:function(){console.log("handleBtn"),this.disabled||(this.defaultBtn?this.mapVisible=!0:this.$emit("btnClick"))},handleSelect:function(e){if(e){var t=this.list.filter((function(t){return t.id===e}))[0];this.autoValue=t.title,this.$emit("change",t)}},resetOption:function(){var e=this;this.$nextTick((function(){e.list=[],e.handleSearch(e.value)}))},handleMapOk:function(e){e.adcode&&(this.autoValue=e.title||e.address,this.$emit("change",e))}}};var Ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a-auto-complete",{staticClass:"map-search",attrs:{placeholder:"请输入",disabled:e.disabled},on:{search:e.handleSearch,select:e.handleSelect},model:{value:e.autoValue,callback:function(t){e.autoValue=t},expression:"autoValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.title))])})),1),e._v(" "),e._t("default",[n("a-input",{attrs:{maxLength:e.maxLength}},[e.showBtn?n("a-button",{staticClass:"dot-btn",staticStyle:{"margin-right":"-12px"},attrs:{slot:"suffix",type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleBtn(t)}},slot:"suffix"},[n("a-icon",{attrs:{type:e.icon}})],1):e._e()],1)])],2),e._v(" "),n("map-dialog",{ref:"mapDialog",attrs:{visible:e.mapVisible,title:"设置地址",sceneId:e.sceneId,inputValue:e.autoValue},on:{"update:visible":function(t){e.mapVisible=t},ok:e.handleMapOk}})],1)};Ma._withStripped=!0;const ja=mt({render:Ma,staticRenderFns:[]},void 0,Na,void 0,!1,void 0,!1,void 0,void 0,void 0);var Ba={name:"AreaSelect",props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:"span"},bottom:{type:String,default:"24px"},level:{type:Number,default:3},disabled:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}},url:{type:String,default:""},loadData:{type:Function,default:null},dealData:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1}},data:function(){return{model:[{name:"province",label:"省"},{name:"city",label:"市"},{name:"district",label:"区"}],selectData:[],areaData:{province:[],city:[],district:[]},$request:null}},watch:{value:{handler:function(e){if(e.length){if(e[e.length-1]===this.selectData[this.selectData.length-1])return;this.dealValue()}else this.selectData=[],this.areaData.city=[],this.areaData.district=[]},deep:!0}},mounted:function(){var e=this;this.url?this.$request=function(t){return e.$get(e.url,t)}:this.$request=this.loadData,this.value.length?this.dealValue():this.getList()},methods:{getList:function(e,t,n){var a=this;this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){e||(a.areaData.province=n.data),e&&!t&&(a.areaData.city=n.data),e&&t&&(a.areaData.district=n.data)}))},dealValue:function(e,t,n){for(var a=this,i=JSON.parse(JSON.stringify(this.value)),o=0;o<i.length;o++)if(!i[o]){i.splice(o,i.length);break}this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){var o=n.data;e||(a.areaData.province=o,i[0]&&a.dealValue(i[0]),1===i.length&&(a.selectData=i,a.dealResult())),e&&!t&&(a.areaData.city=o,i[1]&&a.dealValue(i[0],i[1]),2===i.length&&(a.selectData=i,a.dealResult())),e&&t&&(a.areaData.district=o,3===i.length&&(a.selectData=i,a.dealResult()))}))},handleChange:function(e,t){"province"===t.name&&(this.areaData.city=[],this.areaData.district=[],this.selectData=[e],this.getList(e)),"city"===t.name&&(this.areaData.district=[],this.selectData=[this.selectData[0],e],this.getList.apply(this,wt(this.selectData))),this.dealResult(),this.$emit("input",JSON.parse(JSON.stringify(this.selectData)))},dealResult:function(){var e=this,t=this.areaData.province.filter((function(t){return t.id===e.selectData[0]}))[0]||null,n=this.areaData.city.filter((function(t){return t.id===e.selectData[1]}))[0]||null,a=this.areaData.district.filter((function(t){return t.id===e.selectData[2]}))[0]||null;this.$emit("change",this.selectData,{province:t,city:n,district:a})}}};const Ka=Ba;var za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{staticClass:"area-wrap",attrs:{gutter:12}},[e._l(e.model,(function(t,a){return[a<=e.level-1?n("a-col",{key:a,style:{marginBottom:"span"===e.type||e.model.length-1===a?"":e.bottom},attrs:{span:"span"===e.type?24/e.model.length:24}},[n("a-select",{staticClass:"area-select",attrs:{placeholder:t.label,disabled:e.disabled},on:{change:function(n){return e.handleChange(n,t)}},model:{value:e.selectData[a],callback:function(t){e.$set(e.selectData,a,t)},expression:"selectData[index]"}},e._l(e.areaData[t.name],(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e()]}))],2)};za._withStripped=!0;var Ha={name:"AddressBox",props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},syncInputBox:{type:Boolean,default:!0},value:{type:Object,default:function(){return{address:"",province:"",cityName:"",city:"",provinceName:"",districtName:"",district:"",fullAddress:"",lng:"",lat:"",point:null}}}},data:function(){var e=this;return{actForm:{address:""},outerLocation:{},area:[],areaData:null,confirmLoading:!1,mapLoadArea:!1,getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(Ve.city,t):t.provinceId&&t.cityId?e.$get(Ve.district,t):void 0:e.$get(Ve.province,t)},getAddressCodeByName:function(t){return e.$get(Ie,t)},isFirst:!0}},components:{AddressSearch:ja,AreaSelect:mt({render:za,staticRenderFns:[]},void 0,Ka,void 0,!1,void 0,!1,void 0,void 0,void 0)},watch:{value:{handler:function(){this.generateForm()},deep:!0},actForm:{handler:function(e){this.isFirst?this.isFirst=!1:this.$emit("inputChange",e)},deep:!0}},mounted:function(){this.generateForm()},methods:{generateForm:function(){this.actForm=_e({address:"",province:"",city:"",district:""},this.value),this.area=[],this.actForm.province&&this.area.push(this.actForm.province),this.actForm.city?this.area.push(this.actForm.city):this.actForm.province||(this.area=[]),this.actForm.district?this.area.push(this.actForm.district):this.actForm.province||this.actForm.district||(this.area=[])},handleMapOk:function(e){var t=this;return xe(Oe.mark((function n(){return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,"地图选择 ok----"),e.adcode){n.next=3;break}return n.abrupt("return");case 3:e&&(t.getAddressCodeByName({provinceName:e.province,cityName:e.city,districtName:e.district}).then((function(e){t.mapLoadArea=!0;var n=e.data,a=n.subAddress,i=a.subAddress;t.area=[n.id,a.id,i.id]})),t.actForm.address=e.title||e.address,t.$emit("input",t.actForm));case 4:case"end":return n.stop()}}),n)})))()},handleAreaChange:function(e,t){if(this.areaData=t,this.mapLoadArea)return this.actForm.province=e[0],this.actForm.city=e[1],this.actForm.district=e[2],this.actForm.provinceName=t.province.name,this.actForm.cityName=t.city.name,this.actForm.districtName=t.district.name,this.$emit("input",this.actForm),void(this.mapLoadArea=!1);this.actForm=_e(_e({},this.actForm),{},{province:t.province&&t.province.id,city:t.city&&t.city.id,district:t.district&&t.district.id,provinceName:t.province&&t.province.name,cityName:t.city&&t.city.name,districtName:t.district&&t.district.name}),this.syncInputBox&&(this.actForm.address="".concat(t.province&&t.province.name||"").concat(t.city&&t.city.name||"").concat(t.district&&t.district.name||"")),this.$emit("input",this.actForm)},getData:function(){return this.areaData}}};const qa=Ha;var Wa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model-item",{attrs:{label:"省/市/区",prop:"area"}},[n("area-select",{attrs:{loadData:e.getRegion},on:{change:e.handleAreaChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"详细地址",prop:"address"}},[n("address-search",{ref:"autoComplete",attrs:{sceneId:e.sceneId,maxLength:e.maxLength,defaultBtn:""},on:{change:e.handleMapOk},model:{value:e.actForm.address,callback:function(t){e.$set(e.actForm,"address",t)},expression:"actForm.address"}})],1)],1)};Wa._withStripped=!0;const Ua=mt({render:Wa,staticRenderFns:[]},void 0,qa,void 0,!1,void 0,!1,void 0,void 0,void 0);Ua.install=function(e){e.component(Ua.name,Ua)},ge.default.ISREPEAT=function(e){return Object.keys(ge.default).includes(e)},ge.default.date.calcWeek=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY/MM/DD",a=new Date(t),i=ge.default.date.endOf("week",a,n),o=ge.default.date.add(e,"w",i,n),r=ge.default.date.endOf("w",o,n),s=ge.default.date.startOf("w",o,n);return{start:s,end:r}},ge.default.date.calcMonth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=new Date(e),a=ge.default.date.startOf("month",n,t),i=ge.default.date.endOf("month",n,t);return{start:a,end:i}},ge.default.date.mandom=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0,n=new Date(e),a=n.getMonth()+1,i=ge.default.date.daysInMonth(n),o=[],r=1;r<=i;r++)o.push(ge.default.date.format(ge.default.date.format("2021/".concat(a,"/").concat(r),"YYYY-MM-DD")+" ".concat(ge.default.rangeRandom(0,23),":").concat(ge.default.rangeRandom(0,59)),t||"YYYY-MM-DD hh:mm"));return o[ge.default.rangeRandom(1,i)[0]]},ge.default.date.period=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=new Date(n);if(1===e)return ge.default.date.calcWeek(0,a,t);if(2===e)return{start:ge.default.date.subtract(6,"day",a,t),end:ge.default.date.format(t)};if(3===e)return ge.default.date.calcMonth(a,t);if(4===e){var i=ge.default.date.endOf("week",a,t);return{start:ge.default.date.subtract(20,"day",i,t),end:i}}var o=ge.default.date.subtract(2,"month",ge.default.date.startOf("month",a),t),r=ge.default.date.endOf("month",a,t);return{start:o,end:r}},ge.default.date.isPeriod=function(e,t){return 1===e||2===e?ge.default.date.isToday(t):3===e&&void 0},Map.prototype.getByKey=function(e){var t=wt(this.keys()),n=t.findIndex((function(t){return Array.isArray(t)&&t.includes(e)}));return this.get(t[n])},ge.default.amap={jsonpRequest:function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.TMAPCALLBACK[n]=function(e){t=e},document.querySelector("body").appendChild(a);var i=function(){document.querySelector("body").removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},parsePoint:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){var a=ge.default.urlSerialize("",Object.assign({key:"d59ce84bb495eccd65a4d238c8c06977"},t)),i="https://restapi.amap.com/v3/geocode/geo".concat(a);console.log(i,"请求地址"),n(e.jsonpRequest(i))}))},loadScript:function(e,t){var n=this;return new Promise((function(a,i){var o=document.createElement("script");t&&n.setAttr(o,t),o.onload=function(){return a(o)},o.onerror=function(){return i(o)},o.src=e,document.querySelector("body").appendChild(o)}))},isLoad:function(){for(var e=document.getElementsByTagName("script"),t=!1,n=0;n<e.length;n++)e[n].getAttribute("src").includes("https://webapi.amap.com/maps?v=1.4.6&key=d59ce84bb495eccd65a4d238c8c06977&plugin=AMap.Geocoder")&&(t=!0);return t},setAttr:function(e,t){for(var n in t)e.setAttribute(n,t[n])}},ge.default.caputured=function(){var e=xe(Oe.mark((function e(t){var n,a,i,o,r=arguments;return Oe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",[null,o]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[e.t0,null]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),fe.default.prototype.$caputured=function(){var e=xe(Oe.mark((function e(t){var n,a,i,o,r=arguments;return Oe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",{err:null,res:o});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{err:e.t0,res:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ge.default.try=function(e,t){try{e&&e()}catch(e){t&&t(e)}},ge.default.jsonToArray=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return[].concat(wt(t),[ke({},n,e[n])])}),[])},ge.default.icon={report:{iconList:{1:"iconreport01",2:"iconreport02",3:"iconreport03",4:"iconreport04",5:"iconreport05",6:"iconreport06",7:"iconreport07",8:"iconreport08",9:"iconreport09",10:"iconreport10",11:"iconreport11",12:"iconreport12",13:"iconreport13",15:"iconreport15",16:"iconreport16",17:"iconreport17",18:"iconreport18",19:"iconreport19",20:"iconreport20",21:"iconreport21",22:"iconreport22",23:"iconreport23",24:"iconreport24",25:"iconreport25",26:"iconreport26",27:"iconreport27",28:"iconreport28",29:"iconreport29",30:"iconreport30",31:"iconreport31",32:"iconreport32",33:"iconreport33",34:"iconreport34",35:"iconreport35",36:"iconreport36",37:"iconreport37",38:"iconreport38",39:"iconreport39",40:"iconreport40",41:"iconreport41",42:"iconreport42",43:"iconreport43",44:"iconreport44",45:"iconreport45",46:"iconreport46",47:"iconreport47",48:"iconreport48"},colorList:{1:"#0289ff",2:"#00c359",3:"#fc943d",4:"#fb602c"}},approve:{iconList:{},colorList:{}}},ge.default.mapHandler=function(e,t,n){var a=Object.keys(e).find((function(e){return JSON.parse(e).includes(t)}));a?e[a]():n&&n()};var Ga={name:"EditorAddress",components:{AddressBox:Ua},props:{visible:{type:Boolean,default:!1},editData:{type:Object,default:function(){return{}}},customerId:{type:String,default:null,require:!0},hasAddress:{type:Boolean,default:!1}},data:function(){return{form:{deliveryMethod:"",deliveryId:void 0,deliveryName:"",logisticsId:void 0,logisticsName:"",customerName:"",phone:"",detailAddress:"",address:"",province:"",city:"",district:"",longitude:"",latitude:"",provinceName:"",cityName:"",districtName:"",fullAddress:"",loadingInfo:"",allAddress:void 0,isDefault:!1},confirmLoading:!1,basicRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}]},logisticsRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}],customerName:[{required:!0,message:"请输入",trigger:"change"}],phone:[{required:!0,message:"请输入",trigger:"change"}],allAddress:[{required:!0,message:"请选择",trigger:"change"}]},backForm:null,syncInputBox:!0,deliveryTypes:{data:[],loading:!1},logisticsCorps:{data:[],loading:!1}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},rules:function(){return 2===this.form.deliveryMethod?this.logisticsRules:this.basicRules},isUpdateMode:function(){return!!this.form.businessId},title:function(){return this.isUpdateMode?"编辑收货信息":"新增收货信息"}},watch:{visible:function(e){var t=this;return xe(Oe.mark((function n(){return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.handleGetDeliveryType();case 3:return n.next=5,t.handleGetLogistcsCorp();case 5:t.editData&&t.editData.businessId?(t.syncInputBox=!1,t.form=t.editData,t.form.address=t.form.detailAddress,t.form.loadingInfo=t.form.loadingInfo||t.form.fullAddress):(t.syncInputBox=!0,t.form={deliveryId:t.deliveryTypes.data.length&&t.deliveryTypes.data[0].value,customerName:"",isDefault:!t.hasAddress});case 6:case"end":return n.stop()}}),n)})))()},backForm:{handler:function(e){var t=this;e&&(this.form.address=e.address,this.form.province=e.province,this.form.city=e.city,this.form.district=e.district,this.form.detailAddress=e.address,e.address&&e.province&&e.city&&e.district?(this.form.allAddress=!0,this.$nextTick((function(){t.$refs.allAddress&&t.$refs.allAddress.onFieldChange()}))):this.form.allAddress=void 0)},deep:!0}},methods:{handleGetDeliveryType:function(){var e=this;return xe(Oe.mark((function t(){var n,a;return Oe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.deliveryTypes.loading=!0,t.next=4,e.$get(Qe);case 4:n=t.sent,a=n.data,e.deliveryTypes.data=a.map((function(e){return _e({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.deliveryTypes.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},handleGetLogistcsCorp:function(){var e=this;return xe(Oe.mark((function t(){var n,a;return Oe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.logisticsCorps.loading=!0,t.next=4,e.$get(Ze);case 4:n=t.sent,a=n.data,e.logisticsCorps.data=a.map((function(e){return _e({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.logisticsCorps.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},onDeliveryTypeChange:function(e){var t=this.deliveryTypes.data.find((function(t){return t.value===e}));t&&(this.form.deliveryMethod=t.requireOption)},changePhone:function(e){this.form.phone=e.replace(/[\u4E00-\u9FA5]|[A-Za-z]/g,"")},changeRadio:function(){this.form.isDefault=!this.form.isDefault},handleOk:function(){var e=this;this.$refs.ruleFormReceipt.validate(function(){var t=xe(Oe.mark((function t(n){var a,i,o,r,s,l,c,u,d,h,f,p,m,g;return Oe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=46;break}if(a=e.deliveryTypes.data.find((function(t){return t.value===e.form.deliveryId})),2!==e.form.deliveryMethod){t.next=23;break}if(i=e.form.provinceName,o=e.form.cityName,r=e.form.districtName,s=e.form.address,l=[i,o,r,s].join(""),c="",!l){t.next=13;break}return t.next=12,ge.default.amap.parsePoint({address:l});case 12:c=t.sent;case 13:u=c?c.geocodes:[],e.form.longitude=u.length?u[0].location.split(",")[0]:"",e.form.latitude=u.length?u[0].location.split(",")[1]:"",d=[i,o,r].join(""),h="",h=d.includes(s)?d:s.includes(d)?s:d===s?d:l,f=e.logisticsCorps.data.find((function(t){return t.value===e.form.logisticsId})),e.form.logisticsName=f&&f.label,e.form.fullAddress=h,e.form.detailAddress=e.form.address;case 23:return 1===e.form.deliveryMethod&&(e.form.fullAddress=e.form.loadingInfo),e.form.deliveryName=a.label,e.$emit("confirm",e.form),t.prev=26,e.confirmLoading=!0,t.next=30,e.$post(e.isUpdateMode?it:at,_e({customerId:e.customerId},e.form));case 30:if(p=t.sent,m=p.data,g=p.message,m){t.next=35;break}throw new Error(g);case 35:e.$message.success("操作成功！"),e.$emit("success"),t.next=43;break;case 39:t.prev=39,t.t0=t.catch(26),e.$message.error(t.t0),console.error(t.t0);case 43:return t.prev=43,e.confirmLoading=!1,t.finish(43);case 46:case"end":return t.stop()}}),t,null,[[26,39,43,46]])})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.modalVisible=!1,this.$emit("cancel")},afterClose:function(){this.syncInputBox=!0,this.form={customerName:"",isDefault:!1}},inputChange:function(e){this.isUpdateMode&&(this.syncInputBox=!0),this.backForm=_e(_e({},this.form),e)},changeTextarea:function(){this.form.loadingInfo.length>=500&&this.$message.info("限500字")}}};const Ya=Ga;var Xa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"receipt-dialog-wrap",attrs:{afterClose:e.afterClose,"confirm-loading":e.confirmLoading,maskClosable:!1,title:e.title,width:500,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("a-form-model",{ref:"ruleFormReceipt",attrs:{"label-col":{span:5},model:e.form,rules:e.rules,"wrapper-col":{span:17}}},[n("a-form-model-item",{attrs:{label:"发货方式",prop:"deliveryId"}},[n("a-select",{attrs:{loading:e.deliveryTypes.loading,placeholder:"请选择"},on:{change:e.onDeliveryTypeChange},model:{value:e.form.deliveryId,callback:function(t){e.$set(e.form,"deliveryId",t)},expression:"form.deliveryId"}},e._l(e.deliveryTypes.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),e._v(" "),2===e.form.deliveryMethod?[n("a-form-model-item",{attrs:{label:"物流公司",prop:"logisticsId"}},[n("a-select",{attrs:{loading:e.logisticsCorps.loading,placeholder:"请选择"},model:{value:e.form.logisticsId,callback:function(t){e.$set(e.form,"logisticsId",t)},expression:"form.logisticsId"}},e._l(e.logisticsCorps.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),e._v(" "),n("a-form-model-item",{attrs:{label:"收货人",prop:"customerName"}},[n("a-input",{staticClass:"customer-name-wrap",attrs:{maxLength:50,suffix:e.form.customerName.length+"/50",placeholder:"请输入"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName","string"==typeof t?t.trim():t)},expression:"form.customerName"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"联系方式",prop:"phone"}},[n("a-input",{attrs:{maxLength:50,placeholder:"请输入"},on:{change:function(t){return e.changePhone(e.form.phone)}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),n("a-form-model-item",{ref:"allAddress",staticStyle:{"margin-bottom":"0"},attrs:{label:"所在地区",prop:"allAddress"}},[n("a-form-model",{staticClass:"cus-address-wrap",attrs:{"label-col":{span:0},"wrapper-col":{span:24}}},[n("address-box",{attrs:{maxLength:100,syncInputBox:e.syncInputBox},on:{inputChange:e.inputChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)]:e._e(),e._v(" "),1===e.form.deliveryMethod?n("a-form-model-item",{attrs:{label:"装车信息",prop:"loadingInfo"}},[n("a-textarea",{attrs:{maxLength:500,placeholder:"限500字",rows:5},on:{change:e.changeTextarea},model:{value:e.form.loadingInfo,callback:function(t){e.$set(e.form,"loadingInfo","string"==typeof t?t.trim():t)},expression:"form.loadingInfo"}})],1):e._e(),e._v(" "),n("a-radio",{staticStyle:{"margin-left":"76px"},attrs:{checked:e.form.isDefault},on:{click:e.changeRadio}},[e._v("设为默认")])],2)],1)};Xa._withStripped=!0;const Ja=mt({render:Xa,staticRenderFns:[]},void 0,Ya,"data-v-0c26a3f4",!1,void 0,!1,void 0,void 0,void 0);Ja.install=function(e){e.component(Ja.name,Ja)};const Qa={name:"DSelectAddress",components:{CellEllipsisTip:Jt,STable:un,EditorAddress:Ja},props:{width:{type:Number,default:816},cache:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},setContainer:{type:Function,default:function(){return document.querySelector("body")}},customerId:{type:String,default:null,require:!0},title:{type:String,default:"选择收货地址"},beforeClose:{type:Function,default:void 0},value:{type:Object,default:void 0}},data:function(){return{currentMark:-1,addressDetailsShow:!1,clickReceipt:null,opened:!1,list:{data:[],loading:!1,selected:null}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&((!this.cache||this.cache&&!this.opened)&&(this.list.selected=null,this.getDeliverys()),this.opened=!0)}},methods:{getDeliverys:function(){var e=this;return xe(Oe.mark((function t(){var n,a;return Oe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.list.loading=!0,t.next=4,e.$post(nt,{businessId:e.customerId});case 4:n=t.sent,a=n.data,e.list.data=a||[],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.list.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},deleteAddress:function(e){var t=this;this.$confirm({title:"操作提示！",content:"您是否确定删除此地址？",okText:"确定",cancelText:"取消",onOk:function(){return xe(Oe.mark((function n(){return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(ot,{businessId:e.businessId,customerId:e.customerId});case 3:e.businessId===t.list.selected&&(t.list.selected=null),t.$message.success("操作成功！"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:return n.prev=10,t.getDeliverys(),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})))()}})},setDefault:function(e){var t=this;return xe(Oe.mark((function n(){var a,i,o;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(rt,{businessId:e.businessId,customerId:e.customerId});case 3:if(a=n.sent,i=a.data,o=a.message,i){n.next=8;break}throw new Error(o);case 8:t.$message.success("操作成功！"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0);case 14:return n.prev=14,t.getDeliverys(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))()},handleSelectAddress:function(e){this.list.selected=e.businessId},editAddress:function(e){this.clickReceipt=e,this.addressDetailsShow=!0},addAddress:function(){this.clickReceipt=null,this.addressDetailsShow=!0},onEditAddressSucceed:function(){this.addressDetailsShow=!1,this.getDeliverys()},handleOk:function(){var e=this,t=this.list.data.find((function(t){return t.businessId===e.list.selected}));this.beforeClose?this.beforeClose({data:this.list.selected,rows:[t]}):this.$emit("confirm",{data:this.list.selected,rows:[t]}),this.modalVisible=!1},handleCancel:function(){this.$emit("cancel"),this.modalVisible=!1}}};var Za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-address",attrs:{footer:null,"get-container":e.setContainer,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.list.loading,expression:"list.loading"}],staticClass:"select-address-content"},[e.list.data&&e.list.data.length>0?n("div",[n("a-radio-group",{staticStyle:{width:"100%"},model:{value:e.list.selected,callback:function(t){e.$set(e.list,"selected",t)},expression:"list.selected"}},e._l(e.list.data,(function(t,a){return n("div",{key:a,staticClass:"content-item",class:{"auto-class":"zt"===t.type||"nothing"===t.type},on:{mouseenter:function(t){e.currentMark=a},mouseleave:function(t){e.currentMark=-1},click:function(n){return n.stopPropagation(),e.handleSelectAddress(t)},dblclick:function(t){return t.stopPropagation(),e.handleOk(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentMark===a,expression:"currentMark === index"}],staticClass:"row-btn"},[n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.setDefault(t)}}},[e._v("设为默认")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.editAddress(t)}}},[e._v("修改")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.deleteAddress(t)}}},[e._v("删除")])],1),e._v(" "),n("div",[n("a-radio",{style:{display:"block",height:"30px",lineHeight:"30px",marginRight:"14px"},attrs:{value:t.businessId}})],1),e._v(" "),n("div",{staticClass:"details"},[n("div",[e._v("\n              "+e._s(t.deliveryName||"")+"\n                \n              "),t.isDefault?n("a-tag",{attrs:{color:"blue"}},[e._v("默认")]):e._e()],1),e._v(" "),t.customerName&&t.phone?n("div",[e._v(e._s(t.customerName)+"  "+e._s(t.phone))]):e._e(),e._v(" "),t.detailAddress&&2===t.deliveryMethod?n("div",[e._v(e._s(t.detailAddress))]):e._e(),e._v(" "),t.fullAddress&&2!==t.deliveryMethod?n("div",[e._v(e._s(t.fullAddress))]):e._e()])])})),0)],1):n("div",{staticClass:"empty"},[n("a-empty",{attrs:{description:"暂无数据"}})],1)]),e._v(" "),n("div",{staticClass:"select-address-footer"},[n("div",{on:{click:e.addAddress}},[e._v("+新增收货地址")]),e._v(" "),n("div",[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n      "),n("a-button",{attrs:{disabled:!e.list.selected,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)]),e._v(" "),n("EditorAddress",{attrs:{customerId:e.customerId,"edit-data":e.clickReceipt,visible:e.addressDetailsShow,hasAddress:!!e.list.data.length},on:{"update:visible":function(t){e.addressDetailsShow=t},cancel:function(t){e.addressDetailsShow=!1},success:e.onEditAddressSucceed}})],1)};Za._withStripped=!0;const ei=mt({render:Za,staticRenderFns:[]},void 0,Qa,void 0,!1,void 0,!1,void 0,void 0,void 0);ei.install=function(e){e.component(ei.name,ei)};const ti={name:"SelectTree",props:{value:{type:[Array,Number,String],default:void 0},multiple:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){return{}}},loadData:{type:Function,default:null}},data:function(){return{treeData:[],spreadData:{}}},computed:{baseReplaceFields:function(){return _e({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},treeCheckValue:{get:function(){return"object"===lt(this.checkValue)?this.checkValue:[this.checkValue]}}},watch:{options:{handler:function(e){console.log("lst",e),this.setOptions()},deep:!0,immediate:!0}},methods:{setOptions:function(){var e=this;this.spreadData={};var t=function t(n){var a=[];return n.forEach((function(n){e.spreadData[n[e.replaceFields.key]]=n,n.children&&(n.children=t(n.children)),a.push(_e(_e({},n),{},{scopedSlots:{icon:"radio"}}))})),a};this.treeData.length?this.treeData=t(this.treeData):this.treeData=t(this.options)},selectHandle:function(e,t){console.log(e,t)},getData:function(){var e=this,t=lt(this.checkValue),n=[];return console.log(this.spreadData),"object"===t?this.checkValue.forEach((function(t){var a="object"===lt(t)?t[e.replaceFields.key]:t;e.spreadData[a]&&n.push(e.spreadData[a])})):this.spreadData[this.checkValue]&&n.push(this.spreadData[this.checkValue]),{checkValue:this.checkValue,data:this.checkValue,rows:this.row||n}},onSelect:function(e,t){this.checkValue=e,this.row=t.checkedNodes.map((function(e){return e.data.props}))}},components:{Empty:Hn}};var ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mix-modal-select-tree"},[e.options.length?e._e():n("empty"),e._v(" "),e.multiple?[n("a-tree",{attrs:{showIcon:"",checkable:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,multiple:"",loadData:e.loadData},on:{check:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}]),model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}})]:[n("a-radio-group",{model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},[n("a-tree",{attrs:{showIcon:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,loadData:e.loadData,selectable:!1},on:{select:e.selectHandle},scopedSlots:e._u([{key:"radio",fn:function(t){return[n("div",{staticClass:"radio-line"},[n("a-radio",{staticClass:"radio-line",attrs:{value:t[e.baseReplaceFields.key]}})],1)]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(t.name)+"\n        ")]}}],null,!1,3749490323),model:{value:e.treeCheckValue,callback:function(t){e.treeCheckValue=t},expression:"treeCheckValue"}})],1)]],2)};ni._withStripped=!0;const ai={name:"MixModal",props:{visible:{type:Boolean,default:!1},name:{type:String,default:"brand",validator:function(e){return-1!==["unit","brand","tag","levelPrice","productCategory","specialCategory","salesArea","classification","delivery","area","logistics","customLogistics"].indexOf(e)}},title:{type:String,default:"请选择"},cache:{type:Boolean,default:!1},beforeClose:{type:Function,default:null},defaultValue:{type:[String,Boolean,Number,Array],default:null},multiple:{type:Boolean,default:!1},extrasOperations:{type:Array,default:function(){return["refresh"]}},rules:{type:Object,default:function(){}}},data:function(){var e=this;return{keywords:"",placeholder:"请输入",options:[],checkValue:[],modelProps:{},testValue:[],loading:!0,modelType:"selectGroup",request:null,replaceFields:{key:"id",name:"name"},getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(Ve.city,_e(_e({},t),e.rules)):t.provinceId&&t.cityId?e.$get(Ve.district,_e(_e({},t),e.rules)):void 0:e.$get(Ve.province,e.rules)}}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t[e.replaceFields["selectGroup"===e.modelType?"name":"title"]].match(e.keywords))return t})):this.options}},watch:{visible:function(e){e&&(this.keywords="",this.options.length&&this.cache||(this.options=[],this.refresh(),this.getList(),this.rules&&this.rules.keywords&&(this.keywords=this.rules.keywords)))},name:function(){this.refresh()}},methods:{refresh:function(){this.options=[],this.setModel(),this.getList()},handleCheckAll:function(){var e=this;this.checkValue=this.options.map((function(t){return t[e.replaceFields.key]}))},setModel:function(){["unit","brand","tag","levelPrice","classification","delivery","logistics"].includes(this.name)?this.modelType="selectGroup":["productCategory","salesArea","area"].includes(this.name)&&(this.modelType="selectTree")},getList:function(){var e=this;if(this.checkValue=this.defaultValue||[],this.loading=!0,["unit","brand","tag"].includes(this.name)){this.checkValue=this.defaultValue||[];var t={type:["unit","brand","tag"].indexOf(this.name)};this.$post(Ne,_e(_e({},t),this.rules)).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))}else["levelPrice"].includes(this.name)?(this.checkValue=this.defaultValue||[],this.replaceFields={},this.$post(Me,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):["productCategory","specialCategory"].includes(this.name)?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"categoryName"},this.getCateGory(),this.request=this.getCateGory):"salesArea"===this.name?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"name"},this.getCustomerRegionList(),this.request=this.getCustomerRegionList):"classification"===this.name?(this.replaceFields={key:"value",name:"label"},this.$post(Ae,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):"delivery"===this.name?this.$get(Je,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):"area"===this.name?(this.replaceFields={key:"id",title:"name"},this.getRegion().then((function(t){e.options=t.data.map((function(e){return _e(_e({},e),{},{isLeaf:!1})})),e.request=e.getRegionList})).finally((function(){e.loading=!1}))):"logistics"===this.name?this.$get(et,this.rules).then((function(t){e.options=t.data;var n=e.options.filter((function(e){return e.isCheck})).map((function(e){return e.id}));console.log("isCheckedValue:",n),e.checkValue=n})).finally((function(){e.loading=!1})):"customLogistics"===this.name?this.$get(tt,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):(console.error("当前传入名称为：",this.name,"。请确认是否正确！！！"),this.loading=!1)},getCateGory:function(e){var t=this;if(e)return new Promise((function(n){e.dataRef.children?n():t.$get(je,_e({categoryType:["productCategory","specialCategory"].indexOf(t.name),parentId:e.dataRef.id},t.rules)).then((function(a){e.dataRef.children=a.data.categoryLists,t.options=wt(t.options),n(a.data.categoryLists)}))}));this.$get(je,_e({categoryType:["productCategory","specialCategory"].indexOf(this.name),parentId:0},this.rules)).then((function(e){t.loading=!1,t.options=e.data.categoryLists}))},getCustomerRegionList:function(e){var t=this;if(e)return new Promise((function(n){if(e.dataRef.children)n();else{var a=e.dataRef;t.$post(Ee,_e({businessId:a.id||0},t.rules)).then((function(a){e.dataRef.children=a.data,t.options=wt(t.options),n(a.data)})).finally((function(){t.loading=!1}))}}));this.$post(Ee,_e({businessId:0},this.rules)).then((function(e){t.options=e.data})).finally((function(){t.loading=!1}))},getRegionList:function(e){var t=this,n=null,a=null;return e.dataRef&&e.$parent.dataRef&&(n=e.dataRef.parentId,a=e.dataRef.id),e.dataRef&&!e.$parent.dataRef&&(n=e.dataRef.id),new Promise((function(i){e.dataRef.children?i():t.getRegion({provinceId:n,cityId:a}).then((function(n){e.dataRef.children=n.data.map((function(e){return _e(_e({},e),{},{isLeaf:!!a})})),t.options=wt(t.options),i(n.data)})).finally((function(){t.loading=!1}))}))},okHandle:function(){var e=this.$refs.contentModel.getData();e.isCheckAll=this.checkValue.length===this.options.length,this.beforeClose?this.beforeClose(e,this.cancelHandle):(this.$emit("confirm",e),this.modalVisible=!1)},cancelHandle:function(){this.modalVisible=!1}},components:{SelectGroup:ya,SelectTree:mt({render:ni,staticRenderFns:[]},void 0,ti,void 0,!1,void 0,!1,void 0,void 0,void 0),Empty:Hn}};var ii=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:"816px"},on:{cancel:e.cancelHandle,ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.extrasOperations.includes("refresh")?n("a-button",{attrs:{type:"link"},on:{click:e.refresh}},[e._v("刷新")]):e._e(),e._v(" "),(e.extrasOperations.includes("checkAll")&&this.multiple&&this.modelType,e._e())],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},["selectGroup"===e.modelType?n("SelectGroup",{ref:"contentModel",attrs:{multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e(),e._v(" "),"selectTree"===e.modelType?n("SelectTree",{ref:"contentModel",attrs:{"load-data":e.request,multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e()],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};ii._withStripped=!0;const oi=mt({render:ii,staticRenderFns:[]},void 0,ai,void 0,!1,void 0,!1,void 0,void 0,void 0);oi.install=function(e){e.component(oi.name,oi)};var ri={product:{name:"SelectProduct",key:"id",value:"name",type:1},couponProduct:{name:"SelectProduct",key:"id",value:"name",type:2},recommendProduct:{name:"SelectProduct",key:"id",value:"name",type:3},purchaseProduct:{name:"SelectProduct",key:"id",value:"name",type:4},rateProduct:{name:"SelectProduct",key:"id",value:"name",type:6},person:{name:"PeopleModal",key:"id",value:"name"},preparer:{name:"PeopleModal",key:"id",value:"name"},handler:{name:"PeopleModal",key:"id",value:"name"},warehouse:{name:"ChooseEntrepot",key:"id",value:"name"},customer:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplier:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplierCustomer:{name:"ChoiceCustomer",key:"businessId",value:"name"},unit:{name:"GoodAttrModal",key:"id",value:"name"},brand:{name:"GoodAttrModal",key:"id",value:"name"},tag:{name:"GoodAttrModal",key:"id",value:"name"},payment:{name:"payment",key:"id",value:"name"},rateUnit:{name:"GoodAttrModal",key:"id",value:"unitName"},account:{name:"SelectPayAccount",key:"accountId",value:"name"},delivery:{name:"SelectDelivery",key:"id",value:"name"},logistics:{name:"SelectLogistics",key:"id",value:"name"},customLogistics:{name:"SelectCustomLogistics",key:"id",value:"name"},address:{name:"SelectAddress",key:"businessId",value:"deliveryName"}};const si=mt({},void 0,{name:"DMixSearch",props:{name:{type:String,default:"product"},value:{type:[Object,String],default:void 0},resultName:{type:String,default:""},width:{type:[Number,String],default:240},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},restore:{type:Boolean,default:!1},require:{type:Boolean,default:!1},maxLength:{type:Number,default:40},next:{type:Function,default:null},origin:{type:String,default:"page"},valueMode:{type:[Boolean,String],default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{componentMap:ri,visible:!1,modalValue:null,dialog:null,dialogProps:{},multiple:!1}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:{handler:function(e){"[object Object]"!==Object.prototype.toString.call(e)?this.modalValue=e||void 0:Object.keys(e).length>0?this.modalValue=e:(console.warn("value 不能为空对象"),this.modalValue=void 0)},deep:!0,immediate:!0},name:function(){this.generateDialog()},visible:function(e){e&&this.generateDialog()}},created:function(){this.dialog||this.generateDialog()},methods:{generateDialog:function(){var e={},t="string"==typeof this.modalValue?[]:this.modalValue?Object.keys(this.modalValue):[];if(this.dialogConfig.multiple?this.multiple=this.dialogConfig.multiple:this.multiple=!0===this.valueMode&&t&&!t.length,["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(this.name)){var n={type:ri[this.name].type};e=ke({},this.name,{multiple:this.multiple,rules:n}),this.dialog=oa}else["person","preparer","handler"].includes(this.name)?(e={person:{title:"经手人"},preparer:{title:"制单人"},handler:{title:"经手人"}},this.dialog=ca):["warehouse"].includes(this.name)?(e={warehouse:{title:"选择仓库",multiple:!0===this.valueMode&&this.multiple}},this.dialog=Jn):["customer","supplier","supplierCustomer"].includes(this.name)?(e={customer:{title:"选择客户",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[2]},supplier:{title:"选择供应商",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[1]},supplierCustomer:{title:"选择往来单位",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[3]}},this.dialog=va):["unit","brand","tag","rateUnit"].includes(this.name)?(e={unit:{type:0},brand:{type:1},tag:{type:2},rateUnit:{type:3}},this.dialog=ka):["account"].includes(this.name)?this.dialog=Ra:["delivery","logistics","customLogistics"].includes(this.name)?(e={delivery:{name:"delivery"},logistics:{name:"logistics"},customLogistics:{name:"customLogistics"}},this.dialog=oi):"address"===this.name&&(e={address:{readonly:!0}},this.dialog=ei);console.log(e[this.name],this.name);var a=ut(this.dialogConfig);a.defaultValue||(a.defaultValue=this.modalValue),this.dialogProps=Wn(this.dialogProps,e[this.name],a)},enterHandle:function(e){e.data?(this.dialogProps.rules&&(this.dialogProps.rules.keywords=""),this.resultExchange(e)):"blur"!==e.action?(this.dialogProps=Wn(this.dialogProps,{rules:{keywords:this.modalValue&&this.modalValue.name===e.inputValue?"":e.inputValue}}),this.generateDialog(),this.visible=!0):this.modalValue&&this.modalValue.name!==e.inputValue&&this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData})},clearHandle:function(){this.modalValue=void 0,this.$emit("input",void 0),this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData})},confirmHandle:function(e){console.log(e),["filterDropDown"].includes(this.origin)&&this.next&&this.next("mixSearch","confirm"),e?this.resultExchange(e):this.restore&&this.modalValue&&(this.modalValue=_e({},this.modalValue))},resultExchange:function(e){var t=this.componentMap[this.name],n={},a={};if(n=(a=["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(this.name)?e&&e.rows.length?e.rows[0]:null:(["person","unit","brand","tag"].includes(this.name)||["supplier","customer","supplierCustomer"].includes(this.name)||["warehouse"].includes(this.name),e.rows[0]))?_e(_e({},a),{},{id:a[t.key],value:a[t.value]}):{},"address"===this.name){var i="";2===a.deliveryMethod&&(i=[a.customerName||"",a.phone||"",a.fullAddress||""].join(" "),n.value=i)}"select"!==this.valueMode&&(this.$emit("input",n),this.modalValue=n,console.log(this.modalValue)),this.$emit("change",_e(_e({},e),{},{data:this.multiple?e.rows:a?n:null,rows:e.rows,multiple:this.multiple,config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData}))},getData:function(){return this.modalValue},resetData:function(){this.modalValue=void 0},setData:function(e){this.modalValue=e},focus:function(){this.$refs.SearchInput.focus()}},render:function(e){var t=this;return e("div",{attrs:{class:"select-good-attr",style:"width: ".concat(t.actWidth,";display: inline-block")}},[e("div",{attrs:{class:"input-box"}},[e("SearchInput",{props:{value:t.modalValue,placeholder:t.placeholder,maxLength:t.maxLength,disabled:t.disabled,name:t.name,allowClear:t.allowClear,next:t.next,restore:t.restore,dialogConfig:t.dialogProps},ref:"SearchInput",on:{enterHandle:t.enterHandle,clear:t.clearHandle}})]),e(this.dialog,{on:{confirm:t.confirmHandle,"update:visible":function(e){t.visible=e},cancel:t.confirmHandle},attrs:_e({},this.dialogProps),props:_e(_e({getContainer:function(){return document.querySelector("body")}},t.dialogProps),{},{visible:t.visible})})])},components:{SearchInput:yt}},void 0,void 0,void 0,!1,void 0,void 0,void 0);si.install=function(e){e.component(si.name,si)};const li={name:"FilterInput",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入"}},computed:{modelValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{changeHandle:function(){var e=this;this.$nextTick((function(){e.$emit("change",{data:e.modelValue})}))},setData:function(e){this.modelValue=e},getData:function(){return this.modelValue},resetData:function(){var e=this;this.modelValue="",this.$nextTick((function(){e.$emit("change",{data:e.value})}))}}};var ci=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-input",{attrs:{placeholder:e.placeholder},on:{change:e.changeHandle},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}})};ci._withStripped=!0;const ui=mt({render:ci,staticRenderFns:[]},void 0,li,void 0,!1,void 0,!1,void 0,void 0,void 0),di={name:"DSelectTimeRange",model:{prop:"value",event:"update:value"},props:{value:{type:Array,default:function(){return[]}},layout:{type:String,default:"inline"},startText:{type:String,default:"从"},divideText:{type:String,default:"至"},width:{type:[String,Number],default:"140"},placeholder:{type:[String,Array],default:function(){return["请选择","请选择"]}}},computed:{startPlaceholder:function(){return"[object Array]"===Object.prototype.toString.call(this.placeholder)?this.placeholder[0]:this.placeholder},endPlaceholder:function(){return"[object Array]"===Object.prototype.toString.call(this.placeholder)?this.placeholder[1]:this.placeholder},startValue:{get:function(){return this.value[0]?we.default(new Date(this.value[0])):null},set:function(e){this.$emit("update:value",[Number(e),this.value[1]])}},endValue:{get:function(){return this.value[1]?we.default(new Date(this.value[1])):null},set:function(e){this.$emit("update:value",[this.value[0],Number(e)])}}},data:function(){return{endOpen:!1,currentTime:null,isConfirm:!1}},methods:{moment:we.default,getData:function(){return this.value.map((function(e){if(e)return{data:e,value:we.default(Number(e)).format("YYYY-MM-DD HH:mm")}}))},changeHandle:function(e,t){var n=this,a=we.default().valueOf();(!e||Math.abs(e-a)<=5)&&this.$nextTick((function(){n.confirmChange()}))},disabledStartDate:function(e){var t=this.endValue,n=we.default().endOf("day").valueOf();return!!e&&(t?e<6311232e5||e>t:e<6311232e5||e>n)},disabledEndDate:function(e){var t=this.startValue,n=we.default().endOf("day").valueOf();return!!e&&(t?e>n||t>=e:e>n||e<6311232e5)},confirmChange:function(e){this.isConfirm=!0;var t=this.value[0]?we.default(new Date(this.value[0])).format("YYYY-MM-DD HH:mm"):void 0,n=this.value[1]?we.default(new Date(this.value[1])).format("YYYY-MM-DD HH:mm"):void 0;this.$emit("confirm",{data:[this.value[0],this.value[1]],rows:[t,n]})},handleStartOpenChange:function(e){var t=this;e?this.currentTime=this.startValue:this.isConfirm?(this.isConfirm=!1,this.currentTime=null,!this.endValue&&this.$nextTick((function(){t.endOpen=!0}))):this.disabledStartDate(this.startValue)&&(this.startValue=this.currentTime)},handleEndOpenChange:function(e){this.endOpen=e,e?this.currentTime=this.endValue:this.isConfirm?(this.isConfirm=!1,this.currentTime=null):this.disabledEndDate(this.endValue)&&(this.endValue=this.currentTime)},valueOfDate:function(e){return e?we.default(e).valueOf():null},resetData:function(){this.$emit("update:value",void 0),this.$emit("confirm",void 0)}}};var hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["select-time-range",{"layout-vertical":"vertical"===e.layout}]},["vertical"===e.layout?n("div",{staticClass:"text"},[e._v(e._s(e.startText))]):e._e(),e._v(" "),n("a-date-picker",{staticClass:"start-picker",style:{width:e.width+"px",minWidth:e.width+"px"},attrs:{showTime:{defaultValue:e.moment("00:00:00","HH:mm:ss")},allowClear:"",format:"YYYY-MM-DD HH:mm",valueFormat:"x","disabled-date":e.disabledStartDate,placeholder:e.startPlaceholder},on:{ok:e.confirmChange,openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v(" "),n("div",{staticClass:"text"},[e._v(e._s(e.divideText))]),e._v(" "),n("a-date-picker",{style:{width:e.width+"px",minWidth:e.width+"px"},attrs:{showTime:{defaultValue:e.moment("23:59:59","HH:mm:ss")},allowClear:"",open:e.endOpen,format:"YYYY-MM-DD HH:mm",valueFormat:"x","disabled-date":e.disabledEndDate,placeholder:e.endPlaceholder},on:{ok:e.confirmChange,openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1)};hi._withStripped=!0;const fi=mt({render:hi,staticRenderFns:[]},void 0,di,void 0,!1,void 0,!1,void 0,void 0,void 0);fi.install=function(e){e.component(fi.name,fi)};const pi={name:"TimeRange",components:{SelectTimeRange:fi},props:{value:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{placeholder1:"",placeholder2:""}}}},computed:{modelValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},baseConfig:function(){return{placeholder1:this.config.placeholder1||"请选择开始时间",placeholder2:this.config.placeholder2||"请选择结束时间"}}},methods:{moment:we.default,changeHandle:function(){var e=this;console.log(this.modelValue,"==========="),this.$nextTick((function(){e.$emit("change",{data:e.modelValue})}))},setData:function(e){this.modelValue=e},getData:function(){return this.modelValue.map((function(e){if(e)return{data:e,value:we.default(Number(e)).format("YYYY-MM-DD HH:mm")}}))},resetData:function(){var e=this;this.modelValue=[void 0,void 0],this.$nextTick((function(){e.$emit("change",{data:e.value})}))}}};var mi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"condition-box"},[n("SelectTimeRange",{attrs:{layout:"vertical",width:"100%"},on:{confirm:e.changeHandle},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}})],1)};mi._withStripped=!0;const gi=mt({render:mi,staticRenderFns:[]},void 0,pi,"data-v-25218151",!1,void 0,!1,void 0,void 0,void 0),vi={name:"FilterAmount",props:{value:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{placeholder1:"",placeholder2:""}}}},computed:{modelValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},baseConfig:function(){return{placeholder1:this.config.placeholder1||"请输入",placeholder2:this.config.placeholder2||"请输入"}}},methods:{changeHandle:function(){var e=this;this.$nextTick((function(){e.$emit("change",{data:e.modelValue})}))},setData:function(e){this.modelValue=e},getData:function(){return this.modelValue},resetData:function(){var e=this;this.modelValue=[void 0,void 0],this.$nextTick((function(){e.$emit("change",{data:e.value})}))}}};var yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"condition-box"},[n("div",{staticClass:"text"},[e._v("从")]),e._v(" "),n("a-input-number",{staticClass:"num-range",attrs:{precision:0,placeholder:e.baseConfig.placeholder1,max:9999999999,min:0,clearable:""},model:{value:e.modelValue[0],callback:function(t){e.$set(e.modelValue,0,t)},expression:"modelValue[0]"}}),e._v(" "),n("div",{staticClass:"text"},[e._v("至")]),e._v(" "),n("a-input-number",{staticClass:"num-range",attrs:{precision:0,placeholder:e.baseConfig.placeholder2,max:9999999999,min:0,clearable:""},model:{value:e.modelValue[1],callback:function(t){e.$set(e.modelValue,1,t)},expression:"modelValue[1]"}})],1)};yi._withStripped=!0;const bi=mt({render:yi,staticRenderFns:[]},void 0,vi,"data-v-6ff1aaa8",!1,void 0,!1,void 0,void 0,void 0),wi=mt({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}},maxHeight:{type:[String,Number],default:400}},computed:{baseReplaceFields:function(){return _e({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.replaceFields.key]):t[e.replaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box select-group",style:{maxHeight:"".concat(this.maxHeight,"px")}},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0);wi.install=function(e){e.component(wi.name,wi)};const ki={name:"FilterGroup",components:{SelectGroup:wi},props:{name:{type:String,default:"bill"},value:{type:[Boolean,Number,Array,String],default:void 0},config:{type:Object,default:function(){return{placeholder:"",groupType:""}}},list:{type:Array,default:null}},data:function(){return{searchValue:"",options:[],replaceFields:{key:"id",name:"name"},checkBoxName:[],radioName:["bill","payment","inStock","outStock","sales","handler","prepared","stockSync","payStockSync","paymentMode","exchangePayment","brand","unit","tag","stockBill","invoiceType","printStatus"],pagination:{current:1,pageSize:30,total:0}}},computed:{modelValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},baseConfig:function(){return{placeholder:this.config.placeholder||"请输入关键字",groupType:""}},filteredOptions:function(){var e=this;return this.searchValue?this.options.filter((function(t){if(t[e.replaceFields.name].match(e.searchValue))return t})):this.options}},created:function(){this.generateOptions()},methods:{generateOptions:function(){if(this.list)this.options=this.list;else switch(this.name){case"bill":this.options=vn;break;case"payment":this.options=bn;break;case"inStock":this.options=mn;break;case"outStock":this.options=gn;break;case"sales":this.options=Sn;break;case"stockBill":this.options=On;break;case"handler":case"prepared":this.replaceFields={key:"stafferId"},this.loadData();break;case"stockSync":this.options=_n;break;case"paymentMode":this.options=xn;break;case"exchangePayment":this.options=Rn;break;case"unit":case"brand":case"tag":case"deliveryMethod":case"customerLevelPrice":this.loadData();break;case"payStock":this.options=pn;break;case"billSource":this.options=Vn;break;case"invoiceType":this.options=Fn;break;case"printStatus":this.options=$n}},loadData:function(){var e=this;"handler"===this.name||"prepared"===this.name?this.$get(He,{current:this.pagination.current,pageSize:this.pagination.pageSize}).then((function(t){e.options=t.data})):["unit","brand","tag"].includes(this.name)?this.$post(Be,{type:["unit","brand","tag"].includes(this.name)}).then((function(t){e.options=t.data})):"deliveryMethod"===this.name?this.$get(Je).then((function(t){e.options=t.data})):"customerLevelPrice"===this.name&&(this.replaceFields={key:"value",name:"label"},this.$post(st).then((function(t){e.options=t.data})))},changeHandle:function(){var e=this;this.$nextTick((function(){e.$emit("change",{data:e.modelValue})}))},setData:function(e){this.modelValue=e},getData:function(){var e=this;if(this.checkBoxName.includes(this.name)){var t=[];return this.modelValue.forEach((function(n){t=t.concat(e.options.filter((function(t){return t[e.replaceFields.key]===n})))})),t}return this.options.filter((function(t){return t[e.replaceFields.key]===e.modelValue}))},resetData:function(){var e=this;this.modelValue=this.checkBoxName.includes(this.name)?[]:void 0,this.$nextTick((function(){e.$emit("change",{data:e.value})}))}}};var Ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filter-group"},[n("div",{staticClass:"search-input"},[n("a-input",{attrs:{placeholder:e.baseConfig.placeholder,allowClear:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),n("div",{staticClass:"scroll-wrap"},[n("SelectGroup",{attrs:{options:e.filteredOptions,multiple:e.checkBoxName.includes(e.name),replaceFields:e.replaceFields,maxHeight:200},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}})],1)])};Ci._withStripped=!0;const _i=mt({render:Ci,staticRenderFns:[]},void 0,ki,void 0,!1,void 0,!1,void 0,void 0,void 0);var Si={name:"FilterTree",props:{name:{type:String,default:"saleArea"},value:{type:[Number,Array,String],default:void 0},maxHeight:{require:!1,type:String,default:"300"},placeholder:{require:!1,type:String,default:"销售区域"}},data:function(){return{parentId:0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},treeData:[]}},computed:{modelValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.handleFetchTreeData()},methods:{handleFetchTreeData:function(){"saleArea"===this.name&&this.handleFetchSaleAreas([],!1)},handleFetchSaleAreas:function(){var e=arguments,t=this;return xe(Oe.mark((function n(){var a,i,o,r;return Oe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:[],i=e.length>1&&void 0!==e[1]&&e[1],n.prev=2,n.next=5,t.$post(Ee,{businessId:t.parentId});case 5:o=n.sent,(r=o.data).length&&(i?(a.children=r,t.treeData=wt(t.treeData)):t.treeData=r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onLoadData:function(e){var t=this;return new Promise((function(n){var a=e.dataRef;a.hasChildren?setTimeout((function(){t.parentId=a.id,t.handleFetchSaleAreas(a,!0),n()}),300):n()}))},onTreeSelectChange:function(e,t,n){console.log(e,t,n),this.$emit("change",{data:e})},getData:function(){return this.modelValue}}};const xi=Si;var Ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filter-tree"},[n("div",{staticClass:"tree-wrap"},[n("a-tree-select",{style:{width:"100%"},attrs:{allowClear:"","tree-data-simple-mode":"","dropdown-style":{maxHeight:e.maxHeight+"px",overflow:"auto"},"tree-data":e.treeData,"load-data":e.onLoadData,placeholder:e.placeholder,replaceFields:e.replaceFields},on:{select:e.onTreeSelectChange},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}})],1)])};Ri._withStripped=!0;const Oi={name:"DFilterDropdown",components:{DMixSearch:si,FilterInput:ui,TimeRange:gi,FilterAmount:bi,FilterGroup:_i,FilterTree:mt({render:Ri,staticRenderFns:[]},void 0,xi,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{name:{type:String,default:"default"},value:{type:[String,Array,Object,Boolean],default:void 0},visible:{type:Boolean,default:!1},dataOrigin:{type:Number,default:0},dataSource:{type:Array,default:function(){return[]}},filterType:{type:Array,default:function(){return[]}},autoClose:{type:Boolean,default:!0},width:{type:Number,default:296},immediate:{type:Boolean,default:!1},placeholder:{type:[String,Array],default:"请输入"},config:{type:Object,default:function(){return{placeholder:"",groupType:""}}},list:{type:Array,default:null}},data:function(){return{componentMap:{input:{name:"FilterInput",default:"",childName:"input"},range:{name:"TimeRange",default:[void 0,void 0],childName:"range"},amount:{name:"FilterAmount",default:[void 0,void 0],childName:"amount"},payment:{name:"FilterGroup",default:"",childName:"payment"},bill:{name:"FilterGroup",default:"",childName:"bill"},inStock:{name:"FilterGroup",default:"",childName:"inStock"},outStock:{name:"FilterGroup",default:"",childName:"outStock"},sales:{name:"FilterGroup",default:"",childName:"sales"},stockBill:{name:"FilterGroup",default:"",childName:"stockBill"},handler:{name:"DMixSearch",default:"",childName:"person"},preparer:{name:"DMixSearch",default:"",childName:"person"},stockSync:{name:"FilterGroup",default:"",childName:"stockSync"},paymentMode:{name:"FilterGroup",default:"",childName:"paymentMode"},exchangePayment:{name:"FilterGroup",default:"",childName:"exchangePayment"},supplier:{name:"DMixSearch",default:{},childName:"supplier"},customer:{name:"DMixSearch",default:{},childName:"customer"},supplierCustomer:{name:"DMixSearch",default:{},childName:"supplierCustomer"},unit:{name:"FilterGroup",default:"",childName:"unit"},brand:{name:"FilterGroup",default:"",childName:"brand"},tag:{name:"FilterGroup",default:"",childName:"tag"},warehouse:{name:"DMixSearch",default:{},childName:"warehouse"},account:{name:"DMixSearch",default:{},childName:"account"},payStock:{name:"FilterGroup",default:"",childName:"payStock"},billSource:{name:"FilterGroup",default:"",childName:"billSource"},deliveryMethod:{name:"FilterGroup",default:"",childName:"deliveryMethod"},customerLevelPrice:{name:"FilterGroup",default:"",childName:"customerLevelPrice"},saleArea:{name:"FilterTree",default:"",childName:"saleArea"},invoiceType:{name:"FilterGroup",default:"",childName:"invoiceType"},printStatus:{name:"FilterGroup",default:"",childName:"printStatus"},erpSyncStatus:{name:"FilterGroup",default:"",childName:"payStock"}},modelValue:void 0}},computed:{baseConfig:function(){return _e({placeholder:"",placeholder1:"",placeholder2:"",groupType:""},this.config)},modelVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}}},watch:{value:{handler:function(e){"default"!==this.name&&(this.modelValue=this.componentMap[this.name].default,e&&(this.modelValue=e))},immediate:!0}},methods:{changeHandle:function(e){console.log(e),["supplierCustomer","supplier","customer","warehouse","person","preparer","handler","account"].includes(this.name)?(this.modelValue=e.data,this.$emit("input",e.data),this.confirmHandle("enter")):(this.modelValue=e.data,this.$emit("input",e.data))},next:function(e,t){return"mixSearch"===e&&"focus"!==t&&(this.modelVisible=!1),!0},confirmHandle:function(e){if("default"!==this.name){var t=this.$refs.filterComponent.getData&&this.$refs.filterComponent.getData();console.log(t);var n=t&&t.constructor===Array,a=t;["supplierCustomer","supplier","customer"].includes(this.name)&&(a=this.modelValue.id);var i={data:n?a.length?a:void 0:a,config:{type:"filterDown",status:e,name:this.name,columnsName:this.$attrs.data?this.$attrs.data.column.key:this.name,props:this.$attrs.data||{}},rows:n?t.length?t:void 0:t?[t]:void 0};if(this.$emit("confirm",i),console.log("返回的参数：",i),this.autoClose)try{this.$attrs.data.confirm()}catch(e){console.error("请传入关闭事件")}}else this.$emit("confirm",{type:"filterDown",status:"default",name:this.name,columnsName:this.$attrs.data?this.$attrs.data.column.key:this.name,props:this.$attrs.data||{}})},cancelHandle:function(){if(this.autoClose)try{this.$attrs.data.confirm()}catch(e){console.error("请传入关闭事件")}this.$emit("cancel")},resetHandle:function(e){var t=this;if("default"===this.name)return this.$emit("confirm",{status:"default",name:this.name,columnsName:this.$attrs.data?this.$attrs.data.column.key:this.name,props:this.$attrs.data||{}}),void this.$attrs.data.confirm();this.$refs.filterComponent.resetData&&this.$refs.filterComponent.resetData(),this.$nextTick((function(){e&&t.confirmHandle("reset")}))},resetData:function(e){this.resetHandle(e)}}};var Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-filter-dropdown",style:{width:e.width+"px"}},[n("div",{staticClass:"filter-content"},[e._t("default",["default"!==e.name?n(e.componentMap[e.name].name,{ref:"filterComponent",tag:"components",attrs:{placeholder:e.placeholder,name:e.componentMap[e.name].childName,config:e.baseConfig,next:e.next,origin:"filterDropDown",list:e.list},on:{change:e.changeHandle},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}):e._e()])],2),e._v(" "),n("div",{staticClass:"filter-footer"},[n("div",{staticClass:"btn-reset",on:{click:function(t){return e.resetHandle(!0)}}},[e._v("重置")]),e._v(" "),n("div",{staticClass:"btn-right"},[n("a-button",{on:{click:e.cancelHandle}},[e._v("取消")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmHandle("enter")}}},[e._v("确定")])],1)])])};Di._withStripped=!0;const Li=mt({render:Di,staticRenderFns:[]},void 0,Oi,void 0,!1,void 0,!1,void 0,void 0,void 0);return Li.install=function(e){e.component(Li.name,Li)},Li}))},ae52:function(e,t,n){var a=n("2418");e.exports=a},af03:function(e,t,n){var a=n("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b1d8:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("b64b"),n("d81d"),n("159b"),n("caad"),n("2532"),n("2ca0"),n("7db0"),n("a434"),n("7edb"),n("aa47"),n("2b0e"),n("fb19"),n("73c8"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f){"use strict";function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(c),g=p(u),v=p(d),y=p(h);function b(){return b=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b.apply(this,arguments)}var w=["attrs","props","domProps"],k=["class","style","directives"],C=["on","nativeOn"],_=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},S=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==w.indexOf(n))e[n]=b({},e[n],t[n]);else if(-1!==k.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==C.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?_(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=m.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function T(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var $=["key"],V={},I={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return D({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:D({},this.$listeners)};return t("a-table",S([{},{props:D(D({},n),{},{columns:a}),scopedSlots:D({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":y.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=f.getKey(t),i=f.getStyle(t),o=f.getClass(t),r=f.getOptionProps(t),s=f.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[f.camelize(t)]=s[e]}));var c=f.getSlots(t),u=c.default,d=T(c,["default"]),h=L({},d,r,{style:i,class:o},l);if(a&&(h.key=a),f.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var p=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||p}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=T(t,["slots","scopedSlots"]),u=L({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){V[e.key]=e.width||0}));var o=v.default.observable(V),r=null,s=t.key,l=R(t,$),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",S([{attrs:{width:c.width}},l]),[n]):e("th",S([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",S([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(y.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=D(D({},a.cellWidth),{},x({},c.key,c.width));a.$emit("update:cellWidth",D({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);g.default.create(t[t.length>1?1:0],D(D({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(I.name,I)}};return I}))},b369:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("d3b7"),n("caad"),n("2532"),n("ac1f"),n("466d"),n("a9e3"),n("99af"),n("159b"),n("b64b"),n("cfba"),n("4de4"),n("07ac"),n("b680"),n("2b0e"),n("5319"),n("1276"),n("fb6a"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("50f6"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K){"use strict";function z(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var H=z(u),q=z(p),W=z(K);function U(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const G={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:H.default},methods:{handleClick:function(){this.$emit("click")}}};var Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};Y._withStripped=!0;const X=U({render:Y,staticRenderFns:[]},void 0,G,void 0,!1,void 0,!1,void 0,void 0,void 0);function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}var te=q.default.prototype.$isServer,ne=!te&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},ae=!te&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};function ie(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}"object"!==("undefined"==typeof Int8Array?"undefined":ee(Int8Array))&&(q.default.prototype.$isServer||document.childNodes),q.default.use(W.default);var oe={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},re=!q.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",se={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:oe.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===oe.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=ie((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=ie((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),ne(document,"keydown",this._keyDownHandler),ne(document,re,this._mouseWheelHandler)},deviceSupportUninstall:function(){ae(document,"keydown",this._keyDownHandler),ae(document,re,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=ie((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),ne(document,"mousemove",this._dragHandler),ne(document,"mouseup",(function(){ae(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(oe),t=(Object.values(oe).indexOf(this.mode)+1)%e.length;this.mode=oe[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=Z({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const le=se;var ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};ce._withStripped=!0;const ue=U({render:ce,staticRenderFns:[]},void 0,le,void 0,!1,void 0,!1,void 0,void 0,void 0);var de="",he=function(){return void 0!==document.documentElement.style.objectFit},fe=function(e,t){return pe(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},pe=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},me="none",ge="contain",ve="cover",ye="fill",be="scale-down",we={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:X,IconFont:H.default,ImageViewer:ue},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?he()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!he()&&this.fit!==ye},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(fe(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===be&&(e=t<i&&n<o?me:ge),e){case me:return{width:"auto",height:"auto"};case ge:return r?{width:"auto"}:{height:"auto"};case ve:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){de=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=de,this.showViewer=!1}}};const ke=we;var Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};Ce._withStripped=!0;const _e=U({render:Ce,staticRenderFns:[]},void 0,ke,void 0,!1,void 0,!1,void 0,void 0,void 0);function Se(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];void 0!==o&&(e[i]=o)}}return e}var xe={zIndex:2e3,initialIndex:0,urlList:[]},Re=q.default.extend(ue);return _e.install=function(e){e.component(_e.name,_e)},_e.api=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Se({},xe,e);var t=new Re({el:document.createElement("div"),propsData:e,methods:{hide:function(){this.deviceSupportUninstall(),this.$el.parentNode.removeChild(this.$el)},download:function(){e.download&&e.download(this.currentImg)}}}),n=e.body?document.body:e.target;console.log(n),document.body.appendChild(t.$el)}(e)},_e}))},bb2f:function(e,t,n){var a=n("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c740:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").findIndex,o=n("44d2"),r="findIndex",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(r)},ce95:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"))}(0,(function(){"use strict";function e(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const t={props:{type:{type:String,default:"other"},title:{type:String,default:""},price:{type:String,default:""},accept:{type:Array,default:function(){return[]}}},watch:{isShow:function(e){var t=this;if(e)this.showControl=!0;else var n=setTimeout((function(){t.showControl=!1,clearTimeout(n),n=null}),350)}},data:function(){return{showControl:!1,isShow:!1}},mounted:function(){var e=this;document.querySelector("body").addEventListener("click",(function(){e.isShow&&(e.isShow=!1)}))}};var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"suspension-control"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"other"===e.type,expression:"type === 'other'"}],staticClass:"other-title",on:{click:function(t){t.stopPropagation(),e.isShow=!0}}},[e._v("\n    "+e._s(e.title||"")+"\n    "),n("a-icon",{staticClass:"icon-control",class:{"icon-control-rotate":e.isShow},attrs:{type:"down"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showControl,expression:"showControl"}],staticClass:"white"})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"promotion"===e.type,expression:"type === 'promotion'"}],staticClass:"promotion-title",on:{click:function(t){t.stopPropagation(),e.isShow=!0}}},[n("span",{staticClass:"title"},[e._v(e._s(e.title||""))]),e._v(" "),n("span",{staticClass:"price"},[e._v("-¥"+e._s(e.price||""))]),e._v(" "),n("a-icon",{staticClass:"icon-control",class:{"icon-control-rotate":e.isShow},attrs:{type:"down"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showControl,expression:"showControl"}],staticClass:"white"})],1),e._v(" "),n("transition",{attrs:{name:"draw"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"suspension-content"},["promotion"===e.type?n("div",e._l(e.accept,(function(t,a){return n("div",{key:a,staticClass:"promotion-details"},[n("div",[e._v(e._s(t.title||""))]),e._v(" "),n("div",[e._v(e._s(t.value?"-¥"+t.value:""))])])})),0):n("div",e._l(e.accept,(function(t,a){return n("div",{key:a,staticClass:"content-details"},[n("div",[e._v(e._s(t.title||""))]),e._v(" "),n("div",[e._v(e._s(t.value||""))])])})),0)])])],1)};n._withStripped=!0;const a=e({render:n,staticRenderFns:[]},void 0,t,void 0,!1,void 0,!1,void 0,void 0,void 0);return a.install=function(e){e.component(a.name,a)},a}))},d81d:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").map,o=n("1dde"),r=o("map");a({target:"Array",proto:!0,forced:!r},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d86b:function(e,t,n){var a=n("d039");e.exports=a((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},dca8:function(e,t,n){var a=n("23e7"),i=n("bb2f"),o=n("d039"),r=n("861d"),s=n("f183").onFreeze,l=Object.freeze,c=o((function(){l(1)}));a({target:"Object",stat:!0,forced:c,sham:!i},{freeze:function(e){return l&&r(e)?l(s(e)):e}})},ec0f:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("99af"),n("d3b7"),n("b64b"),n("d81d"),n("159b"),n("caad"),n("2532"),n("2ca0"),n("7db0"),n("a434"),n("7edb"),n("aa47"),n("2b0e"),n("fb19"),n("73c8"),n("cfba"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3177"),n("04b3"),n("4de4"),n("4e82"),n("9911"),n("e439"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G){"use strict";function Y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var X=Y(h),J=Y(f),Q=Y(p),Z=Y(m),ee=Y(v);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ne(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(){return re=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},re.apply(this,arguments)}var se=["attrs","props","domProps"],le=["class","style","directives"],ce=["on","nativeOn"],ue=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},de=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==se.indexOf(n))e[n]=re({},e[n],t[n]);else if(-1!==le.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==ce.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?ue(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function he(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var fe=X.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function pe(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var me=["key"],ge={},ve={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return oe({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:oe({},this.$listeners)};return t("a-table",de([{},{props:oe(oe({},n),{},{columns:a}),scopedSlots:oe({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":Z.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=g.getKey(t),i=g.getStyle(t),o=g.getClass(t),r=g.getOptionProps(t),s=g.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[g.camelize(t)]=s[e]}));var c=g.getSlots(t),u=c.default,d=pe(c,["default"]),h=fe({},d,r,{style:i,class:o},l);if(a&&(h.key=a),g.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=pe(t,["slots","scopedSlots"]),u=fe({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){ge[e.key]=e.width||0}));var o=Q.default.observable(ge),r=null,s=t.key,l=he(t,me),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",de([{attrs:{width:c.width}},l]),[n]):e("th",de([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",de([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(Z.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=oe(oe({},a.cellWidth),{},ae({},c.key,c.width));a.$emit("update:cellWidth",oe({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);J.default.create(t[t.length>1?1:0],oe(oe({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(ve.name,ve)}};function ye(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const be={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:ee.default},methods:{handleClick:function(){this.$emit("click")}}};var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};we._withStripped=!0;const ke=ye({render:we,staticRenderFns:[]},void 0,be,void 0,!1,void 0,!1,void 0,void 0,void 0);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function _e(e){if(!e&&"object"!==Ce(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Ce(e[n])?t[n]=_e(e[n]):t[n]=e[n]})),t}ke.install=function(e){e.component(ke.name,ke)},"object"!==("undefined"==typeof Int8Array?"undefined":Ce(Int8Array))&&(Q.default.prototype.$isServer||document.childNodes);const Se={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:U.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:U.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&U.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};xe._withStripped=!0;const Re=ye({render:xe,staticRenderFns:[]},void 0,Se,void 0,!1,void 0,!1,void 0,void 0,void 0);Re.install=function(e){e.component(Re.name,Re)};const Oe={name:"DOperationBox",components:{IconFontBox:ke,CellEllipsisTip:Re},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return oe({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(oe(oe({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=_e(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=oe({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};De._withStripped=!0;const Le=ye({render:De,staticRenderFns:[]},void 0,Oe,void 0,!1,void 0,!1,void 0,void 0,void 0);Le.install=function(e){e.component(Le.name,Le)};const Te={name:"Empty",components:{empty:G.empty,loading:G.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var $e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};$e._withStripped=!0;const Ve=ye({render:$e,staticRenderFns:[]},void 0,Te,void 0,!1,void 0,!1,void 0,void 0,void 0);Ve.install=function(e){e.component(Ve.name,Ve)};var Ie={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return oe(oe({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=oe({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ae({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===Ce(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=oe(oe({},e.selectionContent.selectedRows),{},ae({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=ae({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};function Fe(e){return"object"===Ce(e)&&null!==e&&e.constructor&&e.constructor===Object}function Ee(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(Fe(e[o])&&Fe(n[o])?Ee(e[o],n[o]):!Fe(e[o])&&Fe(n[o])?(e[o]={},Ee(e[o],n[o])):e[o]=n[o])}}return e}var Pe={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=oe(oe({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=oe(oe({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=oe(oe({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=oe({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=Ee(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:Ce(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(oe(oe({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},Ae="/gateway/goodsservice/api/v1/",Ne="".concat(Ae,"warehouse/list"),Me="".concat(Ae,"category/get_category_list"),je={name:"DSelectWarehouse",components:{STable:ve,Empty:Ve,DOperationBox:Le,CellEllipsisTip:Re},mixins:[Ie,Pe],props:{visible:{type:Boolean,default:!1},width:{type:[String,Number],default:1e3},title:{type:String,default:"选择仓库"},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"id"}}},beforeClose:{type:Function,default:void 0},rules:{type:Object,default:function(){}},cache:{type:Boolean,default:!1},defaultValue:{type:[Object,Array],default:null},categoryInit:{type:Number,default:1},selectionLimit:{type:Number,default:100}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},data:function(){return{tableData:[],classifyOptions:[],classifyValue:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:""},resultMap:{},disabled:{warehouse:!1},opened:!1}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},baseReplaceFields:function(){return oe({key:"id"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},allClassifyOptions:function(){return[{categoryName:"全部分类",haveChild:!0,isLeaf:!1,id:"1",parentId:"0",pathCode:"1",scopedSlots:{title:"custom"},children:[{categoryName:"未分类",haveChild:!1,id:"0",parentId:"1",isLeaf:!0,pathCode:"0",scopedSlots:{title:"custom"}}].concat(ne(this.classifyOptions))}]}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="id",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&(this.reset().dealResult().loadTableData(),this.loadClassify()),this.opened=!0)}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Ne,oe(oe({},this.searchResult),{},{pageNum:t.current,pageSize:t.pageSize},this.rules)).then((function(t){t.data&&(e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},searchHandle:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},classifySearchHandle:function(e){console.log("分类检索:",e)},classifyOnSelect:function(e,t){console.log("classifyOnSelect",t,this.classifyValue);var n=t.node;this.searchResult.categoryPath=t.selected?n.dataRef.pathCode:null,this.handleSelectedClear().loadTableData()},loadClassify:function(e){var t=this;if(this.$get(Me,{}).then((function(){})),e)return new Promise((function(n){var a=e.dataRef;t.$get(Me,{categoryType:2,parentId:a.id}).then((function(e){var i=e.data;i.length&&(a.children=i,t.classifyOptions=ne(t.classifyOptions)),n()}))}));this.$get(Me,{categoryType:2,parentId:this.categoryInit}).then((function(e){t.classifyOptions=e.data}))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const Be=je;var Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-warehouse a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"warehouse-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入分类名称"},on:{search:e.classifySearchHandle}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"classify-wrap"},[n("a-tree",{attrs:{loadData:e.loadClassify,replaceFields:{children:"children",value:"id",title:"categoryName",key:"id"},"tree-data":e.allClassifyOptions,defaultExpandedKeys:["1"],defaultSelectedKeys:["1"],showIcon:""},on:{select:e.classifyOnSelect},model:{value:e.classifyValue,callback:function(t){e.classifyValue=t},expression:"classifyValue"}})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"仓库名称"},on:{search:e.searchHandle},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"index",attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(t,n,a){return[e._v("\n            "+e._s((e.pagination.current-1)*e.pagination.pageSize+a+1)+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:200,"data-index":"name",title:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:100,"data-index":"code",title:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{title:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{tip:""+t.regionName+t.address}},[e._v(" "+e._s(t.regionName)+e._s(t.address)+" ")])]}}])}),e._v(" "),n("a-table-column",{attrs:{width:75,title:"可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.erpId?"是":"否")+"\n          ")]}}])})],1)],1)])])};Ke._withStripped=!0;const ze=ye({render:Ke,staticRenderFns:[]},void 0,Be,void 0,!1,void 0,!1,void 0,void 0,void 0);return ze.install=function(e){e.component(ze.name,ze)},ze}))},ee2a:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("7db0"),n("3177"),n("b64b"),n("d81d"),n("159b"),n("caad"),n("2532"),n("2ca0"),n("a434"),n("7edb"),n("aa47"),n("2b0e"),n("fb19"),n("73c8"),n("ac1f"),n("5319"),n("a15b"),n("1276"),n("99af"),n("4de4"),n("d3b7"),n("25f0"),n("498a"),n("4ec9"),n("3ca3"),n("ddb0"),n("c740"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m){"use strict";function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var v=g(a),y=g(d),b=g(h),w=g(f),k=g(p);function C(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){C(o,a,i,r,s,"next",e)}function s(e){C(o,a,i,r,s,"throw",e)}r(void 0)}))}}var S=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),x="/gateway/saas-platform-service/api/v1/",R="/gateway/customer-service/api/v1/",O="/gateway/logisticsservice/api/v1/",D={province:"".concat(x,"address/province"),city:"".concat(x,"address/city"),district:"".concat(x,"address/district")},L="".concat(x,"address/get_by_name"),T="".concat(O,"deliveryMethod/list"),$="".concat(O,"logisticsCorp/custom/list"),V="".concat(R,"order/get_deliverys"),I="".concat(R,"order/add_delivery"),F="".concat(R,"order/update_delivery"),E="".concat(R,"order/delete_delivery"),P="".concat(R,"order/set_default_delivery");function A(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const N={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:a.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:a.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&a.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};M._withStripped=!0;const j=A({render:M,staticRenderFns:[]},void 0,N,void 0,!1,void 0,!1,void 0,void 0,void 0);function B(){return B=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},B.apply(this,arguments)}j.install=function(e){e.component(j.name,j)};var K=["attrs","props","domProps"],z=["class","style","directives"],H=["on","nativeOn"],q=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},W=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==K.indexOf(n))e[n]=B({},e[n],t[n]);else if(-1!==z.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==H.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?q(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=y.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Q(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var Z=["key"],ee={},te={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return X({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:X({},this.$listeners)};return t("a-table",W([{},{props:X(X({},n),{},{columns:a}),scopedSlots:X({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":k.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=m.getKey(t),i=m.getStyle(t),o=m.getClass(t),r=m.getOptionProps(t),s=m.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[m.camelize(t)]=s[e]}));var c=m.getSlots(t),u=c.default,d=Q(c,["default"]),h=J({},d,r,{style:i,class:o},l);if(a&&(h.key=a),m.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=Q(t,["slots","scopedSlots"]),u=J({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){ee[e.key]=e.width||0}));var o=w.default.observable(ee),r=null,s=t.key,l=G(t,Z),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",W([{attrs:{width:c.width}},l]),[n]):e("th",W([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",W([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(k.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=X(X({},a.cellWidth),{},U({},c.key,c.width));a.$emit("update:cellWidth",X({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);b.default.create(t[t.length>1?1:0],X(X({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}}};function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}te.install=function(e){e.component(te.name,te)};var ae=function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.__PARENTSAPPJSONP__&&window.__POWERED_BY_QIANKUN__?window.__PARENTSAPPJSONP__(n,(function(e){t=e})):window.TMAPCALLBACK[n]=function(e){t=e},document.body.appendChild(a);var i=function(){document.body.removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},ie={"北京市":{city:"北京市",short:"京",lng:"116.39737",lat:"39.939502"},"天津市":{city:"天津市",short:"津",lng:"117.133262",lat:"39.256321"},"上海市":{city:"上海市",short:"沪",lng:"121.36464",lat:"31.303465"},"重庆市":{city:"重庆市",short:"渝",lng:"106.32485",lat:"29.895013"},"河北省":{city:"石家庄",short:"冀",lng:"114.336873",lat:"38.21885"},"山西省":{city:"太原",short:"晋",lng:"112.349964",lat:"38.044464"},"辽宁省":{city:"沈阳",short:"辽",lng:"123.241164",lat:"41.948112"},"吉林省":{city:"长春",short:"吉",lng:"125.228072",lat:"43.894927"},"黑龙江省":{city:"哈尔滨",short:"黑",lng:"126.479088",lat:"45.985284"},"江苏省":{city:"南京",short:"苏",lng:"118.715429",lat:"32.246466"},"浙江省":{city:"杭州",short:"浙",lng:"120.040035",lat:"30.350837"},"安徽省":{city:"合肥",short:"皖",lng:"117.170056",lat:"31.99595"},"福建省":{city:"福州",short:"闽",lng:"119.156964",lat:"26.182279"},"江西省":{city:"南昌",short:"赣",lng:"115.808656",lat:"28.774611"},"山东省":{city:"济南",short:"鲁",lng:"116.912494",lat:"36.812038"},"河南省":{city:"郑州",short:"豫",lng:"113.453802",lat:"34.895028"},"湖北省":{city:"武汉",short:"鄂",lng:"114.116105",lat:"30.764814"},"湖南省":{city:"长沙",short:"湘",lng:"112.800698",lat:"28.474291"},"广东省":{city:"广州",short:"粤",lng:"113.233035",lat:"23.224606"},"海南省":{city:"海口",short:"琼",lng:"110.179083",lat:"19.921006"},"四川省":{city:"成都",short:"川",lng:"103.924003",lat:"30.796585"},"贵州省":{city:"贵阳",short:"黔",lng:"106.499624",lat:"26.844365"},"云南省":{city:"昆明",short:"滇",lng:"102.599397",lat:"25.248948"},"陕西省":{city:"西安",short:"陕",lng:"108.780889",lat:"34.408508"},"甘肃省":{city:"兰州",short:"甘",lng:"103.66644",lat:"36.218003"},"青海省":{city:"西宁",short:"青",lng:"101.605943",lat:"36.752842"},"西藏自治区":{city:"拉萨",short:"藏",lng:"90.972306",lat:"29.838888"},"广西壮族自治区":{city:"南宁",short:"桂",lng:"108.265765",lat:"23.020403"},"内蒙古自治区":{city:"呼和浩特",short:"蒙",lng:"111.614073",lat:"40.951504"},"宁夏回族自治区":{city:"银川",short:"宁",lng:"106.094884",lat:"38.624116"},"新疆维吾尔自治区":{city:"乌鲁木齐",short:"新",lng:"87.476819",lat:"43.894927"},"香港特别行政区":{city:"香港",short:"港",lng:"114.1529",lat:"22.542716"},"澳门地区":{city:"澳门",short:"澳",lng:"113.417008",lat:"22.337477"},"台湾省":{city:"台北",short:"台.",lng:"121.36464",lat:"25.248948"}},oe="https://apis.map.qq.com",re={geocoder:"".concat(oe,"/ws/geocoder/v1"),placeSearch:"".concat(oe,"/ws/place/v1/search"),placeExplore:"".concat(oe,"/ws/place/v1/explore"),placeDetail:"".concat(oe,"/ws/place/v1/detail"),placeSuggestion:"".concat(oe,"/ws/place/v1/suggestion"),district:"".concat(oe,"/ws/district/v1"),directionDriving:"".concat(oe,"/ws/direction/v1/driving"),directionTransit:"".concat(oe,"/ws/direction/v1/transit"),directionWalking:"".concat(oe,"/ws/direction/v1/walking"),directionBicycling:"".concat(oe,"/ws/direction/v1/bicycling"),distanceMatrix:"".concat(oe,"/ws/distance/v1/matrix"),locationIP:"".concat(oe,"/ws/location/v1/ip"),staticmap:"".concat(oe,"/ws/staticmap/v2"),coordTranslate:"".concat(oe,"/ws/coord/v1/translate")},se=function(e){var t="";if(e)for(var n in e)e.hasOwnProperty(n)&&(t+="".concat(t?"".concat(t,"&"):"").concat(n,"=").concat(e[n]));return t},le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.mapOptions={key:"T74BZ-KJV6U-EVEVH-B2ZLQ-YIZQF-3PFPB",container:"map",center:{lat:39.908802,lng:116.397502},zoom:16,location:!1,showMarker:!1,success:null,fail:null},this.varia={queue:[],mapStatus:!1,centerMarker:null,on:{tilesloaded:null}},this._init(t)}var t,n,a,i;return t=e,n=[{key:"_init",value:function(e){this._initConfig(e),e&&e.container&&(this._initMap(),this._afterInit())}},{key:"_initConfig",value:function(e){this.mapOptions=this.merge(this.mapOptions,e)}},{key:"_initMap",value:(i=_(S.mark((function e(){var t=this;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=this.mapOptions.key,ae("https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=TMapLoad"));case 2:this.mapOptions.center=this.latLng(this.mapOptions.center),this.map=new TMap.Map(this.mapOptions.container,this.mapOptions),this.map.once("tilesloaded",(function(){t.varia.mapStatus=!0,t.runQueue(),t.mapOptions.success&&t.mapOptions.success()}));case 5:case"end":return e.stop()}var n}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_afterInit",value:function(){this.mapOptions.location&&this.location(),this.mapOptions.showMarker&&this.setMarker(this.mapOptions.center)}},{key:"run",value:function(e,t){this.varia.mapStatus?this[e](t):this.varia.queue.push({name:e,options:t})}},{key:"on",value:function(e,t){console.log(e,t)}},{key:"runQueue",value:function(){var e=this;this.varia.queue.forEach((function(t){e[t.name](t.options)})),this.varia.queue=[]}},{key:"request",value:function(e,t){var n,a,i=(n=this.mapOptions,a="key=".concat(n.key,"&output=jsonp"),{parseLocation:function(e){return ae("https://apis.map.qq.com/ws/geocoder/v1/?".concat(se(e),"&").concat(a))},placeSearch:function(e){return ae("".concat(re.placeSearch,"?").concat(se(e),"&").concat(a))},placeExplore:function(e){return ae("".concat(re.placeExplore,"?").concat(se(e),"&").concat(a))},placeDetail:function(e){return ae("".concat(re.placeDetail,"?").concat(se(e),"&").concat(a))},suggestion:function(e){return ae("".concat(re.placeSuggestion,"?").concat(se(e),"&").concat(a))},geocoder:function(e){var t=e.address;return t&&ie[t]&&(e.address="".concat(t).concat(ie[t].city)),ae("".concat(re.geocoder,"?").concat(se(e),"&").concat(a))},directionDriving:function(e){return ae("".concat(re.directionDriving,"?").concat(se(e),"&").concat(a))},directionWalking:function(e){return ae("".concat(re.directionWalking,"?").concat(se(e),"&").concat(a))},directionBicycling:function(e){return ae("".concat(re.directionBicycling,"?").concat(se(e),"&").concat(a))},directionTransit:function(e){return ae("".concat(re.directionTransit,"?").concat(se(e),"&").concat(a))},distanceMatrix:function(e){return ae("".concat(re.distanceMatrix,"?").concat(se(e),"&").concat(a))},district:function(e){return ae("".concat(re.district,"?").concat(se(e),"&").concat(a))},coordTranslate:function(e){return ae("".concat(re.coordTranslate,"?").concat(se(e),"&").concat(a))},locationIP:function(e){return ae("".concat(re.locationIP,"?").concat(se(e),"&").concat(a))}});if(!i[e])throw Error("错误警告: ".concat(e," 不是一个正确的地图请求方法，请使用正确的方法。"));return i[e](t)}},{key:"merge",value:function(e,t){for(var n in t)e[n]=e[n]&&"[object Object]"===e[n].toString()?this.merge(e[n],t[n]):e[n]=t[n];return e}},{key:"destory",value:function(){this.map.destroy()}},{key:"random",value:function(){return Math.floor(1234567890*Math.random())}},{key:"latLng",value:function(e){var t=e.lng,n=e.lat;return new TMap.LatLng(n,t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){console.log(e,"设置地图中心点"),this.map.setCenter(this.latLng(e))}},{key:"setRotation",value:function(e){this.map.setRotation(e)}},{key:"setPitch",value:function(e){this.map.setPitch(e)}},{key:"setScale",value:function(e){this.map.setScale(e)}},{key:"setMode",value:function(e){"2D"===e?this.map.setViewMode("2D"):"3D"===e&&(this.map.setViewMode("3D"),this.map.setPitch(70))}},{key:"setMarker",value:function(e,t){var n=this;console.log("setMarker-point-内部函数",e),console.log("setMarker-styles-内部函数",t),this.removeMarker(),console.log("marker-layer-".concat(Math.floor(1e4*Math.random())),"IDDDDD"),console.log(this,"this"),this.varia.centerMarker=new TMap.MultiMarker({id:"marker-layer-".concat(Math.floor(1e4*Math.random())),map:this.map,styles:X({marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},t),geometries:function(e){var t=n;if("[object Object]"===Object.prototype.toString.call(e))return e.lat=Number(e.lat),e.lng=Number(e.lng),[{id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}}];var a=[];return e.forEach((function(e){a.push({id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}})})),a}(e)})}},{key:"setMarkerCrm",value:function(e){this.varia.centerMarker=new TMap.MultiMarker({id:"marker_".concat(this.random()),map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},geometries:[{id:"markergeo_".concat(this.random()),styleId:"marker_".concat(this.random()),position:new TMap.LatLng(e.lat,e.lng),properties:{title:"marker"}}]})}},{key:"removeMarker",value:function(){console.log("移除marker事件"),console.log(this.varia.centerMarker),this.varia.centerMarker&&(this.varia.centerMarker.setMap(null),this.varia.centerMarker=null)}},{key:"removeCluster",value:function(){}},{key:"setCircle",value:function(e){return new TMap.MultiCircle({id:"circle",map:this.map,geometries:[{center:this.latLng(e),radius:1e3}]})}},{key:"setMarkerCluster",value:function(e){var t=this;return console.log("setMarkerCluster"),this.varia.markerCluster=new TMap.MarkerCluster({id:"marker_".concat(this.random()),map:this.map,enableDefaultStyle:!1,minimumClusterSize:2,geometries:function(e){var n=t;if("[object Object]"===Object.prototype.toString.call(e))return[{position:n.latLng(e)}];var a=[];return e.forEach((function(e){a.push({position:n.latLng(e)})})),a}(e),zoomOnClick:!0,gridSize:60,averageCenter:!1,maxZoom:10}),this.varia.markerCluster}}],n&&ne(t.prototype,n),a&&ne(t,a),e}();function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ue(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const de={name:"Map",props:{sceneId:{type:String,default:"default"},visible:Boolean,inputValue:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100%"},searchInput:{type:Boolean,default:!0},optionSelect:{type:String,default:"title"},intLocation:{type:Boolean,default:!0},config:{type:Object,default:function(){return{}}}},data:function(){return{list:[],actInputValue:"",realDot:!1,glMap:null,id:"TMapSearch_"+v.default.guid()}},watch:{inputValue:function(e){e!==this.actInputValue&&(this.realDot=!0,this.actInputValue=e)},visible:function(e){e&&(this.glMap||this.initMap(),this.actInputValue=this.inputValue)}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this;this.$nextTick((function(){e.glMap=new le(X({container:e.id,success:function(){console.log("地图加载完毕！"),e.$emit("init",e.glMap),e.initComplate()}},e.config)),e.actInputValue=e.inputValue,e.searchInput&&e.actInputValue&&e.intLocation&&(e.realDot=!0,e.handleSearch()),e.glMap._afterInit()}))},initComplate:function(){var e=this,t=this;this.$nextTick((function(){setTimeout((function(){e.actInputValue=e.inputValue,t.glMap.request("suggestion",{keyword:e.inputValue}).then((function(e){e.count&&t.setPosition(e.data[0].id,e.data),t.list=e.data||[],t.$forceUpdate()})),t.$forceUpdate(),e.glMap.map.on("click",(function(e){var n=e.latLng.getLat(),a=e.latLng.getLng();t.setCenter({lat:n,lng:a});var i=[];t.glMap.request("parseLocation",{location:n+","+a}).then((function(e){console.log(e,"根据经纬度".concat(n+","+a,"解析地址信息"));var o={adcode:Number(e.result.ad_info.adcode),address:e.result.formatted_addresses.recommend,city:e.result.address_component.city,district:e.result.address_component.district,location:e.result.location,id:"123456ABCD",title:e.result.formatted_addresses.recommend,province:e.result.address_component.province,type:0};console.log(o,"传给外面的数据对象 - item--1"),t.$emit("change",o),i.push(o),t.actInputValue=e.result.formatted_addresses.recommend,t.setPosition("123456ABCD",i),t.glMap.request("suggestion",{keyword:e.result.address+e.result.formatted_addresses.recommend}).then((function(e){console.log(e,"res1"),e.count&&i.push.apply(i,ue(e.data)),t.list=i,t.$forceUpdate()}))}))}))}),1e3)}))},inputHandler:function(e){var t=this;e&&(this.realDot?this.glMap.request("geocoder",{address:e}).then((function(e){t.realDot=!1,e.status?t.handleSearch():t.setAutoPosition(e.result)})):this.glMap.request("suggestion",{keyword:e}).then((function(e){console.log(e,"inputHandler--suggestion - input 输入框 输入关键词"),t.list=e.data})))},handleSearch:function(){var e=this;this.actInputValue&&(this.realDot?this.glMap.request("geocoder",{address:this.actInputValue}).then((function(t){e.realDot=!1,t.status?e.handleSearch():e.setAutoPosition(t.result)})):this.glMap.request("suggestion",{keyword:this.actInputValue}).then((function(t){console.log(t,"handleSearch--suggestion - input 手动调用搜索"),e.list=t.data})))},handleSelect:function(e){if(console.log("handleSelect：",e),e){var t=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(t.location),this.glMap.setMarker(t.location),console.log(t,"传给外面的数据对象 - item--2"),this.$emit("change",t)}},setPosition:function(e,t){this.list=t;var n=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(n.location),this.glMap.setMarker(n.location),this.$forceUpdate()},setCenter:function(e){this.glMap.setMarker(e)},setAutoPosition:function(e){console.log(e)},setAddress:function(e){this.inputHandler(e)},resetValue:function(e){var t=this;this.$nextTick((function(){(t.actInputValue||t.inputValue)&&(t.actInputValue=t.inputValue,t.list=[],t.actInputValue&&!e&&(t.realDot=!0,t.handleSearch()),t.realDot=!1,t.handleSearch())}))}}};var he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-search-wrapper"},[e.searchInput?n("a-auto-complete",{staticClass:"map-search",attrs:{autoFocus:"",placeholder:"请输入"},on:{search:e.inputHandler,select:e.handleSelect},model:{value:e.actInputValue,callback:function(t){e.actInputValue="string"==typeof t?t.trim():t},expression:"actInputValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t[e.optionSelect]))])})),1)],2):e._e(),e._v(" "),n("div",{staticClass:"t-map-search",style:{height:e.height,width:e.width},attrs:{id:e.id}})],1)};he._withStripped=!0;const fe={name:"Manage",components:{GlMap:A({render:he,staticRenderFns:[]},void 0,de,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},visible:{type:Boolean,default:!1},title:{type:String,default:"地址定位"},config:{type:Object,default:function(){return null}},inputValue:{type:String,default:""},baseValue:{type:String,default:""}},data:function(){return{flag:!0,cache:null,addressInfo:{},glmap:new le}},watch:{visible:function(e){var t=this;this.$nextTick((function(){t.addressInfo={},e&&t.$nextTick((function(){setTimeout((function(){t.inputValue&&t.$refs.map&&t.$refs.map&&(console.log(t.inputValue,"this.inputValue"),t.parseAddress(t.inputValue,(function(e){if(e.length){var n=e[0];t.addressInfo=n,t.cache?t.$refs.map.setPosition(t.cache.id,v.default.unique([t.cache].concat(ue(e)),"id")):t.$refs.map.setPosition(n.id,e)}else t.$refs.map.setPosition(t.cache.id,[t.cache])})))}),1e3)}))}))}},computed:{modalVisible:{get:function(){return this.visible},set:function(){this.$emit("update:visible",!1)}}},mounted:function(){},methods:{parseAddress:function(e,t){"string"==typeof e&&e.trim().length&&this.glmap.request("suggestion",{keyword:e}).then((function(e){e.count?t&&t(e.data):t&&t(null)}))},handleOk:function(){console.log(this.addressInfo,"点击弹框确定按钮返回  addressInfo 给最外面"),this.cache=this.addressInfo,this.$emit("ok",this.addressInfo),this.modalVisible=!1},handleCancel:function(){this.modalVisible=!1},handleChange:function(e){console.log(e,"弹框输入框选项发生变化，选中项赋值给 - addressInfo"),this.addressInfo=e}}};var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"map-dialog-modal",attrs:{title:e.title,maskClosable:!1,width:"810px",keyboard:!1},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("gl-map",{ref:"map",attrs:{sceneId:e.sceneId,visible:e.modalVisible,inputValue:e.inputValue,intLocation:!1},on:{change:e.handleChange}})],1)};pe._withStripped=!0;const me={name:"AddressSearch",components:{MapDialog:A({render:pe,staticRenderFns:[]},void 0,fe,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},value:{type:String,default:""},icon:{type:String,default:"environment"},showBtn:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},defaultBtn:{type:Boolean,default:!1}},data:function(){return{dataSource:[],poiPicker:null,list:[],glMap:null,mapVisible:!1}},computed:{autoValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.autoValue=this.value,this.glMap=new le},methods:{handleSearch:function(e){var t=this;e&&this.glMap.request("suggestion",{keyword:e}).then((function(e){t.$set(t,"list",e.data)}))},handleBtn:function(){console.log("handleBtn"),this.disabled||(this.defaultBtn?this.mapVisible=!0:this.$emit("btnClick"))},handleSelect:function(e){if(e){var t=this.list.filter((function(t){return t.id===e}))[0];this.autoValue=t.title,this.$emit("change",t)}},resetOption:function(){var e=this;this.$nextTick((function(){e.list=[],e.handleSearch(e.value)}))},handleMapOk:function(e){e.adcode&&(this.autoValue=e.title||e.address,this.$emit("change",e))}}};var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a-auto-complete",{staticClass:"map-search",attrs:{placeholder:"请输入",disabled:e.disabled},on:{search:e.handleSearch,select:e.handleSelect},model:{value:e.autoValue,callback:function(t){e.autoValue=t},expression:"autoValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.title))])})),1),e._v(" "),e._t("default",[n("a-input",{attrs:{maxLength:e.maxLength}},[e.showBtn?n("a-button",{staticClass:"dot-btn",staticStyle:{"margin-right":"-12px"},attrs:{slot:"suffix",type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleBtn(t)}},slot:"suffix"},[n("a-icon",{attrs:{type:e.icon}})],1):e._e()],1)])],2),e._v(" "),n("map-dialog",{ref:"mapDialog",attrs:{visible:e.mapVisible,title:"设置地址",sceneId:e.sceneId,inputValue:e.autoValue},on:{"update:visible":function(t){e.mapVisible=t},ok:e.handleMapOk}})],1)};ge._withStripped=!0;const ve=A({render:ge,staticRenderFns:[]},void 0,me,void 0,!1,void 0,!1,void 0,void 0,void 0);var ye={name:"AreaSelect",props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:"span"},bottom:{type:String,default:"24px"},level:{type:Number,default:3},disabled:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}},url:{type:String,default:""},loadData:{type:Function,default:null},dealData:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1}},data:function(){return{model:[{name:"province",label:"省"},{name:"city",label:"市"},{name:"district",label:"区"}],selectData:[],areaData:{province:[],city:[],district:[]},$request:null}},watch:{value:{handler:function(e){if(e.length){if(e[e.length-1]===this.selectData[this.selectData.length-1])return;this.dealValue()}else this.selectData=[],this.areaData.city=[],this.areaData.district=[]},deep:!0}},mounted:function(){var e=this;this.url?this.$request=function(t){return e.$get(e.url,t)}:this.$request=this.loadData,this.value.length?this.dealValue():this.getList()},methods:{getList:function(e,t,n){var a=this;this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){e||(a.areaData.province=n.data),e&&!t&&(a.areaData.city=n.data),e&&t&&(a.areaData.district=n.data)}))},dealValue:function(e,t,n){for(var a=this,i=JSON.parse(JSON.stringify(this.value)),o=0;o<i.length;o++)if(!i[o]){i.splice(o,i.length);break}this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){var o=n.data;e||(a.areaData.province=o,i[0]&&a.dealValue(i[0]),1===i.length&&(a.selectData=i,a.dealResult())),e&&!t&&(a.areaData.city=o,i[1]&&a.dealValue(i[0],i[1]),2===i.length&&(a.selectData=i,a.dealResult())),e&&t&&(a.areaData.district=o,3===i.length&&(a.selectData=i,a.dealResult()))}))},handleChange:function(e,t){"province"===t.name&&(this.areaData.city=[],this.areaData.district=[],this.selectData=[e],this.getList(e)),"city"===t.name&&(this.areaData.district=[],this.selectData=[this.selectData[0],e],this.getList.apply(this,ue(this.selectData))),this.dealResult(),this.$emit("input",JSON.parse(JSON.stringify(this.selectData)))},dealResult:function(){var e=this,t=this.areaData.province.filter((function(t){return t.id===e.selectData[0]}))[0]||null,n=this.areaData.city.filter((function(t){return t.id===e.selectData[1]}))[0]||null,a=this.areaData.district.filter((function(t){return t.id===e.selectData[2]}))[0]||null;this.$emit("change",this.selectData,{province:t,city:n,district:a})}}};const be=ye;var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{staticClass:"area-wrap",attrs:{gutter:12}},[e._l(e.model,(function(t,a){return[a<=e.level-1?n("a-col",{key:a,style:{marginBottom:"span"===e.type||e.model.length-1===a?"":e.bottom},attrs:{span:"span"===e.type?24/e.model.length:24}},[n("a-select",{staticClass:"area-select",attrs:{placeholder:t.label,disabled:e.disabled},on:{change:function(n){return e.handleChange(n,t)}},model:{value:e.selectData[a],callback:function(t){e.$set(e.selectData,a,t)},expression:"selectData[index]"}},e._l(e.areaData[t.name],(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e()]}))],2)};we._withStripped=!0;var ke={name:"AddressBox",props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},syncInputBox:{type:Boolean,default:!0},value:{type:Object,default:function(){return{address:"",province:"",cityName:"",city:"",provinceName:"",districtName:"",district:"",fullAddress:"",lng:"",lat:"",point:null}}}},data:function(){var e=this;return{actForm:{address:""},outerLocation:{},area:[],areaData:null,confirmLoading:!1,mapLoadArea:!1,getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(D.city,t):t.provinceId&&t.cityId?e.$get(D.district,t):void 0:e.$get(D.province,t)},getAddressCodeByName:function(t){return e.$get(L,t)},isFirst:!0}},components:{AddressSearch:ve,AreaSelect:A({render:we,staticRenderFns:[]},void 0,be,void 0,!1,void 0,!1,void 0,void 0,void 0)},watch:{value:{handler:function(){this.generateForm()},deep:!0},actForm:{handler:function(e){this.isFirst?this.isFirst=!1:this.$emit("inputChange",e)},deep:!0}},mounted:function(){this.generateForm()},methods:{generateForm:function(){this.actForm=X({address:"",province:"",city:"",district:""},this.value),this.area=[],this.actForm.province&&this.area.push(this.actForm.province),this.actForm.city?this.area.push(this.actForm.city):this.actForm.province||(this.area=[]),this.actForm.district?this.area.push(this.actForm.district):this.actForm.province||this.actForm.district||(this.area=[])},handleMapOk:function(e){var t=this;return _(S.mark((function n(){return S.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,"地图选择 ok----"),e.adcode){n.next=3;break}return n.abrupt("return");case 3:e&&(t.getAddressCodeByName({provinceName:e.province,cityName:e.city,districtName:e.district}).then((function(e){t.mapLoadArea=!0;var n=e.data,a=n.subAddress,i=a.subAddress;t.area=[n.id,a.id,i.id]})),t.actForm.address=e.title||e.address,t.$emit("input",t.actForm));case 4:case"end":return n.stop()}}),n)})))()},handleAreaChange:function(e,t){if(this.areaData=t,this.mapLoadArea)return this.actForm.province=e[0],this.actForm.city=e[1],this.actForm.district=e[2],this.actForm.provinceName=t.province.name,this.actForm.cityName=t.city.name,this.actForm.districtName=t.district.name,this.$emit("input",this.actForm),void(this.mapLoadArea=!1);this.actForm=X(X({},this.actForm),{},{province:t.province&&t.province.id,city:t.city&&t.city.id,district:t.district&&t.district.id,provinceName:t.province&&t.province.name,cityName:t.city&&t.city.name,districtName:t.district&&t.district.name}),this.syncInputBox&&(this.actForm.address="".concat(t.province&&t.province.name||"").concat(t.city&&t.city.name||"").concat(t.district&&t.district.name||"")),this.$emit("input",this.actForm)},getData:function(){return this.areaData}}};const Ce=ke;var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model-item",{attrs:{label:"省/市/区",prop:"area"}},[n("area-select",{attrs:{loadData:e.getRegion},on:{change:e.handleAreaChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"详细地址",prop:"address"}},[n("address-search",{ref:"autoComplete",attrs:{sceneId:e.sceneId,maxLength:e.maxLength,defaultBtn:""},on:{change:e.handleMapOk},model:{value:e.actForm.address,callback:function(t){e.$set(e.actForm,"address",t)},expression:"actForm.address"}})],1)],1)};_e._withStripped=!0;const Se=A({render:_e,staticRenderFns:[]},void 0,Ce,void 0,!1,void 0,!1,void 0,void 0,void 0);Se.install=function(e){e.component(Se.name,Se)},v.default.ISREPEAT=function(e){return Object.keys(v.default).includes(e)},v.default.date.calcWeek=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY/MM/DD",a=new Date(t),i=v.default.date.endOf("week",a,n),o=v.default.date.add(e,"w",i,n),r=v.default.date.endOf("w",o,n),s=v.default.date.startOf("w",o,n);return{start:s,end:r}},v.default.date.calcMonth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=new Date(e),a=v.default.date.startOf("month",n,t),i=v.default.date.endOf("month",n,t);return{start:a,end:i}},v.default.date.mandom=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0,n=new Date(e),a=n.getMonth()+1,i=v.default.date.daysInMonth(n),o=[],r=1;r<=i;r++)o.push(v.default.date.format(v.default.date.format("2021/".concat(a,"/").concat(r),"YYYY-MM-DD")+" ".concat(v.default.rangeRandom(0,23),":").concat(v.default.rangeRandom(0,59)),t||"YYYY-MM-DD hh:mm"));return o[v.default.rangeRandom(1,i)[0]]},v.default.date.period=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=new Date(n);if(1===e)return v.default.date.calcWeek(0,a,t);if(2===e)return{start:v.default.date.subtract(6,"day",a,t),end:v.default.date.format(t)};if(3===e)return v.default.date.calcMonth(a,t);if(4===e){var i=v.default.date.endOf("week",a,t);return{start:v.default.date.subtract(20,"day",i,t),end:i}}var o=v.default.date.subtract(2,"month",v.default.date.startOf("month",a),t),r=v.default.date.endOf("month",a,t);return{start:o,end:r}},v.default.date.isPeriod=function(e,t){return 1===e||2===e?v.default.date.isToday(t):3===e&&void 0},Map.prototype.getByKey=function(e){var t=ue(this.keys()),n=t.findIndex((function(t){return Array.isArray(t)&&t.includes(e)}));return this.get(t[n])},v.default.amap={jsonpRequest:function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.TMAPCALLBACK[n]=function(e){t=e},document.querySelector("body").appendChild(a);var i=function(){document.querySelector("body").removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},parsePoint:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){var a=v.default.urlSerialize("",Object.assign({key:"d59ce84bb495eccd65a4d238c8c06977"},t)),i="https://restapi.amap.com/v3/geocode/geo".concat(a);console.log(i,"请求地址"),n(e.jsonpRequest(i))}))},loadScript:function(e,t){var n=this;return new Promise((function(a,i){var o=document.createElement("script");t&&n.setAttr(o,t),o.onload=function(){return a(o)},o.onerror=function(){return i(o)},o.src=e,document.querySelector("body").appendChild(o)}))},isLoad:function(){for(var e=document.getElementsByTagName("script"),t=!1,n=0;n<e.length;n++)e[n].getAttribute("src").includes("https://webapi.amap.com/maps?v=1.4.6&key=d59ce84bb495eccd65a4d238c8c06977&plugin=AMap.Geocoder")&&(t=!0);return t},setAttr:function(e,t){for(var n in t)e.setAttribute(n,t[n])}},v.default.caputured=function(){var e=_(S.mark((function e(t){var n,a,i,o,r=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",[null,o]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[e.t0,null]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w.default.prototype.$caputured=function(){var e=_(S.mark((function e(t){var n,a,i,o,r=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",{err:null,res:o});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{err:e.t0,res:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v.default.try=function(e,t){try{e&&e()}catch(e){t&&t(e)}},v.default.jsonToArray=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return[].concat(ue(t),[U({},n,e[n])])}),[])},v.default.icon={report:{iconList:{1:"iconreport01",2:"iconreport02",3:"iconreport03",4:"iconreport04",5:"iconreport05",6:"iconreport06",7:"iconreport07",8:"iconreport08",9:"iconreport09",10:"iconreport10",11:"iconreport11",12:"iconreport12",13:"iconreport13",15:"iconreport15",16:"iconreport16",17:"iconreport17",18:"iconreport18",19:"iconreport19",20:"iconreport20",21:"iconreport21",22:"iconreport22",23:"iconreport23",24:"iconreport24",25:"iconreport25",26:"iconreport26",27:"iconreport27",28:"iconreport28",29:"iconreport29",30:"iconreport30",31:"iconreport31",32:"iconreport32",33:"iconreport33",34:"iconreport34",35:"iconreport35",36:"iconreport36",37:"iconreport37",38:"iconreport38",39:"iconreport39",40:"iconreport40",41:"iconreport41",42:"iconreport42",43:"iconreport43",44:"iconreport44",45:"iconreport45",46:"iconreport46",47:"iconreport47",48:"iconreport48"},colorList:{1:"#0289ff",2:"#00c359",3:"#fc943d",4:"#fb602c"}},approve:{iconList:{},colorList:{}}},v.default.mapHandler=function(e,t,n){var a=Object.keys(e).find((function(e){return JSON.parse(e).includes(t)}));a?e[a]():n&&n()};var xe={name:"EditorAddress",components:{AddressBox:Se},props:{visible:{type:Boolean,default:!1},editData:{type:Object,default:function(){return{}}},customerId:{type:String,default:null,require:!0},hasAddress:{type:Boolean,default:!1}},data:function(){return{form:{deliveryMethod:"",deliveryId:void 0,deliveryName:"",logisticsId:void 0,logisticsName:"",customerName:"",phone:"",detailAddress:"",address:"",province:"",city:"",district:"",longitude:"",latitude:"",provinceName:"",cityName:"",districtName:"",fullAddress:"",loadingInfo:"",allAddress:void 0,isDefault:!1},confirmLoading:!1,basicRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}]},logisticsRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}],customerName:[{required:!0,message:"请输入",trigger:"change"}],phone:[{required:!0,message:"请输入",trigger:"change"}],allAddress:[{required:!0,message:"请选择",trigger:"change"}]},backForm:null,syncInputBox:!0,deliveryTypes:{data:[],loading:!1},logisticsCorps:{data:[],loading:!1}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},rules:function(){return 2===this.form.deliveryMethod?this.logisticsRules:this.basicRules},isUpdateMode:function(){return!!this.form.businessId},title:function(){return this.isUpdateMode?"编辑收货信息":"新增收货信息"}},watch:{visible:function(e){var t=this;return _(S.mark((function n(){return S.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.handleGetDeliveryType();case 3:return n.next=5,t.handleGetLogistcsCorp();case 5:t.editData&&t.editData.businessId?(t.syncInputBox=!1,t.form=t.editData,t.form.address=t.form.detailAddress,t.form.loadingInfo=t.form.loadingInfo||t.form.fullAddress):(t.syncInputBox=!0,t.form={deliveryId:t.deliveryTypes.data.length&&t.deliveryTypes.data[0].value,customerName:"",isDefault:!t.hasAddress});case 6:case"end":return n.stop()}}),n)})))()},backForm:{handler:function(e){var t=this;e&&(this.form.address=e.address,this.form.province=e.province,this.form.city=e.city,this.form.district=e.district,this.form.detailAddress=e.address,e.address&&e.province&&e.city&&e.district?(this.form.allAddress=!0,this.$nextTick((function(){t.$refs.allAddress&&t.$refs.allAddress.onFieldChange()}))):this.form.allAddress=void 0)},deep:!0}},methods:{handleGetDeliveryType:function(){var e=this;return _(S.mark((function t(){var n,a;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.deliveryTypes.loading=!0,t.next=4,e.$get(T);case 4:n=t.sent,a=n.data,e.deliveryTypes.data=a.map((function(e){return X({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.deliveryTypes.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},handleGetLogistcsCorp:function(){var e=this;return _(S.mark((function t(){var n,a;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.logisticsCorps.loading=!0,t.next=4,e.$get($);case 4:n=t.sent,a=n.data,e.logisticsCorps.data=a.map((function(e){return X({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.logisticsCorps.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},onDeliveryTypeChange:function(e){var t=this.deliveryTypes.data.find((function(t){return t.value===e}));t&&(this.form.deliveryMethod=t.requireOption)},changePhone:function(e){this.form.phone=e.replace(/[\u4E00-\u9FA5]|[A-Za-z]/g,"")},changeRadio:function(){this.form.isDefault=!this.form.isDefault},handleOk:function(){var e=this;this.$refs.ruleFormReceipt.validate(function(){var t=_(S.mark((function t(n){var a,i,o,r,s,l,c,u,d,h,f,p,m,g;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=46;break}if(a=e.deliveryTypes.data.find((function(t){return t.value===e.form.deliveryId})),2!==e.form.deliveryMethod){t.next=23;break}if(i=e.form.provinceName,o=e.form.cityName,r=e.form.districtName,s=e.form.address,l=[i,o,r,s].join(""),c="",!l){t.next=13;break}return t.next=12,v.default.amap.parsePoint({address:l});case 12:c=t.sent;case 13:u=c?c.geocodes:[],e.form.longitude=u.length?u[0].location.split(",")[0]:"",e.form.latitude=u.length?u[0].location.split(",")[1]:"",d=[i,o,r].join(""),h="",h=d.includes(s)?d:s.includes(d)?s:d===s?d:l,f=e.logisticsCorps.data.find((function(t){return t.value===e.form.logisticsId})),e.form.logisticsName=f&&f.label,e.form.fullAddress=h,e.form.detailAddress=e.form.address;case 23:return 1===e.form.deliveryMethod&&(e.form.fullAddress=e.form.loadingInfo),e.form.deliveryName=a.label,e.$emit("confirm",e.form),t.prev=26,e.confirmLoading=!0,t.next=30,e.$post(e.isUpdateMode?F:I,X({customerId:e.customerId},e.form));case 30:if(p=t.sent,m=p.data,g=p.message,m){t.next=35;break}throw new Error(g);case 35:e.$message.success("操作成功！"),e.$emit("success"),t.next=43;break;case 39:t.prev=39,t.t0=t.catch(26),e.$message.error(t.t0),console.error(t.t0);case 43:return t.prev=43,e.confirmLoading=!1,t.finish(43);case 46:case"end":return t.stop()}}),t,null,[[26,39,43,46]])})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.modalVisible=!1,this.$emit("cancel")},afterClose:function(){this.syncInputBox=!0,this.form={customerName:"",isDefault:!1}},inputChange:function(e){this.isUpdateMode&&(this.syncInputBox=!0),this.backForm=X(X({},this.form),e)},changeTextarea:function(){this.form.loadingInfo.length>=500&&this.$message.info("限500字")}}};const Re=xe;var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"receipt-dialog-wrap",attrs:{afterClose:e.afterClose,"confirm-loading":e.confirmLoading,maskClosable:!1,title:e.title,width:500,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("a-form-model",{ref:"ruleFormReceipt",attrs:{"label-col":{span:5},model:e.form,rules:e.rules,"wrapper-col":{span:17}}},[n("a-form-model-item",{attrs:{label:"发货方式",prop:"deliveryId"}},[n("a-select",{attrs:{loading:e.deliveryTypes.loading,placeholder:"请选择"},on:{change:e.onDeliveryTypeChange},model:{value:e.form.deliveryId,callback:function(t){e.$set(e.form,"deliveryId",t)},expression:"form.deliveryId"}},e._l(e.deliveryTypes.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),e._v(" "),2===e.form.deliveryMethod?[n("a-form-model-item",{attrs:{label:"物流公司",prop:"logisticsId"}},[n("a-select",{attrs:{loading:e.logisticsCorps.loading,placeholder:"请选择"},model:{value:e.form.logisticsId,callback:function(t){e.$set(e.form,"logisticsId",t)},expression:"form.logisticsId"}},e._l(e.logisticsCorps.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),e._v(" "),n("a-form-model-item",{attrs:{label:"收货人",prop:"customerName"}},[n("a-input",{staticClass:"customer-name-wrap",attrs:{maxLength:50,suffix:e.form.customerName.length+"/50",placeholder:"请输入"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName","string"==typeof t?t.trim():t)},expression:"form.customerName"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"联系方式",prop:"phone"}},[n("a-input",{attrs:{maxLength:50,placeholder:"请输入"},on:{change:function(t){return e.changePhone(e.form.phone)}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),n("a-form-model-item",{ref:"allAddress",staticStyle:{"margin-bottom":"0"},attrs:{label:"所在地区",prop:"allAddress"}},[n("a-form-model",{staticClass:"cus-address-wrap",attrs:{"label-col":{span:0},"wrapper-col":{span:24}}},[n("address-box",{attrs:{maxLength:100,syncInputBox:e.syncInputBox},on:{inputChange:e.inputChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)]:e._e(),e._v(" "),1===e.form.deliveryMethod?n("a-form-model-item",{attrs:{label:"装车信息",prop:"loadingInfo"}},[n("a-textarea",{attrs:{maxLength:500,placeholder:"限500字",rows:5},on:{change:e.changeTextarea},model:{value:e.form.loadingInfo,callback:function(t){e.$set(e.form,"loadingInfo","string"==typeof t?t.trim():t)},expression:"form.loadingInfo"}})],1):e._e(),e._v(" "),n("a-radio",{staticStyle:{"margin-left":"76px"},attrs:{checked:e.form.isDefault},on:{click:e.changeRadio}},[e._v("设为默认")])],2)],1)};Oe._withStripped=!0;const De=A({render:Oe,staticRenderFns:[]},void 0,Re,"data-v-0c26a3f4",!1,void 0,!1,void 0,void 0,void 0);De.install=function(e){e.component(De.name,De)};const Le={name:"DSelectAddress",components:{CellEllipsisTip:j,STable:te,EditorAddress:De},props:{width:{type:Number,default:816},cache:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},setContainer:{type:Function,default:function(){return document.querySelector("body")}},customerId:{type:String,default:null,require:!0},title:{type:String,default:"选择收货地址"},beforeClose:{type:Function,default:void 0},value:{type:Object,default:void 0}},data:function(){return{currentMark:-1,addressDetailsShow:!1,clickReceipt:null,opened:!1,list:{data:[],loading:!1,selected:null}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&((!this.cache||this.cache&&!this.opened)&&(this.list.selected=null,this.getDeliverys()),this.opened=!0)}},methods:{getDeliverys:function(){var e=this;return _(S.mark((function t(){var n,a;return S.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.list.loading=!0,t.next=4,e.$post(V,{businessId:e.customerId});case 4:n=t.sent,a=n.data,e.list.data=a||[],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.list.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},deleteAddress:function(e){var t=this;this.$confirm({title:"操作提示！",content:"您是否确定删除此地址？",okText:"确定",cancelText:"取消",onOk:function(){return _(S.mark((function n(){return S.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(E,{businessId:e.businessId,customerId:e.customerId});case 3:e.businessId===t.list.selected&&(t.list.selected=null),t.$message.success("操作成功！"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:return n.prev=10,t.getDeliverys(),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})))()}})},setDefault:function(e){var t=this;return _(S.mark((function n(){var a,i,o;return S.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(P,{businessId:e.businessId,customerId:e.customerId});case 3:if(a=n.sent,i=a.data,o=a.message,i){n.next=8;break}throw new Error(o);case 8:t.$message.success("操作成功！"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0);case 14:return n.prev=14,t.getDeliverys(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))()},handleSelectAddress:function(e){this.list.selected=e.businessId},editAddress:function(e){this.clickReceipt=e,this.addressDetailsShow=!0},addAddress:function(){this.clickReceipt=null,this.addressDetailsShow=!0},onEditAddressSucceed:function(){this.addressDetailsShow=!1,this.getDeliverys()},handleOk:function(){var e=this,t=this.list.data.find((function(t){return t.businessId===e.list.selected}));this.beforeClose?this.beforeClose({data:this.list.selected,rows:[t]}):this.$emit("confirm",{data:this.list.selected,rows:[t]}),this.modalVisible=!1},handleCancel:function(){this.$emit("cancel"),this.modalVisible=!1}}};var Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-address",attrs:{footer:null,"get-container":e.setContainer,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.list.loading,expression:"list.loading"}],staticClass:"select-address-content"},[e.list.data&&e.list.data.length>0?n("div",[n("a-radio-group",{staticStyle:{width:"100%"},model:{value:e.list.selected,callback:function(t){e.$set(e.list,"selected",t)},expression:"list.selected"}},e._l(e.list.data,(function(t,a){return n("div",{key:a,staticClass:"content-item",class:{"auto-class":"zt"===t.type||"nothing"===t.type},on:{mouseenter:function(t){e.currentMark=a},mouseleave:function(t){e.currentMark=-1},click:function(n){return n.stopPropagation(),e.handleSelectAddress(t)},dblclick:function(t){return t.stopPropagation(),e.handleOk(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentMark===a,expression:"currentMark === index"}],staticClass:"row-btn"},[n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.setDefault(t)}}},[e._v("设为默认")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.editAddress(t)}}},[e._v("修改")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.deleteAddress(t)}}},[e._v("删除")])],1),e._v(" "),n("div",[n("a-radio",{style:{display:"block",height:"30px",lineHeight:"30px",marginRight:"14px"},attrs:{value:t.businessId}})],1),e._v(" "),n("div",{staticClass:"details"},[n("div",[e._v("\n              "+e._s(t.deliveryName||"")+"\n                \n              "),t.isDefault?n("a-tag",{attrs:{color:"blue"}},[e._v("默认")]):e._e()],1),e._v(" "),t.customerName&&t.phone?n("div",[e._v(e._s(t.customerName)+"  "+e._s(t.phone))]):e._e(),e._v(" "),t.detailAddress&&2===t.deliveryMethod?n("div",[e._v(e._s(t.detailAddress))]):e._e(),e._v(" "),t.fullAddress&&2!==t.deliveryMethod?n("div",[e._v(e._s(t.fullAddress))]):e._e()])])})),0)],1):n("div",{staticClass:"empty"},[n("a-empty",{attrs:{description:"暂无数据"}})],1)]),e._v(" "),n("div",{staticClass:"select-address-footer"},[n("div",{on:{click:e.addAddress}},[e._v("+新增收货地址")]),e._v(" "),n("div",[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n      "),n("a-button",{attrs:{disabled:!e.list.selected,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)]),e._v(" "),n("EditorAddress",{attrs:{customerId:e.customerId,"edit-data":e.clickReceipt,visible:e.addressDetailsShow,hasAddress:!!e.list.data.length},on:{"update:visible":function(t){e.addressDetailsShow=t},cancel:function(t){e.addressDetailsShow=!1},success:e.onEditAddressSucceed}})],1)};Te._withStripped=!0;const $e=A({render:Te,staticRenderFns:[]},void 0,Le,void 0,!1,void 0,!1,void 0,void 0,void 0);return $e.install=function(e){e.component($e.name,$e)},$e}))},f183:function(e,t,n){var a=n("23e7"),i=n("e330"),o=n("d012"),r=n("861d"),s=n("1a2d"),l=n("9bf2").f,c=n("241c"),u=n("057f"),d=n("4fad"),h=n("90e3"),f=n("bb2f"),p=!1,m=h("meta"),g=0,v=function(e){l(e,m,{value:{objectID:"O"+g++,weakData:{}}})},y=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[m].objectID},b=function(e,t){if(!s(e,m)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[m].weakData},w=function(e){return f&&p&&d(e)&&!s(e,m)&&v(e),e},k=function(){C.enable=function(){},p=!0;var e=c.f,t=i([].splice),n={};n[m]=1,e(n).length&&(c.f=function(n){for(var a=e(n),i=0,o=a.length;i<o;i++)if(a[i]===m){t(a,i,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},C=e.exports={enable:k,fastKey:y,getWeakData:b,onFreeze:w};o[m]=!0},f9f1:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("d3b7"),n("b64b"),n("caad"),n("a15b"),n("159b"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("2b0e"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("d81d"),n("99af"),n("2532"),n("a434"),n("cfba"),n("07ac"),n("b680"),n("50f6"),n("3177"),n("2ca0"),n("7db0"),n("7edb"),n("aa47"),n("fb19"),n("73c8"),n("04b3"),n("4e82"),n("9911"),n("e439"),n("90b7"),n("7569"),n("25f0"),n("498a"),n("4ec9"),n("3ca3"),n("ddb0"),n("c740"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x,R,O,D,L,T,$,V,I,F,E,P,A,N,M,j,B,K,z,H,q,W,U,G,Y,X,J,Q,Z,ee,te,ne,ae,ie){"use strict";function oe(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var re=oe(h),se=oe(K),le=oe(q),ce=oe(W),ue=oe(Y),de=oe(X),he=oe(J);function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){ge(o,a,i,r,s,"next",e)}function s(e){ge(o,a,i,r,s,"throw",e)}r(void 0)}))}}var ye=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),be=ye,we="/gateway/saas-platform-service/api/v1/",ke="/gateway/goodsservice/api/v1/",Ce="/gateway/customer-service/api/v1/",_e="/gateway/logisticsservice/api/v1/",Se={province:"".concat(we,"address/province"),city:"".concat(we,"address/city"),district:"".concat(we,"address/district")},xe="".concat(we,"address/get_by_name"),Re="".concat(ke,"goods/custom/list"),Oe="".concat(Ce,"order/get_region_list"),De="".concat(Ce,"order/get_customer_list"),Le="".concat(Ce,"order/get_customer_type_list"),Te="".concat(ke,"setting/query_goods_attr_setting_list"),$e="".concat(ke,"price_system/leve_price_name/select_list"),Ve="".concat(ke,"/category/get_category_list_with_nocategory_qty"),Ie="".concat(ke,"setting/query_goods_attr_setting_list"),Fe="".concat(ke,"warehouse/list"),Ee="".concat(ke,"goods/get_sku_unit_list"),Pe="".concat(we,"staffer/get_corp_all"),Ae="".concat(ke,"category/get_category_list"),Ne="".concat(ke,"warehouse/get_warehouse_by_corp_id"),Me="".concat(ke,"price_system/leve_price/select_list"),je="".concat(we,"department/get_corp_tree"),Be="".concat(we,"staffer/list"),Ke="".concat("/gateway/billservice/api/v1/","account/check_list"),ze="".concat(_e,"deliveryMethod/list"),He="".concat(_e,"deliveryMethod/list"),qe="".concat(_e,"logisticsCorp/custom/list"),We="".concat(_e,"logisticsCorp/system/list"),Ue="".concat(_e,"logisticsCorp/custom/list"),Ge="".concat(Ce,"order/get_deliverys"),Ye="".concat(Ce,"order/add_delivery"),Xe="".concat(Ce,"order/update_delivery"),Je="".concat(Ce,"order/delete_delivery"),Qe="".concat(Ce,"order/set_default_delivery");function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){var t=!1;return function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(){e.apply(n,i),t=!1})))}}function tt(e){if(!e&&"object"!==Ze(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Ze(e[n])?t[n]=tt(e[n]):t[n]=e[n]})),t}"object"!==("undefined"==typeof Int8Array?"undefined":Ze(Int8Array))&&(re.default.prototype.$isServer||document.childNodes);var nt=function(e){return!e||"{}"===JSON.stringify(e)||"[]"===JSON.stringify(e)||!e},at=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&null!==e[n]&&void 0!==e[n]&&(t[n]=e[n]);return t};function it(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];void 0!==o&&(e[i]=o)}}return e}var ot={name:"MixSearchInput",props:{value:{type:[Object,String],default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},maxLength:{type:Number,default:40},name:{type:String,default:""},next:{type:Function,default:void 0},restore:{type:Boolean,default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",loading:!1,dataList:[],readonly:!1,dialogFocus:!1,localDataCache:null,isBlur:!1,replaceFields:{key:"id",name:"name"}}},watch:{value:{handler:function(e){this.inputValue=e?e.name||e.value:void 0},deep:!0,immediate:!0}},methods:{generateRequest:function(){var e=arguments,t=this;return ve(be.mark((function n(){var a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y,b,w,k,C,_,S,x;return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},t.loading=!0,!["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(t.name)){n.next=12;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName",code:"code",barCode:"barCode"},n.next=6,t.$get(Re,it({type:4,isShowSku:!0,pageNum:1,pageSize:30},a,t.dialogConfig.rules));case 6:return i=n.sent,o=i.data,t.localDataCache=o?o.list:[],n.abrupt("return",o?o.list:[]);case 12:if(!["person","preparer","handler"].includes(t.name)){n.next=25;break}if(!t.localDataCache){n.next=17;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 17:return n.next=19,t.$get(Pe,t.dialogConfig.rules);case 19:return r=n.sent,s=r.data,t.localDataCache=s,n.abrupt("return",s);case 23:n.next=138;break;case 25:if(!["warehouse"].includes(t.name)){n.next=34;break}return n.next=28,t.$get(Fe,me(me({pageNum:1,pageSize:30},a),t.dialogConfig.rules));case 28:return l=n.sent,c=l.data,t.localDataCache=c?c.list:[],n.abrupt("return",c?c.list:[]);case 34:if(!["customer","supplier","supplierCustomer"].includes(t.name)){n.next=44;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName"},n.next=38,t.$post(De,me(me({pageNum:1,pageSize:30},a),t.dialogConfig.rules));case 38:return u=n.sent,d=u.data,t.localDataCache=d?d.list:[],n.abrupt("return",d?d.list:[]);case 44:if(!["unit","brand","tag"].includes(t.name)){n.next=57;break}if(!t.localDataCache){n.next=49;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 49:return n.next=51,t.$post(Ie,me({type:["unit","brand","tag"].indexOf(t.name)},t.dialogConfig.rules));case 51:return h=n.sent,f=h.data,t.localDataCache=f,n.abrupt("return",f);case 55:n.next=138;break;case 57:if(!["rateUnit"].includes(t.name)){n.next=71;break}if(t.replaceFields={key:"id",name:"unitName"},!t.localDataCache){n.next=63;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 63:return n.next=65,t.$post(Ee,t.dialogConfig.productId);case 65:return p=n.sent,m=p.data,t.localDataCache=m,n.abrupt("return",m);case 69:n.next=138;break;case 71:if(!["account"].includes(t.name)){n.next=84;break}if(!t.localDataCache){n.next=76;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 76:return n.next=78,t.$get(Ke,me({accountType:t.dialogConfig.payType||1,customerId:t.dialogConfig.customerId},t.dialogConfig.rules));case 78:return g=n.sent,v=g.data,t.localDataCache=v,n.abrupt("return",v);case 82:n.next=138;break;case 84:if("delivery"!==t.name){n.next=97;break}if(!t.localDataCache){n.next=89;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 89:return n.next=91,t.$get(ze,t.dialogConfig.rules);case 91:return y=n.sent,b=y.data,t.localDataCache=b,n.abrupt("return",b);case 95:n.next=138;break;case 97:if("logistics"!==t.name){n.next=110;break}if(!t.localDataCache){n.next=102;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 102:return n.next=104,t.$get(We,t.dialogConfig.rules);case 104:return w=n.sent,k=w.data,t.localDataCache=k,n.abrupt("return",k);case 108:n.next=138;break;case 110:if("customLogistics"!==t.name){n.next=123;break}if(!t.localDataCache){n.next=115;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 115:return n.next=117,t.$get(Ue,t.dialogConfig.rules);case 117:return C=n.sent,_=C.data,t.localDataCache=_,n.abrupt("return",_);case 121:n.next=138;break;case 123:if("address"!==t.name){n.next=137;break}if(t.replaceFields={key:"businessId",name:"deliveryName"},!t.localDataCache){n.next=129;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 129:return n.next=131,t.$post(Ge,{businessId:t.dialogConfig.customerId});case 131:return S=n.sent,x=S.data,t.localDataCache=x,n.abrupt("return",x);case 135:n.next=138;break;case 137:console.log("未知的 name:",t.name);case 138:case"end":return n.stop()}}),n)})))()},generateLocalSearch:function(e){var t=this,n=[];return this.localDataCache.forEach((function(a){-1!==a[t.replaceFields.name].indexOf(e)&&n.push(a)})),n},clickHandle:function(){var e=this;this.disabled||this.next&&!this.next("mixSearch","click")||this.dialogFocus||(this.dialogFocus=!0,this.$emit("enterHandle",{data:null,action:"click",inputValue:this.inputValue,callback:function(){this.inputValue=""}}),setTimeout((function(){e.dialogFocus=!1,(e.value&&e.value.name!==e.inputValue||!e.value)&&(e.inputValue="")}),300))},handleInputClick:function(){this.dialogConfig.readonly&&this.clickHandle()},enterHandle:function(){var e=this;this.next&&!this.next("mixSearch","enter")||this.dialogFocus||(this.dialogFocus=!0,this.inputValue?this.generateRequest({keywords:this.inputValue}).then((function(t){e.dataList=t,e.loading=!1,e.matchingData("enter")})).catch((function(){e.loading=!1})).finally((function(){setTimeout((function(){e.dialogFocus=!1}),300)})):(this.dataList=[],this.loading=!1,this.matchingData("enter"),setTimeout((function(){e.dialogFocus=!1}),300)))},matchingData:function(e){var t=this,n=function(){var n=null,a=nt(t.value);if(t.dataList.length&&t.inputValue)for(var i=0;i<t.dataList.length;i++){var o=t.dataList[i];o[t.replaceFields.name]!==t.inputValue&&o[t.replaceFields.pinyin]!==t.inputValue&&o[t.replaceFields.code]!==t.inputValue&&o[t.replaceFields.barCode]!==t.inputValue||(n=o)}else a||t.inputValue!==t.value.name&&t.inputValue!==t.value.value||(n=t.value);t.restore&&"blur"===e&&(n||a||(t.inputValue=t.value.name||t.value.value,n=t.value)),t.$emit("enterHandle",{data:n,rows:n?[n]:null,action:e,inputValue:t.inputValue,baseRows:t.dataList}),t.inputValue=""};if(this.loading)var a=setInterval((function(){t.loading||(n(),clearInterval(a),a=null)}),500);else n()},changeHandle:function(){if(this.isBlur||this.inputValue||this.$emit("clear"),this.readonly){var e=nt(this.value);this.inputValue=e?this.value.name||this.value.value:""}},blurHandle:function(){var e=this;this.isBlur=!1,setTimeout((function(){e.dialogFocus||(e.inputValue?(nt(e.value)||e.inputValue!==e.value.name)&&e.matchingData("blur"):e.restore?e.inputValue=e.value.name||e.value.value:e.value&&e.$emit("clear"))}),300)},focusHandle:function(){this.isBlur=!0,this.readonly=this.next&&!this.next("mixSearch","focus")},focus:function(){this.$refs.mixSearchInput.focus()}}};function rt(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const st=ot;var lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input",{ref:"mixSearchInput",staticClass:"mix-search-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,allowClear:e.allowClear,maxLength:e.maxLength,title:e.inputValue,readOnly:e.dialogConfig.readonly},on:{pressEnter:e.enterHandle,change:e.changeHandle,blur:e.blurHandle,focus:e.focusHandle,click:e.handleInputClick},scopedSlots:e._u([{key:"suffix",fn:function(){return[n("a-button",{attrs:{type:"link",icon:e.loading?"loading":"ellipsis"},on:{click:e.clickHandle}})]},proxy:!0}]),model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})};lt._withStripped=!0;const ct=rt({render:lt,staticRenderFns:[]},void 0,st,"data-v-f165b002",!1,void 0,!1,void 0,void 0,void 0);function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function dt(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ht={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return me(me({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=me({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=fe({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===Ze(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=me(me({},e.selectionContent.selectedRows),{},fe({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=fe({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};const ft={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:se.default},methods:{handleClick:function(){this.$emit("click")}}};var pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};pt._withStripped=!0;const mt=rt({render:pt,staticRenderFns:[]},void 0,ft,void 0,!1,void 0,!1,void 0,void 0,void 0);var gt=re.default.prototype.$isServer,vt=!gt&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},yt=!gt&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};re.default.use(le.default);var bt={CONTAIN:{name:"contain",icon:"fullscreen"},ORIGINAL:{name:"original",icon:"fullscreen-exit"}},wt=!re.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",kt={name:"hImageViewer",props:{host:{type:String},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},showDown:{type:Boolean,default:!0},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},prefix:{type:[Boolean,String],default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!0,mode:bt.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},baseUrlList:[]}},computed:{picList:function(){var e=this;return this.urlList.filter((function(t,n){return n===e.index}))},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.baseUrlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,a=e.offsetX,i=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(a,"px"),"margin-top":"".concat(i,"px")};return this.mode===bt.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(){var e=this;this.$nextTick((function(){e.$refs.img[0].complete||(e.loading=!0)}))},urlList:{handler:function(){this.exchangeImage()},deep:!0}},methods:{exchangeImage:function(){var e=this.prefix,t=this.baseUrlList,n="";"string"==typeof e?n=e:e&&(n=this.host);for(var a=0;a<this.urlList.length;a++){var i=this.urlList[a];if(/(http|https):\/\//.test(i))t.push(i);else{var o=i.indexOf("/")>0?"/":"";t.push("".concat(n).concat(o?"/":"").concat(i))}}},hide:function(){this.deviceSupportUninstall(),this.onClose()},download:function(){this.$emit("download",this.currentImg)},deviceSupportInstall:function(){var e=this;this._keyDownHandler=et((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=et((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),vt(document,"keydown",this._keyDownHandler),vt(document,wt,this._mouseWheelHandler)},deviceSupportUninstall:function(){yt(document,"keydown",this._keyDownHandler),yt(document,wt,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,a=n.offsetX,i=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=et((function(e){t.transform.offsetX=a+e.pageX-o,t.transform.offsetY=i+e.pageY-r})),vt(document,"mousemove",this._dragHandler),vt(document,"mouseup",(function(){yt(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(bt),t=(Object.values(bt).indexOf(this.mode)+1)%e.length;this.mode=bt[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=me({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),a=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,r=this.transform;switch(e){case"zoomOut":r.scale>.2&&(r.scale=parseFloat((r.scale-a).toFixed(3)));break;case"zoomIn":r.scale=parseFloat((r.scale+a).toFixed(3));break;case"clocelise":r.deg+=i;break;case"anticlocelise":r.deg-=i}r.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["h-image-viewer__wrapper"].focus(),this.exchangeImage()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}};const Ct=kt;var _t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"h-image-viewer__wrapper",staticClass:"h-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"h-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__close",on:{click:e.hide}},[n("a-icon",{attrs:{type:"close"}})],1),e._v(" "),e.isSingle?e._e():[n("span",{staticClass:"h-image-viewer__btn h-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("a-icon",{attrs:{type:"arrow-left"}})],1),e._v(" "),n("span",{staticClass:"h-image-viewer__btn h-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("a-icon",{attrs:{type:"arrow-right"}})],1)],e._v(" "),n("div",{staticClass:"h-image-viewer__btn h-image-viewer__actions"},[n("div",{staticClass:"h-image-viewer__actions__inner"},[n("a-icon",{attrs:{type:"zoom-out"},on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),n("a-icon",{attrs:{type:"zoom-in"},on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),n("a-icon",{attrs:{type:"undo"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),n("a-icon",{attrs:{type:"redo"},on:{click:function(t){return e.handleActions("clocelise")}}}),e._v(" "),e.showDown?n("a-icon",{attrs:{type:"download"},on:{click:e.download}}):e._e()],1)]),e._v(" "),n("div",{staticClass:"h-image-viewer__canvas"},[e._l(e.picList,(function(t){return n("img",{key:t,ref:"img",refInFor:!0,staticClass:"h-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}})})),e._v(" "),e.loading?n("a-icon",{staticClass:"h-image-loading",attrs:{type:"loading"}}):e._e()],2)],2)])};_t._withStripped=!0;const St=rt({render:_t,staticRenderFns:[]},void 0,Ct,void 0,!1,void 0,!1,void 0,void 0,void 0);var xt="",Rt=function(){return void 0!==document.documentElement.style.objectFit},Ot=function(e,t){return Dt(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},Dt=function(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle)[t]},Lt="none",Tt="contain",$t="cover",Vt="fill",It="scale-down",Ft={name:"HImage",inheritAttrs:!1,props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewBtn:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showDown:{type:Boolean,default:!1},initial:{type:Number,default:0},prefix:{type:[Boolean,String],default:!0},popover:{type:Boolean,default:!1},popoverConfig:{type:Object,default:function(){return{placement:"right",trigger:"hover",width:"200px",height:"100%"}}}},components:{IconFontBox:mt,IconFont:se.default,ImageViewer:St},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1,imageSrc:""}},provide:function(){return{download:this.download}},computed:{imgHost:function(){return this.$config?this.$config.cosPrefix:""},imageStyle:function(){var e=this.fit;return window&&e?Rt()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return window&&!Rt()&&this.fit!==Vt},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=this.initial||0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(){this.imageSrc=this.exchangeImage(),this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.imageSrc=this.exchangeImage(),this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{exchangeImage:function(){var e=this.src,t=this.prefix;if(!e)return e;if(/(http|https):\/\//.test(e))return e;var n="";"string"==typeof t?n=t:t&&(n=this.imgHost);var a=e.indexOf("/")>0;return"".concat(n).concat(a?"/":"").concat(e)},handleLazyLoad:function(){var e,t,n,a;e=this.$el,t=this._scrollContainer,a=e.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),a.top<n.bottom&&a.bottom>n.top&&a.right>n.left&&a.left<n.right&&(this.show=!0,this.removeLazyLoadListener())},download:function(e){this.$emit("download",e)},addLazyLoadListener:function(){var e,t,n=this.scrollContainer,a=null;(t=n)&&t.nodeType===Node.ELEMENT_NODE?a=n:(e=n,a="[object String]"===Object.prototype.toString.call(e)?document.querySelector(a):function(e){for(var t=e;t;){if([window,document,document.documentElement].includes(parent))return window;if(Ot(t))return t;t=t.parentNode}return t}(this.$el)),a&&(this._scrollContainer=a,this._lazyLoadHandler=function(e,t,n,a){var i,o=!1,r=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-r;function f(){r=Date.now(),n.apply(d,c)}function p(){i=void 0}o||(a&&!i&&f(),s(),void 0===a&&h>e?f():!0!==t&&(i=setTimeout(a?p:f,void 0===a?e-h:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}(200,this.handleLazyLoad),a.addEventListener("scroll",this._lazyLoadHandler,!1),this.handleLazyLoad())},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(e.removeEventListener("scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},loadImage:function(){var e=this;if(window){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var a=e.$attrs[n];t.setAttribute(n,a)})),t.src=this.imageSrc}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,a=this.$el,i=a.clientWidth,o=a.clientHeight;if(!(t&&n&&i&&o))return{};var r=t/n<1;switch(e===It&&(e=t<i&&n<o?Lt:Tt),e){case Lt:return{width:"auto",height:"auto"};case Tt:return r?{width:"auto"}:{height:"auto"};case $t:return r?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(e){!this.preview&&this.previewBtn||this.openViewer()},openViewer:function(){xt=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0},closeViewer:function(){document.body.style.overflow=xt,this.showViewer=!1}}};const Et=Ft;var Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"a-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"a-image__placeholder"},[e._t("loading",[n("a-icon",{staticClass:"placeholder-icon",attrs:{type:"picture"}})])],2)]):e.error&&e.src?e._t("error",[n("div",{staticClass:"a-image__error"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"icontupianjiazaishibai"}})],1)]):e.popover&&e.src?n("a-popover",{attrs:{placement:e.popoverConfig.placement,trigger:e.popoverConfig.trigger}},[n("template",{slot:"content"},[n("img",{style:{width:e.popoverConfig.width,height:e.popoverConfig.height},attrs:{src:e.src}})]),e._v(" "),n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners))],2):e.src?n("img",e._g(e._b({staticClass:"a-image__inner",class:{"a-image__inner--center":e.alignCenter,"a-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.imageSrc},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)):e.src?e._e():e._t("none",[n("div",{staticClass:"a-image__none"},[n("icon-font",{staticClass:"img-icon",attrs:{type:"iconzanwutupian2"}})],1)]),e._v(" "),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,showDown:e.showDown,"url-list":e.previewSrcList,prefix:e.prefix,host:e.imgHost},on:{download:e.download}}):e._e()]:e._e()],2)};Pt._withStripped=!0;const At=rt({render:Pt,staticRenderFns:[]},void 0,Et,void 0,!1,void 0,!1,void 0,void 0,void 0);var Nt={zIndex:2e3,initialIndex:0,urlList:[]},Mt=re.default.extend(St);At.install=function(e){e.component(At.name,At)},At.api=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=it({},Nt,e);var t=new Mt({el:document.createElement("div"),propsData:e,methods:{hide:function(){this.deviceSupportUninstall(),this.$el.parentNode.removeChild(this.$el)},download:function(){e.download&&e.download(this.currentImg)}}}),n=e.body?document.body:e.target;console.log(n),document.body.appendChild(t.$el)}(e)};const jt={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:W.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:W.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&W.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};Bt._withStripped=!0;const Kt=rt({render:Bt,staticRenderFns:[]},void 0,jt,void 0,!1,void 0,!1,void 0,void 0,void 0);function zt(){return zt=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},zt.apply(this,arguments)}Kt.install=function(e){e.component(Kt.name,Kt)};var Ht=["attrs","props","domProps"],qt=["class","style","directives"],Wt=["on","nativeOn"],Ut=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},Gt=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==Ht.indexOf(n))e[n]=zt({},e[n],t[n]);else if(-1!==qt.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==Wt.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?Ut(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function Yt(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Xt=ue.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Jt(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var Qt=["key"],Zt={},en={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return me({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:me({},this.$listeners)};return t("a-table",Gt([{},{props:me(me({},n),{},{columns:a}),scopedSlots:me({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":he.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=Q.getKey(t),i=Q.getStyle(t),o=Q.getClass(t),r=Q.getOptionProps(t),s=Q.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[Q.camelize(t)]=s[e]}));var c=Q.getSlots(t),u=c.default,d=Jt(c,["default"]),h=Xt({},d,r,{style:i,class:o},l);if(a&&(h.key=a),Q.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=Jt(t,["slots","scopedSlots"]),u=Xt({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){Zt[e.key]=e.width||0}));var o=re.default.observable(Zt),r=null,s=t.key,l=Yt(t,Qt),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",Gt([{attrs:{width:c.width}},l]),[n]):e("th",Gt([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",Gt([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(he.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=me(me({},a.cellWidth),{},fe({},c.key,c.width));a.$emit("update:cellWidth",me({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);de.default.create(t[t.length>1?1:0],me(me({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(en.name,en)}};mt.install=function(e){e.component(mt.name,mt)};const tn={name:"DOperationBox",components:{IconFontBox:mt,CellEllipsisTip:Kt},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return me({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(me(me({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=tt(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=me({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};nn._withStripped=!0;const an=rt({render:nn,staticRenderFns:[]},void 0,tn,void 0,!1,void 0,!1,void 0,void 0,void 0);an.install=function(e){e.component(an.name,an)};var on=[{id:0,name:"草稿"},{id:1,name:"已过账"},{id:3,name:"已红冲"}],rn={0:on[0],1:on[1],2:on[2]},sn=[{id:0,name:"未支付"},{id:1,name:"部分支付"},{id:2,name:"已支付"}],ln={0:sn[0],1:sn[1]},cn=[{id:1,name:"库存高于上限"},{id:2,name:"库存低于下限"},{id:3,name:"有货"},{id:4,name:"缺货"}],un={0:ln[0],1:ln[1]},dn=[{id:5,name:"ERP草稿",color:"#52C41A"},{id:1,name:"已过账",color:"#52C41A"},{id:4,name:"ERP删除",color:"#BBBBBB"},{id:2,name:"草稿",color:"#52C41A"},{id:3,name:"已红冲",color:"#F5222D"},{id:0,name:"未同步",color:"#378EFB"}],hn=[{id:0,name:"已下架"},{id:1,name:"已上架"}],fn=[{id:1,name:"应收调整"},{id:2,name:"应付调整"}],pn=[{id:0,name:"草稿"},{id:1,name:"盘点完成"}],mn=[{id:0,name:"全部"},{id:1,name:"采购入库"},{id:2,name:"退货入库"},{id:3,name:"盘盈入库"},{id:4,name:"其它入库"},{id:5,name:"销售出库"},{id:6,name:"采购退货"},{id:7,name:"盘亏出库"},{id:8,name:"采购入库"},{id:9,name:"其它出库"},{id:10,name:"同价调拨入库"},{id:11,name:"同价调拨出库"},{id:12,name:"撤销出库"},{id:13,name:"进销存同步"},{id:14,name:"撤销退货"},{id:15,name:"退货单取消"},{id:16,name:"订货单取消"}],gn=[{id:0,name:"微信账户"},{id:1,name:"预付款账户"},{id:2,name:"现金账户"},{id:3,name:"银行卡账户"}],vn=[{id:-1,name:"已取消",key:"canceled",btnKeys:["detail","del","share","print","export","copy"]},{id:0,name:"草稿",key:"draft",btnKeys:["detail","submit","submit_audit","del","share","print","export","copy"]},{id:1,name:"待审核",key:"to_audit",btnKeys:["detail","audit","cancel_bill","share","print","export","copy"]},{id:2,name:"待出库",key:"to_stock_removal",btnKeys:["detail","stock_removal","auditee","cancel_bill","share","print","export","copy"]},{id:3,name:"部分出库",key:"portion_stock_removal",btnKeys:["detail","stock_removal","suspend_bill","share","print","export","copy"]},{id:4,name:"待发货",key:"to_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:5,name:"部分发货",key:"portion_delivery_goods",btnKeys:["detail","delivery_goods","share","print","export","copy"]},{id:6,name:"待收货",key:"to_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:7,name:"部分收货",key:"portion_take_goods",btnKeys:["detail","take_goods","share","print","export","copy"]},{id:8,name:"已完成",key:"finish",btnKeys:["detail","share","print","export","copy"]},{id:9,name:"已中止",key:"suspend",btnKeys:["detail","share","print","export","copy"]}],yn=[{id:1,name:"已打印"},{id:0,name:"未打印"}],bn=[{id:0,name:"PC端代开"},{id:1,name:"企业微信代开"},{id:2,name:"小程序商城"},{id:3,name:"巡店"},{id:4,name:"Excel导入"}],wn=[{id:1,name:"买赠"},{id:2,name:"秒杀"},{id:3,name:"特价"},{id:4,name:"订单促销"},{id:5,name:"组合促销"},{id:6,name:"一口价"},{id:7,name:"拼团"},{id:8,name:"优惠券"},{id:9,name:"分销"}],kn=[{id:0,name:"不开发票"},{id:1,name:"普通发票"},{id:2,name:"增值税发票"}],Cn=Object.freeze({__proto__:null,billStatus:{0:{name:"草稿",color:"#378EFB",icon:"iconcaogao"},1:{name:"已过账",color:"#52C41A",icon:"iconyiguozhang",stocktakingName:"盘点完成",stocktakingIcon:"icon_stocktaking_completed"},3:{name:"已红冲",color:"#F5222D",icon:"iconyihongchong"}},payStockSync:[{id:2,name:"ERP草稿",color:"#52c41a"},{id:3,name:"已过账",color:"#52c41a"},{id:4,name:"ERP删除",color:"#bbbbbb"},{id:5,name:"同步失败",color:"#f5222d"},{id:0,name:"未同步",color:"#378efb"}],payStockSyncMap:{0:{name:"未同步",color:"#378efb"},2:{name:"ERP草稿",color:"#52c41a"},3:{name:"已过账",color:"#52c41a"},4:{name:"ERP删除",color:"#bbbbbb"},5:{name:"同步失败",color:"#f5222d"}},inStockMap:[{id:0,name:"盘盈入库"},{id:2,name:"其它入库"}],outStockMap:[{id:1,name:"盘亏出库"},{id:3,name:"其它出库"}],orderStatus:on,orderStatusMap:rn,paymentStatus:sn,paymentStatusMap:ln,stockStatus:cn,stockStatusMap:un,stockSync:dn,stockSyncMap:{},saleStatus:hn,modeOfPayment:[{id:0,name:"线下支付"},{id:1,name:"银行卡转账"}],exchangePayment:fn,stockBillStatus:pn,stockInAndOut:mn,accountType:gn,saleOrderStatus:vn,printStatus:yn,billSource:bn,marketingType:wn,invoiceType:kn});const _n=rt({},void 0,{name:"DMixSelect",props:{value:{type:[String,Number,Array],default:void 0},resultName:{type:String,default:""},type:{type:Number,default:0},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:120},list:{type:Array,default:null},exclude:{type:Array,default:function(){return[]}},mode:{type:String,default:"select"},getPopupContainer:{type:Function,default:function(){return document.querySelector(".mix-select")}}},data:function(){return{actValue:void 0,options:[],selectLoading:!1}},computed:{modalPlaceholder:function(){return this.placeholder},actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:function(e){this.actValue=e},type:{handler:function(){this.options=[],this.getData()}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;if(console.log(Cn,this.type),!this.$slots.default)if(this.list)this.options=this.list;else if([0,1,2,11].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$post(11===this.type?$e:Ie,{type:this.type}).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1})).catch((function(){e.selectLoading=!1}))}else if([14].includes(this.type)){if(this.options.length)return;this.selectLoading=!0,this.$get(ze).then((function(t){e.options=t.data,e.actValue=e.value,e.selectLoading=!1}))}else switch(this.type){case 3:this.options=on;break;case 4:this.options=sn;break;case 5:this.options=cn;break;case 6:this.options=hn;break;case 7:this.options=fn;break;case 8:this.options=dn;break;case 9:this.options=pn;break;case 10:this.options=mn;break;case 12:this.options=vn;break;case 13:this.options=yn;break;case 15:this.options=bn;break;case 16:this.options=wn;break;case 17:this.options=kn;break;default:this.options=[]}},handleChange:function(e){var t=Ze(e);if(null==e||"object"===t&&!e.length)return this.$emit("input",void 0),this.actValue=void 0,void this.$emit("change",{config:{resultName:this.resultName,status:"delete",type:"select"}});var n="number"===t?{}:[];this.options.forEach((function(a){"number"===t?a.id===e&&(n=a):e.includes(a.id)&&n.push(a)})),this.$emit("input",e),this.actValue=e,this.$emit("change",{data:e,rows:n,config:{resultName:this.resultName,status:"select",type:"select"}})},optionsVisibleHandle:function(){this.options.length||this.$slots.default||this.getData()},resetData:function(){this.actValue=void 0,this.$emit("input",void 0)}},render:function(e){var t=this,n=this;return e("div",{class:"mix-select",style:"width: ".concat(n.actWidth)},[e("a-select",{scopedSlots:n.$scopedSlots,props:{value:n.actValue,allowClear:n.allowClear,placeholder:n.modalPlaceholder,mode:n.mode,getPopupContainer:n.getPopupContainer,disabled:n.disabled},style:"width:100%;",on:{dropdownVisibleChange:n.optionsVisibleHandle,change:n.handleChange}},[n.selectLoading?e("a-spin",{props:{size:"small"},slot:"notFoundContent"}):function(){if(t.$slots.default)return t.$slots.default;var n=[];return t.options.forEach((function(a,i){t.exclude.includes(a.id)||n.push(e("a-select-option",{props:{value:a.id,key:i,title:a.name}},a.name))})),n}()])])}},"data-v-c44b6be8",void 0,void 0,!1,void 0,void 0,void 0);_n.install=function(e){e.component(_n.name,_n)};var Sn={name:"MixSearchInput",props:{value:{type:[Object,String],default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},maxLength:{type:Number,default:40},name:{type:String,default:""},next:{type:Function,default:void 0},restore:{type:Boolean,default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",loading:!1,dataList:[],readonly:!1,dialogFocus:!1,localDataCache:null,isBlur:!1,replaceFields:{key:"id",name:"name"}}},watch:{value:{handler:function(e){this.inputValue=e?e.name||e.value:void 0},deep:!0,immediate:!0}},methods:{generateRequest:function(){var e=arguments,t=this;return ve(be.mark((function n(){var a,i,o,r,s,l,c,u,d,h,f,p,m;return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{},t.loading=!0,!["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(t.name)){n.next=12;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName",code:"code",barCode:"barCode"},n.next=6,t.$get(Re,it({type:4,isShowSku:!0,pageNum:1,pageSize:30},a,t.dialogConfig.rules));case 6:return i=n.sent,o=i.data,t.localDataCache=o?o.list:[],n.abrupt("return",o?o.list:[]);case 12:if(!["person","preparer","handler"].includes(t.name)){n.next=25;break}if(!t.localDataCache){n.next=17;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 17:return n.next=19,t.$get(Pe);case 19:return r=n.sent,s=r.data,t.localDataCache=s,n.abrupt("return",s);case 23:n.next=72;break;case 25:if(!["warehouse"].includes(t.name)){n.next=34;break}return n.next=28,t.$get(Fe,me({pageNum:1,pageSize:30},a));case 28:return l=n.sent,c=l.data,t.localDataCache=c?c.list:[],n.abrupt("return",c?c.list:[]);case 34:if(!["customer","supplier","supplierCustomer"].includes(t.name)){n.next=44;break}return t.replaceFields={key:"id",name:"name",pinyin:"spellName"},n.next=38,t.$post(De,me({pageNum:1,pageSize:30},a));case 38:return u=n.sent,d=u.data,t.localDataCache=d?d.list:[],n.abrupt("return",d?d.list:[]);case 44:if(!["unit","brand","tag"].includes(t.name)){n.next=57;break}if(!t.localDataCache){n.next=49;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 49:return n.next=51,t.$post(Ie,{type:["unit","brand","tag"].indexOf(t.name)});case 51:return h=n.sent,f=h.data,t.localDataCache=f,n.abrupt("return",f);case 55:n.next=72;break;case 57:if(!["rateUnit"].includes(t.name)){n.next=71;break}if(t.replaceFields={key:"id",name:"unitName"},!t.localDataCache){n.next=63;break}return n.abrupt("return",t.generateLocalSearch(a.keywords));case 63:return n.next=65,t.$post(Ee,t.dialogConfig.productId);case 65:return p=n.sent,m=p.data,t.localDataCache=m,n.abrupt("return",m);case 69:n.next=72;break;case 71:["account"].includes(t.name)?console.log("还没做"):console.log("未知的 name:",t.name);case 72:case"end":return n.stop()}}),n)})))()},generateLocalSearch:function(e){var t=this,n=[];return this.localDataCache.forEach((function(a){-1!==a[t.replaceFields.name].indexOf(e)&&n.push(a)})),n},clickHandle:function(){var e=this;this.disabled||this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.$emit("enterHandle",{data:null,action:"click",inputValue:this.inputValue,callback:function(){this.inputValue=""}}),setTimeout((function(){e.dialogFocus=!1,(e.value&&e.value.name!==e.inputValue||!e.value)&&(e.inputValue="")}),300))},enterHandle:function(){var e=this;this.next&&!this.next("mixSearch")||this.dialogFocus||(this.dialogFocus=!0,this.matchingData("enter"),setTimeout((function(){e.dialogFocus=!1}),300))},matchingData:function(e){var t=this,n=function(){var n=null,a=nt(t.value);if(t.dataList.length&&t.inputValue)for(var i=0;i<t.dataList.length;i++){var o=t.dataList[i];o[t.replaceFields.name]!==t.inputValue&&o[t.replaceFields.pinyin]!==t.inputValue&&o[t.replaceFields.code]!==t.inputValue&&o[t.replaceFields.barCode]!==t.inputValue||(n=o)}else a||t.inputValue!==t.value.name&&t.inputValue!==t.value.value||(n=t.value);t.restore&&"blur"===e&&(n||a||(t.inputValue=t.value.name||t.value.value,n=t.value)),t.$emit("enterHandle",{data:n,rows:n?[n]:null,action:e,inputValue:t.inputValue,baseRows:t.dataList}),t.inputValue=""};if(this.loading)var a=setInterval((function(){t.loading||(n(),clearInterval(a),a=null)}),500);else n()},changeHandle:function(){var e=this;if(this.isBlur||this.inputValue||this.$emit("clear"),this.readonly){var t=nt(this.value);this.inputValue=t?this.value.name||this.value.value:""}else this.inputValue&&this.generateRequest({keywords:this.inputValue}).then((function(t){e.dataList=t,e.loading=!1}))},blurHandle:function(){var e=this;this.isBlur=!1,setTimeout((function(){e.dialogFocus||(e.inputValue?(nt(e.value)||e.inputValue!==e.value.name)&&e.matchingData("blur"):e.restore?e.inputValue=e.value.name||e.value.value:e.value&&e.$emit("clear"))}),300)},focusHandle:function(){this.isBlur=!0,this.readonly=this.next&&!this.next("mixSearch")},focus:function(){this.$refs.mixSearchInput.focus()}}};const xn=Sn;var Rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-input",{ref:"mixSearchInput",staticClass:"mix-search-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,allowClear:e.allowClear,maxLength:e.maxLength,title:e.inputValue},on:{pressEnter:e.enterHandle,change:e.changeHandle,blur:e.blurHandle,focus:e.focusHandle},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[n("a-button",{attrs:{slot:"suffix",type:"link",icon:e.loading?"loading":"ellipsis"},on:{click:e.clickHandle},slot:"suffix"})],1)};Rn._withStripped=!0;const On=rt({render:Rn,staticRenderFns:[]},void 0,xn,"data-v-225db93a",!1,void 0,!1,void 0,void 0,void 0);var Dn={product:{name:"SelectProduct",key:"id",value:"name",type:1},couponProduct:{name:"SelectProduct",key:"id",value:"name",type:2},recommendProduct:{name:"SelectProduct",key:"id",value:"name",type:3},purchaseProduct:{name:"SelectProduct",key:"id",value:"name",type:4},rateProduct:{name:"SelectProduct",key:"id",value:"name",type:6},person:{name:"PeopleModal",key:"id",value:"name"},preparer:{name:"PeopleModal",key:"id",value:"name"},handler:{name:"PeopleModal",key:"id",value:"name"},warehouse:{name:"ChooseEntrepot",key:"id",value:"name"},customer:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplier:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplierCustomer:{name:"ChoiceCustomer",key:"businessId",value:"name"},unit:{name:"GoodAttrModal",key:"id",value:"name"},brand:{name:"GoodAttrModal",key:"id",value:"name"},tag:{name:"GoodAttrModal",key:"id",value:"name"},payment:{name:"payment",key:"id",value:"name"},rateUnit:{name:"GoodAttrModal",key:"id",value:"unitName"}};const Ln={name:"Empty",components:{empty:Z.empty,loading:Z.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var Tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};Tn._withStripped=!0;const $n=rt({render:Tn,staticRenderFns:[]},void 0,Ln,void 0,!1,void 0,!1,void 0,void 0,void 0);function Vn(e){return"object"===Ze(e)&&null!==e&&e.constructor&&e.constructor===Object}function In(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(Vn(e[o])&&Vn(n[o])?In(e[o],n[o]):!Vn(e[o])&&Vn(n[o])?(e[o]={},In(e[o],n[o])):e[o]=n[o])}}return e}$n.install=function(e){e.component($n.name,$n)};var Fn={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=me(me({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=me(me({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=me(me({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=me({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=In(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:Ze(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(me(me({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},En={name:"DSelectWarehouse",components:{STable:en,Empty:$n,DOperationBox:an,CellEllipsisTip:Kt},mixins:[ht,Fn],props:{visible:{type:Boolean,default:!1},width:{type:[String,Number],default:1e3},title:{type:String,default:"选择仓库"},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"id"}}},beforeClose:{type:Function,default:void 0},rules:{type:Object,default:function(){}},cache:{type:Boolean,default:!1},defaultValue:{type:[Object,Array],default:null},categoryInit:{type:Number,default:1},selectionLimit:{type:Number,default:100}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},data:function(){return{tableData:[],classifyOptions:[],classifyValue:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:""},resultMap:{},disabled:{warehouse:!1},opened:!1}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},baseReplaceFields:function(){return me({key:"id"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},allClassifyOptions:function(){return[{categoryName:"全部分类",haveChild:!0,isLeaf:!1,id:"1",parentId:"0",pathCode:"1",scopedSlots:{title:"custom"},children:[{categoryName:"未分类",haveChild:!1,id:"0",parentId:"1",isLeaf:!0,pathCode:"0",scopedSlots:{title:"custom"}}].concat(dt(this.classifyOptions))}]}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="id",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&(this.reset().dealResult().loadTableData(),this.loadClassify()),this.opened=!0)}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Fe,me(me({},this.searchResult),{},{pageNum:t.current,pageSize:t.pageSize},this.rules)).then((function(t){t.data&&(e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},searchHandle:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},classifySearchHandle:function(e){console.log("分类检索:",e)},classifyOnSelect:function(e,t){console.log("classifyOnSelect",t,this.classifyValue);var n=t.node;this.searchResult.categoryPath=t.selected?n.dataRef.pathCode:null,this.handleSelectedClear().loadTableData()},loadClassify:function(e){var t=this;if(this.$get(Ae,{}).then((function(){})),e)return new Promise((function(n){var a=e.dataRef;t.$get(Ae,{categoryType:2,parentId:a.id}).then((function(e){var i=e.data;i.length&&(a.children=i,t.classifyOptions=dt(t.classifyOptions)),n()}))}));this.$get(Ae,{categoryType:2,parentId:this.categoryInit}).then((function(e){t.classifyOptions=e.data}))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const Pn=En;var An=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-warehouse a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"warehouse-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入分类名称"},on:{search:e.classifySearchHandle}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"classify-wrap"},[n("a-tree",{attrs:{loadData:e.loadClassify,replaceFields:{children:"children",value:"id",title:"categoryName",key:"id"},"tree-data":e.allClassifyOptions,defaultExpandedKeys:["1"],defaultSelectedKeys:["1"],showIcon:""},on:{select:e.classifyOnSelect},model:{value:e.classifyValue,callback:function(t){e.classifyValue=t},expression:"classifyValue"}})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"仓库名称"},on:{search:e.searchHandle},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"index",attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(t,n,a){return[e._v("\n            "+e._s((e.pagination.current-1)*e.pagination.pageSize+a+1)+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:200,"data-index":"name",title:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{width:100,"data-index":"code",title:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t||"-")+"\n          ")]}}])}),e._v(" "),n("a-table-column",{attrs:{title:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{tip:""+t.regionName+t.address}},[e._v(" "+e._s(t.regionName)+e._s(t.address)+" ")])]}}])}),e._v(" "),n("a-table-column",{attrs:{width:75,title:"可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.erpId?"是":"否")+"\n          ")]}}])})],1)],1)])])};An._withStripped=!0;const Nn=rt({render:An,staticRenderFns:[]},void 0,Pn,void 0,!1,void 0,!1,void 0,void 0,void 0);Nn.install=function(e){e.component(Nn.name,Nn)};const Mn=rt({},void 0,{name:"DSelectWarehouseInput",props:{name:{type:String,default:"warehouse"},value:{type:[Object,String],default:void 0},resultName:{type:String,default:""},width:{type:[Number,String],default:240},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},restore:{type:Boolean,default:!1},require:{type:Boolean,default:!1},maxLength:{type:Number,default:40},next:{type:Function,default:null},origin:{type:String,default:"page"},valueMode:{type:[Boolean,String],default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{componentMap:Dn,visible:!1,modalValue:null,dialog:null,dialogProps:{},multiple:!1}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:{handler:function(e){this.modalValue=e||void 0},deep:!0,immediate:!0},name:function(){this.generateDialog()},visible:function(e){e&&this.generateDialog()}},created:function(){this.dialog||this.generateDialog()},methods:{generateDialog:function(){var e,t="string"==typeof this.modalValue?[]:this.modalValue?Object.keys(this.modalValue):[];this.multiple=!0===this.valueMode&&t&&!t.length,e={warehouse:{title:"选择仓库",multiple:!0===this.valueMode&&this.multiple}},this.dialog=Nn,this.dialogProps=it(this.dialogProps,e[this.name],this.dialogConfig)},enterHandle:function(e){e.data?(this.dialogProps.rules&&(this.dialogProps.rules.keywords=""),this.resultExchange(e)):"blur"!==e.action?(this.dialogProps=it(this.dialogProps,{rules:{keywords:this.modalValue&&this.modalValue.name===e.inputValue?"":e.inputValue}}),this.generateDialog(),this.visible=!0):this.modalValue&&this.modalValue.name!==e.inputValue&&this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},clearHandle:function(){this.modalValue=void 0,this.$emit("input",void 0),this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"}})},confirmHandle:function(e){["filterDropDown"].includes(this.origin)&&this.next&&this.next("mixSearch"),e?this.resultExchange(e):this.restore&&this.modalValue&&(this.modalValue=me({},this.modalValue))},resultExchange:function(e){var t=e.rows[0];"select"!==this.valueMode&&(this.$emit("input",t),this.modalValue=t),this.$emit("change",me(me({},e),{},{data:this.multiple?e.rows:t,rows:e.rows,multiple:this.multiple,config:{name:this.name,resultName:this.resultName,type:"mixSearch"}}))},getData:function(){return this.modalValue},resetData:function(){this.modalValue=void 0},setData:function(e){this.modalValue=e},focus:function(){this.$refs.SearchInput.focus()}},render:function(e){var t=this;return e("div",{attrs:{class:"select-good-attr",style:"width: ".concat(t.actWidth,";display: inline-block")}},[e("div",{attrs:{class:"input-box"}},[e("SearchInput",{props:{value:t.modalValue,placeholder:t.placeholder,maxLength:t.maxLength,disabled:t.disabled,name:t.name,allowClear:t.allowClear,next:t.next,restore:t.restore,dialogConfig:t.dialogProps},ref:"SearchInput",on:{enterHandle:t.enterHandle,clear:t.clearHandle}})]),e(this.dialog,{on:{confirm:t.confirmHandle,"update:visible":function(e){t.visible=e},cancel:t.confirmHandle},attrs:me({},this.dialogProps),props:me(me({},t.dialogProps),{},{visible:t.visible})})])},components:{SearchInput:On}},void 0,void 0,void 0,!1,void 0,void 0,void 0);Mn.install=function(e){e.component(Mn.name,Mn)};var jn=[],Bn=function e(t){for(var n=0;n<t.length;n++){var a=t[n],i=a.id;jn.push({key:i,title:a.categoryName}),a.children&&e(a.children)}},Kn=function e(t,n){for(var a,i=0;i<n.length;i++){var o=n[i];o.children&&(o.children.some((function(e){return e.id===t}))?a=o.id:e(t,o.children)&&(a=e(t,o.children)))}return a},zn={name:"DSelectProduct",mixins:[ht],provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},props:{visible:{type:Boolean,default:!1},width:{tpye:[String,Number],default:1250},title:{type:String,default:"选择商品"},cache:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},replaceFields:{type:Object,default:function(){return{key:"id"}}},rules:{type:Object,default:function(){return{}}},origin:{type:String,default:"page"},sortList:{type:Array,default:void 0},mode:{type:String,default:"default"},defaultValue:{type:[Object,Array],default:null},displayItems:{type:Array,default:function(){return["classify","warehouse","brand","shelves","inventory","salesPromotion","bought"]}},selectionLimit:{type:Number,default:100}},data:function(){return{modalConfig:{},tableData:[],tableLoading:!1,scrollHeight:0,inventory:!1,promotion:!1,isBought:!1,searchResult:{type:4,isShowSku:!0,keywords:void 0,customerId:void 0,warehouseId:void 0,brandId:void 0,categoryPath:void 0,saleStatus:1,checkList:"",isOverrideWarehouse:"",showList:[]},resultMap:{warehouse:{key:"warehouseId",ref:"warehouseMixSearch"}},disabled:{warehouse:!1},headerConfig:{1:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],2:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}],3:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],4:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"avgPrice"}],5:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"},{key:"levelPrice"}],6:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"stock"},{key:"avgPrice"}],7:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],8:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"}],9:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"unitPrice"}],10:[{key:"code"},{key:"barCode"},{key:"cover"},{key:"name"},{key:"skuName"},{key:"warehouseName"},{key:"stock"},{key:"unitPrice"}]},treeData:[{categoryName:"全部分类",key:"1",pathCode:"",id:"1",children:[{categoryName:"未分类",key:"2",isLeaf:!0,pathCode:"0",id:"2"}]}],name:"warehouse",keywordtree:"",expandedKeys:[],autoExpandParent:!0,searchValue:"",tabLable:"0"}},watch:{visible:function(e){var t=this;e&&(this.selectionContent.primaryKey=this.baseReplaceFields.key,this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.modalConfig={title:"选择商品"},this.$nextTick((function(){t.handleSelectedClear(),t.dealResult(),t.cache||(t.mergeResult(),t.dealResult(),"0"===t.tabLable?t.initTreeData():t.loadTableData())})))}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}},sortColumns:function(){return this.sortList?this.sortList:this.headerConfig[this.searchResult.type]},baseReplaceFields:function(){return me({key:"id",warehouse:"warehouseId"},this.replaceFields)}},filters:{getPrice:function(e){return void 0===e||""===e||null===e?"-":e}},methods:{inventoryChange:function(){this.inventory?this.changeData(!0,"2"):this.changeData(!1,"2")},isBoughtChange:function(){this.isBought?(this.tabLable="1",this.changeData(!0,"1")):(this.searchResult.categoryPath="",this.tabLable="0",this.changeData(!1,"1"))},promotionChange:function(){this.promotion?this.changeData(!0,"3"):this.changeData(!1,"3")},onSearchTree:function(e){var t=this,n=e.target.value,a=jn.map((function(e){return e.title.indexOf(n)>-1?Kn(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:n,autoExpandParent:!0})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onLoadData:function(e){var t=this;return new Promise((function(n){e.dataRef.children?n():t.$get(Ae,{categoryType:0,parentId:e.dataRef.id}).then((function(a){"warehouse"===t.name&&(a.data.length&&(e.dataRef.children=a.data,t.treeData=dt(t.treeData),Bn(t.treeData)),n())}))}))},initTreeData:function(){var e=this;this.$get(Ae,{categoryType:0,parentId:0}).then((function(t){e.treeData[0].children=e.treeData[0].children.concat(t.data),Bn(e.treeData),e.treeData&&e.treeData.length>0&&(e.searchResult.categoryPath=e.treeData[0].pathCode,e.loadTableData())}))},changeData:function(e,t){var n;n=this.searchResult.checkList?this.searchResult.checkList.split(","):[],e?n.includes(t)||n.push(t):n.includes(t)&&n.splice(n.indexOf(t),1),this.searchResult.checkList=n.join(","),this.searchReset().loadTableData()},loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.tableLoading=!0,this.$get(Re,me(me({},at(this.searchResult)),{},{pageNum:t.current,pageSize:t.pageSize,sort:-1})).then((function(t){t.data&&(e.tableData=t.data.list,e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum)})).catch((function(e){console.error(e)})).finally((function(){e.tableLoading=!1}))},dealResult:function(){var e=this;if("warehouse"===this.mode&&(this.defaultValue&&this.defaultValue[this.baseReplaceFields.warehouse]?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=this.defaultValue[this.baseReplaceFields.warehouse]):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse&&(this.searchResult.warehouseId=this.rules.warehouse.id))),this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t],a=Ze(n);if("warehouse"===t&&"warehouse"===this.mode)return;"object"===a?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}if(this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=me(me({},e.selectionContent.selectedRows),{},fe({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=fe({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this.rules.checkList&&this.rules.checkList.length>0){var i=this.rules.checkList.split(",");i.includes("1")?(this.tabLable="1",this.searchResult.categoryPath="",this.isBought=!0):(this.tabLable="0",this.isBought=!1),i.includes("2")?this.inventory=!0:this.tabLable=!1,i.includes("3")?this.promotion=!0:this.promotion=!1}},onSearch:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},saleChange:function(e){var t=e.data;this.searchResult.saleStatus=t,this.searchReset().loadTableData()},warehouseChange:function(e){"warehouse"===this.mode?e.data?(this.searchResult.isOverrideWarehouse=!0,this.searchResult.warehouseId=e.data.id):(this.searchResult.isOverrideWarehouse=!1,this.rules.warehouse?this.searchResult.warehouseId=this.rules.warehouse.id:this.searchResult.warehouseId=void 0):(this.handleSelectedClear(),e.data?this.searchResult.warehouseId=e.data.id:this.searchResult.warehouseId=void 0),this.searchReset().loadTableData()},brandChange:function(){this.handleSelectedClear(),this.searchReset().loadTableData()},selectCurrentNode:function(e,t){this.handleSelectedClear();var n=t.node.dataRef;this.searchResult.categoryPath=t.selected?n.pathCode:null,this.searchReset().loadTableData()},tableChange:function(e,t,n){if(e.current===this.pagination.current||e.pageSize!==this.pagination.pageSize)return this.handleSelectedClear(),e.current=1,void this.loadTableData();this.loadTableData(e)},searchReset:function(){return this.tableData=[],this.pagination.current=1,this.pagination.total=0,this},rowClick:function(e){var t=this;console.log("单击",e),this.multiple?this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])?(this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]):(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e):(this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=fe({},e[this.baseReplaceFields.key],e))},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.okHandle()},mergeResult:function(){this.pagination.current=1,this.searchResult={type:this.rules.type||4,isShowSku:this.rules.isShowSku||!0,keywords:this.rules.keywords||void 0,customerId:this.rules.customerId||void 0,warehouseId:this.rules.warehouseId||void 0,brandId:this.rules.brandId||void 0,categoryPath:this.rules.categoryPath||void 0,saleStatus:this.rules.saleStatus||void 0,checkList:this.rules.saleStatus||""}},okHandle:function(){if(!(this.selectionContent.selectedRowKeys.length>this.selectionLimit))return this.multiple?this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),void this.$emit("update:visible",!1)):void this.$emit("update:visible",!1):void(this.$attrs.product&&this.selectionContent.selectedRowKeys[0]===this.$attrs.product[this.baseReplaceFields.key]?this.$emit("update:visible",!1):this.selectionContent.selectedRowKeys.length?(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.$emit("update:visible",!1)):this.$emit("update:visible",!1));this.$message.warning("最多选择".concat(this.selectionLimit,"条"))},optionClick:function(e){"clear"===e.name&&this.handleSelectedClear()}},components:{OperationBox:an,DSelectWarehouseInput:Mn,MixSelect:_n,Empty:$n,HImage:At,CellEllipsisTip:Kt,STable:en}};const Hn=zn;var qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-product a-table-common",attrs:{keyboard:!1,maskClosable:!1,title:e.modalConfig.title,width:e.width},on:{ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{ref:"productModal"},[n("div",{staticClass:"choose-product-content"},["0"===e.tabLable&&e.displayItems.includes("classify")?n("div",{staticClass:"tree-control"},[n("a-input-search",{attrs:{maxLength:40,allowClear:"",placeholder:"请输入分类名称"},on:{change:e.onSearchTree},model:{value:e.keywordtree,callback:function(t){e.keywordtree=t},expression:"keywordtree"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"tree-control-contain"},[n("a-tree",{attrs:{"auto-expand-parent":e.autoExpandParent,"expanded-keys":e.expandedKeys,"load-data":e.onLoadData,replaceFields:{children:"children",title:"categoryName",key:"id"},"tree-data":e.treeData},on:{expand:e.onExpand,select:e.selectCurrentNode}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"table-control",class:{"table-width":"1"===e.tabLable||!e.displayItems.includes("classify")}},[n("operation-box",{attrs:{"more-search":!1},on:{optionClick:e.optionClick}},[n("a-input-search",{staticStyle:{width:"240px"},attrs:{maxLength:40,allowClear:"",placeholder:"商品名称/编号/条码/关键字"},on:{search:e.onSearch},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),e.displayItems.includes("warehouse")?n("DSelectWarehouseInput",{ref:"warehouseMixSearch",attrs:{disabled:e.disabled.warehouse,width:120,allowClear:"",name:"warehouse",placeholder:"仓库"},on:{change:e.warehouseChange}}):e._e(),e._v(" "),e.displayItems.includes("brand")?n("MixSelect",{attrs:{type:1,width:120,allowClear:""},on:{change:e.brandChange},model:{value:e.searchResult.brandId,callback:function(t){e.$set(e.searchResult,"brandId",t)},expression:"searchResult.brandId"}}):e._e(),e._v(" "),e.displayItems.includes("shelves")?n("MixSelect",{attrs:{list:[{id:1,name:"上架"},{id:0,name:"下架"}],width:120,"allow-clear":"",placeholder:"上下架"},on:{change:e.saleChange},model:{value:e.searchResult.saleStatus,callback:function(t){e.$set(e.searchResult,"saleStatus",t)},expression:"searchResult.saleStatus"}}):e._e(),e._v(" "),e.displayItems.includes("inventory")?n("a-checkbox",{staticClass:"check-line",on:{change:e.inventoryChange},model:{value:e.inventory,callback:function(t){e.inventory=t},expression:"inventory"}},[e._v("库存大于0\n          ")]):e._e(),e._v(" "),e.displayItems.includes("salesPromotion")?n("a-checkbox",{staticClass:"check-line",on:{change:e.promotionChange},model:{value:e.promotion,callback:function(t){e.promotion=t},expression:"promotion"}},[e._v("促销商品\n          ")]):e._e(),e._v(" "),e.displayItems.includes("bought")?n("a-checkbox",{staticClass:"check-line",on:{change:e.isBoughtChange},model:{value:e.isBought,callback:function(t){e.isBought=t},expression:"isBought"}},[e._v("买过商品\n          ")]):e._e()],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-content",attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,"row-selection":e.rowSelection,rowKey:e.selectionContent.primaryKey,scroll:{y:"calc(100vh - 490px)"},"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"code",attrs:{"data-index":"code",title:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"barCode",attrs:{title:"商品条码"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.barCode||"-"}})]}}])}),e._v(" "),n("a-table-column",{key:"cover",attrs:{title:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("h-image",{staticStyle:{width:"48px",height:"48px"},attrs:{initial:0,"preview-src-list":[t.cover],src:e._f("formatImage")(t.cover,48),fit:"cover",popover:""}})]}}])}),e._v(" "),n("a-table-column",{key:"name",attrs:{title:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.name}})]}}])}),e._v(" "),n("a-table-column",{key:"skuName",attrs:{"data-index":"skuName",title:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"warehouseName",attrs:{"data-index":"warehouseName",title:"仓库"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t||"-")+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"stock",attrs:{"data-index":"stock",title:"库存数量"}}),e._v(" "),n("a-table-column",{key:"avgPrice",attrs:{"data-index":"avgPrice",title:"成本均价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"lastPrice",attrs:{"data-index":"lastPrice",title:"最近进价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"baseUnitName",attrs:{"data-index":"baseUnitName",title:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"unitPrice",attrs:{"data-index":"unitPrice",title:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])}),e._v(" "),n("a-table-column",{key:"levelPrice",attrs:{"data-index":"levelPrice",title:"级别价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getPrice")(t))+"\n            ")]}}])})],1)],1)])])])};qn._withStripped=!0;const Wn=rt({render:qn,staticRenderFns:[]},void 0,Hn,void 0,!1,void 0,!1,void 0,void 0,void 0);Wn.install=function(e){e.component(Wn.name,Wn)};var Un={name:"DSelectPeople",mixins:[ht,Fn],components:{CellEllipsisTip:Kt,STable:en,DOperationBox:an,Empty:$n},props:{width:{type:Number,default:1e3},cache:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},title:{type:String,default:"选择经手人"},placeholderLeft:{type:String,default:"请输入部门名称"},placeholderRight:{type:String,default:"姓名/手机号"},multiple:{type:Boolean,default:!1},beforeClose:{type:Function,default:void 0},replaceFields:{type:Object,default:function(){}},rules:{type:Object,default:function(){return{}}},defaultValue:{type:[Object,Array],default:null},selectionLimit:{type:Number,default:100}},data:function(){return{corpTree:{data:[],keywords:null,expandedKeys:[],selectedKeys:[],autoExpandParent:!0,treeFirstNode:null,loading:!1},tableData:[],searchData:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:{}},opened:!1}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="stafferId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&this.reset().dealResult().getCorpTree(),this.opened=!0)}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},baseReplaceFields:function(){return me({key:"stafferId"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}}},methods:{onSelectCorpTreeNode:function(e,t){console.log("onSelectCorpTreeNode",e,t),t.selected?this.corpTree.selectedKeys=[t.node.dataRef.businessId]:this.corpTree.selectedKeys=[this.corpTree.treeFirstNode.businessId],this.searchResult.categoryPath=t.selected?t.node.dataRef:this.corpTree.treeFirstNode,this.dealResult().loadTableData()},onExpand:function(e){this.corpTree.expandedKeys=e,this.corpTree.autoExpandParent=!1},getParentKey:function(e,t){for(var n,a=0;a<t.length;a++){var i=t[a];i.children&&(i.children.some((function(t){return t.businessId===e}))?n=i.businessId:this.getParentKey(e,i.children)&&(n=this.getParentKey(e,i.children)))}return n},onSearchTree:function(e){var t=this,n=e.target.value;this.corpTree.expandedKeys=this.searchData.map((function(e){return e.name.indexOf(n)>-1?t.getParentKey(e.businessId,t.corpTree.data):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t})),this.corpTree.autoExpandParent=!0},handleSearchByKeywords:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},loadTableData:function(){var e=arguments,t=this;return ve(be.mark((function n(){var a,i,o;return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.pagination,n.prev=1,t.tableLoading=!0,n.next=5,t.$post(Be,me({corpId:t.searchResult.categoryPath.corpId||"",departmentId:t.searchResult.categoryPath.businessId||"",keyword:t.searchResult.keywords||"",dismiss:!1,entryDateBegin:"",entryDateEnd:"",isAdmin:"",locked:!1,normal:!0,pageNum:a.pageNum||1,pageSize:a.pageSize||30},t.rules));case 5:i=n.sent,o=i.data,t.tableData=o.list,t.dealSelectionCheckBox(),t.pagination.total=o.total,t.pagination.current=o.pageNum,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error(n.t0);case 16:return n.prev=16,t.tableLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()},getCorpTree:function(){var e=this;return ve(be.mark((function t(){var n,a;return be.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.corpTree.loading=!0,t.next=4,e.$get(je);case 4:n=t.sent,a=n.data,e.corpTree.data=a,function t(n){var a=[];return n.forEach((function(n){n.scopedSlots={title:"title"},e.searchData.push(n),n.children&&n.children.length&&t(n.children),a.push(n)})),a}(a),e.corpTree.data&&e.corpTree.data.length>0&&(e.corpTree.treeFirstNode=e.corpTree.data[0],e.corpTree.selectedKeys=[e.corpTree.treeFirstNode.businessId],e.searchResult.categoryPath=e.corpTree.data[0],e.loadTableData()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:return t.prev=15,e.corpTree.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},handleOk:function(){if(this.selectionContent.selectedRowKeys.length>this.selectionLimit)this.$message.warning("最多选择".concat(this.selectionLimit,"条"));else{var e={data:this.selectionContent.selectedRowKeys,rows:this.getRowData()};this.beforeClose?this.beforeClose(e):this.$emit("confirm",e),this.$emit("update:visible",!1)}},reset:function(){return this.tableData=[],this.corpTree.keywords="",this.corpTree.expandedKeys=[],this.corpTree.selectedKeys=[],this.corpTree.autoExpandParent=!0,this.corpTree.data=[],this.searchResult={keywords:"",categoryPath:{}},this.corpTree.treeFirstNode=null,this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this},onOperationClick:function(e){"clear"===e.name&&this.handleSelectedClear()},handleCancel:function(){this.$emit("cancel"),this.$emit("update:visible",!1)}}};const Gn=Un;var Yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-people a-table-common modal-reset-no-padding",attrs:{footer:null,keyboard:!1,maskClosable:!1,title:e.title,width:e.width,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"people-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:e.placeholderLeft,allowClear:""},on:{change:e.onSearchTree},model:{value:e.corpTree.keywords,callback:function(t){e.$set(e.corpTree,"keywords",t)},expression:"corpTree.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.corpTree.loading,expression:"corpTree.loading"}],staticClass:"classify-wrap"},[n("a-tree",{attrs:{"auto-expand-parent":e.corpTree.autoExpandParent,"expanded-keys":e.corpTree.expandedKeys,replaceFields:{children:"children",title:"name",key:"businessId"},"selected-keys":e.corpTree.selectedKeys,"tree-data":e.corpTree.data},on:{expand:e.onExpand,select:e.onSelectCorpTreeNode},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.name;return[a.indexOf(e.corpTree.keywords)>-1?n("span",[e._v("\n              "+e._s(a.substr(0,a.indexOf(e.corpTree.keywords)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.corpTree.keywords))]),e._v("\n              "+e._s(a.substr(a.indexOf(e.corpTree.keywords)+e.corpTree.keywords.length))+"\n            ")]):n("span",[e._v(e._s(a))])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationClick}},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholderRight,allowClear:""},on:{search:e.handleSearchByKeywords},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{"data-index":"name",title:"姓名"}}),e._v(" "),n("a-table-column",{key:"stafferNo",attrs:{"data-index":"stafferNo",title:"编号"}}),e._v(" "),n("a-table-column",{key:"departmentName",attrs:{title:"部门"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.departmentName}})]}}])}),e._v(" "),n("a-table-column",{key:"mobile",attrs:{"data-index":"mobile",title:"联系电话"}})],1)],1)]),e._v(" "),n("div",{staticClass:"select-people-footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n    "),n("a-button",{attrs:{disabled:!e.selectionContent.selectedRowKeys||0===e.selectionContent.selectedRowKeys.length,type:"primary"},on:{click:e.handleOk}},[e._v("\n      确 定\n    ")])],1)])};Yn._withStripped=!0;const Xn=rt({render:Yn,staticRenderFns:[]},void 0,Gn,void 0,!1,void 0,!1,void 0,void 0,void 0);Xn.install=function(e){e.component(Xn.name,Xn)};var Jn={name:"DSelectSaleArea",props:{width:{require:!1,type:String,default:"120"},maxHeight:{require:!1,type:String,default:"300"},placeholder:{require:!1,type:String,default:"销售区域"}},data:function(){return{value:void 0,parentId:0,replaceFields:{children:"children",value:"id",title:"name",key:"id"},treeData:[],apiName:null}},created:function(){this.treeData.length||this.getList([],!1)},methods:{openSelect:function(){this.treeData.length||this.getList([],!1)},getList:function(){var e=arguments,t=this;return ve(be.mark((function n(){var a,i,o,r;return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:[],i=e.length>1&&void 0!==e[1]&&e[1],n.prev=2,n.next=5,t.$post(Oe,{businessId:t.parentId});case 5:o=n.sent,(r=o.data).length>0&&(i?(a.children=r,t.treeData=dt(t.treeData)):t.treeData=r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onLoadData:function(e){var t=this;return new Promise((function(n){var a=e.dataRef;a.hasChildren?setTimeout((function(){t.parentId=a.id,t.getList(a,!0),n()}),300):n()}))},changeValue:function(e){this.$emit("sureSelect",e)}}};const Qn=Jn;var Zn=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{style:{width:e.width+"px"},attrs:{allowClear:"","tree-data-simple-mode":"","dropdown-style":{width:+e.width+60+"px",maxHeight:e.maxHeight+"px",overflow:"auto"},"tree-data":e.treeData,placeholder:e.placeholder,"load-data":e.onLoadData,replaceFields:e.replaceFields},on:{change:e.changeValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})};Zn._withStripped=!0;const ea=rt({render:Zn,staticRenderFns:[]},void 0,Qn,"data-v-1c52a95a",!1,void 0,!1,void 0,void 0,void 0);ea.install=function(e){e.component(ea.name,ea)};var ta={name:"DSelectCustomer",components:{Empty:$n,SelectSaleArea:ea,DOperationBox:an,CellEllipsisTip:Kt,STable:en},mixins:[ht,Fn],props:{visible:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},cache:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:1e3},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{key:"businessId"}}},attrs:{type:Object,default:function(){}},defaultSelectedRowKeys:{type:Object,default:function(){return{selectedRowKeys:[],selectedRows:[]}}},isShowPrice:{type:Boolean,default:!1},customerType:{type:Array,default:function(){return[1,2,3,4]}},sortList:{type:Array,default:void 0},defaultValue:{type:[Array,Object],default:void 0},beforeClose:{type:Function,default:void 0},selectionLimit:{type:Number,default:100},placeholder:{type:String,default:null}},data:function(){return{tableData:[],levelPrices:{data:[],loading:!1},searchResult:{customerTypeIds:[],keywords:null,priceLevelId:null,regionId:null},customers:{loading:!1},categories:{keyword:"",data:[],loading:{}}}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},filteredCategories:function(){var e=this;return this.categories.keyword?this.categories.data.filter((function(t){return t.label.indexOf(e.categories.keyword)>-1})):this.categories.data},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.customers.loading}})}},baseReplaceFields:function(){return me({key:"businessId"},this.replaceFields)},sortColumns:function(){return this.sortList?this.sortList:[{key:"name"},{key:"region"},{key:"priceLevel"}]},getTitle:function(){return this.customerType.includes(1)&&this.customerType.includes(2)?"客户":this.customerType.includes(1)?"供应商":"客户"},tablePlaceholder:function(){return this.placeholder?this.placeholder:"".concat(this.getTitle,"名称/联系人/手机")}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="businessId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),this.cache||(this.reset().dealResult().loadTableData(),this.handleFetchCategories(),this.handleFetchLevelPrice()))},defaultSelectedRowKeys:{handler:function(e){var t=ae.deepClone(e);this.selectionContent.selectedRowKeys=t.selectedRowKeys,this.selectionContent.selectedRows=t.selectedRows},immediate:!0}},filters:{balance:function(e,t){if(e){var n=e.filter((function(e){return e.value===t}));return n.length?n[0].label:"-"}return"-"}},methods:{loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;this.customers.loading=!0,this.$post(De,me(me({pageNum:t.current,pageSize:t.pageSize,orderCustomerTypeList:this.customerType,keyword:this.searchResult.keywords},this.searchResult),this.rules)).then((function(t){e.tableData=t.data.list,e.dealSelectionCheckBox(),e.pagination.total=t.data.total,e.pagination.current=t.data.pageNum})).finally((function(){e.customers.loading=!1}))},onCustomersSearch:function(e,t){this.searchResult[e]=t,this.handleSelectedClear().loadTableData()},handleOk:function(){var e=this;this.selectionContent.selectedRowKeys.length>this.selectionLimit?this.$message.warning("最多选择".concat(this.selectionLimit,"条")):this.beforeClose?this.beforeClose({data:this.selectionContent.selectedRowKeys,rows:this.getRowData()},(function(){e.modalVisible=!1})):(this.$emit("confirm",{data:this.selectionContent.selectedRowKeys,rows:this.getRowData()}),this.modalVisible=!1)},handleFetchCategories:function(){var e=this;this.categories.loading=!0,this.$post(Le).then((function(t){e.categories.data=t.data||[]})).catch((function(e){return console.error(e)})).finally((function(){e.categories.loading=!1}))},handleFetchLevelPrice:function(){var e=this;this.isShowPrice&&(this.levelPrices.loading=!0,this.$post(Me).then((function(t){e.levelPrices.data=t.data||[]})).finally((function(){e.levelPrices.loading=!1})))},onOperationOptionClick:function(e){"clear"===e.name&&this.handleSelectedClear()},reset:function(){return this.tableData=[],this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this}}};const na=ta;var aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",e._b({staticClass:"d-select-customer a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.title||"选择"+e.getTitle,width:e.width},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},"a-modal",e.attrs,!1),[n("div",{staticClass:"customer-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{attrs:{maxLength:40,placeholder:"请输入分类名称"},model:{value:e.categories.keyword,callback:function(t){e.$set(e.categories,"keyword",t)},expression:"categories.keyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.categories.loading,expression:"categories.loading"}],staticClass:"classify-wrap"},[n("a-checkbox-group",{attrs:{name:"checkboxgroup"},on:{change:function(t){return e.onCustomersSearch("customerTypeIds",arguments[0])}},model:{value:e.searchResult.customerTypeIds,callback:function(t){e.$set(e.searchResult,"customerTypeIds",t)},expression:"searchResult.customerTypeIds"}},[n("a-row",[n("a-space",{attrs:{direction:"vertical"}},e._l(e.filteredCategories,(function(t,a){return n("a-col",{key:a,attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])],1)})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationOptionClick}},[n("a-space",[n("a-input-search",{attrs:{maxLength:40,placeholder:e.tablePlaceholder},on:{search:function(t){return e.onCustomersSearch("keywords",arguments[0])}},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.isShowPrice?n("a-select",{staticStyle:{width:"120px"},attrs:{loading:e.levelPrices.loading,allowClear:"",placeholder:"级别价"},on:{change:function(t){return e.onCustomersSearch("priceLevelId",arguments[0])}}},e._l(e.levelPrices.data,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):e._e(),e._v(" "),n("select-sale-area",{staticClass:"select-area",attrs:{placeholder:"销售区域"},on:{sureSelect:function(t){return e.onCustomersSearch("regionId",arguments[0])}}})],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.customers.loading,expression:"customers.loading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate,"sort-list":e.sortColumns},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{title:e.getTitle+"名称","data-index":"name"}}),e._v(" "),n("a-table-column",{key:"region",attrs:{title:"销售区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cell-ellipsis-tip",{attrs:{line:2,tip:""+t.region}},[e._v("\n              "+e._s(t.region)+"\n            ")])]}}])}),e._v(" "),n("a-table-column",{key:"priceLevel",attrs:{"data-index":"priceLevel",title:"级别价"}}),e._v(" "),n("a-table-column",{key:"balanceList1",attrs:{title:"应收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,1))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList2",attrs:{title:"应付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,2))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList3",attrs:{title:"预收"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,3))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList4",attrs:{title:"预付"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,4))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList5",attrs:{title:"积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,5))+"\n          ")]}}])}),e._v(" "),n("a-table-column",{key:"balanceList6",attrs:{title:"第三方ERP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("balance")(t.balanceList,6))+"\n          ")]}}])})],1)],1)])])};aa._withStripped=!0;const ia=rt({render:aa,staticRenderFns:[]},void 0,na,void 0,!1,void 0,!1,void 0,void 0,void 0);ia.install=function(e){e.component(ia.name,ia)};const oa=rt({},void 0,{name:"SelectGroup",props:{value:{type:[String,Boolean,Number,Array],default:void 0},options:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}}},computed:{baseReplaceFields:function(){return me({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},methods:{lineClick:function(e){if(this.multiple)if(this.checkValue.includes(e[this.baseReplaceFields.key])){var t=this.checkValue.indexOf(e[this.baseReplaceFields.key]);this.checkValue.splice(t,1)}else this.checkValue.push(e[this.baseReplaceFields.key]);else this.checkValue=e[this.baseReplaceFields.key]},getData:function(){var e=this,t=this.options.filter((function(t){return e.multiple?e.checkValue.includes(t[e.baseReplaceFields.key]):t[e.baseReplaceFields.key]===e.checkValue}));return{checkValue:this.checkValue,data:this.checkValue,rows:t}}},render:function(e){var t=this;return e(t.multiple?"a-checkbox-group":"a-radio-group",{props:{value:t.checkValue,name:t.multiple?"a-checkbox-group":"a-radio-group"},on:{input:function(e){t.checkValue=e}},class:"group-out-box"},t.options.map((function(n,a){return e(t.multiple?"a-checkbox":"a-radio",{attrs:{value:n[t.baseReplaceFields.key],key:a},key:a,props:{key:a},on:{click:function(e){e.stopPropagation()}}},n[t.baseReplaceFields.name])})))}},void 0,void 0,void 0,!1,void 0,void 0,void 0),ra={name:"DSelectProductAttr",components:{SelectGroup:oa,Empty:$n},props:{value:{type:Object,default:null},visible:{type:Boolean,default:!1},width:{type:Number,default:816},destory:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入搜索关键字"},type:{type:Number,default:0},productId:{type:Array,default:function(){return[]}},inputValue:{type:String,default:""},replaceFields:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}}},data:function(){return{selectValue:void 0,keywords:"",options:[],loading:!1}},watch:{modalVisible:{handler:function(e){e&&(this.init(),this.value&&(this.selectValue=this.value.id)),this.rules.keywords&&(this.keywords=this.rules.keywords)},immediate:!0}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},title:function(){var e=this.type;return 0===e?"选择单位":1===e?"选择品牌":2===e?"选择标签":3===e?"选择单位":"选择仓库"},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t.name.match(e.keywords))return t})):this.options},baseReplaceFields:function(){return me({key:"id",name:"name"},this.replaceFields)}},methods:{init:function(){var e=this;this.loading=!0,4===this.type?this.$get(Ne,me({pageNum:1,pageSize:100},this.rules)).then((function(t){e.options=t.data.list})).finally((function(){e.loading=!1})):3===this.type?this.$post(Ee,this.productId).then((function(t){e.options=t.data.map((function(e){return me(me({},e),{},{name:e.unitName})}))})).finally((function(){e.loading=!1})):this.$post(Ie,me({type:this.type},this.rules)).then((function(t){e.options=t.data})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},handlerAfterClose:function(){this.$emit("afterClose")},handleOk:function(){var e=this,t=this.options.find((function(t){return t.id===e.selectValue})),n=this.options.filter((function(t){return t.id===e.selectValue}));this.$emit("confirm",{data:t,rows:n,baseRows:this.options}),this.modalVisible=!1}}};var sa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{afterClose:e.handlerAfterClose,destroyOnClose:e.destory,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:function(t){e.modalVisible=!1},ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1)],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},[n("select-group",{attrs:{options:e.filteredOptions,replaceFields:e.baseReplaceFields},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};sa._withStripped=!0;const la=rt({render:sa,staticRenderFns:[]},void 0,ra,void 0,!1,void 0,!1,void 0,void 0,void 0);la.install=function(e){e.component(la.name,la)};var ca="SYS_0000",ua={0:"付款账户选择",1:"多账户选择"};const da={name:"DSelectPayAccount",components:{Empty:$n},filters:{payAccountConvert:function(e){var t=gn.find((function(t){return t.id===e}));return t?t.name:"--"}},props:{type:{type:Number,default:0},width:{type:[String,Number],default:816},visible:{type:Boolean,default:!1},payType:{type:Number,default:1},dueMoney:{type:[Number,String],default:0},customerId:{type:[String,Number],default:""},beforeClose:{type:Function,default:null},cache:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},excludeAccountTypes:{type:Array,default:function(){return[]}},defaultValue:{type:[String,Number,Array,Object],default:null},verifyTotalMoney:{type:Boolean,default:!0}},data:function(){return{modalTitles:ua,loading:!1,tableData:[],totalMoney:0,keywords:null}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},locale:function(){return{emptyText:this.$createElement("Empty",{props:{loading:this.loading}})}},filteredTableData:function(){var e=this;return this.keywords?this.includedTableData.filter((function(t){var n=t.name,a=t.bankDeposit,i=t.accountNumber;if(n.match(e.keywords)||a.match(e.keywords)||i.match(e.keywords))return t})):this.includedTableData},includedTableData:function(){var e=this;return this.tableData.filter((function(t){if(!e.excludeAccountTypes.includes(t.type))return t}))}},watch:{visible:function(e){e&&!this.cache?this.loadData():this.tableData.length||this.loadData(),this.rules.keywords&&(this.keywords=this.rules.keywords)}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.$get(Ke,me({accountType:this.payType,customerId:this.customerId},this.rules)).then((function(t){var n=t.code,a=t.data;if(n===ca){if(e.tableData=a.map((function(t,n){if(0===e.type){var a=!1;return e.defaultValue&&(a=e.defaultValue===t.accountId),me({checked:a,payMoney:0,index:n+1,sort:n+1,accountType:t.type},t)}if(1===e.type){var i=0;if(e.defaultValue&&"[object Array]"===Object.prototype.toString.call(e.defaultValue)){var o=e.defaultValue.find((function(e){return e.accountId===t.accountId}));o&&(i=o.payMoney,t.payMoney=o.payMoney,e.payMoneyBlur(t))}return me({payMoney:i,index:n+1,sort:n+1,accountType:t.type},t)}})),0===e.type&&e.tableData.length&&!e.tableData.find((function(e){return e.checked}))){var i=e.tableData.find((function(e){return 2===e.type}));i?i.checked=!0:e.tableData[0].checked=!0}e.$emit("data",e.tableData)}})).finally((function(){e.loading=!1}))},handleOk:function(){var e=this,t=null;if(1===this.type){var n=this.filteredTableData.filter((function(e){return e.checked=void 0,Number(e.payMoney)}));if(t={type:this.type,disabled:this.filteredTableData.length>1,paymentAccounts:n,payMoney:this.totalMoney},this.verifyTotalMoney&&t.payMoney>this.dueMoney)return void this.$message.error("请输入最大本次应付金额且最多2位小数的数值")}else t=this.filteredTableData.filter((function(e){return e.checked}));this.beforeClose?this.beforeClose({data:t,rows:t},(function(){e.$emit("update:visible",!1)})):(this.$emit("confirm",{data:t,rows:t}),this.$emit("update:visible",!1))},payMoneyBlur:function(e){1===e.type&&e.payMoney>e.balance&&(this.$message.error("预付金额小于本次付款金额，无法完成抵扣。"),e.payMoney=0),e.payMoney=ie.fmtNum(e.payMoney,!1,2,!1);var t=this.tableData.reduce((function(e,t){return e+Number(t.payMoney)}),0);this.totalMoney=ie.fmtNum(t,!1,2,!1)},handleCancel:function(){this.$emit("update:visible",!1)},radioChange:function(e){var t=this;this.filteredTableData.forEach((function(e){return e.checked=!1})),this.$nextTick((function(){t.filteredTableData[e].checked=!0}))}}};var ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-pay-account a-table-common modal-reset-no-padding",attrs:{keyboard:!1,maskClosable:!1,title:e.modalTitles[e.type],width:e.width,"cancel-text":"取消(Esc)","ok-text":"确定(Enter)"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[0===e.type?n("div",{staticClass:"single-account"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:"请输入关键字"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),n("a-table",{attrs:{customRow:function(t,n){return{on:{click:function(){e.radioChange(n)}}}},"data-source":e.filteredTableData,loading:e.loading,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},"row-key":"index"}},[n("a-table-column",{key:"index",attrs:{width:64,align:"center","data-index":"index"},scopedSlots:e._u([{key:"default",fn:function(t,a,i){return[n("span",{on:{click:function(t){return e.radioChange(i)}}},[n("a-radio",{attrs:{checked:a.checked}})],1)]}}],null,!1,4291464169)}),e._v(" "),n("a-table-column",{attrs:{width:160,"data-index":"type",title:"账户类型"},scopedSlots:e._u([{key:"default",fn:function(t,n){return[e._v("\n          "+e._s(e._f("payAccountConvert")(n.type))+"\n        ")]}}],null,!1,2287724343)}),e._v(" "),n("a-table-column",{attrs:{width:192,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{key:"bankDeposit",attrs:{width:160,"data-index":"bankDeposit",title:"开户银行"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)}),e._v(" "),n("a-table-column",{key:"accountNumber",attrs:{width:160,"data-index":"accountNumber",title:"银行账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t||"-")+"\n        ")]}}],null,!1,2524362810)})],1)],1):n("div",{staticClass:"multiple-account"},[n("div",{staticClass:"dialog-pay"},[e._v("应"+e._s(1===e.payType?"付":"收")+"金额：¥"+e._s(e.dueMoney))]),e._v(" "),n("a-table",{staticClass:"account",attrs:{"data-source":e.filteredTableData,locale:e.locale,pagination:!1,scroll:{y:"calc(100vh - 350px)"},bordered:"",rowKey:"index"}},[n("a-table-column",{key:"index",staticClass:"style-padding",attrs:{width:88,align:"center","data-index":"index",title:"行号"}}),e._v(" "),n("a-table-column",{staticClass:"style-padding",attrs:{width:358,"data-index":"name",title:"账户名称"}}),e._v(" "),n("a-table-column",{attrs:{width:"100%","data-index":"payMoney",title:"金额"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},on:{blur:function(t){return e.payMoneyBlur(a)}},model:{value:a.payMoney,callback:function(t){e.$set(a,"payMoney",t)},expression:"record.payMoney"}})]}}])}),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"total"},[n("div",{staticClass:"name"},[e._v("合计")]),e._v(" "),n("div",{staticStyle:{width:"358px"}}),e._v(" "),n("div",{staticClass:"money"},[e._v(e._s(e.totalMoney))])])])],2)],1)])};ha._withStripped=!0;const fa=rt({render:ha,staticRenderFns:[]},void 0,da,void 0,!1,void 0,!1,void 0,void 0,void 0);function pa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}fa.install=function(e){e.component(fa.name,fa)};var ma=function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.__PARENTSAPPJSONP__&&window.__POWERED_BY_QIANKUN__?window.__PARENTSAPPJSONP__(n,(function(e){t=e})):window.TMAPCALLBACK[n]=function(e){t=e},document.body.appendChild(a);var i=function(){document.body.removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},ga={"北京市":{city:"北京市",short:"京",lng:"116.39737",lat:"39.939502"},"天津市":{city:"天津市",short:"津",lng:"117.133262",lat:"39.256321"},"上海市":{city:"上海市",short:"沪",lng:"121.36464",lat:"31.303465"},"重庆市":{city:"重庆市",short:"渝",lng:"106.32485",lat:"29.895013"},"河北省":{city:"石家庄",short:"冀",lng:"114.336873",lat:"38.21885"},"山西省":{city:"太原",short:"晋",lng:"112.349964",lat:"38.044464"},"辽宁省":{city:"沈阳",short:"辽",lng:"123.241164",lat:"41.948112"},"吉林省":{city:"长春",short:"吉",lng:"125.228072",lat:"43.894927"},"黑龙江省":{city:"哈尔滨",short:"黑",lng:"126.479088",lat:"45.985284"},"江苏省":{city:"南京",short:"苏",lng:"118.715429",lat:"32.246466"},"浙江省":{city:"杭州",short:"浙",lng:"120.040035",lat:"30.350837"},"安徽省":{city:"合肥",short:"皖",lng:"117.170056",lat:"31.99595"},"福建省":{city:"福州",short:"闽",lng:"119.156964",lat:"26.182279"},"江西省":{city:"南昌",short:"赣",lng:"115.808656",lat:"28.774611"},"山东省":{city:"济南",short:"鲁",lng:"116.912494",lat:"36.812038"},"河南省":{city:"郑州",short:"豫",lng:"113.453802",lat:"34.895028"},"湖北省":{city:"武汉",short:"鄂",lng:"114.116105",lat:"30.764814"},"湖南省":{city:"长沙",short:"湘",lng:"112.800698",lat:"28.474291"},"广东省":{city:"广州",short:"粤",lng:"113.233035",lat:"23.224606"},"海南省":{city:"海口",short:"琼",lng:"110.179083",lat:"19.921006"},"四川省":{city:"成都",short:"川",lng:"103.924003",lat:"30.796585"},"贵州省":{city:"贵阳",short:"黔",lng:"106.499624",lat:"26.844365"},"云南省":{city:"昆明",short:"滇",lng:"102.599397",lat:"25.248948"},"陕西省":{city:"西安",short:"陕",lng:"108.780889",lat:"34.408508"},"甘肃省":{city:"兰州",short:"甘",lng:"103.66644",lat:"36.218003"},"青海省":{city:"西宁",short:"青",lng:"101.605943",lat:"36.752842"},"西藏自治区":{city:"拉萨",short:"藏",lng:"90.972306",lat:"29.838888"},"广西壮族自治区":{city:"南宁",short:"桂",lng:"108.265765",lat:"23.020403"},"内蒙古自治区":{city:"呼和浩特",short:"蒙",lng:"111.614073",lat:"40.951504"},"宁夏回族自治区":{city:"银川",short:"宁",lng:"106.094884",lat:"38.624116"},"新疆维吾尔自治区":{city:"乌鲁木齐",short:"新",lng:"87.476819",lat:"43.894927"},"香港特别行政区":{city:"香港",short:"港",lng:"114.1529",lat:"22.542716"},"澳门地区":{city:"澳门",short:"澳",lng:"113.417008",lat:"22.337477"},"台湾省":{city:"台北",short:"台.",lng:"121.36464",lat:"25.248948"}},va="https://apis.map.qq.com",ya={geocoder:"".concat(va,"/ws/geocoder/v1"),placeSearch:"".concat(va,"/ws/place/v1/search"),placeExplore:"".concat(va,"/ws/place/v1/explore"),placeDetail:"".concat(va,"/ws/place/v1/detail"),placeSuggestion:"".concat(va,"/ws/place/v1/suggestion"),district:"".concat(va,"/ws/district/v1"),directionDriving:"".concat(va,"/ws/direction/v1/driving"),directionTransit:"".concat(va,"/ws/direction/v1/transit"),directionWalking:"".concat(va,"/ws/direction/v1/walking"),directionBicycling:"".concat(va,"/ws/direction/v1/bicycling"),distanceMatrix:"".concat(va,"/ws/distance/v1/matrix"),locationIP:"".concat(va,"/ws/location/v1/ip"),staticmap:"".concat(va,"/ws/staticmap/v2"),coordTranslate:"".concat(va,"/ws/coord/v1/translate")},ba=function(e){var t="";if(e)for(var n in e)e.hasOwnProperty(n)&&(t+="".concat(t?"".concat(t,"&"):"").concat(n,"=").concat(e[n]));return t},wa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.mapOptions={key:"T74BZ-KJV6U-EVEVH-B2ZLQ-YIZQF-3PFPB",container:"map",center:{lat:39.908802,lng:116.397502},zoom:16,location:!1,showMarker:!1,success:null,fail:null},this.varia={queue:[],mapStatus:!1,centerMarker:null,on:{tilesloaded:null}},this._init(t)}var t,n,a,i;return t=e,n=[{key:"_init",value:function(e){this._initConfig(e),e&&e.container&&(this._initMap(),this._afterInit())}},{key:"_initConfig",value:function(e){this.mapOptions=this.merge(this.mapOptions,e)}},{key:"_initMap",value:(i=ve(be.mark((function e(){var t=this;return be.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=this.mapOptions.key,ma("https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=TMapLoad"));case 2:this.mapOptions.center=this.latLng(this.mapOptions.center),this.map=new TMap.Map(this.mapOptions.container,this.mapOptions),this.map.once("tilesloaded",(function(){t.varia.mapStatus=!0,t.runQueue(),t.mapOptions.success&&t.mapOptions.success()}));case 5:case"end":return e.stop()}var n}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_afterInit",value:function(){this.mapOptions.location&&this.location(),this.mapOptions.showMarker&&this.setMarker(this.mapOptions.center)}},{key:"run",value:function(e,t){this.varia.mapStatus?this[e](t):this.varia.queue.push({name:e,options:t})}},{key:"on",value:function(e,t){console.log(e,t)}},{key:"runQueue",value:function(){var e=this;this.varia.queue.forEach((function(t){e[t.name](t.options)})),this.varia.queue=[]}},{key:"request",value:function(e,t){var n,a,i=(n=this.mapOptions,a="key=".concat(n.key,"&output=jsonp"),{parseLocation:function(e){return ma("https://apis.map.qq.com/ws/geocoder/v1/?".concat(ba(e),"&").concat(a))},placeSearch:function(e){return ma("".concat(ya.placeSearch,"?").concat(ba(e),"&").concat(a))},placeExplore:function(e){return ma("".concat(ya.placeExplore,"?").concat(ba(e),"&").concat(a))},placeDetail:function(e){return ma("".concat(ya.placeDetail,"?").concat(ba(e),"&").concat(a))},suggestion:function(e){return ma("".concat(ya.placeSuggestion,"?").concat(ba(e),"&").concat(a))},geocoder:function(e){var t=e.address;return t&&ga[t]&&(e.address="".concat(t).concat(ga[t].city)),ma("".concat(ya.geocoder,"?").concat(ba(e),"&").concat(a))},directionDriving:function(e){return ma("".concat(ya.directionDriving,"?").concat(ba(e),"&").concat(a))},directionWalking:function(e){return ma("".concat(ya.directionWalking,"?").concat(ba(e),"&").concat(a))},directionBicycling:function(e){return ma("".concat(ya.directionBicycling,"?").concat(ba(e),"&").concat(a))},directionTransit:function(e){return ma("".concat(ya.directionTransit,"?").concat(ba(e),"&").concat(a))},distanceMatrix:function(e){return ma("".concat(ya.distanceMatrix,"?").concat(ba(e),"&").concat(a))},district:function(e){return ma("".concat(ya.district,"?").concat(ba(e),"&").concat(a))},coordTranslate:function(e){return ma("".concat(ya.coordTranslate,"?").concat(ba(e),"&").concat(a))},locationIP:function(e){return ma("".concat(ya.locationIP,"?").concat(ba(e),"&").concat(a))}});if(!i[e])throw Error("错误警告: ".concat(e," 不是一个正确的地图请求方法，请使用正确的方法。"));return i[e](t)}},{key:"merge",value:function(e,t){for(var n in t)e[n]=e[n]&&"[object Object]"===e[n].toString()?this.merge(e[n],t[n]):e[n]=t[n];return e}},{key:"destory",value:function(){this.map.destroy()}},{key:"random",value:function(){return Math.floor(1234567890*Math.random())}},{key:"latLng",value:function(e){var t=e.lng,n=e.lat;return new TMap.LatLng(n,t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){console.log(e,"设置地图中心点"),this.map.setCenter(this.latLng(e))}},{key:"setRotation",value:function(e){this.map.setRotation(e)}},{key:"setPitch",value:function(e){this.map.setPitch(e)}},{key:"setScale",value:function(e){this.map.setScale(e)}},{key:"setMode",value:function(e){"2D"===e?this.map.setViewMode("2D"):"3D"===e&&(this.map.setViewMode("3D"),this.map.setPitch(70))}},{key:"setMarker",value:function(e,t){var n=this;console.log("setMarker-point-内部函数",e),console.log("setMarker-styles-内部函数",t),this.removeMarker(),console.log("marker-layer-".concat(Math.floor(1e4*Math.random())),"IDDDDD"),console.log(this,"this"),this.varia.centerMarker=new TMap.MultiMarker({id:"marker-layer-".concat(Math.floor(1e4*Math.random())),map:this.map,styles:me({marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},t),geometries:function(e){var t=n;if("[object Object]"===Object.prototype.toString.call(e))return e.lat=Number(e.lat),e.lng=Number(e.lng),[{id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}}];var a=[];return e.forEach((function(e){a.push({id:"marker_".concat(t.random()),styleId:"marker",position:t.latLng(e),properties:{title:"marker"}})})),a}(e)})}},{key:"setMarkerCrm",value:function(e){this.varia.centerMarker=new TMap.MultiMarker({id:"marker_".concat(this.random()),map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"})},geometries:[{id:"markergeo_".concat(this.random()),styleId:"marker_".concat(this.random()),position:new TMap.LatLng(e.lat,e.lng),properties:{title:"marker"}}]})}},{key:"removeMarker",value:function(){console.log("移除marker事件"),console.log(this.varia.centerMarker),this.varia.centerMarker&&(this.varia.centerMarker.setMap(null),this.varia.centerMarker=null)}},{key:"removeCluster",value:function(){}},{key:"setCircle",value:function(e){return new TMap.MultiCircle({id:"circle",map:this.map,geometries:[{center:this.latLng(e),radius:1e3}]})}},{key:"setMarkerCluster",value:function(e){var t=this;return console.log("setMarkerCluster"),this.varia.markerCluster=new TMap.MarkerCluster({id:"marker_".concat(this.random()),map:this.map,enableDefaultStyle:!1,minimumClusterSize:2,geometries:function(e){var n=t;if("[object Object]"===Object.prototype.toString.call(e))return[{position:n.latLng(e)}];var a=[];return e.forEach((function(e){a.push({position:n.latLng(e)})})),a}(e),zoomOnClick:!0,gridSize:60,averageCenter:!1,maxZoom:10}),this.varia.markerCluster}}],n&&pa(t.prototype,n),a&&pa(t,a),e}();const ka={name:"Map",props:{sceneId:{type:String,default:"default"},visible:Boolean,inputValue:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100%"},searchInput:{type:Boolean,default:!0},optionSelect:{type:String,default:"title"},intLocation:{type:Boolean,default:!0},config:{type:Object,default:function(){return{}}}},data:function(){return{list:[],actInputValue:"",realDot:!1,glMap:null,id:"TMapSearch_"+ce.default.guid()}},watch:{inputValue:function(e){e!==this.actInputValue&&(this.realDot=!0,this.actInputValue=e)},visible:function(e){e&&(this.glMap||this.initMap(),this.actInputValue=this.inputValue)}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this;this.$nextTick((function(){e.glMap=new wa(me({container:e.id,success:function(){console.log("地图加载完毕！"),e.$emit("init",e.glMap),e.initComplate()}},e.config)),e.actInputValue=e.inputValue,e.searchInput&&e.actInputValue&&e.intLocation&&(e.realDot=!0,e.handleSearch()),e.glMap._afterInit()}))},initComplate:function(){var e=this,t=this;this.$nextTick((function(){setTimeout((function(){e.actInputValue=e.inputValue,t.glMap.request("suggestion",{keyword:e.inputValue}).then((function(e){e.count&&t.setPosition(e.data[0].id,e.data),t.list=e.data||[],t.$forceUpdate()})),t.$forceUpdate(),e.glMap.map.on("click",(function(e){var n=e.latLng.getLat(),a=e.latLng.getLng();t.setCenter({lat:n,lng:a});var i=[];t.glMap.request("parseLocation",{location:n+","+a}).then((function(e){console.log(e,"根据经纬度".concat(n+","+a,"解析地址信息"));var o={adcode:Number(e.result.ad_info.adcode),address:e.result.formatted_addresses.recommend,city:e.result.address_component.city,district:e.result.address_component.district,location:e.result.location,id:"123456ABCD",title:e.result.formatted_addresses.recommend,province:e.result.address_component.province,type:0};console.log(o,"传给外面的数据对象 - item--1"),t.$emit("change",o),i.push(o),t.actInputValue=e.result.formatted_addresses.recommend,t.setPosition("123456ABCD",i),t.glMap.request("suggestion",{keyword:e.result.address+e.result.formatted_addresses.recommend}).then((function(e){console.log(e,"res1"),e.count&&i.push.apply(i,dt(e.data)),t.list=i,t.$forceUpdate()}))}))}))}),1e3)}))},inputHandler:function(e){var t=this;e&&(this.realDot?this.glMap.request("geocoder",{address:e}).then((function(e){t.realDot=!1,e.status?t.handleSearch():t.setAutoPosition(e.result)})):this.glMap.request("suggestion",{keyword:e}).then((function(e){console.log(e,"inputHandler--suggestion - input 输入框 输入关键词"),t.list=e.data})))},handleSearch:function(){var e=this;this.actInputValue&&(this.realDot?this.glMap.request("geocoder",{address:this.actInputValue}).then((function(t){e.realDot=!1,t.status?e.handleSearch():e.setAutoPosition(t.result)})):this.glMap.request("suggestion",{keyword:this.actInputValue}).then((function(t){console.log(t,"handleSearch--suggestion - input 手动调用搜索"),e.list=t.data})))},handleSelect:function(e){if(console.log("handleSelect：",e),e){var t=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(t.location),this.glMap.setMarker(t.location),console.log(t,"传给外面的数据对象 - item--2"),this.$emit("change",t)}},setPosition:function(e,t){this.list=t;var n=this.list.filter((function(t){return t.id===e}))[0];this.glMap.setCenter(n.location),this.glMap.setMarker(n.location),this.$forceUpdate()},setCenter:function(e){this.glMap.setMarker(e)},setAutoPosition:function(e){console.log(e)},setAddress:function(e){this.inputHandler(e)},resetValue:function(e){var t=this;this.$nextTick((function(){(t.actInputValue||t.inputValue)&&(t.actInputValue=t.inputValue,t.list=[],t.actInputValue&&!e&&(t.realDot=!0,t.handleSearch()),t.realDot=!1,t.handleSearch())}))}}};var Ca=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-search-wrapper"},[e.searchInput?n("a-auto-complete",{staticClass:"map-search",attrs:{autoFocus:"",placeholder:"请输入"},on:{search:e.inputHandler,select:e.handleSelect},model:{value:e.actInputValue,callback:function(t){e.actInputValue="string"==typeof t?t.trim():t},expression:"actInputValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t[e.optionSelect]))])})),1)],2):e._e(),e._v(" "),n("div",{staticClass:"t-map-search",style:{height:e.height,width:e.width},attrs:{id:e.id}})],1)};Ca._withStripped=!0;const _a={name:"Manage",components:{GlMap:rt({render:Ca,staticRenderFns:[]},void 0,ka,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},visible:{type:Boolean,default:!1},title:{type:String,default:"地址定位"},config:{type:Object,default:function(){return null}},inputValue:{type:String,default:""},baseValue:{type:String,default:""}},data:function(){return{flag:!0,cache:null,addressInfo:{},glmap:new wa}},watch:{visible:function(e){var t=this;this.$nextTick((function(){t.addressInfo={},e&&t.$nextTick((function(){setTimeout((function(){t.inputValue&&t.$refs.map&&t.$refs.map&&(console.log(t.inputValue,"this.inputValue"),t.parseAddress(t.inputValue,(function(e){if(e.length){var n=e[0];t.addressInfo=n,t.cache?t.$refs.map.setPosition(t.cache.id,ce.default.unique([t.cache].concat(dt(e)),"id")):t.$refs.map.setPosition(n.id,e)}else t.$refs.map.setPosition(t.cache.id,[t.cache])})))}),1e3)}))}))}},computed:{modalVisible:{get:function(){return this.visible},set:function(){this.$emit("update:visible",!1)}}},mounted:function(){},methods:{parseAddress:function(e,t){"string"==typeof e&&e.trim().length&&this.glmap.request("suggestion",{keyword:e}).then((function(e){e.count?t&&t(e.data):t&&t(null)}))},handleOk:function(){console.log(this.addressInfo,"点击弹框确定按钮返回  addressInfo 给最外面"),this.cache=this.addressInfo,this.$emit("ok",this.addressInfo),this.modalVisible=!1},handleCancel:function(){this.modalVisible=!1},handleChange:function(e){console.log(e,"弹框输入框选项发生变化，选中项赋值给 - addressInfo"),this.addressInfo=e}}};var Sa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"map-dialog-modal",attrs:{title:e.title,maskClosable:!1,width:"810px",keyboard:!1},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("gl-map",{ref:"map",attrs:{sceneId:e.sceneId,visible:e.modalVisible,inputValue:e.inputValue,intLocation:!1},on:{change:e.handleChange}})],1)};Sa._withStripped=!0;const xa={name:"AddressSearch",components:{MapDialog:rt({render:Sa,staticRenderFns:[]},void 0,_a,void 0,!1,void 0,!1,void 0,void 0,void 0)},props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},value:{type:String,default:""},icon:{type:String,default:"environment"},showBtn:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},defaultBtn:{type:Boolean,default:!1}},data:function(){return{dataSource:[],poiPicker:null,list:[],glMap:null,mapVisible:!1}},computed:{autoValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.autoValue=this.value,this.glMap=new wa},methods:{handleSearch:function(e){var t=this;e&&this.glMap.request("suggestion",{keyword:e}).then((function(e){t.$set(t,"list",e.data)}))},handleBtn:function(){console.log("handleBtn"),this.disabled||(this.defaultBtn?this.mapVisible=!0:this.$emit("btnClick"))},handleSelect:function(e){if(e){var t=this.list.filter((function(t){return t.id===e}))[0];this.autoValue=t.title,this.$emit("change",t)}},resetOption:function(){var e=this;this.$nextTick((function(){e.list=[],e.handleSearch(e.value)}))},handleMapOk:function(e){e.adcode&&(this.autoValue=e.title||e.address,this.$emit("change",e))}}};var Ra=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a-auto-complete",{staticClass:"map-search",attrs:{placeholder:"请输入",disabled:e.disabled},on:{search:e.handleSearch,select:e.handleSelect},model:{value:e.autoValue,callback:function(t){e.autoValue=t},expression:"autoValue"}},[n("template",{slot:"dataSource"},e._l(e.list,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.title))])})),1),e._v(" "),e._t("default",[n("a-input",{attrs:{maxLength:e.maxLength}},[e.showBtn?n("a-button",{staticClass:"dot-btn",staticStyle:{"margin-right":"-12px"},attrs:{slot:"suffix",type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleBtn(t)}},slot:"suffix"},[n("a-icon",{attrs:{type:e.icon}})],1):e._e()],1)])],2),e._v(" "),n("map-dialog",{ref:"mapDialog",attrs:{visible:e.mapVisible,title:"设置地址",sceneId:e.sceneId,inputValue:e.autoValue},on:{"update:visible":function(t){e.mapVisible=t},ok:e.handleMapOk}})],1)};Ra._withStripped=!0;const Oa=rt({render:Ra,staticRenderFns:[]},void 0,xa,void 0,!1,void 0,!1,void 0,void 0,void 0);var Da={name:"AreaSelect",props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:"span"},bottom:{type:String,default:"24px"},level:{type:Number,default:3},disabled:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{}}},url:{type:String,default:""},loadData:{type:Function,default:null},dealData:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1}},data:function(){return{model:[{name:"province",label:"省"},{name:"city",label:"市"},{name:"district",label:"区"}],selectData:[],areaData:{province:[],city:[],district:[]},$request:null}},watch:{value:{handler:function(e){if(e.length){if(e[e.length-1]===this.selectData[this.selectData.length-1])return;this.dealValue()}else this.selectData=[],this.areaData.city=[],this.areaData.district=[]},deep:!0}},mounted:function(){var e=this;this.url?this.$request=function(t){return e.$get(e.url,t)}:this.$request=this.loadData,this.value.length?this.dealValue():this.getList()},methods:{getList:function(e,t,n){var a=this;this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){e||(a.areaData.province=n.data),e&&!t&&(a.areaData.city=n.data),e&&t&&(a.areaData.district=n.data)}))},dealValue:function(e,t,n){for(var a=this,i=JSON.parse(JSON.stringify(this.value)),o=0;o<i.length;o++)if(!i[o]){i.splice(o,i.length);break}this.$request({provinceId:e,cityId:t,districtId:n}).then((function(n){var o=n.data;e||(a.areaData.province=o,i[0]&&a.dealValue(i[0]),1===i.length&&(a.selectData=i,a.dealResult())),e&&!t&&(a.areaData.city=o,i[1]&&a.dealValue(i[0],i[1]),2===i.length&&(a.selectData=i,a.dealResult())),e&&t&&(a.areaData.district=o,3===i.length&&(a.selectData=i,a.dealResult()))}))},handleChange:function(e,t){"province"===t.name&&(this.areaData.city=[],this.areaData.district=[],this.selectData=[e],this.getList(e)),"city"===t.name&&(this.areaData.district=[],this.selectData=[this.selectData[0],e],this.getList.apply(this,dt(this.selectData))),this.dealResult(),this.$emit("input",JSON.parse(JSON.stringify(this.selectData)))},dealResult:function(){var e=this,t=this.areaData.province.filter((function(t){return t.id===e.selectData[0]}))[0]||null,n=this.areaData.city.filter((function(t){return t.id===e.selectData[1]}))[0]||null,a=this.areaData.district.filter((function(t){return t.id===e.selectData[2]}))[0]||null;this.$emit("change",this.selectData,{province:t,city:n,district:a})}}};const La=Da;var Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{staticClass:"area-wrap",attrs:{gutter:12}},[e._l(e.model,(function(t,a){return[a<=e.level-1?n("a-col",{key:a,style:{marginBottom:"span"===e.type||e.model.length-1===a?"":e.bottom},attrs:{span:"span"===e.type?24/e.model.length:24}},[n("a-select",{staticClass:"area-select",attrs:{placeholder:t.label,disabled:e.disabled},on:{change:function(n){return e.handleChange(n,t)}},model:{value:e.selectData[a],callback:function(t){e.$set(e.selectData,a,t)},expression:"selectData[index]"}},e._l(e.areaData[t.name],(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e()]}))],2)};Ta._withStripped=!0;var $a={name:"AddressBox",props:{sceneId:{type:String,default:"default"},maxLength:{type:Number,default:100},syncInputBox:{type:Boolean,default:!0},value:{type:Object,default:function(){return{address:"",province:"",cityName:"",city:"",provinceName:"",districtName:"",district:"",fullAddress:"",lng:"",lat:"",point:null}}}},data:function(){var e=this;return{actForm:{address:""},outerLocation:{},area:[],areaData:null,confirmLoading:!1,mapLoadArea:!1,getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(Se.city,t):t.provinceId&&t.cityId?e.$get(Se.district,t):void 0:e.$get(Se.province,t)},getAddressCodeByName:function(t){return e.$get(xe,t)},isFirst:!0}},components:{AddressSearch:Oa,AreaSelect:rt({render:Ta,staticRenderFns:[]},void 0,La,void 0,!1,void 0,!1,void 0,void 0,void 0)},watch:{value:{handler:function(){this.generateForm()},deep:!0},actForm:{handler:function(e){this.isFirst?this.isFirst=!1:this.$emit("inputChange",e)},deep:!0}},mounted:function(){this.generateForm()},methods:{generateForm:function(){this.actForm=me({address:"",province:"",city:"",district:""},this.value),this.area=[],this.actForm.province&&this.area.push(this.actForm.province),this.actForm.city?this.area.push(this.actForm.city):this.actForm.province||(this.area=[]),this.actForm.district?this.area.push(this.actForm.district):this.actForm.province||this.actForm.district||(this.area=[])},handleMapOk:function(e){var t=this;return ve(be.mark((function n(){return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,"地图选择 ok----"),e.adcode){n.next=3;break}return n.abrupt("return");case 3:e&&(t.getAddressCodeByName({provinceName:e.province,cityName:e.city,districtName:e.district}).then((function(e){t.mapLoadArea=!0;var n=e.data,a=n.subAddress,i=a.subAddress;t.area=[n.id,a.id,i.id]})),t.actForm.address=e.title||e.address,t.$emit("input",t.actForm));case 4:case"end":return n.stop()}}),n)})))()},handleAreaChange:function(e,t){if(this.areaData=t,this.mapLoadArea)return this.actForm.province=e[0],this.actForm.city=e[1],this.actForm.district=e[2],this.actForm.provinceName=t.province.name,this.actForm.cityName=t.city.name,this.actForm.districtName=t.district.name,this.$emit("input",this.actForm),void(this.mapLoadArea=!1);this.actForm=me(me({},this.actForm),{},{province:t.province&&t.province.id,city:t.city&&t.city.id,district:t.district&&t.district.id,provinceName:t.province&&t.province.name,cityName:t.city&&t.city.name,districtName:t.district&&t.district.name}),this.syncInputBox&&(this.actForm.address="".concat(t.province&&t.province.name||"").concat(t.city&&t.city.name||"").concat(t.district&&t.district.name||"")),this.$emit("input",this.actForm)},getData:function(){return this.areaData}}};const Va=$a;var Ia=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model-item",{attrs:{label:"省/市/区",prop:"area"}},[n("area-select",{attrs:{loadData:e.getRegion},on:{change:e.handleAreaChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"详细地址",prop:"address"}},[n("address-search",{ref:"autoComplete",attrs:{sceneId:e.sceneId,maxLength:e.maxLength,defaultBtn:""},on:{change:e.handleMapOk},model:{value:e.actForm.address,callback:function(t){e.$set(e.actForm,"address",t)},expression:"actForm.address"}})],1)],1)};Ia._withStripped=!0;const Fa=rt({render:Ia,staticRenderFns:[]},void 0,Va,void 0,!1,void 0,!1,void 0,void 0,void 0);Fa.install=function(e){e.component(Fa.name,Fa)},ce.default.ISREPEAT=function(e){return Object.keys(ce.default).includes(e)},ce.default.date.calcWeek=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY/MM/DD",a=new Date(t),i=ce.default.date.endOf("week",a,n),o=ce.default.date.add(e,"w",i,n),r=ce.default.date.endOf("w",o,n),s=ce.default.date.startOf("w",o,n);return{start:s,end:r}},ce.default.date.calcMonth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=new Date(e),a=ce.default.date.startOf("month",n,t),i=ce.default.date.endOf("month",n,t);return{start:a,end:i}},ce.default.date.mandom=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0,n=new Date(e),a=n.getMonth()+1,i=ce.default.date.daysInMonth(n),o=[],r=1;r<=i;r++)o.push(ce.default.date.format(ce.default.date.format("2021/".concat(a,"/").concat(r),"YYYY-MM-DD")+" ".concat(ce.default.rangeRandom(0,23),":").concat(ce.default.rangeRandom(0,59)),t||"YYYY-MM-DD hh:mm"));return o[ce.default.rangeRandom(1,i)[0]]},ce.default.date.period=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=new Date(n);if(1===e)return ce.default.date.calcWeek(0,a,t);if(2===e)return{start:ce.default.date.subtract(6,"day",a,t),end:ce.default.date.format(t)};if(3===e)return ce.default.date.calcMonth(a,t);if(4===e){var i=ce.default.date.endOf("week",a,t);return{start:ce.default.date.subtract(20,"day",i,t),end:i}}var o=ce.default.date.subtract(2,"month",ce.default.date.startOf("month",a),t),r=ce.default.date.endOf("month",a,t);return{start:o,end:r}},ce.default.date.isPeriod=function(e,t){return 1===e||2===e?ce.default.date.isToday(t):3===e&&void 0},Map.prototype.getByKey=function(e){var t=dt(this.keys()),n=t.findIndex((function(t){return Array.isArray(t)&&t.includes(e)}));return this.get(t[n])},ce.default.amap={jsonpRequest:function(e){window.TMAPCALLBACK||(window.TMAPCALLBACK={});var t,n="tmap_".concat(Math.floor(1234567890*Math.random())),a=document.createElement("script");a.setAttribute("src",e+"&callback=TMAPCALLBACK.".concat(n)),window.TMAPCALLBACK[n]=function(e){t=e},document.querySelector("body").appendChild(a);var i=function(){document.querySelector("body").removeChild(a),delete window.TMAPCALLBACK[n]};return new Promise((function(e,n){a.onload=function(){e(t),i()},a.onerror=function(){n(t),i()}}))},parsePoint:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){var a=ce.default.urlSerialize("",Object.assign({key:"d59ce84bb495eccd65a4d238c8c06977"},t)),i="https://restapi.amap.com/v3/geocode/geo".concat(a);console.log(i,"请求地址"),n(e.jsonpRequest(i))}))},loadScript:function(e,t){var n=this;return new Promise((function(a,i){var o=document.createElement("script");t&&n.setAttr(o,t),o.onload=function(){return a(o)},o.onerror=function(){return i(o)},o.src=e,document.querySelector("body").appendChild(o)}))},isLoad:function(){for(var e=document.getElementsByTagName("script"),t=!1,n=0;n<e.length;n++)e[n].getAttribute("src").includes("https://webapi.amap.com/maps?v=1.4.6&key=d59ce84bb495eccd65a4d238c8c06977&plugin=AMap.Geocoder")&&(t=!0);return t},setAttr:function(e,t){for(var n in t)e.setAttribute(n,t[n])}},ce.default.caputured=function(){var e=ve(be.mark((function e(t){var n,a,i,o,r=arguments;return be.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",[null,o]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[e.t0,null]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),re.default.prototype.$caputured=function(){var e=ve(be.mark((function e(t){var n,a,i,o,r=arguments;return be.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=r.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=r[i];return e.next=4,t.apply(void 0,a);case 4:return o=e.sent,e.abrupt("return",{err:null,res:o});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{err:e.t0,res:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ce.default.try=function(e,t){try{e&&e()}catch(e){t&&t(e)}},ce.default.jsonToArray=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return[].concat(dt(t),[fe({},n,e[n])])}),[])},ce.default.icon={report:{iconList:{1:"iconreport01",2:"iconreport02",3:"iconreport03",4:"iconreport04",5:"iconreport05",6:"iconreport06",7:"iconreport07",8:"iconreport08",9:"iconreport09",10:"iconreport10",11:"iconreport11",12:"iconreport12",13:"iconreport13",15:"iconreport15",16:"iconreport16",17:"iconreport17",18:"iconreport18",19:"iconreport19",20:"iconreport20",21:"iconreport21",22:"iconreport22",23:"iconreport23",24:"iconreport24",25:"iconreport25",26:"iconreport26",27:"iconreport27",28:"iconreport28",29:"iconreport29",30:"iconreport30",31:"iconreport31",32:"iconreport32",33:"iconreport33",34:"iconreport34",35:"iconreport35",36:"iconreport36",37:"iconreport37",38:"iconreport38",39:"iconreport39",40:"iconreport40",41:"iconreport41",42:"iconreport42",43:"iconreport43",44:"iconreport44",45:"iconreport45",46:"iconreport46",47:"iconreport47",48:"iconreport48"},colorList:{1:"#0289ff",2:"#00c359",3:"#fc943d",4:"#fb602c"}},approve:{iconList:{},colorList:{}}},ce.default.mapHandler=function(e,t,n){var a=Object.keys(e).find((function(e){return JSON.parse(e).includes(t)}));a?e[a]():n&&n()};var Ea={name:"EditorAddress",components:{AddressBox:Fa},props:{visible:{type:Boolean,default:!1},editData:{type:Object,default:function(){return{}}},customerId:{type:String,default:null,require:!0},hasAddress:{type:Boolean,default:!1}},data:function(){return{form:{deliveryMethod:"",deliveryId:void 0,deliveryName:"",logisticsId:void 0,logisticsName:"",customerName:"",phone:"",detailAddress:"",address:"",province:"",city:"",district:"",longitude:"",latitude:"",provinceName:"",cityName:"",districtName:"",fullAddress:"",loadingInfo:"",allAddress:void 0,isDefault:!1},confirmLoading:!1,basicRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}]},logisticsRules:{deliveryId:[{required:!0,message:"请选择",trigger:"change"}],customerName:[{required:!0,message:"请输入",trigger:"change"}],phone:[{required:!0,message:"请输入",trigger:"change"}],allAddress:[{required:!0,message:"请选择",trigger:"change"}]},backForm:null,syncInputBox:!0,deliveryTypes:{data:[],loading:!1},logisticsCorps:{data:[],loading:!1}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},rules:function(){return 2===this.form.deliveryMethod?this.logisticsRules:this.basicRules},isUpdateMode:function(){return!!this.form.businessId},title:function(){return this.isUpdateMode?"编辑收货信息":"新增收货信息"}},watch:{visible:function(e){var t=this;return ve(be.mark((function n(){return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.handleGetDeliveryType();case 3:return n.next=5,t.handleGetLogistcsCorp();case 5:t.editData&&t.editData.businessId?(t.syncInputBox=!1,t.form=t.editData,t.form.address=t.form.detailAddress,t.form.loadingInfo=t.form.loadingInfo||t.form.fullAddress):(t.syncInputBox=!0,t.form={deliveryId:t.deliveryTypes.data.length&&t.deliveryTypes.data[0].value,customerName:"",isDefault:!t.hasAddress});case 6:case"end":return n.stop()}}),n)})))()},backForm:{handler:function(e){var t=this;e&&(this.form.address=e.address,this.form.province=e.province,this.form.city=e.city,this.form.district=e.district,this.form.detailAddress=e.address,e.address&&e.province&&e.city&&e.district?(this.form.allAddress=!0,this.$nextTick((function(){t.$refs.allAddress&&t.$refs.allAddress.onFieldChange()}))):this.form.allAddress=void 0)},deep:!0}},methods:{handleGetDeliveryType:function(){var e=this;return ve(be.mark((function t(){var n,a;return be.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.deliveryTypes.loading=!0,t.next=4,e.$get(He);case 4:n=t.sent,a=n.data,e.deliveryTypes.data=a.map((function(e){return me({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.deliveryTypes.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},handleGetLogistcsCorp:function(){var e=this;return ve(be.mark((function t(){var n,a;return be.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.logisticsCorps.loading=!0,t.next=4,e.$get(qe);case 4:n=t.sent,a=n.data,e.logisticsCorps.data=a.map((function(e){return me({label:e.name,value:e.id},e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.logisticsCorps.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},onDeliveryTypeChange:function(e){var t=this.deliveryTypes.data.find((function(t){return t.value===e}));t&&(this.form.deliveryMethod=t.requireOption)},changePhone:function(e){this.form.phone=e.replace(/[\u4E00-\u9FA5]|[A-Za-z]/g,"")},changeRadio:function(){this.form.isDefault=!this.form.isDefault},handleOk:function(){var e=this;this.$refs.ruleFormReceipt.validate(function(){var t=ve(be.mark((function t(n){var a,i,o,r,s,l,c,u,d,h,f,p,m,g;return be.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=46;break}if(a=e.deliveryTypes.data.find((function(t){return t.value===e.form.deliveryId})),2!==e.form.deliveryMethod){t.next=23;break}if(i=e.form.provinceName,o=e.form.cityName,r=e.form.districtName,s=e.form.address,l=[i,o,r,s].join(""),c="",!l){t.next=13;break}return t.next=12,ce.default.amap.parsePoint({address:l});case 12:c=t.sent;case 13:u=c?c.geocodes:[],e.form.longitude=u.length?u[0].location.split(",")[0]:"",e.form.latitude=u.length?u[0].location.split(",")[1]:"",d=[i,o,r].join(""),h="",h=d.includes(s)?d:s.includes(d)?s:d===s?d:l,f=e.logisticsCorps.data.find((function(t){return t.value===e.form.logisticsId})),e.form.logisticsName=f&&f.label,e.form.fullAddress=h,e.form.detailAddress=e.form.address;case 23:return 1===e.form.deliveryMethod&&(e.form.fullAddress=e.form.loadingInfo),e.form.deliveryName=a.label,e.$emit("confirm",e.form),t.prev=26,e.confirmLoading=!0,t.next=30,e.$post(e.isUpdateMode?Xe:Ye,me({customerId:e.customerId},e.form));case 30:if(p=t.sent,m=p.data,g=p.message,m){t.next=35;break}throw new Error(g);case 35:e.$message.success("操作成功！"),e.$emit("success"),t.next=43;break;case 39:t.prev=39,t.t0=t.catch(26),e.$message.error(t.t0),console.error(t.t0);case 43:return t.prev=43,e.confirmLoading=!1,t.finish(43);case 46:case"end":return t.stop()}}),t,null,[[26,39,43,46]])})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.modalVisible=!1,this.$emit("cancel")},afterClose:function(){this.syncInputBox=!0,this.form={customerName:"",isDefault:!1}},inputChange:function(e){this.isUpdateMode&&(this.syncInputBox=!0),this.backForm=me(me({},this.form),e)},changeTextarea:function(){this.form.loadingInfo.length>=500&&this.$message.info("限500字")}}};const Pa=Ea;var Aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"receipt-dialog-wrap",attrs:{afterClose:e.afterClose,"confirm-loading":e.confirmLoading,maskClosable:!1,title:e.title,width:500,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("a-form-model",{ref:"ruleFormReceipt",attrs:{"label-col":{span:5},model:e.form,rules:e.rules,"wrapper-col":{span:17}}},[n("a-form-model-item",{attrs:{label:"发货方式",prop:"deliveryId"}},[n("a-select",{attrs:{loading:e.deliveryTypes.loading,placeholder:"请选择"},on:{change:e.onDeliveryTypeChange},model:{value:e.form.deliveryId,callback:function(t){e.$set(e.form,"deliveryId",t)},expression:"form.deliveryId"}},e._l(e.deliveryTypes.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),e._v(" "),2===e.form.deliveryMethod?[n("a-form-model-item",{attrs:{label:"物流公司",prop:"logisticsId"}},[n("a-select",{attrs:{loading:e.logisticsCorps.loading,placeholder:"请选择"},model:{value:e.form.logisticsId,callback:function(t){e.$set(e.form,"logisticsId",t)},expression:"form.logisticsId"}},e._l(e.logisticsCorps.data,(function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),e._v(" "),n("a-form-model-item",{attrs:{label:"收货人",prop:"customerName"}},[n("a-input",{staticClass:"customer-name-wrap",attrs:{maxLength:50,suffix:e.form.customerName.length+"/50",placeholder:"请输入"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName","string"==typeof t?t.trim():t)},expression:"form.customerName"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"联系方式",prop:"phone"}},[n("a-input",{attrs:{maxLength:50,placeholder:"请输入"},on:{change:function(t){return e.changePhone(e.form.phone)}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),n("a-form-model-item",{ref:"allAddress",staticStyle:{"margin-bottom":"0"},attrs:{label:"所在地区",prop:"allAddress"}},[n("a-form-model",{staticClass:"cus-address-wrap",attrs:{"label-col":{span:0},"wrapper-col":{span:24}}},[n("address-box",{attrs:{maxLength:100,syncInputBox:e.syncInputBox},on:{inputChange:e.inputChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)]:e._e(),e._v(" "),1===e.form.deliveryMethod?n("a-form-model-item",{attrs:{label:"装车信息",prop:"loadingInfo"}},[n("a-textarea",{attrs:{maxLength:500,placeholder:"限500字",rows:5},on:{change:e.changeTextarea},model:{value:e.form.loadingInfo,callback:function(t){e.$set(e.form,"loadingInfo","string"==typeof t?t.trim():t)},expression:"form.loadingInfo"}})],1):e._e(),e._v(" "),n("a-radio",{staticStyle:{"margin-left":"76px"},attrs:{checked:e.form.isDefault},on:{click:e.changeRadio}},[e._v("设为默认")])],2)],1)};Aa._withStripped=!0;const Na=rt({render:Aa,staticRenderFns:[]},void 0,Pa,"data-v-0c26a3f4",!1,void 0,!1,void 0,void 0,void 0);Na.install=function(e){e.component(Na.name,Na)};const Ma={name:"DSelectAddress",components:{CellEllipsisTip:Kt,STable:en,EditorAddress:Na},props:{width:{type:Number,default:816},cache:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},setContainer:{type:Function,default:function(){return document.querySelector("body")}},customerId:{type:String,default:null,require:!0},title:{type:String,default:"选择收货地址"},beforeClose:{type:Function,default:void 0},value:{type:Object,default:void 0}},data:function(){return{currentMark:-1,addressDetailsShow:!1,clickReceipt:null,opened:!1,list:{data:[],loading:!1,selected:null}}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&((!this.cache||this.cache&&!this.opened)&&(this.list.selected=null,this.getDeliverys()),this.opened=!0)}},methods:{getDeliverys:function(){var e=this;return ve(be.mark((function t(){var n,a;return be.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.list.loading=!0,t.next=4,e.$post(Ge,{businessId:e.customerId});case 4:n=t.sent,a=n.data,e.list.data=a||[],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.prev=12,e.list.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},deleteAddress:function(e){var t=this;this.$confirm({title:"操作提示！",content:"您是否确定删除此地址？",okText:"确定",cancelText:"取消",onOk:function(){return ve(be.mark((function n(){return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(Je,{businessId:e.businessId,customerId:e.customerId});case 3:e.businessId===t.list.selected&&(t.list.selected=null),t.$message.success("操作成功！"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:return n.prev=10,t.getDeliverys(),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})))()}})},setDefault:function(e){var t=this;return ve(be.mark((function n(){var a,i,o;return be.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$post(Qe,{businessId:e.businessId,customerId:e.customerId});case 3:if(a=n.sent,i=a.data,o=a.message,i){n.next=8;break}throw new Error(o);case 8:t.$message.success("操作成功！"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0);case 14:return n.prev=14,t.getDeliverys(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))()},handleSelectAddress:function(e){this.list.selected=e.businessId},editAddress:function(e){this.clickReceipt=e,this.addressDetailsShow=!0},addAddress:function(){this.clickReceipt=null,this.addressDetailsShow=!0},onEditAddressSucceed:function(){this.addressDetailsShow=!1,this.getDeliverys()},handleOk:function(){var e=this,t=this.list.data.find((function(t){return t.businessId===e.list.selected}));this.beforeClose?this.beforeClose({data:this.list.selected,rows:[t]}):this.$emit("confirm",{data:this.list.selected,rows:[t]}),this.modalVisible=!1},handleCancel:function(){this.$emit("cancel"),this.modalVisible=!1}}};var ja=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-address",attrs:{footer:null,"get-container":e.setContainer,keyboard:!1,maskClosable:!1,title:e.title,width:e.width},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.list.loading,expression:"list.loading"}],staticClass:"select-address-content"},[e.list.data&&e.list.data.length>0?n("div",[n("a-radio-group",{staticStyle:{width:"100%"},model:{value:e.list.selected,callback:function(t){e.$set(e.list,"selected",t)},expression:"list.selected"}},e._l(e.list.data,(function(t,a){return n("div",{key:a,staticClass:"content-item",class:{"auto-class":"zt"===t.type||"nothing"===t.type},on:{mouseenter:function(t){e.currentMark=a},mouseleave:function(t){e.currentMark=-1},click:function(n){return n.stopPropagation(),e.handleSelectAddress(t)},dblclick:function(t){return t.stopPropagation(),e.handleOk(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentMark===a,expression:"currentMark === index"}],staticClass:"row-btn"},[n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.setDefault(t)}}},[e._v("设为默认")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.editAddress(t)}}},[e._v("修改")]),e._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return n.stopPropagation(),e.deleteAddress(t)}}},[e._v("删除")])],1),e._v(" "),n("div",[n("a-radio",{style:{display:"block",height:"30px",lineHeight:"30px",marginRight:"14px"},attrs:{value:t.businessId}})],1),e._v(" "),n("div",{staticClass:"details"},[n("div",[e._v("\n              "+e._s(t.deliveryName||"")+"\n                \n              "),t.isDefault?n("a-tag",{attrs:{color:"blue"}},[e._v("默认")]):e._e()],1),e._v(" "),t.customerName&&t.phone?n("div",[e._v(e._s(t.customerName)+"  "+e._s(t.phone))]):e._e(),e._v(" "),t.detailAddress&&2===t.deliveryMethod?n("div",[e._v(e._s(t.detailAddress))]):e._e(),e._v(" "),t.fullAddress&&2!==t.deliveryMethod?n("div",[e._v(e._s(t.fullAddress))]):e._e()])])})),0)],1):n("div",{staticClass:"empty"},[n("a-empty",{attrs:{description:"暂无数据"}})],1)]),e._v(" "),n("div",{staticClass:"select-address-footer"},[n("div",{on:{click:e.addAddress}},[e._v("+新增收货地址")]),e._v(" "),n("div",[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n      "),n("a-button",{attrs:{disabled:!e.list.selected,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)]),e._v(" "),n("EditorAddress",{attrs:{customerId:e.customerId,"edit-data":e.clickReceipt,visible:e.addressDetailsShow,hasAddress:!!e.list.data.length},on:{"update:visible":function(t){e.addressDetailsShow=t},cancel:function(t){e.addressDetailsShow=!1},success:e.onEditAddressSucceed}})],1)};ja._withStripped=!0;const Ba=rt({render:ja,staticRenderFns:[]},void 0,Ma,void 0,!1,void 0,!1,void 0,void 0,void 0);Ba.install=function(e){e.component(Ba.name,Ba)};const Ka={name:"SelectTree",props:{value:{type:[Array,Number,String],default:void 0},multiple:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){return{}}},loadData:{type:Function,default:null}},data:function(){return{treeData:[],spreadData:{}}},computed:{baseReplaceFields:function(){return me({key:"id",name:"name"},this.replaceFields)},checkValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}},treeCheckValue:{get:function(){return"object"===Ze(this.checkValue)?this.checkValue:[this.checkValue]}}},watch:{options:{handler:function(e){console.log("lst",e),this.setOptions()},deep:!0,immediate:!0}},methods:{setOptions:function(){var e=this;this.spreadData={};var t=function t(n){var a=[];return n.forEach((function(n){e.spreadData[n[e.replaceFields.key]]=n,n.children&&(n.children=t(n.children)),a.push(me(me({},n),{},{scopedSlots:{icon:"radio"}}))})),a};this.treeData.length?this.treeData=t(this.treeData):this.treeData=t(this.options)},selectHandle:function(e,t){console.log(e,t)},getData:function(){var e=this,t=Ze(this.checkValue),n=[];return console.log(this.spreadData),"object"===t?this.checkValue.forEach((function(t){var a="object"===Ze(t)?t[e.replaceFields.key]:t;e.spreadData[a]&&n.push(e.spreadData[a])})):this.spreadData[this.checkValue]&&n.push(this.spreadData[this.checkValue]),{checkValue:this.checkValue,data:this.checkValue,rows:this.row||n}},onSelect:function(e,t){this.checkValue=e,this.row=t.checkedNodes.map((function(e){return e.data.props}))}},components:{Empty:$n}};var za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mix-modal-select-tree"},[e.options.length?e._e():n("empty"),e._v(" "),e.multiple?[n("a-tree",{attrs:{showIcon:"",checkable:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,multiple:"",loadData:e.loadData},on:{check:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}]),model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}})]:[n("a-radio-group",{model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},[n("a-tree",{attrs:{showIcon:"","tree-data":e.treeData,replaceFields:e.baseReplaceFields,loadData:e.loadData,selectable:!1},on:{select:e.selectHandle},scopedSlots:e._u([{key:"radio",fn:function(t){return[n("div",{staticClass:"radio-line"},[n("a-radio",{staticClass:"radio-line",attrs:{value:t[e.baseReplaceFields.key]}})],1)]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(t.name)+"\n        ")]}}],null,!1,3749490323),model:{value:e.treeCheckValue,callback:function(t){e.treeCheckValue=t},expression:"treeCheckValue"}})],1)]],2)};za._withStripped=!0;const Ha={name:"MixModal",props:{visible:{type:Boolean,default:!1},name:{type:String,default:"brand",validator:function(e){return-1!==["unit","brand","tag","levelPrice","productCategory","specialCategory","salesArea","classification","delivery","area","logistics","customLogistics"].indexOf(e)}},title:{type:String,default:"请选择"},cache:{type:Boolean,default:!1},beforeClose:{type:Function,default:null},defaultValue:{type:[String,Boolean,Number,Array],default:null},multiple:{type:Boolean,default:!1},extrasOperations:{type:Array,default:function(){return["refresh"]}},rules:{type:Object,default:function(){}}},data:function(){var e=this;return{keywords:"",placeholder:"请输入",options:[],checkValue:[],modelProps:{},testValue:[],loading:!0,modelType:"selectGroup",request:null,replaceFields:{key:"id",name:"name"},getRegion:function(t){return t&&t.provinceId?t.provinceId&&!t.cityId?e.$get(Se.city,me(me({},t),e.rules)):t.provinceId&&t.cityId?e.$get(Se.district,me(me({},t),e.rules)):void 0:e.$get(Se.province,e.rules)}}},computed:{modalVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}},filteredOptions:function(){var e=this;return this.keywords?this.options.filter((function(t){if(t[e.replaceFields["selectGroup"===e.modelType?"name":"title"]].match(e.keywords))return t})):this.options}},watch:{visible:function(e){e&&(this.keywords="",this.options.length&&this.cache||(this.options=[],this.refresh(),this.getList(),this.rules&&this.rules.keywords&&(this.keywords=this.rules.keywords)))},name:function(){this.refresh()}},methods:{refresh:function(){this.options=[],this.setModel(),this.getList()},handleCheckAll:function(){var e=this;this.checkValue=this.options.map((function(t){return t[e.replaceFields.key]}))},setModel:function(){["unit","brand","tag","levelPrice","classification","delivery","logistics"].includes(this.name)?this.modelType="selectGroup":["productCategory","salesArea","area"].includes(this.name)&&(this.modelType="selectTree")},getList:function(){var e=this;if(this.checkValue=this.defaultValue||[],this.loading=!0,["unit","brand","tag"].includes(this.name)){this.checkValue=this.defaultValue||[];var t={type:["unit","brand","tag"].indexOf(this.name)};this.$post(Te,me(me({},t),this.rules)).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))}else["levelPrice"].includes(this.name)?(this.checkValue=this.defaultValue||[],this.replaceFields={},this.$post($e,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):["productCategory","specialCategory"].includes(this.name)?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"categoryName"},this.getCateGory(),this.request=this.getCateGory):"salesArea"===this.name?(this.checkValue=this.defaultValue||void 0,this.replaceFields={key:"id",title:"name"},this.getCustomerRegionList(),this.request=this.getCustomerRegionList):"classification"===this.name?(this.replaceFields={key:"value",name:"label"},this.$post(Le,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1}))):"delivery"===this.name?this.$get(ze,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):"area"===this.name?(this.replaceFields={key:"id",title:"name"},this.getRegion().then((function(t){e.options=t.data.map((function(e){return me(me({},e),{},{isLeaf:!1})})),e.request=e.getRegionList})).finally((function(){e.loading=!1}))):"logistics"===this.name?this.$get(We,this.rules).then((function(t){e.options=t.data;var n=e.options.filter((function(e){return e.isCheck})).map((function(e){return e.id}));console.log("isCheckedValue:",n),e.checkValue=n})).finally((function(){e.loading=!1})):"customLogistics"===this.name?this.$get(Ue,this.rules).then((function(t){e.options=t.data})).finally((function(){e.loading=!1})):(console.error("当前传入名称为：",this.name,"。请确认是否正确！！！"),this.loading=!1)},getCateGory:function(e){var t=this;if(e)return new Promise((function(n){e.dataRef.children?n():t.$get(Ve,me({categoryType:["productCategory","specialCategory"].indexOf(t.name),parentId:e.dataRef.id},t.rules)).then((function(a){e.dataRef.children=a.data.categoryLists,t.options=dt(t.options),n(a.data.categoryLists)}))}));this.$get(Ve,me({categoryType:["productCategory","specialCategory"].indexOf(this.name),parentId:0},this.rules)).then((function(e){t.loading=!1,t.options=e.data.categoryLists}))},getCustomerRegionList:function(e){var t=this;if(e)return new Promise((function(n){if(e.dataRef.children)n();else{var a=e.dataRef;t.$post(Oe,me({businessId:a.id||0},t.rules)).then((function(a){e.dataRef.children=a.data,t.options=dt(t.options),n(a.data)})).finally((function(){t.loading=!1}))}}));this.$post(Oe,me({businessId:0},this.rules)).then((function(e){t.options=e.data})).finally((function(){t.loading=!1}))},getRegionList:function(e){var t=this,n=null,a=null;return e.dataRef&&e.$parent.dataRef&&(n=e.dataRef.parentId,a=e.dataRef.id),e.dataRef&&!e.$parent.dataRef&&(n=e.dataRef.id),new Promise((function(i){e.dataRef.children?i():t.getRegion({provinceId:n,cityId:a}).then((function(n){e.dataRef.children=n.data.map((function(e){return me(me({},e),{},{isLeaf:!!a})})),t.options=dt(t.options),i(n.data)})).finally((function(){t.loading=!1}))}))},okHandle:function(){var e=this.$refs.contentModel.getData();e.isCheckAll=this.checkValue.length===this.options.length,this.beforeClose?this.beforeClose(e,this.cancelHandle):(this.$emit("confirm",e),this.modalVisible=!1)},cancelHandle:function(){this.modalVisible=!1}},components:{SelectGroup:oa,SelectTree:rt({render:za,staticRenderFns:[]},void 0,Ka,void 0,!1,void 0,!1,void 0,void 0,void 0),Empty:$n}};var qa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal-reset",attrs:{keyboard:!1,maskClosable:!1,title:e.title,width:"816px"},on:{cancel:e.cancelHandle,ok:e.okHandle},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"mix-modal"},[n("div",{staticClass:"operation-wrap"},[n("div",{staticClass:"operation-left"},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholder},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.extrasOperations.includes("refresh")?n("a-button",{attrs:{type:"link"},on:{click:e.refresh}},[e._v("刷新")]):e._e(),e._v(" "),(e.extrasOperations.includes("checkAll")&&this.multiple&&this.modelType,e._e())],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[e.filteredOptions.length?n("div",{staticClass:"options-list"},["selectGroup"===e.modelType?n("SelectGroup",{ref:"contentModel",attrs:{multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e(),e._v(" "),"selectTree"===e.modelType?n("SelectTree",{ref:"contentModel",attrs:{"load-data":e.request,multiple:e.multiple,options:e.filteredOptions,"replace-fields":e.replaceFields},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}}):e._e()],1):e.filteredOptions.length||e.loading?e._e():n("Empty")],1)])])};qa._withStripped=!0;const Wa=rt({render:qa,staticRenderFns:[]},void 0,Ha,void 0,!1,void 0,!1,void 0,void 0,void 0);Wa.install=function(e){e.component(Wa.name,Wa)};var Ua={product:{name:"SelectProduct",key:"id",value:"name",type:1},couponProduct:{name:"SelectProduct",key:"id",value:"name",type:2},recommendProduct:{name:"SelectProduct",key:"id",value:"name",type:3},purchaseProduct:{name:"SelectProduct",key:"id",value:"name",type:4},rateProduct:{name:"SelectProduct",key:"id",value:"name",type:6},person:{name:"PeopleModal",key:"id",value:"name"},preparer:{name:"PeopleModal",key:"id",value:"name"},handler:{name:"PeopleModal",key:"id",value:"name"},warehouse:{name:"ChooseEntrepot",key:"id",value:"name"},customer:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplier:{name:"ChoiceCustomer",key:"businessId",value:"name"},supplierCustomer:{name:"ChoiceCustomer",key:"businessId",value:"name"},unit:{name:"GoodAttrModal",key:"id",value:"name"},brand:{name:"GoodAttrModal",key:"id",value:"name"},tag:{name:"GoodAttrModal",key:"id",value:"name"},payment:{name:"payment",key:"id",value:"name"},rateUnit:{name:"GoodAttrModal",key:"id",value:"unitName"},account:{name:"SelectPayAccount",key:"accountId",value:"name"},delivery:{name:"SelectDelivery",key:"id",value:"name"},logistics:{name:"SelectLogistics",key:"id",value:"name"},customLogistics:{name:"SelectCustomLogistics",key:"id",value:"name"},address:{name:"SelectAddress",key:"businessId",value:"deliveryName"}};const Ga=rt({},void 0,{name:"DMixSearch",props:{name:{type:String,default:"product"},value:{type:[Object,String],default:void 0},resultName:{type:String,default:""},width:{type:[Number,String],default:240},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},restore:{type:Boolean,default:!1},require:{type:Boolean,default:!1},maxLength:{type:Number,default:40},next:{type:Function,default:null},origin:{type:String,default:"page"},valueMode:{type:[Boolean,String],default:!1},dialogConfig:{type:Object,default:function(){return{}}}},data:function(){return{componentMap:Ua,visible:!1,modalValue:null,dialog:null,dialogProps:{},multiple:!1}},computed:{actWidth:function(){return"string"==typeof this.width?this.width:"".concat(this.width,"px")}},watch:{value:{handler:function(e){"[object Object]"!==Object.prototype.toString.call(e)?this.modalValue=e||void 0:Object.keys(e).length>0?this.modalValue=e:(console.warn("value 不能为空对象"),this.modalValue=void 0)},deep:!0,immediate:!0},name:function(){this.generateDialog()},visible:function(e){e&&this.generateDialog()}},created:function(){this.dialog||this.generateDialog()},methods:{generateDialog:function(){var e={},t="string"==typeof this.modalValue?[]:this.modalValue?Object.keys(this.modalValue):[];if(this.dialogConfig.multiple?this.multiple=this.dialogConfig.multiple:this.multiple=!0===this.valueMode&&t&&!t.length,["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(this.name)){var n={type:Ua[this.name].type};e=fe({},this.name,{multiple:this.multiple,rules:n}),this.dialog=Wn}else["person","preparer","handler"].includes(this.name)?(e={person:{title:"经手人"},preparer:{title:"制单人"},handler:{title:"经手人"}},this.dialog=Xn):["warehouse"].includes(this.name)?(e={warehouse:{title:"选择仓库",multiple:!0===this.valueMode&&this.multiple}},this.dialog=Nn):["customer","supplier","supplierCustomer"].includes(this.name)?(e={customer:{title:"选择客户",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[2]},supplier:{title:"选择供应商",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[1]},supplierCustomer:{title:"选择往来单位",type:!0===this.valueMode&&this.multiple?"checkbox":"radio",customerType:[3]}},this.dialog=ia):["unit","brand","tag","rateUnit"].includes(this.name)?(e={unit:{type:0},brand:{type:1},tag:{type:2},rateUnit:{type:3}},this.dialog=la):["account"].includes(this.name)?this.dialog=fa:["delivery","logistics","customLogistics"].includes(this.name)?(e={delivery:{name:"delivery"},logistics:{name:"logistics"},customLogistics:{name:"customLogistics"}},this.dialog=Wa):"address"===this.name&&(e={address:{readonly:!0}},this.dialog=Ba);console.log(e[this.name],this.name);var a=tt(this.dialogConfig);a.defaultValue||(a.defaultValue=this.modalValue),this.dialogProps=In(this.dialogProps,e[this.name],a)},enterHandle:function(e){e.data?(this.dialogProps.rules&&(this.dialogProps.rules.keywords=""),this.resultExchange(e)):"blur"!==e.action?(this.dialogProps=In(this.dialogProps,{rules:{keywords:this.modalValue&&this.modalValue.name===e.inputValue?"":e.inputValue}}),this.generateDialog(),this.visible=!0):this.modalValue&&this.modalValue.name!==e.inputValue&&this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData})},clearHandle:function(){this.modalValue=void 0,this.$emit("input",void 0),this.$emit("change",{config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData})},confirmHandle:function(e){console.log(e),["filterDropDown"].includes(this.origin)&&this.next&&this.next("mixSearch","confirm"),e?this.resultExchange(e):this.restore&&this.modalValue&&(this.modalValue=me({},this.modalValue))},resultExchange:function(e){var t=this.componentMap[this.name],n={},a={};if(n=(a=["product","couponProduct","recommendProduct","purchaseProduct","rateProduct"].includes(this.name)?e&&e.rows.length?e.rows[0]:null:(["person","unit","brand","tag"].includes(this.name)||["supplier","customer","supplierCustomer"].includes(this.name)||["warehouse"].includes(this.name),e.rows[0]))?me(me({},a),{},{id:a[t.key],value:a[t.value]}):{},"address"===this.name){var i="";2===a.deliveryMethod&&(i=[a.customerName||"",a.phone||"",a.fullAddress||""].join(" "),n.value=i)}"select"!==this.valueMode&&(this.$emit("input",n),this.modalValue=n,console.log(this.modalValue)),this.$emit("change",me(me({},e),{},{data:this.multiple?e.rows:a?n:null,rows:e.rows,multiple:this.multiple,config:{name:this.name,resultName:this.resultName,type:"mixSearch"},reset:this.resetData}))},getData:function(){return this.modalValue},resetData:function(){this.modalValue=void 0},setData:function(e){this.modalValue=e},focus:function(){this.$refs.SearchInput.focus()}},render:function(e){var t=this;return e("div",{attrs:{class:"select-good-attr",style:"width: ".concat(t.actWidth,";display: inline-block")}},[e("div",{attrs:{class:"input-box"}},[e("SearchInput",{props:{value:t.modalValue,placeholder:t.placeholder,maxLength:t.maxLength,disabled:t.disabled,name:t.name,allowClear:t.allowClear,next:t.next,restore:t.restore,dialogConfig:t.dialogProps},ref:"SearchInput",on:{enterHandle:t.enterHandle,clear:t.clearHandle}})]),e(this.dialog,{on:{confirm:t.confirmHandle,"update:visible":function(e){t.visible=e},cancel:t.confirmHandle},attrs:me({},this.dialogProps),props:me(me({getContainer:function(){return document.querySelector("body")}},t.dialogProps),{},{visible:t.visible})})])},components:{SearchInput:ct}},void 0,void 0,void 0,!1,void 0,void 0,void 0);return Ga.install=function(e){e.component(Ga.name,Ga)},Ga}))},fae9:function(e,t,n){!function(t,a){e.exports=a(n("b0c0"),n("a9e3"),n("4de4"),n("d81d"),n("159b"),n("3177"),n("b64b"),n("caad"),n("2532"),n("2ca0"),n("7db0"),n("a434"),n("7edb"),n("aa47"),n("2b0e"),n("fb19"),n("73c8"),n("04b3"),n("cfba"),n("ac1f"),n("1276"),n("5319"),n("466d"),n("fb6a"),n("d3b7"),n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("99af"),n("4e82"),n("9911"),n("e439"))}(0,(function(e,t,n,a,i,o,r,s,l,c,u,d,h,f,p,m,g,v,y){"use strict";function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var w=b(h),k=b(f),C=b(p),_=b(m),S=b(y);function x(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){x(o,a,i,r,s,"next",e)}function s(e){x(o,a,i,r,s,"throw",e)}r(void 0)}))}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new D(a||[]);return o._invoke=function(e,t,n){var a=d;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,r),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(L([])));k&&k!==n&&a.call(k,o)&&(b=k);var C=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,r,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,r,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,a,i,o){void 0===o&&(o=Promise);var r=new S(c(t,n,a,i),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(a,i){return s.type="throw",s.arg=e,n.next=a,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));function $(e,t,n,a,i,o,r,s,l,c){"boolean"!=typeof r&&(l=s,s=r,r=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),a&&(u._scopeId=a),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const V={name:"TableCellEllipsisTip",props:{onlyLine:{type:Boolean,default:!1},line:{type:Number,default:1},text:{type:[String,Number],default:""},tip:{type:[String,Number],default:""},position:{type:String,default:"bottom"},id:{type:[String,Number],default:o.guid()},tipExtAttr:{type:Object,default:function(){return{}}}},data:function(){return{elId:o.guid().substr(0,5),showTip:!1,actualTip:""}},computed:{cellStyle:function(){return{"line-clamp":this.line}}},mounted:function(){this.tipChange()},updated:function(){this.tipChange()},methods:{tipChange:function(){var e=this;try{var t=this.text?this.text:this.$el.innerText;this.actualTip=this.tip?this.tip:t,this.$nextTick((function(){setTimeout((function(){try{var t=document.getElementById(e.elId);e.showTip=!!t&&o.isEllipsis(t)}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}),0)}))}catch(e){console.error("请注意，TableCellEllipsisTip 组件没有获取到有效的 tip 值！")}}}};var I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-ellipsis-wrap",attrs:{id:"cell-ellipsis-"+e.id,"cell-ellipsis-id":e.id}},[e.showTip&&!e.onlyLine?n("a-tooltip",e._b({class:"cell-tooltip-"+e.id,attrs:{placement:e.position}},"a-tooltip",e.tipExtAttr,!1),[n("template",{slot:"title"},[e._t("tip",[e._v(e._s(e.actualTip))])],2),e._v(" "),n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n        "+e._s(e.text)+"\n      ")])],2)],2):n("div",{staticClass:"cell-content cell-ellipsis",style:e.cellStyle,attrs:{id:e.elId}},[e._t("default",[e._v("\n      "+e._s(e.text)+"\n    ")])],2)],1)};I._withStripped=!0;const F=$({render:I,staticRenderFns:[]},void 0,V,void 0,!1,void 0,!1,void 0,void 0,void 0);function E(){return E=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)}F.install=function(e){e.component(F.name,F)};var P=["attrs","props","domProps"],A=["class","style","directives"],N=["on","nativeOn"],M=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},j=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==P.indexOf(n))e[n]=E({},e[n],t[n]);else if(-1!==A.indexOf(n)){var a=e[n]instanceof Array?e[n]:[e[n]],i=t[n]instanceof Array?t[n]:[t[n]];e[n]=a.concat(i)}else if(-1!==N.indexOf(n))for(var o in t[n])if(e[n][o]){var r=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=r.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?M(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})};function B(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var K=w.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function z(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var H=["key"],q={},W={name:"STable",props:{dragOption:{type:Object,default:function(){return{}}},draggable:Boolean,draggableOption:{type:Object,default:function(){return{minWidth:100,maxWidth:560}}},sortList:{type:Array,default:null},sortConfig:{type:Object,default:function(){return{}}},cellWidth:{type:Object,default:void 0},excludeWidth:{type:Array,default:function(){return[]}}},data:function(){return{components:null,columns:[],hash:""}},computed:{actSortConfig:function(){return L({unshift:["index"],push:[],key:"key"},this.sortConfig)}},created:function(){this.components={header:{cell:this.resizeableTitle}}},mounted:function(){this.columns=this.sortColumns(),Object.keys(this.dragOption).length&&this.initSortable()},render:function(){var e=this,t=arguments[0],n=this.$attrs,a=this.sortColumns(),i={on:L({},this.$listeners)};return t("a-table",j([{},{props:L(L({},n),{},{columns:a}),scopedSlots:L({},this.$scopedSlots)},{attrs:{components:this.components}},i,{ref:"tableSort"}]),[Object.keys(this.$slots).map((function(n){return"default"!==n?t("template",{slot:n},[e.$slots[n]]):null}))])},components:{"vue-draggable-resizable":_.default},methods:{sortColumns:function(){var e=this,t=this.$attrs.columns?this.updateColumns(this.$attrs.columns):this.generateColumns(this.$slots.default);if(this.sortList&&this.sortList.length){var n={},a=[];t.forEach((function(e){e.key&&(n[e.key]=e)})),this.sortList.forEach((function(t){!n[t[e.actSortConfig.key]]||e.actSortConfig.unshift.includes(t[e.actSortConfig.key])||e.actSortConfig.push.includes(t[e.actSortConfig.key])||a.push(n[t[e.actSortConfig.key]])}));for(var i=this.actSortConfig.unshift.length-1;i>=0;i--)this.actSortConfig.unshift[i]&&n[this.actSortConfig.unshift[i]]&&a.unshift(n[this.actSortConfig.unshift[i]]);for(var o=this.actSortConfig.push.length-1;o>=0;o--)this.actSortConfig.push[o]&&n[this.actSortConfig.push[o]]&&a.push(n[this.actSortConfig.push[o]]);return a}return t},generateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t.tag){var a=g.getKey(t),i=g.getStyle(t),o=g.getClass(t),r=g.getOptionProps(t),s=g.getEvents(t),l={};Object.keys(s).forEach((function(e){var t=void 0;t=e.startsWith("update:")?"on-"+e.substr("update:".length)+"-change":"on-"+e,l[g.camelize(t)]=s[e]}));var c=g.getSlots(t),u=c.default,d=z(c,["default"]),h=K({},d,r,{style:i,class:o},l);if(a&&(h.key=a),g.getSlotOptions(t).__ANT_TABLE_COLUMN_GROUP)h.children=e.generateColumns("function"==typeof u?u():u);else{var f=t.data&&t.data.scopedSlots&&t.data.scopedSlots.default;h.customRender=h.customRender||f}n.push(h)}})),n},updateColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],a=this.$slots,i=this.$scopedSlots;return t.forEach((function(t){var o=t.slots,r=void 0===o?{}:o,s=t.scopedSlots,l=void 0===s?{}:s,c=z(t,["slots","scopedSlots"]),u=K({},c);Object.keys(r).forEach((function(e){var t=r[e];void 0===u[e]&&a[t]&&(u[e]=1===a[t].length?a[t][0]:a[t])})),Object.keys(l).forEach((function(e){var t=l[e];void 0===u[e]&&i[t]&&(u[e]=i[t])})),t.children&&(u.children=e.updateColumns(u.children)),n.push(u)})),n},generateSlot:function(){},resizeableTitle:function(e,t,n){var a=this,i=this.columns;i.forEach((function(e){q[e.key]=e.width||0}));var o=C.default.observable(q),r=null,s=t.key,l=B(t,H),c={};if(!(c="selection-column"===s?{dataIndex:"selection-column",key:"selection-column",width:40}:i.find((function(e){return(e.dataIndex||e.key)===s})))||!c.width||"selection-column"===s||this.excludeWidth.includes(s))return c&&c.width?e("th",j([{attrs:{width:c.width}},l]),[n]):e("th",j([{},l]),[n]);var u=this.draggableOption,d=u.maxWidth,h=u.minWidth;return e("th",j([{},l,{directives:[{name:"ant-ref",value:function(e){return r=e}}],attrs:{width:c.width},style:{position:"relative"}}]),[n,e(_.default,{key:c.key,class:"table-draggable-handle",attrs:{w:10,x:o[s]||c.width,z:1,axis:"x",draggable:this.draggable,resizable:!1},on:{dragging:function(e){if(o[s]=0,c.width=Math.max(h,Math.min(e,d)),a.cellWidth){var t=L(L({},a.cellWidth),{},O({},c.key,c.width));a.$emit("update:cellWidth",L({},t))}},dragstop:function(){o[s]=r.getBoundingClientRect().width}},style:{height:"100% !important",bottom:0,left:"auto !important",right:"-5px",cursor:this.draggable?"col-resize":"default","touch-action":"none",transform:"none !important",position:"absolute"}})])},initSortable:function(){var e=this,t=this.$refs.tableSort.$el.querySelectorAll("tbody"),n=Object.assign({},this.dragOption);k.default.create(t[t.length>1?1:0],L(L({handle:".ant-table-row",animation:150},n),{},{onUpdate:function(t){var n=e.$attrs["data-source"],a=t.oldIndex,i=t.newIndex,o=n.splice(a,1)[0];n.splice(i,0,o),e.$emit("onUpdate",{dataSource:n,evt:t})},onStart:function(t){e.$emit("onStart",t)},onAdd:function(t){e.$emit("onAdd",t)},onRemove:function(t){e.$emit("onRemove",t)},onChoose:function(t){e.$emit("onChoose",t)},onEnd:function(t){e.$emit("onEnd",t)},onFilter:function(t){e.$emit("onFilter",t)},onMove:function(t){e.$emit("onMove",t)}}))},changeHandler:function(e){this.$emit("change",e)},refresh:function(e){console.log("refresh"),this.$attrs.columns||this.$forceUpdate()}},install:function(e){e.component(W.name,W)}};const U={name:"Empty",components:{empty:v.empty,loading:v.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};G._withStripped=!0;const Y=$({render:G,staticRenderFns:[]},void 0,U,void 0,!1,void 0,!1,void 0,void 0,void 0);Y.install=function(e){e.component(Y.name,Y)};const X={name:"IconFontBox",props:{type:{type:String,default:"iconqiyeweixin_021"},height:{type:[String,Number],default:""},color:{type:String,default:""},size:{type:[String,Number],default:"20"},display:{type:String,default:"inline-block"},overflow:{type:String,default:"hidden"}},components:{IconFont:S.default},methods:{handleClick:function(){this.$emit("click")}}};var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-font-wrap",style:{height:"auto"===e.height?"auto":e.height?e.height+"px":e.size+"px",color:e.color,fontSize:e.size+"px",display:e.display,overflow:e.overflow},on:{click:e.handleClick}},[n("icon-font",{staticClass:"icon-font-box",attrs:{type:e.type}})],1)};J._withStripped=!0;const Q=$({render:J,staticRenderFns:[]},void 0,X,void 0,!1,void 0,!1,void 0,void 0,void 0);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e){if(!e&&"object"!==Z(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Z(e[n])?t[n]=ee(e[n]):t[n]=e[n]})),t}Q.install=function(e){e.component(Q.name,Q)},"object"!==("undefined"==typeof Int8Array?"undefined":Z(Int8Array))&&(C.default.prototype.$isServer||document.childNodes);const te={name:"DOperationBox",components:{IconFontBox:Q,CellEllipsisTip:F},inject:{selectionContent:{from:"selectionContent",default:void 0},pagination:{from:"pagination",default:void 0}},props:{value:{type:Object,default:function(){return{}}},optionList:{type:Array,default:function(){return[]}},moreSearch:{type:Boolean,default:!0},modalConfig:{type:Object,default:function(){return{}}}},data:function(){return{actOptionList:[],loading:{},visible:!1}},computed:{selectList:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},baseModalConfig:function(){return L({title:"",okText:"确定",cancelText:"取消",width:"492px",style:"",class:"",resetText:"清空"},this.modalConfig)},actPagination:function(){return this.pagination?this.pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(e){return"总".concat(e,"条")}}},actSelectionContent:function(){return this.selectionContent?this.selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"}}},created:function(){this.generateOptionList()},watch:{optionList:function(){this.generateOptionList()}},methods:{generateOptionList:function(){var e=this;this.loading={},this.actOptionList=[];var t={name:"",key:"",icon:"",iconColor:"#378EFB",textColor:"#378EFB",size:16,loading:void 0};this.optionList.forEach((function(n){n.loading&&e.$set(e.loading,n.key,!1),e.actOptionList.push(L(L({},t),n))}))},handleSelect:function(e){"more"===e&&this.$slots.modal?this.visible=!0:this.$emit("optionClick",{name:e,close:this.closeLoading(e),key:e})},optionHandle:function(e){this.loading[e.key]||(e.loading&&(this.loading[e.key]=!0),this.$emit("optionClick",{key:e.key,close:this.closeLoading(e.key),data:e,name:e.name}))},handleDelete:function(e){var t=this,n=null;if("all"===e)this.selectList={};else{n=ee(this.selectList[e]);var a=this.selectList;delete a[e],this.selectList=L({},a)}this.$nextTick((function(){t.$emit("delete",{name:e,old:n,key:e,config:{name:e,status:"delete",type:"operation",resultName:e}})}))},closeLoading:function(e){var t=this,n=e;return function(){if("all"===n)for(var e in t.loading)t.loading.hasOwnProperty(e)&&(t.loading[e]=!1);else t.loading.hasOwnProperty(n)&&(t.loading[n]=!1)}},modalOk:function(){var e=this;this.modalConfig.ok?this.modalConfig.ok((function(){e.visible=!1})):this.visible=!1},modalCancel:function(){var e=this;this.modalConfig.cancel?this.modalConfig.cancel((function(){e.visible=!1})):this.visible=!1},resetHandle:function(){var e=this;this.modalConfig.reset&&this.modalConfig.reset((function(){e.visible=!1}))}}};var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"operation-index"},[n("div",{staticClass:"opt-top"},[e.actSelectionContent.selectedRowKeys.length?e._e():n("div",{staticClass:"filter-box"},[n("div",{staticClass:"filter-list"},[e._t("default")],2),e._v(" "),e.moreSearch?n("div",{staticClass:"more-search"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleSelect("more")}}},[e._v("\n          更多搜索\n          "),n("icon-font-box",{attrs:{type:"icongengduosousuo",size:"16",color:"#378EFB"}})],1)]):e._e()]),e._v(" "),e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"select-list"},[n("div",{staticClass:"select-box"},[n("icon-font-box",{attrs:{type:"icon_warning",size:"16",color:"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-text"},[e._v("已选"),n("span",{staticClass:"select-num"},[e._v(e._s("allPage"===e.actSelectionContent.selectType?e.actPagination.total-e.actSelectionContent.noSelectedRowKeys.length:e.actSelectionContent.selectedRowKeys.length))]),e._v("条")]),e._v(" "),n("a",{staticClass:"clear-row",attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleSelect("clear")}}},[e._v("清空选中")])],1),e._v(" "),n("div",{staticClass:"select-rule"},e._l(e.actOptionList,(function(t,a){return n("a",{key:a,staticClass:"select-btn",attrs:{type:"link"},on:{click:function(n){return e.optionHandle(t)}}},[e.loading[t.key]?n("a-spin",{attrs:{size:"small"}}):e._e(),e._v(" "),e.loading[t.key]?e._e():n("icon-font-box",{attrs:{type:t.icon,size:t.size||16,color:t.iconColor||"#378EFB"}}),e._v(" "),n("span",{staticClass:"select-btn-text",style:{color:t.textColor}},[e._v(e._s(t.name))])],1)})),0)]):e._e(),e._v(" "),e.$slots.other?n("div",{staticClass:"other-btn"},[e._t("other")],2):e._e()]),e._v(" "),Object.keys(e.selectList).length&&!e.actSelectionContent.selectedRowKeys.length?n("div",{staticClass:"opt-bottom"},[e._l(e.selectList,(function(t,a){return n("div",{key:a,staticClass:"tag-box"},[n("div",{staticClass:"tag-label"},[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"tag-info"},[n("cell-ellipsis-tip",{attrs:{tip:t.value}},[e._v(e._s(t.value))])],1),e._v(" "),n("icon-font-box",{staticClass:"tag-close",attrs:{type:"icon_close",size:"14"},on:{click:function(n){return e.handleDelete(t.key)}}})],1)})),e._v(" "),n("a",{attrs:{href:"javascript:void(0)",type:"link"},on:{click:function(t){return e.handleDelete("all")}}},[e._v("全部清除")])],2):e._e(),e._v(" "),n("a-modal",{class:e.baseModalConfig.class,style:e.baseModalConfig.style,attrs:{title:e.baseModalConfig.title,"ok-text":e.baseModalConfig.okText,"cancel-text":e.baseModalConfig.cancelText,width:e.baseModalConfig.width,maskClosable:!1,keyboard:!1},on:{ok:e.modalOk,cancel:e.modalCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._t("modal"),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"operation-modal-footer"},[n("div",{staticClass:"operation-reset"},[n("a-button",{attrs:{type:"link"},on:{click:e.resetHandle}},[e._v(e._s(e.baseModalConfig.resetText))])],1),e._v(" "),n("div",{staticClass:"operation-btn"},[n("a-button",{key:"back",on:{click:e.modalCancel}},[e._v("\n            "+e._s(e.baseModalConfig.cancelText)+"\n          ")]),e._v(" "),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("\n            "+e._s(e.baseModalConfig.okText)+"\n          ")])],1)])])],2)],1)};ne._withStripped=!0;const ae=$({render:ne,staticRenderFns:[]},void 0,te,void 0,!1,void 0,!1,void 0,void 0,void 0);ae.install=function(e){e.component(ae.name,ae)};var ie={data:function(){var e=this;return{tableData:[],selectionContent:{selectedRowKeys:[],selectedRows:{},noSelectedRowKeys:[],noSelectedRows:{},selectType:"",rowSelection:{},primaryKey:"skuId"},pagination:{total:0,pageSize:30,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["30","50","100"],showTotal:function(t){return"总".concat(t,"条，每页显示").concat(e.pagination.pageSize,"条")}},selectionConfig:{selections:!0},tableSelection:{onChange:null,onSelect:null,onSelectAll:null,onSelectInvert:null,currentPage:null,allPage:null},resultMap:{},searchResult:{}}},computed:{selectOnIndeterminate:function(){return"allPage"===this.selectionContent.selectType&&!!this.selectionContent.noSelectedRowKeys.length&&!!this.selectionContent.selectedRowKeys.length},hasOverSelectionLimit:function(){return this.selectionLimit&&this.selectionContent.selectedRowKeys.length>=this.selectionLimit},rowSelection:function(){var e=this,t=this;return L(L({},t.selectionContent.rowSelection),{},{selectedRowKeys:t.selectionContent.selectedRowKeys,onChange:function(e,n){var a;console.log("onChange selectedRowKeys",e),console.log("onChange selectedRows",n);var i=t.selectionContent.primaryKey;if("allPage"===t.selectionContent.selectType&&!e.length)return t.selectionContent.selectType="",void t.handleSelectedClear();if(t.selectionLimit&&e.length>t.selectionLimit)t.$message.warning("最多选择".concat(t.selectionLimit,"条"));else{t.selectionContent.selectedRowKeys=e;var o=t.selectionContent.noSelectedRows,r=t.selectionContent.selectedRows,s=!1;t.tableData.forEach((function(n){e.includes(n[i])?("allPage"===t.selectionContent.selectType&&(s=!0,delete o[n[i]]),r[n[i]]=n):("allPage"===t.selectionContent.selectType&&(s=!0,o[n[i]]=n),delete r[n[i]])})),t.selectionContent.noSelectedRows=o,t.selectionContent.selectedRows=r,"allPage"===t.selectionContent.selectType&&s&&t._generateNoSelectKey();for(var l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];t.tableSelection.onChange&&(a=t.tableSelection).onChange.apply(a,[e,n].concat(c))}},onSelect:function(e,n,a,i){t.tableSelection.onSelect&&t.tableSelection.onSelect(e,n,a,i)},onSelectAll:function(e,n,a){t.tableSelection.onSelectAll&&t.tableSelection.onSelectAll(e,n,a)},onSelectInvert:function(e){t.tableSelection.onSelectInvert&&t.tableSelection.onSelectInvert(e)},hideDefaultSelections:!0,selections:!!t.selectionConfig.selections&&[{key:"currentPage",text:"当前页",onSelect:function(n){"allPage"===t.selectionContent.selectType&&t.handleSelectedClear(),t.selectionContent.selectType="currentPage";var a=t.selectionContent.primaryKey,i=[],o=[];t.tableData.forEach((function(e){t.selectionContent.selectedRowKeys.includes(e[a])?i.push(e):o.push(e)}));var r=e.selectionContent.selectedRows;if((i.length&&o.length||!i.length)&&o.forEach((function(e){r[e[a]]=e})),!o.length){var s=t.selectionContent.selectedRows;i.forEach((function(e){delete s[e[a]]}))}t.selectionContent.selectedRows=r,t._generateKey()}},{key:"allPage",text:"所有页",onSelect:function(e){if("allPage"===t.selectionContent.selectType&&(t.selectionContent.selectedRowKeys.length||t.selectionContent.noSelectedRowKeys.length))t.handleSelectedClear();else{t.selectionContent.selectType="allPage";var n=t.selectionContent.primaryKey;t.tableData.forEach((function(e){t.selectionContent.selectedRows[e[n]]=e}))}t._generateKey()}}]})}},methods:{setPagination:function(e){this.pagination=L({total:0,pageSize:10,current:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20"],showTotal:function(e){return"总".concat(e,"条")}},e)},setRowSelection:function(e){this.selectionContent.rowSelection=e},dealSelectionCheckBox:function(){var e=this;"allPage"===this.selectionContent.selectType&&(this.tableData.forEach((function(t){try{e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]||e.selectionContent.noSelectedRows[t[e.selectionContent.primaryKey]]||(e.selectionContent.selectedRows[t[e.selectionContent.primaryKey]]=t)}catch(e){console.log(e)}})),this._generateKey())},_generateKey:function(){var e=[];for(var t in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.selectedRowKeys=e},_generateNoSelectKey:function(){var e=[];for(var t in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(t)&&e.push(t);this.selectionContent.noSelectedRowKeys=e},handleSelectedClear:function(){return this.selectionContent.selectedRowKeys=[],this.selectionContent.selectedRows={},this.selectionContent.noSelectedRowKeys=[],this.selectionContent.noSelectedRows=[],this.selectionContent.selectType="",this},getRowData:function(e){var t=[];if(e)for(var n in this.selectionContent.noSelectedRows)this.selectionContent.noSelectedRows.hasOwnProperty(n)&&t.push(this.selectionContent.noSelectedRows[n]);else for(var a in this.selectionContent.selectedRows)this.selectionContent.selectedRows.hasOwnProperty(a)&&t.push(this.selectionContent.selectedRows[a]);return t},setTableSelectType:function(e){this.selectionContent.selectType=e,this.handleSelectedClear()},setSelectRows:function(e){var t=this;e.forEach((function(e){t.selectionContent.selectedRows[e[t.selectionContent.primaryKey]]=e}))},setSelectionStatus:function(e){this.selectionConfig.selections=e},rowClick:function(e){var t=this;if(console.log("单击",e),this.multiple)if(this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key]))this.selectionContent.selectedRowKeys=this.selectionContent.selectedRowKeys.filter((function(n){return n!==e[t.baseReplaceFields.key]})),delete this.selectionContent.selectedRows[e[this.baseReplaceFields.key]];else{if(this.hasOverSelectionLimit)return void this.$message.warning("最多选择".concat(this.selectionLimit,"条"));this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e}else this.selectionContent.selectedRowKeys=[e[this.baseReplaceFields.key]],this.selectionContent.selectedRows=O({},e[this.baseReplaceFields.key],e)},dbRowClick:function(e){console.log("双击",e),this.selectionContent.selectedRowKeys.includes(e[this.baseReplaceFields.key])||this.hasOverSelectionLimit||(this.selectionContent.selectedRowKeys.push(e[this.baseReplaceFields.key]),this.selectionContent.selectedRows[e[this.baseReplaceFields.key]]=e),this.handleOk&&this.handleOk()},dealResult:function(){var e=this;if(this.rules)for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];"object"===Z(n)?(this.$refs[this.resultMap[t].ref]&&this.$refs[this.resultMap[t].ref].setData(n),this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n.id:this.searchResult[t]=n.id,this.disabled[t]=!!n.disabled):this.resultMap[t]?this.searchResult[this.resultMap[t].key]=n:this.searchResult[t]=n}return this.defaultValue&&(this.selectionContent.selectedRowKeys=[],this.defaultValue.constructor===Array?this.defaultValue.forEach((function(t){e.selectionContent.selectedRowKeys.push(t[e.baseReplaceFields.key]),e.selectionContent.selectedRows=L(L({},e.selectionContent.selectedRows),{},O({},t[e.baseReplaceFields.key],t))})):(this.selectionContent.selectedRowKeys=[this.defaultValue[this.baseReplaceFields.key]],this.selectionContent.selectedRows=O({},this.defaultValue[this.baseReplaceFields.key],this.defaultValue))),this}}};function oe(e){return"object"===Z(e)&&null!==e&&e.constructor&&e.constructor===Object}function re(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)for(var a=Object.keys(Object(n)),i=0;i<a.length;i++){var o=a[i],r=Object.getOwnPropertyDescriptor(n,o);r&&r.enumerable&&(oe(e[o])&&oe(n[o])?re(e[o],n[o]):!oe(e[o])&&oe(n[o])?(e[o]={},re(e[o],n[o])):e[o]=n[o])}}return e}var se={data:function(){return{searchResult:{},selectList:{},selectConfig:{},filterSortConfig:{},resultDealStatus:!1,searchFilterDefaultData:void 0,_searchFilterConfig:void 0}},methods:{beforeSearchChange:function(){return!0},beforeTableChange:function(){return!0},tableChange:function(e,t,n){console.log("tableChange 接收到事件改变：",e,t,n);var a=Object.keys(e).length;if(a){if(e.current!==this.pagination.current)return void this.loadTableData(e);if(e.pageSize!==this.pagination.pageSize)return e.current=1,this.pagination.pageSize=e.pageSize,this.handleSelectedClear&&this.handleSelectedClear(),void this.loadTableData(e)}if(!this.beforeTableChange||this.beforeTableChange(e,t,n)){a?e.current===this.pagination.current&&e.pageSize===this.pagination.pageSize&&(e.current=1):e=L(L({},this.pagination),{},{current:1});var i=n.columnKey,o=n.order,r=Object.prototype.hasOwnProperty.call(this.searchResult,"sort");o?r?this.searchResult.sort="ascend"===o?this.filterSortConfig[i]:0-this.filterSortConfig[i]:this.searchResult=L(L({},this.searchResult),{},{sortField:this.filterSortConfig[i]||i,sortType:"ascend"===o?"asc":"desc"}):r?this.searchResult.sort=void 0:this.searchResult=L(L({},this.searchResult),{},{sortField:void 0,sortType:void 0}),this.loadTableData(e)}},searchResultDeal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("searchResultDeal 接收到条件变化：",e,t),this.beforeSearchChange(e)){var n=this._resetSearchFilterDefaultData()._getFilterConfig(e);n.deal=t;var a=n.data;n.rows;var i=n.config,o=n.dataType,r=n.columnsName;if("all"===i[e.config.columnsName||e.config.resultName]||this.selectConfig[e.config.columnsName||e.config.resultName]){if("all"===i.resultName&&"delete"===i.status)return this._searchFilterClearAll(e),this.pagination&&(this.pagination.current=1),this.loadTableData(),this;"array"===o&&(a[0]||a[1]||(a=void 0,console.warn("请注意 ".concat(r," 中组件返回的 data 全是空值。")))),null==a||""===a?this._deleteValue():("string"===o||"number"===o?this._dealDataForSingle():"array"===o?this._dealDataForArray():"object"===o?this._dealDataForObject():console.log("啥也不是"),this.selectList=L({},this.selectList),this.pagination&&(this.pagination.current=1),!t&&this.loadTableData()),this._searchFilterClearRef(e)}else console.error("当前没有配置 selectConfig：",e.config.columnsName||e.config.resultName,"，请注意检查 selectConfig 和对应的 dom 节点是否配置正确！")}},_getFilterConfig:function(e){var t,n=e.data,a=e.rows,i=e.config,o=this,r=i.columnsName||i.resultName,s=re(o.searchFilterDefaultData,this.selectConfig[r]);return console.log("合并后的内容：",s,o.searchFilterDefaultData),o._searchFilterConfig={data:n,rows:a,config:i,dataType:(t=n,"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Object]"===Object.prototype.toString.call(t)?"object":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Undefined]"===Object.prototype.toString.call(t)?"undefined":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Number]"===Object.prototype.toString.call(t)?"number":void 0),columnsName:r,selectList:o.selectList,selectConfig:s,dataCallback:o.selectConfig[r].setText,valueCallback:o.selectConfig[r].setValue,deal:!1,linkMode:s.linkMode||"before",linkType:Z(s.link),link:s.link||"-",valueLink:s.valueLink||","},o._searchFilterConfig},_getActValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this._searchFilterConfig.selectConfig,i="data"===e?a.dataTarget||"data":a.valueTarget||"data",o="data"===e?a.dataKey:a.valueKey,r="data"===i?t:n;return o?r[o]:r},_checkValueCallback:function(){var e=this._searchFilterConfig,t=e.data,n=e.rows,a=e.valueCallback;if(!a)return!0;a.call(this,{data:t,rows:n})},_deleteSelect:function(e){this.$delete(this.selectList,e)},_updateSelect:function(e,t){console.log(e),this.$set(this.selectList,[e],t)},_deleteValue:function(){var e=this,t=this,n=this._searchFilterConfig,a=n.selectConfig,i=n.columnsName,o=n.deal;a.en?(this._checkValueCallback()&&a.en.forEach((function(t){e.searchResult[t]=void 0})),t._deleteSelect(i)):(this._checkValueCallback()&&(this.searchResult[i]=void 0),t._deleteSelect(i)),t.pagination?o||t.loadTableData(L(L({},t.pagination),{},{current:1})):!o&&t.loadTableData()},_dealDataForSingle:function(){var e=this,t=e._searchFilterConfig,n=t.data,a=t.rows,i=t.selectConfig,o=t.columnsName,r=t.dataCallback,s=t.config,l=i.en[0]||o;e._checkValueCallback()&&(this.searchResult[l]=e._getActValue("value",n,a[0]||a)),i.cn.forEach((function(t){e._updateSelect(o,{key:o,label:t,value:r?r({data:n,rows:a}):e._getActValue("data",n,a[0]||a),type:s.type||""})}))},_dealDataForArray:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.linkMode,c=n.linkType,u=n.link,d=n.valueLink,h=n.config,f=r.en,p=r.cn.length>1,m=a.filter((function(e){return!!e})),g="";a.forEach((function(n,o){p&&f.length===a.length?n?(t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])),e._updateSelect(f[o],{key:f[o],label:r.cn[o],value:s?s({data:a,rows:i}):e._getActValue("data",a[o],i[o]),type:h.type||""})):(e._deleteSelect(f[o]),t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)):n?(f.length===a.length?t._checkValueCallback()&&(e.searchResult[f[o]]=t._getActValue("value",a[o],i[o])):t._checkValueCallback()&&(e.searchResult[f[0]]=e.searchResult[f[0]]?"".concat(e.searchResult[f[0]]).concat(d||",").concat(e._getActValue("value",a[o],i[o])):e.searchResult[f[0]],r.valueLink||(console.error("请注意设置 valueLink 连词，否则将会导致错误。"),console.error("请注意 searchResult.".concat(r.en[o]," 的值为： ").concat(e.searchResult[r.en[o]],"。")))),s||("string"===c?g=g?"".concat(g).concat(u).concat(t._getActValue("data",a[o],i[o])):t._getActValue("data",a[o],i[o]):1===m.length?(console.log("处理只有一个值的情况"),g=t._getActValue("data",a[o],i[o])):g=a.length-1===o?"".concat(g).concat(u[o]).concat(t._getActValue("data",a[o],i[o])).concat(u[o+1]):"after"===l?"".concat(t._getActValue("data",a[o],i[o])).concat(u[o]):"".concat(u[o]).concat(t._getActValue("data",a[o],i[o])))):t._checkValueCallback()&&(e.searchResult[f[o]]=void 0)})),p&&f.length===a.length||(this.selectList[o]={key:o,label:r.cn[0],value:s?s({data:a,rows:i}):g,type:h.type||""})},_dealDataForObject:function(){var e=this,t=this,n=t._searchFilterConfig,a=n.data,i=n.rows,o=n.columnsName,r=n.selectConfig,s=n.dataCallback,l=n.config;r.cn.forEach((function(n,c){i[c]?(e._checkValueCallback()&&(e.searchResult[r.en[c]]=t._getActValue("value",a,i[c])),e.selectList[o]={key:o,label:n,value:s?s({data:a,rows:i}):t._getActValue("data",a,i[c]),type:l.type||""}):(t._checkValueCallback()&&(e.searchResult[r.en[c]]=void 0),e._deleteSelect(o))}))},_searchFilterClearAll:function(){var e=this;for(var t in this.selectConfig)if(Object.prototype.hasOwnProperty.call(this.selectConfig,t)){var n=this.selectConfig[t].setValue;n?n.call(this):this.selectConfig[t].en.forEach((function(t){e.searchResult[t]=void 0}))}this.$refs.moreSearch&&this.$refs.moreSearch.resetData("all");try{for(var a in this.selectConfig)if(this.selectConfig.hasOwnProperty(a)){var i=this.selectConfig[a].ref;this.$refs["".concat(i||a,"O")]&&this.$refs["".concat(i||a,"O")].resetData(),this.$refs["".concat(i||a,"H")]&&this.$refs["".concat(i||a,"H")].resetData()}}catch(e){console.error("错误预警：",e)}},_searchFilterClearRef:function(e){console.log("清空它的对手：",e);try{var t=e.config.columnsName||e.config.resultName,n=e.config.type,a=this.selectConfig[t].ref;"filterDown"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):"operation"===n?(this.$refs["".concat(a||t,"O")]&&this.$refs["".concat(a||t,"O")].resetData(),this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),this.$refs.moreSearch&&this.$refs.moreSearch.resetData(t)):this.$refs["".concat(a||t,"H")]&&this.$refs["".concat(a||t,"H")].resetData(),e.config.props&&e.config.props.confirm()}catch(e){console.error("错误预警：",e)}},_resetSearchFilterDefaultData:function(){return this.searchFilterDefaultData={cn:[],en:[],link:"",valueLink:"",dataKey:"",valueKey:"",dataTarget:"",valueTarget:"",linkMode:"",setText:void 0,setValue:void 0},this},moreSearchResultDeal:function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)this.searchResultDeal(e[t[n]],n!==t.length-1)}}},le="/gateway/saas-platform-service/api/v1/",ce="".concat(le,"department/get_corp_tree"),ue="".concat(le,"staffer/list"),de={name:"DSelectPeople",mixins:[ie,se],components:{CellEllipsisTip:F,STable:W,DOperationBox:ae,Empty:Y},props:{width:{type:Number,default:1e3},cache:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},title:{type:String,default:"选择经手人"},placeholderLeft:{type:String,default:"请输入部门名称"},placeholderRight:{type:String,default:"姓名/手机号"},multiple:{type:Boolean,default:!1},beforeClose:{type:Function,default:void 0},replaceFields:{type:Object,default:function(){}},rules:{type:Object,default:function(){return{}}},defaultValue:{type:[Object,Array],default:null},selectionLimit:{type:Number,default:100}},data:function(){return{corpTree:{data:[],keywords:null,expandedKeys:[],selectedKeys:[],autoExpandParent:!0,treeFirstNode:null,loading:!1},tableData:[],searchData:[],tableLoading:!1,searchResult:{keywords:"",categoryPath:{}},opened:!1}},provide:function(){return{selectionContent:this.selectionContent,pagination:this.pagination}},watch:{visible:function(e){e&&(this.selectionContent.primaryKey="stafferId",this.selectionConfig.selections=!1,this.setRowSelection({type:this.multiple?"checkbox":"radio"}),(!this.cache||this.cache&&!this.opened)&&this.reset().dealResult().getCorpTree(),this.opened=!0)}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},baseReplaceFields:function(){return L({key:"stafferId"},this.replaceFields)},locale:function(){return{emptyText:this.$createElement("empty",{props:{loading:this.tableLoading}})}}},methods:{onSelectCorpTreeNode:function(e,t){console.log("onSelectCorpTreeNode",e,t),t.selected?this.corpTree.selectedKeys=[t.node.dataRef.businessId]:this.corpTree.selectedKeys=[this.corpTree.treeFirstNode.businessId],this.searchResult.categoryPath=t.selected?t.node.dataRef:this.corpTree.treeFirstNode,this.dealResult().loadTableData()},onExpand:function(e){this.corpTree.expandedKeys=e,this.corpTree.autoExpandParent=!1},getParentKey:function(e,t){for(var n,a=0;a<t.length;a++){var i=t[a];i.children&&(i.children.some((function(t){return t.businessId===e}))?n=i.businessId:this.getParentKey(e,i.children)&&(n=this.getParentKey(e,i.children)))}return n},onSearchTree:function(e){var t=this,n=e.target.value;this.corpTree.expandedKeys=this.searchData.map((function(e){return e.name.indexOf(n)>-1?t.getParentKey(e.businessId,t.corpTree.data):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t})),this.corpTree.autoExpandParent=!0},handleSearchByKeywords:function(){this.handleSelectedClear(),this.pagination.current=1,this.loadTableData()},loadTableData:function(){var e=arguments,t=this;return R(T.mark((function n(){var a,i,o;return T.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.pagination,n.prev=1,t.tableLoading=!0,n.next=5,t.$post(ue,L({corpId:t.searchResult.categoryPath.corpId||"",departmentId:t.searchResult.categoryPath.businessId||"",keyword:t.searchResult.keywords||"",dismiss:!1,entryDateBegin:"",entryDateEnd:"",isAdmin:"",locked:!1,normal:!0,pageNum:a.pageNum||1,pageSize:a.pageSize||30},t.rules));case 5:i=n.sent,o=i.data,t.tableData=o.list,t.dealSelectionCheckBox(),t.pagination.total=o.total,t.pagination.current=o.pageNum,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error(n.t0);case 16:return n.prev=16,t.tableLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()},getCorpTree:function(){var e=this;return R(T.mark((function t(){var n,a;return T.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.corpTree.loading=!0,t.next=4,e.$get(ce);case 4:n=t.sent,a=n.data,e.corpTree.data=a,function t(n){var a=[];return n.forEach((function(n){n.scopedSlots={title:"title"},e.searchData.push(n),n.children&&n.children.length&&t(n.children),a.push(n)})),a}(a),e.corpTree.data&&e.corpTree.data.length>0&&(e.corpTree.treeFirstNode=e.corpTree.data[0],e.corpTree.selectedKeys=[e.corpTree.treeFirstNode.businessId],e.searchResult.categoryPath=e.corpTree.data[0],e.loadTableData()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:return t.prev=15,e.corpTree.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},handleOk:function(){if(this.selectionContent.selectedRowKeys.length>this.selectionLimit)this.$message.warning("最多选择".concat(this.selectionLimit,"条"));else{var e={data:this.selectionContent.selectedRowKeys,rows:this.getRowData()};this.beforeClose?this.beforeClose(e):this.$emit("confirm",e),this.$emit("update:visible",!1)}},reset:function(){return this.tableData=[],this.corpTree.keywords="",this.corpTree.expandedKeys=[],this.corpTree.selectedKeys=[],this.corpTree.autoExpandParent=!0,this.corpTree.data=[],this.searchResult={keywords:"",categoryPath:{}},this.corpTree.treeFirstNode=null,this.handleSelectedClear(),this.pagination.current=1,this.pagination.total=0,this},onOperationClick:function(e){"clear"===e.name&&this.handleSelectedClear()},handleCancel:function(){this.$emit("cancel"),this.$emit("update:visible",!1)}}};const he=de;var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"d-select-people a-table-common modal-reset-no-padding",attrs:{footer:null,keyboard:!1,maskClosable:!1,title:e.title,width:e.width,cancelText:"取消",okText:"确定"},on:{cancel:e.handleCancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("div",{staticClass:"people-content"},[n("div",{staticClass:"table-classify"},[n("a-input-search",{staticClass:"classify-input-search",attrs:{maxLength:40,placeholder:e.placeholderLeft,allowClear:""},on:{change:e.onSearchTree},model:{value:e.corpTree.keywords,callback:function(t){e.$set(e.corpTree,"keywords",t)},expression:"corpTree.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.corpTree.loading,expression:"corpTree.loading"}],staticClass:"classify-wrap"},[n("a-tree",{attrs:{"auto-expand-parent":e.corpTree.autoExpandParent,"expanded-keys":e.corpTree.expandedKeys,replaceFields:{children:"children",title:"name",key:"businessId"},"selected-keys":e.corpTree.selectedKeys,"tree-data":e.corpTree.data},on:{expand:e.onExpand,select:e.onSelectCorpTreeNode},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.name;return[a.indexOf(e.corpTree.keywords)>-1?n("span",[e._v("\n              "+e._s(a.substr(0,a.indexOf(e.corpTree.keywords)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.corpTree.keywords))]),e._v("\n              "+e._s(a.substr(a.indexOf(e.corpTree.keywords)+e.corpTree.keywords.length))+"\n            ")]):n("span",[e._v(e._s(a))])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"table-content"},[n("d-operation-box",{attrs:{"more-search":!1},on:{optionClick:e.onOperationClick}},[n("a-input-search",{attrs:{maxLength:40,placeholder:e.placeholderRight,allowClear:""},on:{search:e.handleSearchByKeywords},model:{value:e.searchResult.keywords,callback:function(t){e.$set(e.searchResult,"keywords",t)},expression:"searchResult.keywords"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("搜索")])],1)],1),e._v(" "),n("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{customRow:function(t){return{on:{click:function(){e.rowClick(t)},dblclick:function(){e.dbRowClick(t)}}}},"data-source":e.tableData,locale:e.locale,pagination:e.pagination,rowKey:e.selectionContent.primaryKey,rowSelection:e.rowSelection,scroll:{y:"calc(100vh - 490px)"},selectOnIndeterminate:e.selectOnIndeterminate},on:{change:e.tableChange}},[n("a-table-column",{key:"name",attrs:{"data-index":"name",title:"姓名"}}),e._v(" "),n("a-table-column",{key:"stafferNo",attrs:{"data-index":"stafferNo",title:"编号"}}),e._v(" "),n("a-table-column",{key:"departmentName",attrs:{title:"部门"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CellEllipsisTip",{attrs:{text:e.departmentName}})]}}])}),e._v(" "),n("a-table-column",{key:"mobile",attrs:{"data-index":"mobile",title:"联系电话"}})],1)],1)]),e._v(" "),n("div",{staticClass:"select-people-footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" \n    "),n("a-button",{attrs:{disabled:!e.selectionContent.selectedRowKeys||0===e.selectionContent.selectedRowKeys.length,type:"primary"},on:{click:e.handleOk}},[e._v("\n      确 定\n    ")])],1)])};fe._withStripped=!0;const pe=$({render:fe,staticRenderFns:[]},void 0,he,void 0,!1,void 0,!1,void 0,void 0,void 0);return pe.install=function(e){e.component(pe.name,pe)},pe}))}}]);
//# sourceMappingURL=chunk-1e2e006f.1488b137.js.map