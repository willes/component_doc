(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0de8ff7c"],{"90b7":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=function(){return Array.from(arguments).reduce((function(t,n){for(var o in n)t[o]=t[o]&&"[object Object]"===t[o].toString()?e(t[o],n[o]):t[o]=n[o];return t}),{})};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t){return n(e)===t}function i(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(!e||!n||"object"!==t(e)&&"object"!==t(n))return e===n;if(e.prototype!==n.prototype)return!1;var o=Object.keys(e);return o.length===Object.keys(n).length&&(Array.isArray(e)&&Array.isArray(n)||"Object"==r(e)&&"Object"==r(n))&&o.every((function(t){return i(e[t],n[t])}));function r(e){return Object.prototype.toString.call(e).slice(8,-1)}}return{merge:e,clone:function(e){var t,n={};for(t in e)n[t]=e[t];return n},deepClone:function(e){return n=[],i=[],function e(r){if(null===r)return null;if("object"!==t(r))return r;var a;o(r,"array")?a=[]:o(r,"regexp")?(a=new RegExp(r.source,getRegExp(r)),r.lastIndex&&(a.lastIndex=r.lastIndex)):a=o(r,"date")?new Date(r.getTime()):(c=Object.getPrototypeOf(r),Object.create(c));var s,c=n.indexOf(r);if(-1!==c)return i[c];for(s in n.push(r),i.push(a),r)a[s]=e(r[s]);return a}(e);var n,i},findKey:function(e,t){for(var n in e)if("function"==typeof t&&t(e[n])||Array.isArray(t)&&e[n][t[0]]===t[1]||"string"==typeof t&&t in e[n]||i(e[n],t))return n},convertKey:function e(t,o,i){if(!["array","object"].includes(n(t)))throw new TypeError("The first argument should be either an object or an array！");if("[object Object]"!==Object.prototype.toString.call(o))throw new TypeError("The parameter keyMap should be an object!");var r=Array.isArray(t)?[]:{};if(t instanceof Object)for(var a in t){var s=Object.keys(o).includes(a)?o[a]:a;r[s]=t[a],i&&["array","object"].includes(n(t[a]))&&Object.keys(t[a]).length&&(r[s]=e(t[a],o,i))}return r}}}))},b0c0:function(e,t,n){var o=n("83ab"),i=n("5e77").EXISTS,r=n("e330"),a=n("9bf2").f,s=Function.prototype,c=r(s.toString),l=/^\s*function ([^ (]*)/,u=r(l.exec),d="name";o&&!i&&a(s,d,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},d11c:function(e,t,n){!function(t,o){e.exports=o(n("b0c0"),n("a9e3"),n("4de4"),n("d3b7"),n("99af"),n("04b3"),n("90b7"))}(0,(function(e,t,n,o,i,r,a){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n,o,i,r,a,s,c,l){"boolean"!=typeof a&&(c=s,s=a,a=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),o&&(u._scopeId=o),r?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=d):t&&(d=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}const p={name:"Empty",components:{empty:r.empty,loading:r.loading},props:{text:{type:String,default:""},loading:{type:Boolean,default:!1}}};var h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty"},[n("div",{staticClass:"icon"},[e._t("icon",[e.loading?n("loading",{staticClass:"empty-icon"}):n("empty",{staticClass:"empty-icon"})])],2),e._v(" "),n("h3",{staticClass:"text"},[e._t("default",[e._v(e._s(e.text?e.text:e.loading?"加载中……":"暂无搜索结果"))])],2)])};h._withStripped=!0;const y=f({render:h,staticRenderFns:[]},void 0,p,void 0,!1,void 0,!1,void 0,void 0,void 0);y.install=function(e){e.component(y.name,y)};var b="/gateway/customer-service/api/v1/",m="".concat(b,"order/get_customer_list"),g="".concat(b,"order/get_customer_type_list"),v="".concat("/gateway/goodsservice/api/v1/","price_system/leve_price_name/select_list"),w={name:"SelectCustomer",components:{Empty:y},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"选择客户"},width:{type:[Number,String],default:856},type:{type:String,default:"checkbox"},attrs:{type:Object,default:function(){}},defaultSelectedRowKeys:{type:Object,default:function(){return{selectedRowKeys:[],selectedRows:[]}}},levelPrice:{type:Boolean,default:!1},customerType:{type:Number,default:3}},data:function(){return{filterData:{customerTypeIds:[],keyword:"",priceLevelId:0,regionId:0},modalVisible:!0,spinning:!1,spinningLeft:!1,classifyKeyword:"",customerKeyword:"",categoryOptions:[],priceOptions:[],areaOptions:[],priceValue:void 0,areaValue:void 0,columns:[{title:"客户名称",dataIndex:"name",width:250},{title:"销售区域",dataIndex:"region"},{title:"级别价",dataIndex:"priceLevel"}],data:[],pagination:{total:0,pageSize:30,current:1,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["30","50","100"]},selectedTab:{selectedRowKeys:[],selectedRows:[]},keyword:void 0,scrollHeight:0}},created:function(){},computed:{rowSelection:function(){return{type:this.type,selectedRowKeys:this.selectedTab.selectedRowKeys,onChange:this.onChangeCustomer,onSelect:this.onSelectedRows,onSelectAll:this.onSelectAllRows,hideDefaultSelections:!0}},searchOptions:function(){var e=this;return this.keyword?this.categoryOptions.filter((function(t){return t.label.indexOf(e.keyword)>-1})):this.categoryOptions},locale:function(){return{emptyText:this.spinning?"加载中":this.$createElement(y)}}},watch:{visible:{handler:function(e){this.modalVisible=e,e&&(this.data.length||(this.clearInfo(),this.initData()))},immediate:!0},defaultSelectedRowKeys:{handler:function(e){this.selectedTab=a.deepClone(e)},immediate:!0}},methods:{clearInfo:function(){this.selectedTab={selectedRowKeys:[],selectedRows:[]},this.filterData={customerTypeIds:[],keyword:"",priceLevelId:0,regionId:0},this.classifyKeyword="",this.customerKeyword="",this.categoryOptions=[],this.priceOptions=[],this.areaOptions=[],this.priceValue=void 0,this.areaValue=void 0,this.data=[]},initData:function(){this.loadTableData(),this.getCustomerCatefory()},setBackGround:function(e){for(var t=document.querySelectorAll(".choice-customer-box .ant-dropdown-menu .ant-dropdown-menu-item"),n=0;n<t.length;n++)t[n].style.background=n===e?"#f0f0f0":""},handleOk:function(){this.$emit("confirm",this.selectedTab.selectedRowKeys,this.selectedTab.selectedRows),this.$emit("update:visible",!1)},handleCancel:function(){this.$emit("update:visible",!1)},onCategoryChange:function(e){this.filterData.customerTypeIds=e,this.loadTableData()},onSearchCategory:function(e){this.keyword=e},onSearchCustomer:function(e){this.filterData.keyword=e,this.loadTableData()},handleChangePrice:function(e){console.log(e),this.filterData.priceLevelId=e,this.loadTableData()},saleAreaSelect:function(e){this.filterData.regionId=e,this.loadTableData()},loadTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination;console.log("this.$refs.choiceCustomerBox",123456),this.spinning=!0;var n=JSON.parse(JSON.stringify(this.filterData));for(var o in n)n[o]=n[o]||void 0;this.$post(m,d(d({},n),{},{pageNum:t.current,pageSize:t.pageSize,orderCustomerType:this.customerType})).then((function(n){e.data=n.data&&n.data.list||[],t.total=n.data.total,e.pagination=t,e.spinning=!1,e.$nextTick((function(){e.scrollHeight=e.$refs.choiceCustomerBox.clientHeight-196}))})).catch((function(e){console.log(e)})).finally((function(){return e.spinning=!1}))},getCustomerCatefory:function(){var e=this;this.categoryOptions=[],this.spinningLeft=!0,this.$post(g).then((function(t){e.categoryOptions=t.data||[],console.log("%c⧭","color: #99adcc",t),e.spinningLeft=!1})).catch((function(e){return console.log(e)})).finally((function(){return e.spinningLeft=!1}))},getLevelPrice:function(){var e=this;this.priceOptions.length||this.$post(v).then((function(t){e.priceOptions=t.data||[]}))},onChangeCustomer:function(e,t){this.selectedTab.selectedRowKeys=e},onSelectedRows:function(e,t,n,o){t?this.selectedTab.selectedRows.push(e):this.selectedTab.selectedRows=this.selectedTab.selectedRows.filter((function(t){return!(!t.id||t.id===e.businessId)||!(!t.businessId||t.businessId===e.businessId)||void 0}))},onSelectAllRows:function(e,t,n){this.selectedTab.selectedRows=e?this.selectedTab.selectedRows.concat(n):this.selectedTab.selectedRows.filter((function(e){var t,o=!1,i=c(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(e.id&&e.id===r.businessId){o=!0;break}if(e.businessId&&e.businessId===r.businessId){o=!0;break}}}catch(e){i.e(e)}finally{i.f()}if(!o)return!0}))},onTableChange:function(e){this.loadTableData(e)}}};const C=w;var O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"choice-customer-box"},[n("a-modal",e._b({staticClass:"choice-customer-modal",attrs:{keyboard:!1,maskClosable:!1,title:e.title,visible:e.modalVisible,width:e.width},on:{cancel:e.handleCancel,getContainer:function(){return e.document.querySelector(".choice-customer-box")},ok:e.handleOk}},"a-modal",e.attrs,!1),[n("div",{ref:"choiceCustomerBox",staticClass:"modal-box",staticStyle:{height:"100%"}},[n("div",{staticClass:"modal-box-left"},[n("a-input-search",{staticClass:"add-input",attrs:{maxLength:40,placeholder:"请输入分类名称"},on:{search:e.onSearchCategory},model:{value:e.classifyKeyword,callback:function(t){e.classifyKeyword=t},expression:"classifyKeyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),n("div",{staticClass:"left-container"},[n("a-checkbox-group",{attrs:{options:e.searchOptions,name:"checkboxgroup"},on:{change:e.onCategoryChange},model:{value:e.filterData.customerTypeIds,callback:function(t){e.$set(e.filterData,"customerTypeIds",t)},expression:"filterData.customerTypeIds"}})],1)],1),e._v(" "),n("div",{staticClass:"modal-box-right"},[n("div",{staticClass:"search-box"},[n("a-input-search",{attrs:{maxLength:40,placeholder:"客户名称/手机号"},on:{search:e.onSearchCustomer},model:{value:e.filterData.keyword,callback:function(t){e.$set(e.filterData,"keyword",t)},expression:"filterData.keyword"}},[n("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 搜索")])],1),e._v(" "),e.levelPrice?n("a-select",{staticStyle:{width:"120px"},attrs:{allowClear:"",placeholder:"级别价"},on:{change:e.handleChangePrice,dropdownVisibleChange:e.getLevelPrice}},e._l(e.priceOptions,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):e._e()],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.spinning,expression:"spinning"}],staticClass:"customer-table-box"},[n("a-table",{ref:"table",attrs:{columns:e.columns,"data-source":e.data,locale:e.locale,pagination:e.pagination,"row-selection":e.rowSelection,scroll:{y:e.scrollHeight},rowKey:"businessId"},on:{change:e.onTableChange}}),e._v(" "),e.data.length?n("div",{staticClass:"line"}):e._e()],1)])])])],1)};O._withStripped=!0;const S=f({render:O,staticRenderFns:[]},void 0,C,void 0,!1,void 0,!1,void 0,void 0,void 0);return S.install=function(e){e.component(S.name,S)},S}))},d3bb:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectCustomer",{attrs:{visible:e.visible,type:"radio",levelPrice:""},on:{"update:visible":function(t){e.visible=t},confirm:e.confirmHandle}}),n("a-button",{on:{click:function(t){e.visible=!0}}},[e._v("打开")])],1)},i=[],r=n("d11c"),a=n.n(r),s={name:"MixModalDemo",components:{SelectCustomer:a.a},data:function(){return{visible:!1}},methods:{confirmHandle:function(){console.log(arguments)}}},c=s,l=n("2877"),u=Object(l["a"])(c,o,i,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-0de8ff7c.c23173d4.js.map