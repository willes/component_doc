(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30568f31"],{"1c27":function(e,t,a){},"8b70":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("draggable-table",{directives:[{name:"draggable",rawName:"v-draggable",value:2,expression:"2"}],attrs:{replaceFields:{key:"key"},"data-source":e.data,columns:e.columns},on:{draggable:e.handleDraggable},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}},{key:"tags",fn:function(t){return a("span",{},e._l(t,(function(t){return a("a-tag",{key:t,attrs:{color:"loser"===t?"volcano":t.length>5?"geekblue":"green"}},[e._v(" "+e._s(t.toUpperCase())+" ")])})),1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a",[e._v("Invite 一 "+e._s(n.name))]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v("Delete")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"ant-dropdown-link"},[e._v(" More actions "),a("a-icon",{attrs:{type:"down"}})],1)],1)}}])},[a("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[a("a-icon",{attrs:{type:"smile-o"}}),e._v(" Name")],1)]),a("a-table",{attrs:{replaceFields:{key:"key"},"data-source":e.data,columns:e.columns},on:{draggable:e.handleDraggable},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}},{key:"tags",fn:function(t){return a("span",{},e._l(t,(function(t){return a("a-tag",{key:t,attrs:{color:"loser"===t?"volcano":t.length>5?"geekblue":"green"}},[e._v(" "+e._s(t.toUpperCase())+" ")])})),1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a",[e._v("Invite 一 "+e._s(n.name))]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v("Delete")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"ant-dropdown-link"},[e._v(" More actions "),a("a-icon",{attrs:{type:"down"}})],1)],1)}}])},[a("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[a("a-icon",{attrs:{type:"smile-o"}}),e._v(" Name")],1)])],1)},s=[];a("a4d3"),a("b64b");function r(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}function o(e,t){if(null==e)return{};var a,n,s=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var i,l,c=a("5530"),d=(a("4de4"),a("d3b7"),a("159b"),a("a434"),a("7db0"),a("fb19")),u=a.n(d),g=["on","style"],b=["key","on"],h={name:"DraggableTable",components:{VueDraggableResizable:u.a},props:{mixins:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!0},isWidth:{type:Boolean,default:!0},replaceFields:{type:Object,default:function(){return{key:"businessId",dataIndex:"dataIndex"}}}},data:function(){return{sourceObj:null,overObj:null,targetObj:null,originalIndex:-1,resizeableTitle:null,draggingState:{},columns:null,repFields:{key:"businessId",dataIndex:"dataIndex"},draggable:!1}},mounted:function(){this.repFields=Object(c["a"])(Object(c["a"])({},this.repFields),this.replaceFields),this.draggable=!this.columns.filter((function(e){return e.scopedSlots&&"customDrag"===e.scopedSlots.customRender})).length&&this.isDraggable,this.init()},methods:{init:function(){var e=this,t=this.$attrs.columns,a={};t.forEach((function(t){a[t[e.repFields.dataIndex]]=t.width})),this.draggingState=a},rowClass:function(e,t){return this.sourceObj?this.sourceObj[this.repFields.key]===e[this.repFields.key]?"target-line":"target-process":""},customRow:function(e,t){var a=this,n=this.$attrs.customRow?this.$attrs.customRow():{},s=(n.on,n.style),r=o(n,g),i=Object(c["a"])(Object(c["a"])({},{cursor:this.draggable?"pointer":"default"}),s);return{options:r,style:i,on:{click:function(n){a.$emit("row-click",{record:e,index:t})},dbclick:function(n){a.$emit("row-dbClick",{record:e,index:t})},contextmenu:function(n){a.$emit("row-contextmenu",{record:e,index:t})},mouseover:function(e){var t=e||window.event;t.target.draggable=a.draggable},dragstart:function(t){var n=t||window.event;n.stopPropagation(),a.draggable&&(a.$emit("draggableStart"),a.sourceObj=e)},dragover:function(t){var n=t||window.event;n.preventDefault(),a.draggable&&(a.overObj?a.overObj[a.repFields.key]!==e[a.repFields.key]&&(a.overObj=e,a.overReset(e)):a.overObj=e)},drop:function(t){var n=t||window.event;n.stopPropagation(),a.draggable&&(a.targetObj=e,a.overReset(e,"finish"),a.result())}}}},overReset:function(e,t){var a=this;this.dataSource=this.$children[0].$children[0].getLocalData();var n=function(){for(var t,n,s=0;s<a.dataSource.length;s++)a.dataSource[s][a.repFields.key]===e[a.repFields.key]&&(t=s),a.dataSource[s][a.repFields.key]===a.sourceObj[a.repFields.key]&&(n=s);return{index:t,baseIndex:n}},s=n();if(s.index!==s.baseIndex){-1===this.originalIndex&&(this.originalIndex=s.baseIndex);var r=this.dataSource.splice(s.baseIndex,1)[0];this.dataSource.splice(s.index,0,r),this.$emit("draggable",Object(c["a"])(Object(c["a"])({data:this.dataSource,source:this.sourceObj},s),{},{originalIndex:this.originalIndex}),"dragover")}else"finish"===t&&this.$emit("draggable",Object(c["a"])(Object(c["a"])({data:this.dataSource,source:this.sourceObj},s),{},{originalIndex:this.originalIndex}),"finish")},result:function(){this.originalIndex=-1,this.sourceObj=null,this.targetObj=null},resetColumns:function(){this.columns=this.$attrs["columns"]}},render:function(e,t){var a=this,n=this.$createElement;this.columns||(this.columns=this.$attrs["columns"]);var s={header:{cell:function(e,t,s){a.columns||(a.columns=a.$attrs["columns"]);var r=null,i=t.key,l=(t.on,o(t,b)),d=a.columns.find((function(e){var t=e[a.repFields.dataIndex];return t===i}));d&&!d.width&&d.minWidth&&(d.width=d.minWidth);var g=d&&d.slots&&d.slots.title;if(!d||!d.width||!a.isWidth)return e("th",Object(c["a"])(Object(c["a"])({},t),l),a.$slots[g]||s);var h=function(e){if((d.minWidth||d.maxWidth)&&(d.minWidth&&!d.maxWidth||!d.minWidth&&d.maxWidth)){if(d.minWidth&&d.minWidth>e-3)return;if(d.maxWidth&&d.maxWidth<e+3)return}a.draggingState[i]=0,d.width=Math.max(e,1),a.$forceUpdate()},m=function(){a.draggingState[i]=r.getBoundingClientRect().width,a.$refs.tableDraggableHandle.left=r.getBoundingClientRect().width};return n("th",Object(c["a"])(Object(c["a"])(Object(c["a"])({},t),l),{},{class:"".concat(t.class," resize-table-th"),key:i,directives:[{name:"ant-ref",value:function(e){return r=e}}],slot:"customTitle",attrs:{width:d.width},on:{click:function(e){return e.stopPropagation()}}}),[a.$slots[g]||s,n(u.a,{class:"table-draggable-handle",ref:"tableDraggableHandle",props:{key:d.key,w:10,x:a.draggingState[i]||d.width,z:1,axis:"x",draggable:!0,resizable:!1},on:{dragging:h,dragstop:m,click:function(e){return e.stopPropagation()}}})])}}},r=function(){return a.$scopedSlots.customDrag?a.$scopedSlots.customDrag():e("div",{attrs:{style:"display: inline-block;"}},[e("a-icon",{props:{type:"drag"}})])},i=function(){return n("div",{class:"drag-icon",slot:"customDrag",on:{mouseover:function(){a.draggable=!0},mouseenter:function(){a.draggable=!0},mouseout:function(){a.draggable=!1}}},[r()])};return window.$that=this,n("a-table",{class:"table-draggable ".concat(this.draggable?"table-draggable-ing":""),scopedSlots:Object(c["a"])(Object(c["a"])({},this.$scopedSlots),{},{customDrag:i}),attrs:Object(c["a"])({},this.$attrs),slot:Object(c["a"])({},this.$slots),props:Object(c["a"])(Object(c["a"])({ref:"table-draggable"},this.$props),{},{columns:this.columns,components:s,rowClassName:this.rowClass,customRow:this.customRow}),on:Object(c["a"])({},this.$listeners)})}},m=h,p=(a("fd5c"),a("2877")),f=Object(p["a"])(m,i,l,!1,null,null,null),v=f.exports,y=[{dataIndex:"name",key:"name",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"Age",dataIndex:"age",key:"age",width:100},{title:"Address",dataIndex:"address",key:"address"},{title:"Tags",key:"tags",dataIndex:"tags",scopedSlots:{customRender:"tags"}},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],k=[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park",tags:["nice","developer"]},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park",tags:["loser"]},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park",tags:["cool","teacher"]}],w={name:"ColumnSmile",components:{DraggableTable:v},data:function(){return{data:k,columns:y}},created:function(){console.log(this)},methods:{handleDraggable:function(e,t){console.log(e,t),this.data=e.data}}},O=w,x=Object(p["a"])(O,n,s,!1,null,null,null);t["default"]=x.exports},fd5c:function(e,t,a){"use strict";a("1c27")}}]);
//# sourceMappingURL=chunk-30568f31.0df5b2ee.js.map