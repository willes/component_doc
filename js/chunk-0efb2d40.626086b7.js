(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0efb2d40"],{a462:function(t,e,s){!function(e,n){t.exports=n(s("b0c0"),s("d3b7"))}(0,(function(){"use strict";var t="/gateway/saas-platform-service/api/v1/";function e(t,e,s,n,i,o,a,r,c,l){"boolean"!=typeof a&&(c=r,r=a,a=!1);const d="function"==typeof s?s.options:s;let u;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),n&&(d._scopeId=n),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=u):e&&(u=a?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),u)if(d.functional){const t=d.render;d.render=function(e,s){return u.call(s),t(e,s)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,u):[u]}return s}const s={name:"SyncAddressBook",props:{visible:Boolean,auth:{type:Boolean,default:!1}},data:function(){return{failReason:"",state:-1,disabled:!1,isShow:!1}},watch:{visible:function(t){this.isShow=t,t&&(this.state=~~this.auth)}},methods:{request:function(){var e=this;return{getExportFieldList:function(s){return e.$post("".concat(t,"staffer/get_export_able_fields"),s||{},{customerMsg:!0})},exportAddressBook:function(s){return e.$post("".concat(t,"staffer/export_list"),s||{},{customerMsg:!0,timeout:12e4,"Content-Type":"application/json"})}}},syncAddressBook:function(e){return this.$post("".concat(t,"account/address_book/fullSync"),e||{},{customerMsg:!0,timeout:12e4})},authClickHandler:function(){this.$emit("authClick")},syncHandler:function(){var t=this;this.state=2,this.disabled=!0,this.syncAddressBook().then((function(e){console.log(e,"res"),"SYS_0000"===e.code&&e.data?(t.state=3,t.$emit("success")):(t.state=4,t.failReason=e.message,t.$emit("fail",e.message))})).catch((function(e){t.state=4,t.failReason=e.message||"",t.$emit("fail",t.failReason)})).finally((function(){t.disabled=!1}))},confirm:function(){1===this.state||4===this.state?this.syncHandler():this.$emit("update:visible",!1)}}};var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{staticClass:"sync-address-book",attrs:{title:"同步通讯录",width:"700px",visible:t.isShow,maskClosable:!1,okText:4==t.state?"重新同步":"确定","ok-button-props":{props:{disabled:t.disabled}}},on:{ok:t.confirm,cancel:function(e){return t.$emit("update:visible",!1)}}},[s("div",{staticClass:"address-book-wrap"},[0==t.state?s("div",[t._v("\n      当前还未授权企业微信通讯录权限，同步通讯录只能单向拉取企业微信通讯录中的员⼯信息。"),s("br"),t._v("\n      拉取的信息如和指掌通讯录信息不一致，会⾃动更新为企业微信通讯录中数据。"),s("br"),t._v("\n      拉取的信息包括:姓名、关注状态、部⻔、头像"),s("br"),t._v("\n      如需将指掌通讯录中的信息上传同步到企业微信，请授权企业微信通讯录权限\n      "),t.auth?t._e():s("a-button",{attrs:{type:"link"},on:{click:t.authClickHandler}},[t._v("立即授权")])],1):1==t.state?s("div",[t._v("\n      通过同步通讯录，可将指掌天下通讯录和企业微信通讯录进⾏双向增量同步。"),s("br"),t._v("\n      两个通讯录之间会⾃动增加双⽅互不存在的信息，如已存在会⾃动同步为企业微信通讯录⼀致。"),s("br"),t._v("\n      同步内容包括：姓名、关注状态、部⻔、头像\n    ")]):2==t.state?s("a-spin",{attrs:{tip:"通讯录同步中",size:"large",wrapperClassName:"loading-spin"}},[s("a-icon",{attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1):3==t.state?s("a-result",{attrs:{status:"success",title:"同步成功","sub-title":""}}):4==t.state?s("a-result",{attrs:{title:"同步失败","sub-title":t.failReason}}):t._e()],1)])};n._withStripped=!0;const i=e({render:n,staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0);return i.install=function(t){t.component(i.name,i)},i}))},b0c0:function(t,e,s){var n=s("83ab"),i=s("5e77").EXISTS,o=s("e330"),a=s("9bf2").f,r=Function.prototype,c=o(r.toString),l=/^\s*function ([^ (]*)/,d=o(l.exec),u="name";n&&!i&&a(r,u,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(t){return""}}})},db46:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address-book"},[s("sync-address-book",{attrs:{visible:t.visible,auth:!0},on:{"update:visible":function(e){t.visible=e}}}),s("a-button",{on:{click:function(e){t.visible=!0}}},[t._v("同步通讯录")])],1)},i=[],o=s("a462"),a=s.n(o),r={name:"AddressBook",components:{SyncAddressBook:a.a},data:function(){return{visible:!1}}},c=r,l=s("2877"),d=Object(l["a"])(c,n,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0efb2d40.626086b7.js.map