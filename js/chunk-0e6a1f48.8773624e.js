(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6a1f48"],{"41d2":function(t,e,s){!function(e,i){t.exports=i(s("b0c0"),s("a9e3"),s("ac1f"),s("5319"),s("99af"),s("fb6a"),s("d3b7"))}(0,(function(){"use strict";function t(t,e,s,i,a,o,n,r,c,l){"boolean"!=typeof n&&(c=r,r=n,n=!1);const d="function"==typeof s?s.options:s;let u;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),i&&(d._scopeId=i),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=u):e&&(u=n?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),u)if(d.functional){const t=d.render;d.render=function(e,s){return u.call(s),t(e,s)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,u):[u]}return s}const e={name:"BatchImport",props:{title:{type:String,default:"批量导入"},isRule:Boolean,download:{type:Object,default:function(){return{show:!0,name:"下载模板",url:"/api/v1/platform_service/employee/download_import_template",content:"请选择上传员工数据文件，员工数据文件支持xls，xlsx格式",api:"/api/v1/platform_service/employee/parse_employee_list",importParam:{},fail:""}}},visible:Boolean,corpId:{type:[String,Number],require:!0,default:""},width:{type:String,default:"813px"}},data:function(){var t=localStorage.getItem("Access-Token");return{token:"Bearer "+(t&&t.replace(/^(\s|")+|(\s|")+$/g,"")||""),state:1,isLoading:!1,isShowExportRule:!1,disabled:!0,show:!1,fileObj:{failNumber:0,serialNumber:"",successNumber:0}}},watch:{visible:function(t){this.show=t}},methods:{downLoadFailFile:function(){window.location.href=this.download.fail||"".concat("/api/v1/platform_service/","employee/export_fail_list?corpId=").concat(this.corpId,"&serialNumber=").concat(this.fileObj.serialNumber)},confirm:function(){this.disabled||(3===this.state&&this.downLoadFailFile(),this.resetState(),this.$emit("update:visible",!1))},resetState:function(){this.state=1,this.isLoading=!1,this.disabled=!0,this.fileObj.failNumber=0,this.fileObj.serialNumber="",this.fileObj.successNumber=0},cancel:function(){this.$emit("update:visible",!1)},handleChange:function(t){var e=t.file,s=e.status,i=e.name,a=e.response,o="object"===Object.prototype.toString.call(a).slice(8,-1).toLowerCase();"uploading"===s?this.isLoading=!0:"done"===s?o?"SYS_0000"===a.code?(this.fileObj=a.data,a.data.failNumber?(this.state=3,this.$emit("success")):(this.state=2,this.$emit("success")),this.disabled=!1):(this.$message.error(a.message),this.isLoading=!1):(this.$message.error("".concat(i," 文件上传失败")),this.isLoading=!1):"error"===s&&(this.$message.error("".concat(i," 文件上传失败")),this.isLoading=!1,this.disabled=!0)},beforeUpload:function(t){var e=t.size,s=t.name;return!!(e/1024/1024<10)||(this.$message.error("".concat(s,"文件大小超出限制，请修改后重新导入"),2),!1)},afterClose:function(){this.resetState()}}};var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{staticClass:"batch-import",attrs:{maskClosable:!1,title:t.title,"after-close":t.afterClose,okText:[1,2].includes(t.state)?"确定":"下载失败数据",width:t.width,"ok-button-props":{props:{disabled:t.disabled}}},on:{ok:t.confirm,cancel:t.cancel},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[1==t.state?s("div",{staticClass:"batch-import-container"},[t.download.show?s("div",{staticClass:"batch-import-tip"},[t.download.content?t._t("content",[s("span",{style:t.download.contentStyle},[t._v(t._s(t.download.content))])]):t._e(),t._v(" "),t._t("middle",[t.download.name&&t.download.url?s("a-button",{attrs:{type:"link"}},[s("a",{attrs:{download:"",href:t.download.url}},[s("a-icon",{attrs:{type:"download"}}),t._v(t._s(t.download.name))],1)]):t._e()]),t._v(" "),t._t("right")],2):t._e(),t._v(" "),s("div",{staticClass:"batch-import-sub"},[t._v("\n      上传文件内容需符合模板内容规则，请先下载模板，按照模板内容说明填写。 模板内容请勿随意更改，更改后会导致"),s("br"),t._v("数据不兼容，上传失败。\n    ")]),t._v(" "),s("div",{staticClass:"batch-import-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"batch-import-center pointer"},[s("a-upload-dragger",{staticClass:"upload-wrap",attrs:{name:"file",accept:".xls, .xlsx",showUploadList:!1,action:t.download.api,data:Object.assign({},{corpId:t.corpId},t.download.importParam),"before-upload":t.beforeUpload,headers:{Authorization:t.token}},on:{change:t.handleChange}},[s("div",{staticClass:"batch-import-title"},[t._v("点击或将模板文件拖拽到这里上传")]),t._v(" "),s("div",{staticClass:"batch-import-icon"},[s("a-icon",{staticStyle:{"font-size":"42px"},attrs:{type:"container",theme:"twoTone"}})],1),t._v(" "),s("div",{staticClass:"batch-import-summary"},[t._v("支持扩展名：xls，xlsx ；文件大小不得大于10M")])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"batch-import-center"},[s("div",{staticClass:"batch-import-title"},[t._v("上传中")]),t._v(" "),s("div",{staticClass:"batch-import-icon"},[s("a-spin",{attrs:{tip:"文件解析中，请稍后",size:"large",wrapperClassName:"loading-spin"}},[s("a-icon",{attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1)])]),t._v(" "),t.isRule?t._t("rule",[s("a-button",{staticClass:"rule-desc",attrs:{type:"link"},on:{click:function(e){t.isShowExportRule=!0}}},[t._v("导入规则说明")])]):t._e()],2):2==t.state?s("div",{staticClass:"batch-import-container"},[s("a-result",{attrs:{status:"success",title:"导入成功","sub-title":""},scopedSlots:t._u([{key:"extra",fn:function(){return[t._v("\n        成功导入客户数量："),s("span",{staticClass:"green"},[t._v(t._s(t.fileObj.successNumber)+"条")])]},proxy:!0}])})],1):3==t.state?s("div",{staticClass:"batch-import-container"},[s("a-result",{staticClass:"part-success",attrs:{status:"success",title:"部分导入成功","sub-title":""},scopedSlots:t._u([{key:"extra",fn:function(){return[s("div",[t._v("\n          成功导入客户数量："),s("span",{staticClass:"green"},[t._v(t._s(t.fileObj.successNumber)+"条")]),t._v(" 失败数量："),s("span",{staticClass:"red"},[t._v(t._s(t.fileObj.failNumber)+"条")])])]},proxy:!0}])})],1):t._e(),t._v(" "),s("a-modal",{staticClass:"export-desc",attrs:{title:"导入规则说明",width:"786px",maskClosable:!1,visible:t.isShowExportRule},on:{ok:function(e){t.isShowExportRule=!1},cancel:function(e){t.isShowExportRule=!1}}},[s("div",{staticClass:"desc-wrap"},[s("div",{staticClass:"rule-item"},[t._v("批量导⼊员⼯为增量同步导⼊，导⼊员⼯如已存在，则覆盖现有员⼯相关信息，如果不存在则新增员⼯")]),t._v(" "),s("div",{staticClass:"rule-item"},[t._v("\n        1、判断是否为同⼀个员⼯的顺序为【职员编号>⼿机>邮箱>姓名】，如已存在，则覆盖现有员⼯相关信息，如果不存"),s("br"),t._v("在则新增员⼯。\n      ")]),t._v(" "),s("div",{staticClass:"rule-item"},[t._v("2、如果⽆法判定员⼯是否为同⼀员⼯但姓名⼜重复，则会忽略此员⼯信息")])])])],1)};s._withStripped=!0;const i=t({render:s,staticRenderFns:[]},void 0,e,void 0,!1,void 0,!1,void 0,void 0,void 0);return i.install=function(t){t.component(i.name,i)},i}))},b0c0:function(t,e,s){var i=s("83ab"),a=s("5e77").EXISTS,o=s("e330"),n=s("9bf2").f,r=Function.prototype,c=o(r.toString),l=/^\s*function ([^ (]*)/,d=o(l.exec),u="name";i&&!a&&n(r,u,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(t){return""}}})},bf7b5:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("batch-import",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}})],1)},a=[],o=s("41d2"),n=s.n(o),r={name:"ImportFilePages",components:{BatchImport:n.a},data:function(){return{visible:!1}},mounted:function(){var t=this;setTimeout((function(){t.visible=!0}),1e3)}},c=r,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},fb6a:function(t,e,s){"use strict";var i=s("23e7"),a=s("da84"),o=s("e8b5"),n=s("68ee"),r=s("861d"),c=s("23cb"),l=s("07fa"),d=s("fc6a"),u=s("8418"),p=s("b622"),f=s("1dde"),h=s("f36a"),v=f("slice"),m=p("species"),b=a.Array,_=Math.max;i({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var s,i,a,p=d(this),f=l(p),v=c(t,f),w=c(void 0===e?f:e,f);if(o(p)&&(s=p.constructor,n(s)&&(s===b||o(s.prototype))?s=void 0:r(s)&&(s=s[m],null===s&&(s=void 0)),s===b||void 0===s))return h(p,v,w);for(i=new(void 0===s?b:s)(_(w-v,0)),a=0;v<w;v++,a++)v in p&&u(i,a,p[v]);return i.length=a,i}})}}]);
//# sourceMappingURL=chunk-0e6a1f48.8773624e.js.map